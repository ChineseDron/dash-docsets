<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>The DOMNamedNodeMap class</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="domimplementation.hasfeature.html">DOMImplementation::hasFeature</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="domnamednodemap.getnameditem.html">DOMNamedNodeMap::getNamedItem</a></div>
 <div class="up"><a href="book.dom.html">DOM</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="class.domnamednodemap" class="reference">
 <h1 class="title">The DOMNamedNodeMap class</h1>
 
 
 <div class="partintro"><p class="verinfo">(PHP 5)</p>
 



 
  <div class="section" id="domnamednodemap.synopsis">
   <h2 class="title">Class synopsis</h2>
 

   <div class="classsynopsis">
    <div class="ooclass"></div>
 

    <div class="classsynopsisinfo">
     <span class="ooclass">
      <b class="classname">DOMNamedNodeMap</b>
     </span>
 
     {</div>

 
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Properties */</div>

    <div class="fieldsynopsis">
     <span class="modifier">readonly</span>
     <span class="modifier">public</span>
     <span class="type">int</span>
      <var class="varname"><a href="class.domnamednodemap.html#domnamednodemap.props.length">$<var class="varname">length</var></a></var>
    ;</div>

 
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
    <div class="methodsynopsis dc-description">
   <span class="type">DOMNode</span> <span class="methodname"><a href="domnamednodemap.getnameditem.html" class="methodname">getNamedItem</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$name</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMNode</span> <span class="methodname"><a href="domnamednodemap.getnameditemns.html" class="methodname">getNamedItemNS</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$namespaceURI</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$localName</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMNode</span> <span class="methodname"><a href="domnamednodemap.item.html" class="methodname">item</a></span>
    ( <span class="methodparam"><span class="type">int</span> <tt class="parameter">$index</tt></span>
   )</div>

 
   }</div>

 
  </div>
 

  <div class="section" id="domnamednodemap.props">
   <h2 class="title">Properties</h2>
   <dl>

    <dt id="domnamednodemap.props.length">
     <span class="term"><var class="varname"><var class="varname">length</var></var></span>
     <dd>

      <p class="para">
       The number of nodes in the map. The range of valid child node 
       indices is <i>0</i> to <i>length - 1</i> inclusive.
      </p>
     </dd>

    </dt>

   </dl>

  </div>

  



 
 </div>
 
 


















 
<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="domnamednodemap.getnameditem.html">DOMNamedNodeMap::getNamedItem</a> â€” Retrieves a node specified by name</li><li><a href="domnamednodemap.getnameditemns.html">DOMNamedNodeMap::getNamedItemNS</a> â€” Retrieves a node specified by local name and namespace URI</li><li><a href="domnamednodemap.item.html">DOMNamedNodeMap::item</a> â€” Retrieves a node specified by index</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="94346""></a>
  <div class="note">
   <strong class="user">kendsnyder at gmail dot com</strong>
   <a href="#94346" class="date">29-Oct-2009 07:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To add to xafford's comment. When iterating a named node map collection using -&gt;item() or using foreach, removing a attribute with DOMNode-&gt;removeAttribute() or DOMNode-&gt;removeAttributeNode() alters the collection as if it were a stack. To illustrate, the code below tries to remove all attributes from each element but only removes the first. One work around is to copy the named node map into an array before removing attributes. Using PHP 5.2.9 on Windows XP.<br />
<br />
<span class="default">&lt;?php<br />
error_reporting</span><span class="keyword">(</span><span class="default">E_ALL</span><span class="keyword">);<br />
</span><span class="default">$html&nbsp; </span><span class="keyword">= </span><span class="string">'&lt;h1 id="h1test" class="h1test"&gt;Heading&lt;/h1&gt;'</span><span class="keyword">;<br />
</span><span class="default">$html </span><span class="keyword">.= </span><span class="string">'&lt;p align="left" class="ptest"&gt;Hello World&lt;/p&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">$doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">loadHTML</span><span class="keyword">(</span><span class="default">$html</span><span class="keyword">);<br />
<br />
</span><span class="comment">// remove attributes from&nbsp; the h1 element<br />
</span><span class="default">$h1 </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'h1'</span><span class="keyword">)-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">$length </span><span class="keyword">= </span><span class="default">$h1</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">;<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">$h1</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)-&gt;</span><span class="default">name</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$h1</span><span class="keyword">-&gt;</span><span class="default">removeAttribute</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"h1: removed attribute `</span><span class="default">$name</span><span class="string">`&lt;br&gt;"</span><span class="keyword">;<br />
}<br />
</span><span class="comment">// remove attributes from the p element<br />
</span><span class="default">$p </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'p'</span><span class="keyword">)-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />
foreach (</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">attributes </span><span class="keyword">as </span><span class="default">$name </span><span class="keyword">=&gt; </span><span class="default">$attrNode</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">removeAttribute</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"p: removed attribute `</span><span class="default">$name</span><span class="string">`&lt;br&gt;"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
OUTPUT:<br />
-------<br />
h1: removed attribute `id`<br />
<br />
Notice: Trying to get property of non-object in nodemap.php on line 13<br />
h1: removed attribute ``<br />
p: removed attribute `align`</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94078""></a>
  <div class="note">
   <strong class="user">xafford</strong>
   <a href="#94078" class="date">15-Oct-2009 03:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I stumbled upon a problem with DOMNamedNodeMap. If you iterate over a DOMNamedNodeMap, representing the attributes of a DOMElement with foreach and you use DOMElement::removeAttributeNode only the first attribute will be handled.<br />
<br />
Example (not complete):<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/*<br />
&nbsp;* Imagine you got a node like this:<br />
&nbsp;* &lt;a onclick="alert('evil')" href="<a href="http://example.com" rel="nofollow" target="_blank">http://example.com</a>"&gt;evil&lt;/a&gt;<br />
&nbsp;* and onclick should be removed, href would not be tested.<br />
&nbsp;*/<br />
<br />
</span><span class="keyword">foreach ( </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">attributes </span><span class="keyword">as </span><span class="default">$attribute </span><span class="keyword">)<br />
{<br />
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'checking attribute '</span><span class="keyword">, </span><span class="default">$attribute</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">, </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; if ( ! </span><span class="default">in_array </span><span class="keyword">( </span><span class="default">$attribute</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">, </span><span class="default">$allowed_attributes </span><span class="keyword">) )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">removeAttributeNode </span><span class="keyword">( </span><span class="default">$attribute </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The output would be:<br />
<br />
checking attribute onclick</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85158""></a>
  <div class="note">
   <strong class="user">jtaal at eljakim dot nl</strong>
   <a href="#85158" class="date">18-Aug-2008 06:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can iterate over an instance of DOMNamedNodeMap:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// suppose $node is a valid DOMElement object<br />
// $node-&gt;attributes will be NULL or a valid DOMNamedNodeMap object<br />
</span><span class="keyword">foreach (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">attributes </span><span class="keyword">as </span><span class="default">$attrName </span><span class="keyword">=&gt; </span><span class="default">$attrNode</span><span class="keyword">) {<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="domimplementation.hasfeature.html">DOMImplementation::hasFeature</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="domnamednodemap.getnameditem.html">DOMNamedNodeMap::getNamedItem</a></div>
 <div class="up"><a href="book.dom.html">DOM</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
