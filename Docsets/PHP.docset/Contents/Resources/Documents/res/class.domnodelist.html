<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>The DOMNodeList class</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="domnode.replacechild.html">DOMNode::replaceChild</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="domnodelist.item.html">DOMNodelist::item</a></div>
 <div class="up"><a href="book.dom.html">DOM</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="class.domnodelist" class="reference">
 <h1 class="title">The DOMNodeList class</h1>
 
 
 <div class="partintro"><p class="verinfo">(PHP 5)</p>
 



 
  <div class="section" id="domnodelist.synopsis">
   <h2 class="title">Class synopsis</h2>
 

   <div class="classsynopsis">
    <div class="ooclass"></div>

    <span class="oointerface">
      <span class="interfacename"><a href="class.traversable.html" class="interfacename">Traversable</a></span>
    </span>


    <div class="classsynopsisinfo">
     <span class="ooclass">
      <b class="classname">DOMNodeList</b>
     </span>
 
     {</div>

 
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Properties */</div>

    <div class="fieldsynopsis">
     <span class="modifier">readonly</span>
     <span class="modifier">public</span>
     <span class="type">int</span>
      <var class="varname"><a href="class.domnodelist.html#domnodelist.props.length">$<var class="varname">length</var></a></var>
    ;</div>

 
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
    <div class="methodsynopsis dc-description">
   <span class="type">DOMNode</span> <span class="methodname"><a href="domnodelist.item.html" class="methodname">DOMNodelist::item</a></span>
    ( <span class="methodparam"><span class="type">int</span> <tt class="parameter">$index</tt></span>
   )</div>

 
   }</div>

 
  </div>
 

  <div class="section" id="domnodelist.props">
   <h2 class="title">Properties</h2>
   <dl>

    <dt id="domnodelist.props.length">
     <span class="term"><var class="varname"><var class="varname">length</var></var></span>
     <dd>

      <p class="para">
       The number of nodes in the list. The range of valid child node 
       indices is 0 to <i>length - 1</i> inclusive.
      </p>
     </dd>

    </dt>

   </dl>

  </div>

  



 
 </div>
 
 






 
<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="domnodelist.item.html">DOMNodelist::item</a> â€” Retrieves a node specified by index</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="97986""></a>
  <div class="note">
   <strong class="user">geompse at gmail dot com</strong>
   <a href="#97986" class="date">19-May-2010 08:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that $length is calculated (php5.3.2).<br />
Iterating over a large NodeList may be time expensive.<br />
<br />
Prefer :<br />
$nb = $nodelist-&gt;length;<br />
for($pos=0; $pos&lt;$nb; $pos++)<br />
<br />
Than:<br />
for($pos=0; $pos&lt;$nodelist-&gt;length; $pos++)<br />
<br />
I had a hard time figuring that out...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94108""></a>
  <div class="note">
   <strong class="user">walt at brookhouse dot co dot uk</strong>
   <a href="#94108" class="date">16-Oct-2009 09:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Below a.lepe says, "Using NodeLists to store results of an XQuery..."<br />
<br />
To clarify, this should say, "...the results of an XPath query...".<br />
<br />
XQuery contains XPath but has additional functionality such as FLOWR expressions. PHP does not directly support XQuery (yet!).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93832""></a>
  <div class="note">
   <strong class="user">A dot  Lepe dev+php at alepe dot com</strong>
   <a href="#93832" class="date">01-Oct-2009 10:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using NodeLists to store results of an XQuery is not very functional if you are planning to do some operations with those Nodes. Instead, you can use an array in this way:<br />
<br />
<span class="default">&lt;?php<br />
$nodelist </span><span class="keyword">= </span><span class="default">$xpath</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="default">$xpath</span><span class="keyword">, </span><span class="default">$DOMdoc</span><span class="keyword">);<br />
foreach (</span><span class="default">$nodelist </span><span class="keyword">as </span><span class="default">$node</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// you can add here a special conditions, as searching for<br />
&nbsp;&nbsp;&nbsp; // regular expression matches in your nodes names/values/attributes<br />
&nbsp;&nbsp;&nbsp; // which can not be achieved with XSLT 1.0<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if( .... )&nbsp; </span><span class="default">$nodearr</span><span class="keyword">[] = </span><span class="default">$node</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This way, you can access nodes like (for example):<br />
<br />
<span class="default">&lt;?php <br />
$nodearr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]-&gt;</span><span class="default">nodeValue</span><span class="keyword">; <br />
</span><span class="default">?&gt;<br />
</span><br />
solving the problem described by "saad0105050" (06-Jul-2008)<br />
<br />
Even more, you can perform other operations in your results<br />
as removing elements, reversing order, randomize, callbacks, etc.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85813""></a>
  <div class="note">
   <strong class="user">nascoedu</strong>
   <a href="#85813" class="date">18-Sep-2008 03:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Get some nodes from an existing xml file and add them to a new file:<br />
<br />
<span class="default">&lt;?php<br />
$dom </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">;<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">load</span><span class="keyword">(</span><span class="default">$xmlsource</span><span class="keyword">);<br />
<br />
</span><span class="comment">/*create the xPath object _after_&nbsp; loading the xml source, otherwise the query won't work:*/<br />
</span><span class="default">$xPath </span><span class="keyword">= new </span><span class="default">DOMXPath</span><span class="keyword">(</span><span class="default">$dom</span><span class="keyword">);<br />
<br />
</span><span class="comment">/*now get the nodes in a DOMNodeList:*/<br />
</span><span class="default">$nodeList </span><span class="keyword">= </span><span class="default">$xPath</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="default">$anXPathExpr</span><span class="keyword">);<br />
<br />
</span><span class="comment">/*create a new DOMDocument and add a root element:*/<br />
</span><span class="default">$newDom </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">(</span><span class="string">'1.0'</span><span class="keyword">,</span><span class="string">'UTF-8'</span><span class="keyword">);<br />
</span><span class="default">$root </span><span class="keyword">= </span><span class="default">$newDom</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="string">'root'</span><span class="keyword">);<br />
</span><span class="default">$root </span><span class="keyword">= </span><span class="default">$newDom</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$root</span><span class="keyword">);<br />
<br />
</span><span class="comment">/* append all nodes from $nodeList to the new dom, as children of $root:*/<br />
</span><span class="keyword">foreach (</span><span class="default">$nodeList </span><span class="keyword">as </span><span class="default">$domElement</span><span class="keyword">){<br />
&nbsp;&nbsp; </span><span class="default">$domNode </span><span class="keyword">= </span><span class="default">$newDom</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$domElement</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$domNode</span><span class="keyword">);<br />
}<br />
</span><span class="comment">/*please note: importNode does not cast a DOMElement to a DOMNode!*/<br />
<br />
/*save the new dom */<br />
</span><span class="keyword">echo </span><span class="string">'Wrote: ' </span><span class="keyword">. </span><span class="default">$newDom</span><span class="keyword">-&gt;</span><span class="default">save</span><span class="keyword">(</span><span class="string">'newDOM.xml'</span><span class="keyword">) . </span><span class="string">' bytes'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
the following won't work and you'll end up with a DOMException: 'Wrong Document Error' (at least I did):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach (</span><span class="default">$nodeList </span><span class="keyword">as </span><span class="default">$element</span><span class="keyword">){<br />
&nbsp;&nbsp; </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Cheers! ;-)<br />
---<br />
WindowsXP, WAMP5 (appache 2.2.6), PHP 5.2.5, DOM/XML API Version 20031129, libxml 2.6.26<br />
---</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85384""></a>
  <div class="note">
   <strong class="user">c dot 1 at smithies dot org</strong>
   <a href="#85384" class="date">27-Aug-2008 03:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I doubt the accuracy of what saad105050 wrote below. In particular, in his example, he seems to assume that $element-&gt;getElementsByTagName() will return NULL if there are no matching nodes. This is not what happens; as per the documentation, a DOMNodeList is returned with the length property zero.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85335""></a>
  <div class="note">
   <strong class="user">bobvandell at hotmail dot com</strong>
   <a href="#85335" class="date">26-Aug-2008 09:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
That's actually incorrect. You can use function results as objects. It makes building an API for your database very clean and neat. For example:<br />
<br />
Our code:<br />
<br />
$articles = Node::screate('tags', 123456)-&gt;assets('like:title:test')-&gt;articles;<br />
<br />
We use the above code to get articles that are linked to assets that are linked to a specific tag in our database.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84441""></a>
  <div class="note">
   <strong class="user">rohypnol</strong>
   <a href="#84441" class="date">14-Jul-2008 12:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
That's simply because up to and including PHP 5 (latest version at this time) you can't use a function result as an object even if it is an object.<br />
<br />
Work:<br />
1) $obj-&gt;sub_obj-&gt;method();<br />
2) $sub_obj = $obj-&gt;get_sub_obj();<br />
&nbsp;&nbsp; $sub_obj-&gt;method();<br />
<br />
Don't work:<br />
1) $obj-&gt;get_sub_obj()-&gt;method();<br />
2) echo $obj-&gt;get_sub_obj()-&gt;property;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84263""></a>
  <div class="note">
   <strong class="user">saad0105050 at gmail dot com</strong>
   <a href="#84263" class="date">06-Jul-2008 10:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Problem with accessing return value of DOMNodeList::item() method.<br />
<br />
When using the following code segment:<br />
---------------------<br />
<br />
$messageNodes = $doc-&gt;getElementsByTagName( "message" );<br />
if( $messageNodes != NULL )<br />
{<br />
&nbsp;&nbsp; &nbsp; $messageStr = $messageNodes-&gt;item( 0 )-&gt;firstChild-&gt;nodeValue;<br />
}<br />
---------------------<br />
PHP gives an error: "syntax error, unexpected T_OBJECT_OPERATOR"<br />
<br />
But if I modify it like the following:<br />
---------------------<br />
$messageNodes = $doc-&gt;getElementsByTagName( "message" );<br />
if( $messageNodes != NULL )<br />
{<br />
&nbsp;&nbsp;&nbsp; $messageNode = $messageNodes-&gt;item( 0 );<br />
&nbsp;&nbsp;&nbsp; $messageStr =&nbsp; messageNode-&gt;firstChild-&gt;nodeValue;<br />
}<br />
---------------------<br />
There is no error.<br />
<br />
I guess, the return element of DOMNodeList::item() function can not be readily accessed via "-&gt;" operator.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83630""></a>
  <div class="note">
   <strong class="user">mark at codedesigner dot nl</strong>
   <a href="#83630" class="date">05-Jun-2008 03:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
$newNode = $dom-&gt;createElement('newNode') ;<br />
foreach ($nodeList as $node) {<br />
&nbsp; echo $node-&gt;nodeValue ;<br />
&nbsp; $newNode-&gt;appendChild($node) ;<br />
}<br />
<br />
the problem lies with the fact that foreach works on a copy of your object. The solution is simple, add &amp; to $node<br />
<br />
$newNode = $dom-&gt;createElement('newNode') ;<br />
foreach ($nodeList as &amp;$node) {<br />
&nbsp; echo $node-&gt;nodeValue ;<br />
&nbsp; $newNode-&gt;appendChild($node) ;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83513""></a>
  <div class="note">
   <strong class="user">a dot buffa at sns dot it</strong>
   <a href="#83513" class="date">29-May-2008 04:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I agree with drichter at muvicom dot de.<br />
<br />
For istance, in order to delete each child node of a particular parent node, <br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
</span><span class="keyword">while (</span><span class="default">$parentNode</span><span class="keyword">-&gt;</span><span class="default">hasChildNodes</span><span class="keyword">()){<br />
&nbsp; </span><span class="default">$domNodeList </span><span class="keyword">= </span><span class="default">$parentNode</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$parentNode</span><span class="keyword">-&gt;</span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$domNodeList</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">));<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
In other word you have to uptade the DomNodeList on every iteration.<br />
<br />
In my opinion, the DomNodeList class is useless.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83390""></a>
  <div class="note">
   <strong class="user">c dot 1 at smithies dot org</strong>
   <a href="#83390" class="date">23-May-2008 05:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can modify, and even delete, nodes from a DOMNodeList if you iterate backwards:<br />
<br />
$els = $document-&gt;getElementsByTagName('input');<br />
for ($i = $els-&gt;length; --$i &gt;= 0; ) {<br />
&nbsp; $el = $els-&gt;item($i);<br />
&nbsp; switch ($el-&gt;getAttribute('name')) {<br />
&nbsp;&nbsp;&nbsp; case 'MAX_FILE_SIZE' :<br />
&nbsp;&nbsp; &nbsp;&nbsp; $el-&gt;parentNode-&gt;removeChild($el);<br />
&nbsp;&nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; case 'inputfile' :<br />
&nbsp;&nbsp; &nbsp;&nbsp; $el-&gt;setAttribute('type', 'text');<br />
&nbsp;&nbsp;&nbsp; //break;<br />
&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83180""></a>
  <div class="note">
   <strong class="user">drichter at muvicom dot de</strong>
   <a href="#83180" class="date">14-May-2008 06:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Addition to my first note:<br />
<br />
An traditional for-loop does not allow you to change the DOM-tree while looping - the effects are the nearly the same as with foreach. So you have to collect the nodes in an array and do the tree-altering stuff within a second loop (looping the array this time ...)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83178""></a>
  <div class="note">
   <strong class="user">drichter at muvicom dot de</strong>
   <a href="#83178" class="date">14-May-2008 04:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have done some testing and have found 2 results:<br />
(My System: Win XP with PHP 5.2.1)<br />
<br />
1) Iteration with foreach does function correctly as "james dot j dot hackett at gmail dot com" writes, _if_ you only do readonly stuff with foreach or minor writings of some attributes.<br />
<br />
2) foreach does not function, if you are doing some DOM-Operations while iterating. In my situation it was adding the iterated $node as an child to an new node:<br />
<br />
$newNode = $dom-&gt;createElement('newNode') ;<br />
foreach ($nodeList as $node) {<br />
&nbsp; echo $node-&gt;nodeValue ;<br />
&nbsp; $newNode-&gt;appendChild($node) ;<br />
}<br />
<br />
This only gives you the first element ...<br />
<br />
I'm interpreting it as an confusing but correct behavior because of the changes within the $dom-object while appending the node at an additional place ... <br />
<br />
So, if you want to do something like 2) use for, length and item() :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83068""></a>
  <div class="note">
   <strong class="user">james dot j dot hackett at gmail dot com</strong>
   <a href="#83068" class="date">08-May-2008 09:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In Response to 'kassah at gmail'<br />
<br />
You don't need to convert a DOMNodeList to an array in order iterate through it using 'foreach'.&nbsp; You can use foreach directly with the DOMNodeList.<br />
<br />
$nodeList = $someDomDocument-&gt;getElementsbytagname('user');<br />
<br />
foreach ($nodeList as $node) {<br />
&nbsp;&nbsp;&nbsp; echo $node-&gt;nodeValue;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82975""></a>
  <div class="note">
   <strong class="user">kassah at gmail dot com</strong>
   <a href="#82975" class="date">04-May-2008 05:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
// Converts a DOMNodeList to an Array that can be easily foreached<br />
function dnl2array($domnodelist) {<br />
&nbsp;&nbsp;&nbsp; $return = array();<br />
&nbsp;&nbsp;&nbsp; for ($i = 0; $i &lt; $domnodelist-&gt;length; ++$i) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $return[] = $domnodelist-&gt;item($i);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $return;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82668""></a>
  <div class="note">
   <strong class="user">brack at wjp dot de</strong>
   <a href="#82668" class="date">21-Apr-2008 02:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In PHP 5.2.5 (Windows) it is not possible to iterate correctly over the DOMNodeList object returned by DOMNode-&gt;childNodes using foreach. Instead I had to use the for loop in conjunction with the item() method of DOMNodeList for iterating over all child nodes correctly.<br />
<br />
I don't know whether this is really a bug, but apparently it is.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="domnode.replacechild.html">DOMNode::replaceChild</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="domnodelist.item.html">DOMNodelist::item</a></div>
 <div class="up"><a href="book.dom.html">DOM</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
