<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>foreach</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="control-structures.for.html">for</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="control-structures.break.html">break</a></div>
 <div class="up"><a href="language.control-structures.html">Control Structures</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="control-structures.foreach" class="sect1">
 <h2 class="title"><i>foreach</i></h2>
 <p class="verinfo">(PHP 4, PHP5)</p>
 <p class="para">
  The <i>foreach</i> construct provides an easy way to
  iterate over arrays. <i>foreach</i> works only on arrays
  and objects, and will issue an error when you try to use it on a variable
  with a different data type or an uninitialized variable. There are two
  syntaxes:
  <div class="informalexample">
   <div class="example-contents">
<div class="cdata"><pre>
foreach (array_expression as $value)
    statement
foreach (array_expression as $key =&gt; $value)
    statement
</pre></div>
   </div>

  </div>
 </p>
 <p class="simpara">
  The first form loops over the array given by
  <i>array_expression</i>. On each iteration, the value of
  the current element is assigned to <i>$value</i> and
  the internal array pointer is advanced by one (so on the next
  iteration, you&#039;ll be looking at the next element).
 </p>
 <p class="simpara">
  The second form will additionally assign the current element&#039;s key to
  the <i>$key</i> variable on each iteration.
 </p>
 <p class="simpara">
  It is possible to
  <a href="language.oop5.iterations.html" class="link">customize object iteration</a>.
 </p>
 <p class="para">
  <blockquote class="note"><p><b class="note">Note</b>: 
   <p class="para">
    When <i>foreach</i> first starts executing, the
    internal array pointer is automatically reset to the first element
    of the array. This means that you do not need to call
    <span class="function"><a href="function.reset.html" class="function">reset()</a></span> before a <i>foreach</i>
    loop.
   </p>
   <p class="para">
    As <i>foreach</i> relies on the internal array pointer changing it
    within the loop may lead to unexpected behavior.
   </p>
  </p></blockquote>
 </p>
 <p class="para">
  In order to be able to directly modify array elements within the loop precede
 <i>$value</i> with &amp;. In that case the value will be assigned by
 <a href="language.references.html" class="link">reference</a>.
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">);<br />foreach&nbsp;(</span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">as&nbsp;&amp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />}<br /></span><span style="color: #FF8000">//&nbsp;$arr&nbsp;is&nbsp;now&nbsp;array(2,&nbsp;4,&nbsp;6,&nbsp;8)<br /></span><span style="color: #007700">unset(</span><span style="color: #0000BB">$value</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;break&nbsp;the&nbsp;reference&nbsp;with&nbsp;the&nbsp;last&nbsp;element<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <p class="para">
  Referencing <i>$value</i> is only possible if the iterated array can be 
  referenced (i.e. if it is a variable). The following code won&#039;t work:
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">foreach&nbsp;(array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">)&nbsp;as&nbsp;&amp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <div class="warning"><b class="warning">Warning</b>
  <p class="para">
   Reference of a <i>$value</i> and the last array element
   remain even after the <i>foreach</i> loop. It is recommended
   to destroy it by <span class="function"><a href="function.unset.html" class="function">unset()</a></span>.
  </p>
 </div>
 <p class="para">
  <blockquote class="note"><p><b class="note">Note</b>: 
   <p class="para">
    <i>foreach</i> does not support the ability to
    suppress error messages using &#039;@&#039;.
   </p>
  </p></blockquote>
 </p>
 <p class="para">
  You may have noticed that the following are functionally
  identical:
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"one"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"two"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"three"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$arr</span><span style="color: #007700">);<br />while&nbsp;(list(,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">each</span><span style="color: #007700">(</span><span style="color: #0000BB">$arr</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Value:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />}<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Value:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <p class="para">
  The following are also functionally identical:
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"one"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"two"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"three"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$arr</span><span style="color: #007700">);<br />while&nbsp;(list(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">each</span><span style="color: #007700">(</span><span style="color: #0000BB">$arr</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Key:&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">;&nbsp;Value:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />}<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Key:&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">;&nbsp;Value:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <p class="para">
  Some more examples to demonstrate usages:
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;foreach&nbsp;example&nbsp;1:&nbsp;value&nbsp;only&nbsp;*/<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">17</span><span style="color: #007700">);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Current&nbsp;value&nbsp;of&nbsp;\$a:&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #DD0000">.\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;foreach&nbsp;example&nbsp;2:&nbsp;value&nbsp;(with&nbsp;its&nbsp;manual&nbsp;access&nbsp;notation&nbsp;printed&nbsp;for&nbsp;illustration)&nbsp;*/<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">17</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">/*&nbsp;for&nbsp;illustrative&nbsp;purposes&nbsp;only&nbsp;*/<br /><br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\$a[</span><span style="color: #0000BB">$i</span><span style="color: #DD0000">]&nbsp;=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #DD0000">.\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++;<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;foreach&nbsp;example&nbsp;3:&nbsp;key&nbsp;and&nbsp;value&nbsp;*/<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"one"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"two"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"three"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"seventeen"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">17<br /></span><span style="color: #007700">);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\$a[</span><span style="color: #0000BB">$k</span><span style="color: #DD0000">]&nbsp;=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #DD0000">.\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;foreach&nbsp;example&nbsp;4:&nbsp;multi-dimensional&nbsp;arrays&nbsp;*/<br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"a"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"b"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"y"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"z"</span><span style="color: #007700">;<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$v1</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$v1&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$v2</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$v2</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;foreach&nbsp;example&nbsp;5:&nbsp;dynamic&nbsp;arrays&nbsp;*/<br /><br /></span><span style="color: #007700">foreach&nbsp;(array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$v</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="106971""></a>
  <div class="note">
   <strong class="user">nobody at nobody dot com</strong>
   <a href="#106971" class="date">22-Dec-2011 01:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
$d3 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">=&gt;array(</span><span class="string">'b'</span><span class="keyword">=&gt;</span><span class="string">'c'</span><span class="keyword">));<br />
foreach(</span><span class="default">$d3</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">] as &amp;</span><span class="default">$v4</span><span class="keyword">){}<br />
foreach(</span><span class="default">$d3 </span><span class="keyword">as </span><span class="default">$v4</span><span class="keyword">){}<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$d3</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>will get something look like this:<br />
array(1) {<br />
&nbsp; ["a"]=&gt;<br />
&nbsp; array(1) {<br />
&nbsp;&nbsp;&nbsp; ["b"]=&gt;<br />
&nbsp;&nbsp;&nbsp; &amp;array(1) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; ["b"]=&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; *RECURSION*<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
}<br />
then you try to walk some data with this array.<br />
the script run out of memory and connect reset by peer<br />
<br />
the document says:<br />
Warning<br />
Reference of a $value and the last array element remain even after the foreach loop. It is recommended to destroy it by unset().<br />
<br />
so what I learn is that NEVER ignore """Warning""" in document....</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106541""></a>
  <div class="note">
   <strong class="user">308840239 at qq dot com</strong>
   <a href="#106541" class="date">17-Nov-2011 07:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware of this:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($_POST as &amp;$v)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $v = strip_tags($v);<br />
&nbsp;&nbsp;&nbsp; }<br />
This can remove html tags in $_POST, but this do not change the value in $_REQUEST although $_REQUEST includes $_POST.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106338""></a>
  <div class="note">
   <strong class="user">bcory at univelocity dot com</strong>
   <a href="#106338" class="date">28-Oct-2011 01:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Though i would add this for everyone. I am building a form creation library for myself but this is nice if you need to get list option for a select in a form and pass them through to you gui. If anyone notices any issue will you let me know <br />
<br />
my example array below<br />
<br />
<span class="default">&lt;?php<br />
$passarray </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"one" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"two" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"three" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"seventeen" </span><span class="keyword">=&gt; </span><span class="default">17<br />
</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
function to create the options to select from<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">create_htmloption</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">)<br />
{<br />
</span><span class="default">$formatedarray</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$formatedarray</span><span class="keyword">.= </span><span class="string">"&lt;option value=\"</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]</span><span class="string">\"&gt;</span><span class="default">$v</span><span class="string">&lt;/option&gt;<br />
&nbsp;&nbsp;&nbsp; "</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
return </span><span class="default">$formatedarray</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Select creator<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">select_field</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$id</span><span class="keyword">, </span><span class="default">$passarray</span><span class="keyword">)<br />
{<br />
</span><span class="default">$optionarray</span><span class="keyword">=</span><span class="default">create_htmloption</span><span class="keyword">(</span><span class="default">$passarray</span><span class="keyword">);<br />
</span><span class="default">$fieldinfo</span><span class="keyword">=</span><span class="string">"<br />
&lt;select name=\"</span><span class="default">$name</span><span class="string">\" id=\"</span><span class="default">$id</span><span class="string">\"&gt;<br />
&nbsp;</span><span class="default">$optionarray</span><span class="string"><br />
&lt;/select&gt; <br />
"</span><span class="keyword">;<br />
return </span><span class="default">$fieldinfo</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$bob</span><span class="keyword">=</span><span class="default">select_field</span><span class="keyword">(</span><span class="string">'bob'</span><span class="keyword">, </span><span class="string">'2'</span><span class="keyword">, </span><span class="default">$passarray</span><span class="keyword">);<br />
echo </span><span class="default">$bob</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
seems fairly simple and might help someone work their select options into a database</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105933""></a>
  <div class="note">
   <strong class="user">glitch dot mr at gmail dot com</strong>
   <a href="#105933" class="date">26-Sep-2011 12:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"foreach does not support the ability to suppress error messages using '@'."<br />
<br />
That's not exactly true. It's indeed not possible to do turn off error reporting for foreach(){} instruction itself.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">@foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">){} </span><span class="comment">// invalid, unexpected T_FOREACH<br />
</span><span class="default">?&gt;<br />
</span><br />
But, it's possible to turn off every possible way of having error by casting $variable to array and using @ operator on it to ignore possible errors. Note that this code WILL run one loop on your code if it isn't array with actual value. If it's OK, you might use it, but if it's not acceptable look for solutions below.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach((array) @</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">){}<br />
</span><span class="default">?&gt;<br />
</span><br />
If you don't like this behavior you can use in_array() function to check if it's array and use empty array if it isn't array and use correct way depending on type of value.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) || </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) ? </span><span class="default">$array </span><span class="keyword">: array() as </span><span class="default">$value</span><span class="keyword">){}<br />
</span><span class="default">?&gt;<br />
</span><br />
If you don't like all this variable abuse (for example if you have more complex code, you can make assigment in your foreach() code (note that this way it's way more complex and pretty obfuscated)).<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// will parse every array inside this array in reverse order<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$_ </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) || </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$_</span><span class="keyword">) ? </span><span class="default">$_ </span><span class="keyword">: array() as </span><span class="default">$value</span><span class="keyword">){}<br />
</span><span class="default">?&gt;<br />
</span><br />
Of course usually it's just enough to check if value is array, or just accept it anyways if there is no chance that it could be anything else. Or you could turn off error_reporting() before accessing foreach(){} and turning it on shortly after that...<br />
<br />
But actually, this is not existing problem. In fact, all those warnings help to find errors in your code and I personally wouldn't want to avoid such things. if(@$a){} is personally for fine replacement of empty() through...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105765""></a>
  <div class="note">
   <strong class="user">bartosz dot tomczak at barell dot org</strong>
   <a href="#105765" class="date">13-Sep-2011 06:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach (array() as </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$value</span><span class="keyword">;&nbsp; </span><span class="comment">// Prints nothing here<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
The code above always prints nothing, because array() returns empty array. So $value always be empty and echo has nothing to print - you never know if foreach is in loop.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104243""></a>
  <div class="note">
   <strong class="user">cuonghuyto</strong>
   <a href="#104243" class="date">03-Jun-2011 03:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that foreach does zero loop on an empty array<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach (array() as </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$value</span><span class="keyword">;&nbsp; </span><span class="comment">// Prints nothing here<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
(This is in an effort to make a strict specification of PHP functions/constructs)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104085""></a>
  <div class="note">
   <strong class="user">gcocatre at gmail dot com</strong>
   <a href="#104085" class="date">21-May-2011 05:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following code produces an unexpected result:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array (</span><span class="string">'zero'</span><span class="keyword">, </span><span class="string">'one'</span><span class="keyword">, </span><span class="string">'two'</span><span class="keyword">, </span><span class="string">'three'</span><span class="keyword">);<br />
foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$key</span><span class="string">: </span><span class="default">$value</span><span class="string">\n"</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">key</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">));<br />
<br />
</span><span class="comment">/* Produces:<br />
0: zero<br />
1: one<br />
2: two<br />
3: three<br />
int(1)<br />
*/<br />
</span><span class="default">?&gt;<br />
</span><br />
Reset your array after using foreach on it!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104060""></a>
  <div class="note">
   <strong class="user">billardmchl at aol dot com</strong>
   <a href="#104060" class="date">20-May-2011 01:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function find well the words, add well adds a () around short words, but the <br />
array at the end of th function is the same as at the beginning.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">isole_mots</span><span class="keyword">(</span><span class="default">$chaine</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$chaine </span><span class="keyword">= </span><span class="string">"le petit chat est fou"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$mots </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">'/[!,-.;?:()[ ]/'</span><span class="keyword">, </span><span class="default">$chaine</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">PREG_SPLIT_NO_EMPTY</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$mots </span><span class="keyword">as </span><span class="default">$mot</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$mot</span><span class="keyword">) &lt;= </span><span class="default">3</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mot </span><span class="keyword">= </span><span class="string">"("</span><span class="keyword">.</span><span class="default">$mot</span><span class="keyword">.</span><span class="string">")"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">" inside foreach </span><span class="default">$mot</span><span class="string"> &lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
print </span><span class="string">"after foreach array mots"</span><span class="keyword">;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$mots</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; die();<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$mots</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
inside foreach (le)<br />
inside foreach petit<br />
inside foreach chat<br />
inside foreach (est)<br />
inside foreach (fou)<br />
after foreach array motsArray ( [0] =&gt; le [1] =&gt; petit [2] =&gt; chat [3] =&gt; est [4] =&gt; fou )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102978""></a>
  <div class="note">
   <strong class="user">broshizzledizzle at gmail dot com</strong>
   <a href="#102978" class="date">17-Mar-2011 01:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@benekastah<br />
<br />
You are unintentionality misleading people.<br />
<br />
Your code is the same as this:<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">);<br />
foreach ( </span><span class="default">$array </span><span class="keyword">as </span><span class="default">$letter </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; ;<br />
echo </span><span class="default">$letter</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
What I mean by this is that you execute the foreach loop but don't do anything with it.&nbsp; The reason you can echo the last value in the array is because of the warning posted above: "Reference of a $value and the last array element remain even after the foreach loop. It is recommended to destroy it by unset()."</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102955""></a>
  <div class="note">
   <strong class="user">someone</strong>
   <a href="#102955" class="date">16-Mar-2011 01:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems when you use references in a foreach, and then you add elements to the array within it, it only runs through them if the current element isn't the last of the array (with 5.2.11 at least).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102909""></a>
  <div class="note">
   <strong class="user">benekastah at gmail dot com</strong>
   <a href="#102909" class="date">14-Mar-2011 09:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's good to know that if you accidentally (or purposefully) put a semicolon at the end of the first line of a foreach statement, no error or warning will be thrown. Instead, the foreach will iterate only on the last entry in the array. Therefore,<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">);<br />
foreach ( </span><span class="default">$array </span><span class="keyword">as </span><span class="default">$letter </span><span class="keyword">); </span><span class="comment">// &lt;--Semicolon at end of foreach statement<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">$letter</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>will only echo 'd' as it's response (rather than 'abcd'). I don't know if this is meant to be the case, or if it is meant to err.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101425""></a>
  <div class="note">
   <strong class="user">Mark Rose</strong>
   <a href="#101425" class="date">15-Dec-2010 02:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful recycling the $value variable if using a reference! I recently ran into a strange bug, where the last item of a second foreach loop was referenced.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$foo </span><span class="keyword">= array(</span><span class="string">'one'</span><span class="keyword">, </span><span class="string">'two'</span><span class="keyword">, </span><span class="string">'three'</span><span class="keyword">);<br />
<br />
foreach (</span><span class="default">$foo </span><span class="keyword">as &amp;</span><span class="default">$bar</span><span class="keyword">)<br />
{<br />
&nbsp;</span><span class="comment">// no-op<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">);<br />
<br />
foreach (</span><span class="default">$foo </span><span class="keyword">as </span><span class="default">$bar</span><span class="keyword">)<br />
{<br />
&nbsp;</span><span class="comment">// no-op<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
produces:<br />
<br />
array(3) {<br />
&nbsp; [0]=&gt;string(3) "one"<br />
&nbsp; [1]=&gt;string(3) "two"<br />
&nbsp; [2]=&gt;&amp;string(5) "three"<br />
}<br />
array(3) {<br />
&nbsp; [0]=&gt;string(3) "one"<br />
&nbsp; [1]=&gt;string(3) "two"<br />
&nbsp; [2]=&gt;&amp;string(3) "two"<br />
} <br />
<br />
Note that the last value in the array gets set to the second last value!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101317""></a>
  <div class="note">
   <strong class="user">Alex S.</strong>
   <a href="#101317" class="date">09-Dec-2010 07:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just found a way without a counter handling last element in a foreach :<br />
<br />
<span class="default">&lt;?php<br />
$foo </span><span class="keyword">= (</span><span class="default">$current_key </span><span class="keyword">== </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">) ? </span><span class="string">"last element" </span><span class="keyword">: </span><span class="string">"any other element"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101215""></a>
  <div class="note">
   <strong class="user">fabiolimasouto at gmail dot com</strong>
   <a href="#101215" class="date">02-Dec-2010 07:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've been using this foreach structure for two years or so now, and just figured something new which i hadn't realized before, please have a look at this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Test<br />
</span><span class="keyword">{<br />
&nbsp;private </span><span class="default">$data</span><span class="keyword">;<br />
&nbsp;function &amp;</span><span class="default">data</span><span class="keyword">()<br />
&nbsp;{<br />
&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">;<br />
&nbsp;}<br />
&nbsp;<br />
&nbsp;function </span><span class="default">getData</span><span class="keyword">()<br />
&nbsp;{<br />
&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">;<br />
&nbsp;}<br />
}<br />
<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">Test</span><span class="keyword">;<br />
</span><span class="default">$data </span><span class="keyword">=&amp; </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">();<br />
</span><span class="default">$array </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">,</span><span class="string">'c'</span><span class="keyword">);<br />
<br />
foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$data</span><span class="keyword">)<br />
{<br />
}<br />
<br />
echo </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">getData</span><span class="keyword">(); </span><span class="comment">// OUTPUTS: "c"!!!<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
What I can say from this is that if you pass a reference to the data holder of the foreach structure instead of a non-declared or normal (non-reference) variable, you will be able to fill that same (referenced) space in memory without creating a new one. Note that this is slightly different as explained in the manual above:<br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br />
foreach (</span><span class="default">$arr </span><span class="keyword">as &amp;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$value </span><span class="keyword">* </span><span class="default">2</span><span class="keyword">;<br />
}<br />
</span><span class="comment">// $arr is now array(2, 4, 6, 8)<br />
</span><span class="keyword">unset(</span><span class="default">$value</span><span class="keyword">); </span><span class="comment">// break the reference with the last element<br />
</span><span class="default">?&gt;<br />
</span><br />
In this case $value will simply point to the original addresses of each $array's elements in each iteration. In my example the $data variable is before anything already pointing to another address elsewhere and will have THAT memory location filled in each iteration!!! Hope I've made this somewhat understandable.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100891""></a>
  <div class="note">
   <strong class="user">Sipos Tams</strong>
   <a href="#100891" class="date">12-Nov-2010 10:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is an example of the use of the second, minor case of foreach.<br />
<br />
A useful script that returns the relative URL of the current page with the current "GET data".<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getCurrentURL</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$currentURL </span><span class="keyword">= </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"PHP_SELF"</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$_GET </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$i </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) { </span><span class="default">$currentURL </span><span class="keyword">.= </span><span class="string">"?"</span><span class="keyword">; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else { </span><span class="default">$currentURL </span><span class="keyword">.= </span><span class="string">"&amp;amp;"</span><span class="keyword">; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$currentURL </span><span class="keyword">.= </span><span class="default">$key</span><span class="keyword">.</span><span class="string">"="</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$currentURL</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Note that most of the time basename($_SERVER["REQUEST_URI"] is enough for this task as well, but if in the browsers's address bar is only <a href="http://example.com/ instead of http://example.com/index.php displayed, than basename($_SERVER[" rel="nofollow" target="_blank">http://example.com/ instead of http://example.com/index.php displayed, than basename($_SERVER[</a>"REQUEST_URI"] fails.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99909""></a>
  <div class="note">
   <strong class="user">Oleg englishman at bigmir dot net</strong>
   <a href="#99909" class="date">14-Sep-2010 07:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those who'd like to traverse an array including just added elements (within this very foreach), here's a workaround:<br />
<br />
<span class="default">&lt;?php<br />
$values </span><span class="keyword">= array(</span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">'b'</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">=&gt; </span><span class="string">'c'</span><span class="keyword">);<br />
while (list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$key</span><span class="string"> =&gt; </span><span class="default">$value</span><span class="string"> \r\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$key </span><span class="keyword">== </span><span class="default">3</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$values</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">] = </span><span class="string">'d'</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$key </span><span class="keyword">== </span><span class="default">4</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$values</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">] = </span><span class="string">'e'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
the code above will output:<br />
<br />
1 =&gt; a<br />
2 =&gt; b<br />
3 =&gt; c<br />
4 =&gt; d<br />
5 =&gt; e</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99609""></a>
  <div class="note">
   <strong class="user">j dot vd dot merwe at enovision dot net</strong>
   <a href="#99609" class="date">26-Aug-2010 05:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A sample how to go through a list of array elements that resulted from mysql recordset. In this sample it checks if a file exists and removes the row from the array if it not.<br />
<br />
<span class="default">&lt;?php<br />
$db</span><span class="keyword">-&gt;</span><span class="default">set_query</span><span class="keyword">(</span><span class="string">"select * from documents where document_in_user = 0"</span><span class="keyword">); </span><span class="comment">//1&nbsp; <br />
</span><span class="default">$documents </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">result_to_array</span><span class="keyword">(</span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">get_result</span><span class="keyword">()); </span><span class="comment">//1<br />
<br />
</span><span class="keyword">foreach (</span><span class="default">$documents </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$row</span><span class="keyword">) { </span><span class="comment">//2<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$file&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">"uploads/"</span><span class="keyword">.</span><span class="default">rawurldecode</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">[</span><span class="string">'document_name'</span><span class="keyword">]);<br />
&nbsp; <br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">file_exists </span><span class="keyword">( </span><span class="default">$file </span><span class="keyword">) == </span><span class="default">FALSE </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$documents</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);&nbsp; </span><span class="comment">//3<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}&nbsp; <br />
}<br />
<br />
</span><span class="default">$documents </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$documents</span><span class="keyword">); </span><span class="comment">// reindex the array (4)<br />
</span><span class="default">?&gt;<br />
</span><br />
variables:<br />
mysql table = documents,<br />
array = $documents<br />
array key (index) = $key<br />
array row (record sort of speak) = $row<br />
<br />
explanation:<br />
<br />
1. <br />
it gets the array from the table (mysql)<br />
<br />
2. <br />
foreach goes through the array $documents<br />
<br />
3. <br />
unset if record does not exist (remove the row)<br />
<br />
4.<br />
the array_values($documents) reindexes the $documents array, for otherwise you might end up in trouble when your&nbsp; process will start expecting an array starting with key ($key) 0 (zero).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99280""></a>
  <div class="note">
   <strong class="user">himitsu at fnse dot de</strong>
   <a href="#99280" class="date">08-Aug-2010 05:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Your last value changes after use of references.<br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(</span><span class="string">' one '</span><span class="keyword">, </span><span class="string">' two '</span><span class="keyword">, </span><span class="string">' tree '</span><span class="keyword">, </span><span class="string">' four '</span><span class="keyword">, </span><span class="string">' five '</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
foreach (</span><span class="default">$arr </span><span class="keyword">as &amp;</span><span class="default">$str</span><span class="keyword">)<br />
&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$str</span><span class="keyword">)<br />
&nbsp; echo </span><span class="default">$str </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Array (&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Array (&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; one&nbsp; &nbsp; &nbsp; Array (<br />
[0] =&gt; one&nbsp; &nbsp; &nbsp; [0] =&gt; one&nbsp; &nbsp; &nbsp; two&nbsp; &nbsp; &nbsp; [0] =&gt; one<br />
[1] =&gt; two&nbsp; &nbsp; &nbsp; [1] =&gt; two&nbsp; &nbsp; &nbsp; tree&nbsp; &nbsp;&nbsp; [1] =&gt; two<br />
[2] =&gt; tree&nbsp; &nbsp;&nbsp; [2] =&gt; tree&nbsp; &nbsp;&nbsp; four&nbsp; &nbsp;&nbsp; [2] =&gt; tree<br />
[3] =&gt; four&nbsp; &nbsp;&nbsp; [3] =&gt; four&nbsp; &nbsp;&nbsp; four&nbsp; &nbsp;&nbsp; [3] =&gt; four<br />
[4] =&gt; five&nbsp; &nbsp;&nbsp; [4] =&gt; five&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [4] =&gt; four<br />
)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(</span><span class="string">' one '</span><span class="keyword">, </span><span class="string">' two '</span><span class="keyword">, </span><span class="string">' tree '</span><span class="keyword">, </span><span class="string">' four '</span><span class="keyword">, </span><span class="string">' five '</span><span class="keyword">);<br />
foreach (</span><span class="default">$arr </span><span class="keyword">as &amp;</span><span class="default">$str</span><span class="keyword">)<br />
&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp; echo </span><span class="default">$str </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
}<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
[0] =&gt; one&nbsp; &nbsp; =&gt; one&nbsp;&nbsp; =&gt; one&nbsp;&nbsp; =&gt; one&nbsp;&nbsp; =&gt; one&nbsp;&nbsp; =&gt; one<br />
[1] =&gt; two&nbsp; &nbsp; =&gt; two&nbsp;&nbsp; =&gt; two&nbsp;&nbsp; =&gt; two&nbsp;&nbsp; =&gt; two&nbsp;&nbsp; =&gt; two<br />
[2] =&gt; tree&nbsp;&nbsp; =&gt; tree&nbsp; =&gt; tree&nbsp; =&gt; tree&nbsp; =&gt; tree&nbsp; =&gt; tree<br />
[3] =&gt; four&nbsp;&nbsp; =&gt; four&nbsp; =&gt; four&nbsp; =&gt; four&nbsp; =&gt; four&nbsp; =&gt; four<br />
[4] =&gt; one&nbsp; &nbsp; =&gt; two&nbsp;&nbsp; =&gt; tree&nbsp; =&gt; four&nbsp; =&gt; four&nbsp; =&gt; four<br />
<br />
tested in PHP 5.2.4 and PHP 5.3.0</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99111""></a>
  <div class="note">
   <strong class="user">cornvalley at gmail dot com</strong>
   <a href="#99111" class="date">28-Jul-2010 04:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Foreach can be also used to move around multiple tables.<br />
Here is simple example.<br />
<br />
<span class="default">&lt;?php<br />
$table</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] = </span><span class="default">6</span><span class="keyword">;<br />
</span><span class="default">$table</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] = </span><span class="default">17</span><span class="keyword">;<br />
</span><span class="default">$table</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">] = </span><span class="default">12</span><span class="keyword">;<br />
</span><span class="default">$table</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">][</span><span class="default">3</span><span class="keyword">] = </span><span class="default">8</span><span class="keyword">;<br />
</span><span class="default">$table</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] = </span><span class="default">9</span><span class="keyword">;<br />
</span><span class="default">$table</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] = </span><span class="default">13</span><span class="keyword">;<br />
</span><span class="default">$table</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">] = </span><span class="default">11</span><span class="keyword">;<br />
</span><span class="default">$table</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">][</span><span class="default">3</span><span class="keyword">] = </span><span class="default">5</span><span class="keyword">;<br />
</span><span class="default">$table</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">$table</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] = </span><span class="default">4</span><span class="keyword">;<br />
</span><span class="default">$table</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] = </span><span class="default">2</span><span class="keyword">;<br />
</span><span class="default">$table</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">4</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$table </span><span class="keyword">as </span><span class="default">$i1 </span><span class="keyword">=&gt; </span><span class="default">$n1</span><span class="keyword">)&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$n1 </span><span class="keyword">as </span><span class="default">$i2 </span><span class="keyword">=&gt; </span><span class="default">$n2</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$n2 </span><span class="keyword">as </span><span class="default">$i3 </span><span class="keyword">=&gt; </span><span class="default">$n3</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">'$table[%d][%d][%d] = %d;&lt;br&gt;'</span><span class="keyword">, </span><span class="default">$i1</span><span class="keyword">,</span><span class="default">$i2</span><span class="keyword">,</span><span class="default">$i3</span><span class="keyword">,</span><span class="default">$n3</span><span class="keyword">);</span><span class="default">?&gt;<br />
</span><br />
It gives the result:<br />
$test[0][0][0] = 6;<br />
$test[0][0][1] = 17;<br />
$test[0][0][2] = 12;<br />
$test[0][0][3] = 8;<br />
$test[0][1][0] = 9;<br />
$test[0][1][1] = 13;<br />
$test[0][1][2] = 11;<br />
$test[0][1][3] = 5;<br />
$test[0][2][0] = 1;<br />
$test[1][1][0] = 4;<br />
$test[1][2][0] = 2;<br />
$test[2][4][1] = 1;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98335""></a>
  <div class="note">
   <strong class="user">Kris dot Craig at gmail dot com</strong>
   <a href="#98335" class="date">09-Jun-2010 11:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're looking for a quick and easy way to recursively pull data from an MD array, here's a little function that should come in handy:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; </span><span class="comment">/* Grab any values from a multidimensional array using infinite recursion.&nbsp; --Kris */<br />
&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">RecurseArray</span><span class="keyword">( </span><span class="default">$inarray</span><span class="keyword">, </span><span class="default">$toarray </span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; foreach ( </span><span class="default">$inarray </span><span class="keyword">as </span><span class="default">$inkey </span><span class="keyword">=&gt; </span><span class="default">$inval </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$inval </span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$toarray </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">RecurseArray</span><span class="keyword">( </span><span class="default">$inval</span><span class="keyword">, </span><span class="default">$toarray </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$toarray</span><span class="keyword">[] = </span><span class="default">$inval</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">$toarray</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97945""></a>
  <div class="note">
   <strong class="user">John</strong>
   <a href="#97945" class="date">17-May-2010 04:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those wishing to try the heresy of adding to an array while it is being processed in a foreach loop, note that your added value will not be processed at the end of the loop!<br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">);<br />
foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$val</span><span class="keyword">) if(</span><span class="default">$val</span><span class="keyword">==</span><span class="default">3</span><span class="keyword">) </span><span class="default">$arr</span><span class="keyword">[]=</span><span class="default">6</span><span class="keyword">; else echo </span><span class="default">$val</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
will show "1245" not "12456".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95221""></a>
  <div class="note">
   <strong class="user">jsimlo at yahoo dot com</strong>
   <a href="#95221" class="date">19-Dec-2009 04:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is currently no syntax to write a single yet lazy-evaluated foreach thru multiple arrays, but you can double-foreach like this (this is not lazy-evaluated yet):<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">foreach (array (</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">, </span><span class="default">$array3</span><span class="keyword">) as </span><span class="default">$control</span><span class="keyword">)<br />
&nbsp; foreach (</span><span class="default">$control </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$item</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The above will echo all items from all three input arrays. Note that simple array_merge might not always work (sicne array_merge might depend on the type of array keys) and might consume more memory in the process. The reasonable grounds for doing this might be a more complicated body of the foreach, which you do not want to repeat in your code for every input array, or a fact that you got too many input arrays.<br />
<br />
Now, a lazy-evaluation trick would look something like this (although php is capable of optimizations that fully neglect reasons for doing things like this):<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">foreach (array (</span><span class="string">'array1'</span><span class="keyword">, </span><span class="string">'array2'</span><span class="keyword">, </span><span class="string">'array3'</span><span class="keyword">) as </span><span class="default">$control</span><span class="keyword">)<br />
&nbsp; foreach ($</span><span class="default">$control </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$item</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
And finally, a lazy-evaluation trick that might be reasonable:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">foreach (array (</span><span class="string">'expr1'</span><span class="keyword">, </span><span class="string">'expr2'</span><span class="keyword">, </span><span class="string">'expr3'</span><span class="keyword">) as </span><span class="default">$control</span><span class="keyword">)<br />
&nbsp; foreach (eval (</span><span class="default">$control</span><span class="keyword">) as </span><span class="default">$item</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$item</span><span class="keyword">) break </span><span class="default">2</span><span class="keyword">; else echo </span><span class="default">$item</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Example (searching for a non-trivial value):<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// search for a child name<br />
</span><span class="default">$seachName </span><span class="keyword">= </span><span class="string">'Jozko'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// prepare the sources<br />
</span><span class="default">$sources </span><span class="keyword">= array (<br />
&nbsp; </span><span class="string">'$item1-&gt;GetChilds()'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'$item2-&gt;GetChilds()'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'$item3-&gt;GetParent()-&gt;GetChilds()'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'$item3-&gt;GetComputeSomethingDifficultChilds()'</span><span class="keyword">,<br />
);<br />
<br />
</span><span class="comment">// search in several different arrays<br />
</span><span class="keyword">foreach (</span><span class="default">$sources </span><span class="keyword">as </span><span class="default">$control</span><span class="keyword">)<br />
&nbsp; foreach (eval (</span><span class="default">$control</span><span class="keyword">) as </span><span class="default">$child</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">GetName</span><span class="keyword">() == </span><span class="default">$seachName</span><span class="keyword">) break </span><span class="default">2</span><span class="keyword">;<br />
<br />
</span><span class="comment">// now we got the correct child<br />
// and we did it in lazy-evaluation style<br />
</span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">);</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93715""></a>
  <div class="note">
   <strong class="user">mazdak dot farrokhzad at piratpartiet dot se</strong>
   <a href="#93715" class="date">23-Sep-2009 09:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a really silly example of how you can implement foreach for objects in a really crazy way...<br />
<br />
It's not something you should use...<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Same as foreach, for objects...<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param object|array $_collection<br />
&nbsp;&nbsp; &nbsp; * @param callback $_lambda<br />
&nbsp;&nbsp; &nbsp; * @param mixed $_data optional<br />
&nbsp;&nbsp; &nbsp; * @return void<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">loop</span><span class="keyword">(</span><span class="default">$_collection</span><span class="keyword">, </span><span class="default">$_lambda</span><span class="keyword">, </span><span class="default">$_data </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$_collection</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$_collection </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$_data</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_lambda</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_lambda</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$_data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$_collection</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$iter </span><span class="keyword">= </span><span class="default">$_collection</span><span class="keyword">-&gt;</span><span class="default">getIterator</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$iter</span><span class="keyword">-&gt;</span><span class="default">rewind</span><span class="keyword">();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while(</span><span class="default">$iter</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">())<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$_data</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_lambda</span><span class="keyword">(</span><span class="default">$iter</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">(), </span><span class="default">$iter</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">());<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_lambda</span><span class="keyword">(</span><span class="default">$iter</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">(), </span><span class="default">$iter</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">(), </span><span class="default">$_data</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$iter</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Only Accepts Objects or Arrays'</span><span class="keyword">, </span><span class="default">E_USER_ERROR</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// and this is how to use it...<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="string">"some random data"</span><span class="keyword">; </span><span class="comment">// you can place $this here<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">loop</span><span class="keyword">(new </span><span class="default">ArrayObject</span><span class="keyword">(array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">)), function(&amp;</span><span class="default">$_key</span><span class="keyword">, &amp;</span><span class="default">$_value</span><span class="keyword">, &amp;</span><span class="default">$_data</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$_key</span><span class="keyword">.</span><span class="default">$_value</span><span class="keyword">.</span><span class="default">$_data</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }, </span><span class="default">$data</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93445""></a>
  <div class="note">
   <strong class="user">s dot mattison at gmail dot filtersoutmyspam dot com</strong>
   <a href="#93445" class="date">10-Sep-2009 03:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I hope other people find this useful.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/*<br />
---------------------------------<br />
"Null" Array filler<br />
by Steve Mattison<br />
<br />
This script shows one way PHP can<br />
display an array, and pad it with<br />
'nonexistant' values. This may be<br />
useful, for instance, in reducing<br />
the size of a database by storing<br />
only values that deviate from a<br />
set standard.<br />
---------------------------------<br />
*/<br />
<br />
</span><span class="default">$arr </span><span class="keyword">= array(</span><span class="default">3</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, -</span><span class="default">47</span><span class="keyword">); </span><span class="comment">//the values. we're looking for the first two.<br />
//an arbitrary lower number must append the array.<br />
//this is so the main loop continues after the last value has been found.<br />
<br />
</span><span class="default">$arr2 </span><span class="keyword">= array(</span><span class="string">"oranges"</span><span class="keyword">, </span><span class="string">"pears"</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">); </span><span class="comment">//value descriptions.<br />
<br />
</span><span class="keyword">foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) { </span><span class="comment">//get next value that we seek.<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$iterate</span><span class="keyword">=</span><span class="default">$last</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;</span><span class="default">$iterate</span><span class="keyword">&lt;</span><span class="default">10</span><span class="keyword">;</span><span class="default">$iterate</span><span class="keyword">++){ </span><span class="comment">//iterate a loop.<br />
&nbsp;&nbsp;&nbsp; //start at the last position+1, in case we've already looped once.<br />
&nbsp;&nbsp;&nbsp; //if we haven't looped yet, $last is not defined; we start at 1.<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$last</span><span class="keyword">=</span><span class="default">$iterate</span><span class="keyword">; </span><span class="comment">//keep track of our position.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">'&lt;br&gt;['</span><span class="keyword">.</span><span class="default">$iterate</span><span class="keyword">.</span><span class="string">'] - '</span><span class="keyword">; </span><span class="comment">//show it.<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$iterate</span><span class="keyword">==</span><span class="default">$value</span><span class="keyword">){ </span><span class="comment">//an array value has appeared.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">echo (</span><span class="default">$arr2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]); </span><span class="comment">//show the deviant value.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">break; </span><span class="comment">//break the loop and get the next value.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">} </span><span class="comment">//end if<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">else echo (</span><span class="string">"apples"</span><span class="keyword">); </span><span class="comment">//otherwise show the default value.<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">} </span><span class="comment">//next $iterate<br />
<br />
&nbsp;&nbsp;&nbsp; //array values higher than the loop condition will be ignored.<br />
&nbsp;&nbsp;&nbsp; //optionally, you may wish to check for this and display them here.<br />
<br />
</span><span class="keyword">} </span><span class="comment">//next-each $arr<br />
<br />
</span><span class="keyword">unset(</span><span class="default">$value</span><span class="keyword">); </span><span class="comment">//clear up the memory used by foreach<br />
<br />
//Example Result Set:<br />
//[1] - apples<br />
//[2] - apples<br />
//[3] - oranges<br />
//[4] - apples<br />
//[5] - pears<br />
//[6] - apples<br />
//[7] - apples<br />
//[8] - apples<br />
//[9] - apples<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92116""></a>
  <div class="note">
   <strong class="user">Krzysztof - ksobolewski at o2 dot pl</strong>
   <a href="#92116" class="date">09-Jul-2009 04:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The weird behaviour of references in foreach remains as long as in PHP 5.2.08&nbsp; (Linux) and PHP 5.2.9 (Windows XP).&nbsp;&nbsp; The simplest example would be:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $a </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">,</span><span class="string">'c'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$a </span><span class="keyword">as &amp;</span><span class="default">$row</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//you don't have to do anything here<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$row</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">.</span><span class="default">$row</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
the result of print_r will be correct - array of ('a','b','c') values. The second foreach, however, would <br />
produce a,b,b. For all arrays, regardless of size, it would be the n-1 element<br />
&nbsp;(the element right before the last one). Eg. for 'a','b','c','d','e','f', the script would produce a,b,c,d,e,e. <br />
There are few solutions to this:<br />
<br />
1. safest - avoid using references in foreach;&nbsp; so instead of <br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach(</span><span class="default">$a </span><span class="keyword">as &amp;</span><span class="default">$row</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// do something, eg.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$row </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
you would use<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach(</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">=&gt;</span><span class="default">$row</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// do something on row, eg.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$row </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// replace the row in the table<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">$row</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>decrease of performance is the cost, however<br />
<br />
2. equally safe and more usable - unset the element reference right after the foreach loop with references, eg.:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $a </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">,</span><span class="string">'c'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$a </span><span class="keyword">as &amp;</span><span class="default">$row</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//you don't have to do anything here<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; unset (</span><span class="default">$row</span><span class="keyword">)); </span><span class="comment">// it is safe now to use $row again<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$row</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">.</span><span class="default">$row</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
3. use references in both case; it seems that iterations work correct if you use &amp;$row in both loops or don't use it in any:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $a </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">,</span><span class="string">'c'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$a </span><span class="keyword">as &amp;</span><span class="default">$row</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//you don't have to do anything here<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="comment">// works OK now even without unset($row)<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$a </span><span class="keyword">as &amp;</span><span class="default">$row</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">.</span><span class="default">$row</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
4. use references in foreach only inside functions or methods; outside the function scope it should be safe <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">cleanTable</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$a </span><span class="keyword">as &amp;</span><span class="default">$row</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$row </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">,</span><span class="string">'c'</span><span class="keyword">);<br />
</span><span class="default">cleanTable</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
foreach(</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$row</span><span class="keyword">){<br />
echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">.</span><span class="default">$row</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
drawbacks: NONE! I Quite contrary, the code looks more tidy.<br />
<br />
5. avoid using the same variable names for referenced and non-referenced values; for example, in the first case use &amp;$rRow, and in the second one - $row. It's neither elegant, nor efficient, though, as each new variable lowers the application performance a bit.<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $a </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">,</span><span class="string">'c'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$a </span><span class="keyword">as &amp;</span><span class="default">$rRow</span><span class="keyword">){ </span><span class="comment">// $rRow for 'referenced row'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //you don't have to do anything here<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$row</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">.</span><span class="default">$row</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90683""></a>
  <div class="note">
   <strong class="user">burleigh at chorus dot net</strong>
   <a href="#90683" class="date">04-May-2009 10:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using numeric indexes doesn't automatically sort your array.<br />
<br />
<span class="default">&lt;?php<br />
$titles</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] = </span><span class="string">'three'</span><span class="keyword">;<br />
</span><span class="default">$titles</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = </span><span class="string">'two'</span><span class="keyword">;<br />
</span><span class="default">$titles</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="string">'one'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$titles</span><span class="keyword">);<br />
&nbsp;<br />
foreach (</span><span class="default">$titles </span><span class="keyword">as </span><span class="default">$t </span><span class="keyword">) {<br />
print </span><span class="string">"title=</span><span class="default">$t</span><span class="string"> "</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
will display:<br />
<br />
Array ( [3] =&gt; three [2] =&gt; two [1] =&gt; one )<br />
title=three title=two title=one<br />
<br />
If you want the items coming out in the correct order you need to use sort<br />
<br />
<span class="default">&lt;?php <br />
sort</span><span class="keyword">(</span><span class="default">$titles</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$titles</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Array ( [0] =&gt; one [1] =&gt; three [2] =&gt; two )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90492""></a>
  <div class="note">
   <strong class="user">grobemo</strong>
   <a href="#90492" class="date">24-Apr-2009 11:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You may want to do something different on the last iteration through a foreach loop. For instance, if you're printing a series of HTML list elements, you may want to add a class like 'last' to the final &lt;li&gt; element. <br />
<br />
I had trouble finding a good way to do this with a foreach loop. The following code illustrates the method I worked out.<br />
<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= array(</span><span class="string">'apples'</span><span class="keyword">,</span><span class="string">'bananas'</span><span class="keyword">,</span><span class="string">'cranberries'</span><span class="keyword">,</span><span class="string">'durians'</span><span class="keyword">);<br />
</span><span class="default">$last_item </span><span class="keyword">= </span><span class="default">end</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
<br />
foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">$item </span><span class="keyword">== </span><span class="default">$last_item</span><span class="keyword">) { <br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"I like to eat " </span><span class="keyword">. </span><span class="default">$item</span><span class="keyword">; <br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
The foreach loop outputs: 'I like to eat durians'.<br />
<br />
Technically, you could just use if ($item == end($array)), but I assume that would require more processing time.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90388""></a>
  <div class="note">
   <strong class="user">strata_ranger at hotmail dot com</strong>
   <a href="#90388" class="date">19-Apr-2009 10:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that foreach() iterates through an array in the same order that its elements were defined.&nbsp; If you want to iterate through an array in a different order, you will need to sort the array prior to entering the loop.<br />
<br />
For example:<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Iterate through an array in reverse order,<br />
// maintaining key association (i.e. for associative arrays)<br />
</span><span class="keyword">foreach(</span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">) as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">)<br />
{<br />
&nbsp; . . .<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90185""></a>
  <div class="note">
   <strong class="user">timgolding_10 at hotmail dot com</strong>
   <a href="#90185" class="date">09-Apr-2009 02:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's an example where one can loop through two or more arrays in one loop. this example has two arrays.<br />
<br />
<span class="default">&lt;?php<br />
$array1</span><span class="keyword">=array(</span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">, </span><span class="string">"c"</span><span class="keyword">);<br />
</span><span class="default">$array2</span><span class="keyword">=array(</span><span class="string">"1"</span><span class="keyword">, </span><span class="string">"2"</span><span class="keyword">, </span><span class="string">"3"</span><span class="keyword">);<br />
foreach(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">) as </span><span class="default">$value</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$value</span><span class="keyword">;<br />
}<br />
</span><span class="comment">// abc123<br />
</span><span class="default">?&gt;<br />
</span><br />
For more arrays just add them as additional arguments to the array_merge function. This example isn't very useful if your loop needs to return the keys for numeric indexed arrays. For associative arrays you can return the key however must be certain that all the indexes are unique across all arrays.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88578""></a>
  <div class="note">
   <strong class="user">tedivm at tedivm dot com</strong>
   <a href="#88578" class="date">29-Jan-2009 02:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
foreach and the while/list/each methods are not completely identical, and there are occasions where one way is beneficial over the other.<br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">);<br />
<br />
foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$value </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Output:<br />
1 2 3 4 5 6 7 8 9 <br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">);<br />
<br />
while (list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">))<br />
{<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$value </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Output:<br />
1 3 5 7 9<br />
<br />
<br />
[EDIT BY danbrown AT php DOT net: Contains a typofix by (scissor AT phplabs DOT pl) on 30-JAN-2009.]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86852""></a>
  <div class="note">
   <strong class="user">zodiac2800 at msn dot com</strong>
   <a href="#86852" class="date">06-Nov-2008 09:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a way to declare global variable variables using a function.<br />
<br />
This particular example handles an array that contains names of $_POST items. This is to avoid the notices that php gives when checking an unused $_POST.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">check </span><span class="keyword">(</span><span class="default">$inputs</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$inputs </span><span class="keyword">as </span><span class="default">$input</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global $</span><span class="default">$input</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $</span><span class="default">$input </span><span class="keyword">= isset(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">$input</span><span class="keyword">]) ? </span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">$input</span><span class="keyword">] : </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85953""></a>
  <div class="note">
   <strong class="user">Robin Leffmann</strong>
   <a href="#85953" class="date">25-Sep-2008 06:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should be noted that when using foreach to pass an array's key ($key =&gt; $value), the key must be a string and not binary content - containing 0's, f.e., as was my case when i used foreach to parse bencoded data handed back to me from a bittorrent tracker scraping - as this will throw foreach off and hand you a key that is binary different than the actual content of the array.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85773""></a>
  <div class="note">
   <strong class="user">rhi</strong>
   <a href="#85773" class="date">17-Sep-2008 03:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you use foreach with references, don't forget to unset the reference if you are not sure that a later piece of code doesn't use the same variable name. Example:<br />
<br />
<span class="default">&lt;?php<br />
$latest_tutorials </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">queryAll</span><span class="keyword">(</span><span class="string">"select * from tutorials"</span><span class="keyword">...);<br />
foreach (</span><span class="default">$latest_tutorials </span><span class="keyword">as &amp;</span><span class="default">$tut</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tut</span><span class="keyword">[</span><span class="string">"comments"</span><span class="keyword">] = </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">queryOne</span><span class="keyword">(</span><span class="string">"select count(*) ..."</span><span class="keyword">);<br />
</span><span class="comment">// ...<br />
</span><span class="default">$tut </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">queryRow</span><span class="keyword">(</span><span class="string">"..."</span><span class="keyword">);<br />
<br />
</span><span class="default">print_tutorials</span><span class="keyword">(</span><span class="default">$latest_tutorials</span><span class="keyword">);<br />
</span><span class="default">print_tutorial</span><span class="keyword">(</span><span class="default">$tut</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Here the last entry of latest_tutorials will be replaced by the row that is fetched by the $tut = $db-&gt;queryRow("..."); line because $tut is still referencing the last array entry. Solution:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach (</span><span class="default">$latest_tutorials </span><span class="keyword">as &amp;</span><span class="default">$tut</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tut</span><span class="keyword">[</span><span class="string">"comments"</span><span class="keyword">] = </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">queryOne</span><span class="keyword">(</span><span class="string">"select count(*) ..."</span><span class="keyword">);<br />
unset(</span><span class="default">$tut</span><span class="keyword">);<br />
</span><span class="comment">// ...<br />
</span><span class="default">$tut </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">queryRow</span><span class="keyword">(</span><span class="string">"..."</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85120""></a>
  <div class="note">
   <strong class="user">brian at diamondsea dot com</strong>
   <a href="#85120" class="date">15-Aug-2008 08:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A common problem is having PHP generate an error when trying to iterate through an array that may sometimes have no data in it.&nbsp; This causes PHP to generate a warning such as:<br />
<br />
Warning: Invalid argument supplied for foreach() in test.php on line 14<br />
<br />
You can prevent this error by type-casting the foreach variable as an array type using "(array)" before the array variable name.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// double any value whose key starts with 'b'<br />
</span><span class="default">$arr </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="string">'b1'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">, </span><span class="string">'b2'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">=&gt;</span><span class="default">4</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">);<br />
</span><span class="default">$non_array </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Normal usage with an array<br />
</span><span class="keyword">print </span><span class="string">"Test 1:\n"</span><span class="keyword">;<br />
foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"Key </span><span class="default">$key</span><span class="string">, Value </span><span class="default">$val</span><span class="string">\n"</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="comment">// Normal usage with a non-array (undefined or otherwise empty data set)<br />
// Outputs: Warning: Invalid argument supplied for foreach() in test.php on line 16<br />
</span><span class="keyword">print </span><span class="string">"Test 2:\n"</span><span class="keyword">;<br />
foreach (</span><span class="default">$non_array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"Key </span><span class="default">$key</span><span class="string">, Value </span><span class="default">$val</span><span class="string">\n"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// By casting the $non_array to an (array) type, it will function without error, skipping the loop<br />
</span><span class="keyword">print </span><span class="string">"Test 3:\n"</span><span class="keyword">;<br />
foreach ((array) </span><span class="default">$non_array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"Key </span><span class="default">$key</span><span class="string">, Value </span><span class="default">$val</span><span class="string">\n"</span><span class="keyword">;<br />
}<br />
<br />
print </span><span class="string">"Done.\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Outputs: <br />
<br />
Test 1:<br />
Key a, Value 1<br />
Key b1, Value 2<br />
Key b2, Value 3<br />
Key c, Value 4<br />
Key d, Value 5<br />
Test 2:<br />
<br />
Warning: Invalid argument supplied for foreach() in /home/bgallagher/test.php on line 16<br />
Test 3:<br />
Done.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82511""></a>
  <div class="note">
   <strong class="user">adam dot sindelar at gmail dot com</strong>
   <a href="#82511" class="date">14-Apr-2008 06:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can also use the alternative syntax for the foreach cycle:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$element</span><span class="keyword">):<br />
&nbsp; </span><span class="comment">#do something<br />
</span><span class="keyword">endforeach;<br />
</span><span class="default">?&gt;<br />
</span><br />
Just thought it worth mentioning.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81459""></a>
  <div class="note">
   <strong class="user">marian at devourmedia dot com</strong>
   <a href="#81459" class="date">28-Feb-2008 05:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Also, do not forget that foreach is not useful<br />
if you change the value inside of the loop.<br />
<br />
For example:<br />
<br />
<span class="default">&lt;?php<br />
$t</span><span class="keyword">=array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'1'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">);<br />
foreach(</span><span class="default">$t </span><span class="keyword">as </span><span class="default">$var</span><span class="keyword">=&gt;</span><span class="default">$val</span><span class="keyword">)<br />
{<br />
</span><span class="default">$t</span><span class="keyword">=array();<br />
echo </span><span class="string">"val=</span><span class="keyword">{</span><span class="default">$val</span><span class="keyword">}</span><span class="string">&lt;br&gt;"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
is still showing the contents of the array $t.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78788""></a>
  <div class="note">
   <strong class="user">henrik at newdawn dot dk</strong>
   <a href="#78788" class="date">27-Oct-2007 03:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As stated further up the foreach is consuming a lot of memory if used within large arrays - that is - if the array consists of for instance large objects. I had a case where a foreach caused me to run out of the 256 MB memory that PHP is allowed to handle - but changing to a for() statement completly removed both memory and CPU load.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77382""></a>
  <div class="note">
   <strong class="user">tcrosby at gmail dot com</strong>
   <a href="#77382" class="date">27-Aug-2007 06:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using the much-maligned ability of foreach to work on references rather than copies, it becomes possible to recurse indefinitely into deep arrays without the need to know beforehand how deep they go.&nbsp; Consider the following example (which I use to sanitize input):<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Sanitize as a function to allow recursing; original array passed by reference<br />
</span><span class="keyword">function </span><span class="default">sanitize</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as &amp;</span><span class="default">$data</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)) { </span><span class="comment">// If it's not an array, clean it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="string">'\\' </span><span class="keyword">. </span><span class="default">$data</span><span class="keyword">; </span><span class="comment">// addslashes(), mysql_real_escape_string() or whatever you wish to use, this is merely a simple example<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else { </span><span class="comment">// If it IS an array, call the function on it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">sanitize</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">// Test case<br />
</span><span class="default">$test </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">4<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">5</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">6<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
</span><span class="comment">// Output<br />
</span><span class="default">sanitize</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
<br />
</span><span class="comment">/*<br />
<br />
Output:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; \0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; \1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; \2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; \3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; \4<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; \5<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; \6<br />
)<br />
<br />
*/<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
When first called on $test, it passes a reference to the original $test array to the sanitize function, which begins to iterate through its contents with the immediate foreach loop.&nbsp; Each value that is not in itself an array gets sanitized as normal, and as both the foreach loop and the function itself are acting by reference, all changes happen directly to the contents of the superglobal rather than to copies.&nbsp; If the value given IS an array, it then calls the same function on it.&nbsp; The key here is that both the function and the foreach loop work by reference, meaning that you can call the calling function while in the foreach loop and all changes are still applied to the original array, without corruption of the array pointer, as it remains intact for each level of the array.&nbsp; When the end of an array is reached, the function simply returns; if it was a deeper-level array, the parent function (and parent foreach loop) continue as they were; if the top-level loop ends, then the function returns to the main code, having acted on the entire array.&nbsp; As everything operates within the scope of the sanitize function, you even avoid the danger of leaving the last reference set, as $data is not available outside the scope of the function in which any particular loop operates.&nbsp; While this might sound complicated at first, the result is that by passing to foreach by reference, true indefinite recursion is possible.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76133""></a>
  <div class="note">
   <strong class="user">Luke at chaoticlogic dot net</strong>
   <a href="#76133" class="date">02-Jul-2007 01:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Alright, I had a little error. I had one foreach() declaration, and then another foreach() declaration.<br />
<br />
They went:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//$connections is an array of Socket resources<br />
</span><span class="keyword">foreach (</span><span class="default">$connections </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; &amp;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//the code here is impertinent <br />
<br />
</span><span class="keyword">}<br />
<br />
</span><span class="comment">//$users is an associative array<br />
</span><span class="keyword">foreach (</span><span class="default">$users </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; &amp;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//the code here is impertinent <br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
Alright, now, what error was produced as a result of this?<br />
This one:<br />
"Warning: Cannot use scalar value as array in filename.php on line 69."<br />
<br />
I then realized something; the reason for this came from the fact that I used $key, and $value for both of them in the exact same way.<br />
<br />
As a response to this, I've developed two ways to fix this:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//add this to the end of every foreach() you use<br />
</span><span class="keyword">unset(</span><span class="default">$key</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">)<br />
</span><span class="default">?&gt;<br />
</span><br />
OR<br />
<br />
Simply use different variables for each one.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72647""></a>
  <div class="note">
   
   <a href="#72647" class="date">27-Jan-2007 10:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is an obvious question to most of the readers, but it took me about two precious minutes to figure out, so I figured I will share it will you:<br />
<br />
What will be the output of the following statement:<br />
<span class="default">&lt;?php<br />
$data </span><span class="keyword">= array(</span><span class="string">'1' </span><span class="keyword">=&gt; </span><span class="string">'field1'</span><span class="keyword">, </span><span class="string">'2' </span><span class="keyword">=&gt; </span><span class="string">'field2'</span><span class="keyword">);<br />
foreach (</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$field_index </span><span class="keyword">=&gt; </span><span class="default">$field_name</span><span class="keyword">);<br />
{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$field_name</span><span class="string">"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Correct answer is 'field2', and not 'field1field2'. The forgotten semicolon at the foreach line does not trigger a syntax error, but php treats it as an empty statement..<br />
<br />
and then the block is run once with the last value set into $field_name.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72351""></a>
  <div class="note">
   <strong class="user">Timon Van Overveldt</strong>
   <a href="#72351" class="date">15-Jan-2007 08:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Why not just do this?<br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br />
foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$i </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$value </span><span class="keyword">* </span><span class="default">2</span><span class="keyword">;<br />
}<br />
</span><span class="comment">// $arr is now array(2, 4, 6, 8)<br />
</span><span class="default">?&gt;</span> <br />
<br />
No need for references, so it works in both PHP4 and PHP5.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71854""></a>
  <div class="note">
   <strong class="user">simplex</strong>
   <a href="#71854" class="date">19-Dec-2006 12:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"As of PHP 5, you can easily modify array's elements by preceding $value with &amp;. This will assign reference instead of copying the value."<br />
<br />
There are cases where array_walk or array_map are inadequate (conditional required) or you're just too lazy to write a function and pass values to it for use with array_map...<br />
<br />
My solution to foreach for php 4 and 5 to modify values of an array directly:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$testarr </span><span class="keyword">= array(</span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">"d" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">);<br />
<br />
</span><span class="default">$testarr_keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$testarr</span><span class="keyword">);<br />
</span><span class="default">$testarr_values </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$testarr</span><span class="keyword">);<br />
<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$testarr</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$testarr</span><span class="keyword">[</span><span class="default">$testarr_keys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]] = </span><span class="default">$testarr_values</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] * </span><span class="default">2</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$testarr</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71613""></a>
  <div class="note">
   <strong class="user">robycar at libero dot com</strong>
   <a href="#71613" class="date">07-Dec-2006 11:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
some useful functions for testing boolean values<br />
<br />
<span class="default">&lt;?php<br />
$trueValues </span><span class="keyword">= array(</span><span class="string">'1'</span><span class="keyword">, </span><span class="string">'true'</span><span class="keyword">, </span><span class="string">'t'</span><span class="keyword">, </span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'yes'</span><span class="keyword">, </span><span class="string">'vero'</span><span class="keyword">, </span><span class="string">'v'</span><span class="keyword">); </span><span class="comment">//edit with locale values<br />
</span><span class="default">$falseValues </span><span class="keyword">= array(</span><span class="string">'0'</span><span class="keyword">, </span><span class="string">'false'</span><span class="keyword">, </span><span class="string">'f'</span><span class="keyword">, </span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'no'</span><span class="keyword">, </span><span class="string">'falso'</span><span class="keyword">); </span><span class="comment">//edit with locale values<br />
<br />
</span><span class="keyword">function </span><span class="default">str_to_bool</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp; foreach (</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'trueValues'</span><span class="keyword">] as </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">strcasecmp</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'falseValues'</span><span class="keyword">] as </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">strcasecmp</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">NULL</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">str_is_true</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp; return (</span><span class="default">str_to_bool</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) === </span><span class="default">true</span><span class="keyword">);<br />
}<br />
<br />
function </span><span class="default">str_is_false</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp; return </span><span class="default">str_to_bool</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) === </span><span class="default">false</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/* Test */<br />
</span><span class="default">str_to_bool</span><span class="keyword">(</span><span class="string">'false'</span><span class="keyword">); </span><span class="comment">//return false<br />
</span><span class="default">str_to_bool</span><span class="keyword">(</span><span class="string">'vero'</span><span class="keyword">); </span><span class="comment">// return true<br />
</span><span class="default">str_to_bool</span><span class="keyword">(</span><span class="string">'php'</span><span class="keyword">); </span><span class="comment">//return null<br />
</span><span class="default">str_is_true</span><span class="keyword">(</span><span class="string">'php'</span><span class="keyword">); </span><span class="comment">//return false<br />
</span><span class="default">str_is_false</span><span class="keyword">(</span><span class="string">'php'</span><span class="keyword">); </span><span class="comment">//return false<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="66833""></a>
  <div class="note">
   <strong class="user">gherson</strong>
   <a href="#66833" class="date">30-May-2006 12:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To "foreach" over the characters of a string, first "preg_split" the string into an array:<br />
<span class="default">&lt;?php<br />
$string</span><span class="keyword">=</span><span class="string">"string"</span><span class="keyword">;<br />
</span><span class="default">$array </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">'//'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">PREG_SPLIT_NO_EMPTY</span><span class="keyword">);<br />
foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$char</span><span class="keyword">) print(</span><span class="default">$char</span><span class="keyword">.</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>This outputs:<br />
s<br />
t<br />
r<br />
i<br />
n<br />
g</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61673""></a>
  <div class="note">
   <strong class="user">daniel dot oconnor at gmail dot com</strong>
   <a href="#61673" class="date">08-Feb-2006 10:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Dangers with References<br />
<br />
<span class="default">&lt;?php<br />
$months </span><span class="keyword">= array(</span><span class="string">"Jan"</span><span class="keyword">, </span><span class="string">"Feb"</span><span class="keyword">, </span><span class="string">"March"</span><span class="keyword">);<br />
<br />
foreach (</span><span class="default">$months </span><span class="keyword">as &amp;</span><span class="default">$month</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">.= </span><span class="string">"Beep"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$months</span><span class="keyword">);<br />
<br />
foreach (</span><span class="default">$months </span><span class="keyword">as </span><span class="default">$month</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%s\n"</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">);<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Because $month is a reference to $months[2], iterating again with the same varible name causes $months[2] to be overwritten! Oh no!<br />
<br />
Ouput:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; JanBeep<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; FebBeep<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; MarchBeep<br />
)<br />
JanBeep<br />
FebBeep<br />
FebBeep</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60806""></a>
  <div class="note">
   <strong class="user">RabidDog</strong>
   <a href="#60806" class="date">17-Jan-2006 02:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Pretty weird but for future reference<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//doesn't multiply the last value<br />
</span><span class="keyword">foreach (</span><span class="default">$ar </span><span class="keyword">as &amp;</span><span class="default">$v</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">*= </span><span class="default">2</span><span class="keyword">;<br />
}<br />
foreach(</span><span class="default">$ar </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$v</span><span class="keyword">. </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;&nbsp; <br />
}<br />
</span><span class="comment">//works fine<br />
</span><span class="keyword">foreach (</span><span class="default">$ar </span><span class="keyword">as &amp;</span><span class="default">$o</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$o </span><span class="keyword">*= </span><span class="default">2</span><span class="keyword">;<br />
}<br />
foreach(</span><span class="default">$ar </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$v</span><span class="keyword">. </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;&nbsp; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58630""></a>
  <div class="note">
   <strong class="user">janezr at jcn dot si</strong>
   <a href="#58630" class="date">10-Nov-2005 01:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to "look-ahead" values in an associative or non-continuous array, this might help:<br />
<br />
<span class="default">&lt;?php<br />
$myArray </span><span class="keyword">= {</span><span class="string">'one'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="string">'two'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">,</span><span class="string">'five'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">,</span><span class="string">'three'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">}<br />
<br />
</span><span class="default">$all_keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">);<br />
foreach ( </span><span class="default">$all_keys </span><span class="keyword">as </span><span class="default">$key_index </span><span class="keyword">=&gt; </span><span class="default">$key </span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$value </span><span class="keyword">=&amp; </span><span class="default">$myArray</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp; </span><span class="comment">// $all_keys[$key_index+2] gives null if we go past the array boundary - be carefull there<br />
&nbsp; </span><span class="default">$value2 </span><span class="keyword">=&amp; </span><span class="default">$myArray</span><span class="keyword">[</span><span class="default">$all_keys</span><span class="keyword">[</span><span class="default">$key_index</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">]] ; <br />
&nbsp; ...<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55152""></a>
  <div class="note">
   <strong class="user">mikeb at tracersinfo dot com</strong>
   <a href="#55152" class="date">26-Jul-2005 10:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using PHP5's foreach "as reference" can bite you!<br />
<br />
Three guys in my office spent about a day chasing this one's tail, that was causing aberrant behavior in the values of elements of an array.&nbsp; It turns out to be a consequence of the nature of references, generally.<br />
<br />
If you create a reference to a variable, all names for that variable (including the original) BECOME REFERENCES.&nbsp; To paraphrase "The Highlander," if you want a name to OWN a piece of data, "there can be only one."<br />
<br />
To illustrate this point, consider the following code:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$f </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; array(</span><span class="string">'value' </span><span class="keyword">=&gt; </span><span class="string">'three'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="string">'value' </span><span class="keyword">=&gt; </span><span class="string">'three'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; );<br />
<br />
foreach ( </span><span class="default">$f </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; &amp;</span><span class="default">$v </span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$v</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">] = </span><span class="string">'one'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">$f</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">$f</span><span class="keyword">;<br />
<br />
</span><span class="default">$b</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'value'</span><span class="keyword">] = </span><span class="string">'two'</span><span class="keyword">;<br />
</span><span class="default">$b</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'value'</span><span class="keyword">] = </span><span class="string">'two'</span><span class="keyword">;<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Upon execution, you will find that, although you would expect $a to contain two arrays with 'value' of 'one', $a and $b are identical -- i.e., the changes of []['value'] to 'two' have happened in both arrays.&nbsp; But, upon further examination of the var_dumps, you will see that both sets' elements [0] and [1] are preceded with "&amp;":&nbsp; they are references!<br />
<br />
The easy solution to this problem turns out to be:&nbsp; unset the foreach "as-reference" variable ($v) at the bottom of your foreach loop.&nbsp; This allows the original variable (or array member) to resume ownership of the value and dissolves its "reference-ness".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54721""></a>
  <div class="note">
   <strong class="user">magistrata at gmail dot com</strong>
   <a href="#54721" class="date">13-Jul-2005 09:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I use this code to do a simple cleanup on information heading from an HTML form into a database:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">foreach (</span><span class="default">$_POST </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; $</span><span class="default">$key </span><span class="keyword">= </span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">));<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53355""></a>
  <div class="note">
   
   <a href="#53355" class="date">29-May-2005 10:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
How To Use References In Foreach Safely And Sanely In PHP 4.<br />
<br />
There are two really really important points to remember about foreach and references:<br />
1. foreach makes a copy<br />
2. references (and unset!) work by directly manipulating the symbol table<br />
<br />
In practice, this means that if you have an array of objects (or arrays) and you need to work on them *in-place* in a foreach loop, you have to do this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach( </span><span class="default">$object_list </span><span class="keyword">as </span><span class="default">$id </span><span class="keyword">=&gt; </span><span class="default">$the_object </span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$the_object </span><span class="keyword">= &amp; </span><span class="default">$object_list</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">]; </span><span class="comment">// Re-assign the variable to point to the real object<br />
&nbsp;&nbsp; </span><span class="keyword">....<br />
&nbsp;&nbsp; unset(</span><span class="default">$the_object</span><span class="keyword">); </span><span class="comment">// Break the link to the object so that foreach doesn't copy the next one on top of it.<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
This really works. I have used it in dozens of places. Yes, you need it all, including the unset(). You will get extremely hard-to-find bugs if you leave out the unset().<br />
<br />
Static.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53047""></a>
  <div class="note">
   <strong class="user">flobee at gmail dot com</strong>
   <a href="#53047" class="date">21-May-2005 01:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
be aware! take the note in the manual serious: "foreach operates on a copy of the specified array"<br />
when working with complex systems you may get memory problems because of all this copies of arrays.<br />
<br />
i love this function (easy to use) and use it more often than "for" or "while" functions but now i have really problems on this and finally found the reason (which can be a mess to find out)! <br />
the sum of memory usage sometimes can be *2 than you really need.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52892""></a>
  <div class="note">
   <strong class="user">Paul Chateau</strong>
   <a href="#52892" class="date">16-May-2005 11:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had the same problem with foreach() and a recursiv function. If you don't want to spend about 1 or 2 hours to solve this problem, just use for() loops instead of foreach().<br />
Some Example:<br />
<br />
<span class="default">&lt;?php<br />
$arr</span><span class="keyword">[] = array(</span><span class="default">1</span><span class="keyword">,</span><span class="string">"item1"</span><span class="keyword">);<br />
</span><span class="default">$arr</span><span class="keyword">[] = array(</span><span class="default">2</span><span class="keyword">,</span><span class="string">"item2"</span><span class="keyword">);<br />
</span><span class="default">$arr</span><span class="keyword">[] = array(</span><span class="default">1</span><span class="keyword">,</span><span class="string">"item3"</span><span class="keyword">);<br />
</span><span class="comment">//$arr[] = ...<br />
<br />
//doesn't work<br />
</span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) {<br />
&nbsp;&nbsp; global </span><span class="default">$arr</span><span class="keyword">; </span><span class="comment">// some Array<br />
&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">$value</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="default">$x</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$value</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">foo</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">//just use this<br />
</span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) {<br />
&nbsp;&nbsp; global </span><span class="default">$arr</span><span class="keyword">; </span><span class="comment">// some Array<br />
&nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] == </span><span class="default">$x</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">].</span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">foo</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Paul</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46348""></a>
  <div class="note">
   <strong class="user">gardan at gmx dot de</strong>
   <a href="#46348" class="date">07-Oct-2004 12:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
(PHP 5.0.2)<br />
Pay attention if using the same variable for $value in both referenced and unreferenced loops.<br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(</span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">), </span><span class="default">2 </span><span class="keyword">=&gt; array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">), </span><span class="default">3 </span><span class="keyword">=&gt; array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));<br />
foreach(</span><span class="default">$arr </span><span class="keyword">as &amp;</span><span class="default">$value</span><span class="keyword">) { }<br />
foreach(array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">) as </span><span class="default">$value</span><span class="keyword">) { }<br />
echo </span><span class="default">$test</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];<br />
</span><span class="default">?&gt;<br />
</span><br />
What happens here is that after the first foreach() loop, you have in $value a reference to the last element of $arr (here: array(1, 2)).<br />
<br />
Upon entering the second foreach(), php assigns the value. Now value is assigned to where $value (which is still a reference) points, that is, the last element of $arr.<br />
<br />
Your output will be "5", not the expected "Array". To be on the safe side, unset($value) before entering the next foreach().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41645""></a>
  <div class="note">
   <strong class="user">scott at slerman dot net</strong>
   <a href="#41645" class="date">17-Apr-2004 08:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Apparently the behavior of foreach with classes changed in PHP5. Normally, foreach operates on a copy of the array. If you have something like<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="string">"foo"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
the original array will not be modified. However, testing this code on PHP5RC1<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">foobar </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$b</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">foobar</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">= </span><span class="string">"foo"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">b </span><span class="keyword">= </span><span class="string">"bar"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= new </span><span class="default">foobar</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= new </span><span class="default">foobar</span><span class="keyword">;<br />
</span><span class="default">$c </span><span class="keyword">= new </span><span class="default">foobar</span><span class="keyword">;<br />
<br />
</span><span class="default">$arr </span><span class="keyword">= array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">$a</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">$b</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">$c</span><span class="keyword">);<br />
<br />
foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$e</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">= </span><span class="string">'bah'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">b </span><span class="keyword">= </span><span class="string">'blah'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
resulted in the following output:<br />
<br />
array(3) {<br />
&nbsp; ["a"]=&gt;<br />
&nbsp; object(foobar)#1 (2) {<br />
&nbsp;&nbsp;&nbsp; ["a"]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(3) "bah"<br />
&nbsp;&nbsp;&nbsp; ["b"]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(4) "blah"<br />
&nbsp; }<br />
&nbsp; ["b"]=&gt;<br />
&nbsp; object(foobar)#2 (2) {<br />
&nbsp;&nbsp;&nbsp; ["a"]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(3) "bah"<br />
&nbsp;&nbsp;&nbsp; ["b"]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(4) "blah"<br />
&nbsp; }<br />
&nbsp; ["c"]=&gt;<br />
&nbsp; object(foobar)#3 (2) {<br />
&nbsp;&nbsp;&nbsp; ["a"]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(3) "bah"<br />
&nbsp;&nbsp;&nbsp; ["b"]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(4) "blah"<br />
&nbsp; }<br />
}<br />
<br />
It would seem that classes are actually passed by reference in foreach, or at least that methods are called on the original objects.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39995""></a>
  <div class="note">
   <strong class="user">jazfresh at hotmail dot com</strong>
   <a href="#39995" class="date">17-Feb-2004 10:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a really really big pitfall to watch out for if you are using "foreach" and references.<br />
<br />
Recall this example:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= </span><span class="string">"Hello"</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">=&amp; </span><span class="default">$a</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// $b now refers to "Hello"<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="string">"Goodbye"</span><span class="keyword">; </span><span class="comment">// BOTH $a and $b now refer to "Goodbye"<br />
</span><span class="default">?&gt;<br />
</span><br />
This also applies to the loop variable in a foreach construct. This can be a problem if the loop variable has already been defined as a reference to something else.<br />
<br />
For example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Create some objects and store them in an array<br />
</span><span class="default">$my_objects </span><span class="keyword">= array();<br />
for(</span><span class="default">$a </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$a </span><span class="keyword">&lt; </span><span class="default">$num_objects</span><span class="keyword">; </span><span class="default">$a</span><span class="keyword">++) {<br />
&nbsp; </span><span class="default">$obj </span><span class="keyword">=&amp; new </span><span class="default">MyObject</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">doSomething</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$my_objects</span><span class="keyword">[] =&amp; </span><span class="default">$obj</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// later on in the same function...<br />
</span><span class="keyword">foreach(</span><span class="default">$my_objects </span><span class="keyword">as </span><span class="default">$obj</span><span class="keyword">) { </span><span class="comment">// Note that we are trying to re-use $obj as the loop variable<br />
&nbsp; </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">doSomethingElse</span><span class="keyword">();<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
When the "for" loop exits, $obj is a reference to the last MyObject that was created, which is also the last element in the "my_objects" array.<br />
<br />
On every iteration, the foreach loop will do the equivalent of:<br />
<br />
<span class="default">&lt;?php<br />
$obj </span><span class="keyword">= </span><span class="default">$my_objects</span><span class="keyword">[</span><span class="default">$internal_counter</span><span class="keyword">++];<br />
</span><span class="default">?&gt;<br />
</span><br />
$obj will now refer to the appropriate element in the array.<br />
<br />
But recall the reference example at the top. Because $obj was already defined as a reference, any assignment to $obj will overwrite what $obj was referring to. So in other words, on every foreach loop iteration, the last element in the array will be overwritten with the current array element.<br />
<br />
To avoid this problem, either use a differently named loop variable, or call "unset()" on the loop variable before you begin the foreach().<br />
<br />
It would be more intuitive PHP unset() the loop variable before a foreach began, maybe they'll put that in a later version.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39662""></a>
  <div class="note">
   <strong class="user">andy at barbigerous dot net</strong>
   <a href="#39662" class="date">06-Feb-2004 10:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For dual iteration, the internal pointers may need resetting if they've been previously used in a foreach.<br />
<br />
<span class="default">&lt;?PHP<br />
<br />
</span><span class="keyword">for(<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$someArray1</span><span class="keyword">.</span><span class="default">reset</span><span class="keyword">(), <br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$someArray2</span><span class="keyword">.</span><span class="default">reset</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; list(, </span><span class="default">$someValue1 </span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">( </span><span class="default">$someArray1 </span><span class="keyword">) ,<br />
&nbsp;&nbsp; &nbsp; list(, </span><span class="default">$someValue2 </span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">( </span><span class="default">$someArray2 </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; ;<br />
) {<br />
<br />
&nbsp;echo </span><span class="default">$someValue1</span><span class="keyword">;<br />
&nbsp;echo </span><span class="default">$someValue2</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31455""></a>
  <div class="note">
   <strong class="user">php at electricsurfer dot com</strong>
   <a href="#31455" class="date">22-Apr-2003 01:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Ed Note:&nbsp; You can also use array_keys() so that you don't have to have the $value_copy variable --alindeman at php.net]<br />
<br />
I use the following to modify the original values of the array:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value_copy</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">=&amp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; </span><span class="comment">// ...<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="string">'New Value'</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28092""></a>
  <div class="note">
   <strong class="user">ian at NO_SPAM dot verteron dot net</strong>
   <a href="#28092" class="date">01-Jan-2003 03:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that foreach is faster than while! If you can replace the following:<br />
<br />
<span class="default">&lt;?php<br />
reset</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
while(list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">))<br />
{<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
...with this (although there are functional differences, but for many purposes this replacement will behave the same way)...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
You will notice about 30% - 40% speed increase over many iterations. Might be important for those ultra-tight loops :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25263""></a>
  <div class="note">
   
   <a href="#25263" class="date">17-Sep-2002 09:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"Also note that foreach operates on a copy of the specified array, not the array itself, therefore the array pointer is not modified as with the each() construct and changes to the array element returned are not reflected in the original array."<br />
<br />
In other words, this will work (not too expected):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// ...<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
While this won't:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">while (list(, </span><span class="default">$array</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// ...<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="control-structures.for.html">for</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="control-structures.break.html">break</a></div>
 <div class="up"><a href="language.control-structures.html">Control Structures</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
