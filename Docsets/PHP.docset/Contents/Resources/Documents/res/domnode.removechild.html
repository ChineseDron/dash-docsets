<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Removes child from list of children</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="domnode.normalize.html">DOMNode::normalize</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="domnode.replacechild.html">DOMNode::replaceChild</a></div>
 <div class="up"><a href="class.domnode.html">DOMNode</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="domnode.removechild" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">DOMNode::removeChild</h1>
  <p class="verinfo">(PHP 5)</p><p class="refpurpose"><span class="refname">DOMNode::removeChild</span> &mdash; <span class="dc-title">
   Removes child from list of children
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-domnode.removechild-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <span class="methodname"><b>DOMNode::removeChild</b></span>
    ( <span class="methodparam"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <tt class="parameter">$oldnode</tt></span>
   )</div>

  <p class="para rdfs-comment">
   This functions removes a child from a list of children.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-domnode.removechild-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">oldnode</tt></i></span>
     <dd>

      <p class="para">
       The removed child.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-domnode.removechild-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   If the child could be removed the function returns the old child.
  </p>
 </div>

 <div class="refsect1 errors" id="refsect1-domnode.removechild-errors">
  <h3 class="title">Errors/Exceptions</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><b><tt>DOM_NO_MODIFICATION_ALLOWED_ERR</tt></b></span>
     <dd>

      <p class="para">
       Raised if this node is readonly.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><b><tt>DOM_NOT_FOUND</tt></b></span>
     <dd>

      <p class="para">
       Raised if <i><tt class="parameter">oldnode</tt></i> is not a child of this node.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-domnode.removechild-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   The following example will delete the chapter element of our XML document.
   <div class="example" id="example-4937">
    <p><b>Example #1 Removing a child</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$doc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DOMDocument</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">load</span><span style="color: #007700">(</span><span style="color: #DD0000">'book.xml'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$book&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">documentElement</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;we&nbsp;retrieve&nbsp;the&nbsp;chapter&nbsp;and&nbsp;remove&nbsp;it&nbsp;from&nbsp;the&nbsp;book<br /></span><span style="color: #0000BB">$chapter&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getElementsByTagName</span><span style="color: #007700">(</span><span style="color: #DD0000">'chapter'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">item</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$oldchapter&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">removeChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$chapter</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">saveXML</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;!DOCTYPE book PUBLIC &quot;-//OASIS//DTD DocBook XML V4.1.2//EN&quot; 
          &quot;http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd&quot;&gt;
&lt;book id=&quot;listing&quot;&gt;
 &lt;title&gt;My lists&lt;/title&gt;
 
&lt;/book&gt;
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4938">
    <p><b>Example #2 Preserving the parent node&#039;s namespace URI</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$doc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DOMDocument</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">load</span><span style="color: #007700">(</span><span style="color: #DD0000">'book.xml'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$book&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">documentElement</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;we&nbsp;retrieve&nbsp;the&nbsp;chapter&nbsp;and&nbsp;remove&nbsp;it&nbsp;from&nbsp;the&nbsp;book<br /></span><span style="color: #0000BB">$chapter&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getElementsByTagName</span><span style="color: #007700">(</span><span style="color: #DD0000">'chapter'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">item</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;copy&nbsp;the&nbsp;namespace&nbsp;URI<br /></span><span style="color: #0000BB">$nsuri&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">namespaceURI</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Delete&nbsp;the&nbsp;child&nbsp;node<br /></span><span style="color: #0000BB">$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">removeChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$chapter</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;paste&nbsp;the&nbsp;namespace&nbsp;URI&nbsp;back&nbsp;into&nbsp;the&nbsp;parent&nbsp;node<br /></span><span style="color: #0000BB">$book</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">namespaceURI&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$nsuri</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 <div class="refsect1 notes" id="refsect1-domnode.removechild-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><b class="note">Note</b>: 
   <p class="para">
    After calling this method, the <i>DOMNode::$namespaceURI</i> 
    property on the parent node will be reset to <b><tt>NULL</tt></b>. Above example shows 
    how to work around it.
   </p>
  </p></blockquote>
 </div>

 <div class="refsect1 seealso" id="refsect1-domnode.removechild-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="methodname"><a href="domnode.appendchild.html" class="methodname" rel="rdfs-seeAlso">DOMNode::appendChild()</a> - Adds new child at the end of the children</span></li>
    <li class="member"> <span class="methodname"><a href="domnode.replacechild.html" class="methodname" rel="rdfs-seeAlso">DOMNode::replaceChild()</a> - Replaces a child</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="101387""></a>
  <div class="note">
   <strong class="user">julien dot mulac at gmail dot com</strong>
   <a href="#101387" class="date">14-Dec-2010 02:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For the loop bug, you have to use the parent node of the node itself : <br />
<br />
<span class="default">&lt;?php<br />
$nodeList </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'p'</span><span class="keyword">);<br />
<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$nodeList</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; try {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$old_child </span><span class="keyword">= </span><span class="default">$nodeList</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)-&gt;</span><span class="default">parentNode</span><span class="keyword">-&gt;</span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$nodeList</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">));&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; } catch (</span><span class="default">DOMException $e</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96167""></a>
  <div class="note">
   <strong class="user">drimsun at gmail dot com</strong>
   <a href="#96167" class="date">11-Feb-2010 03:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you try to remove children of a nested node (e.g. a &lt;ul&gt; list that contains another &lt;ul&gt;) and only remove the first level of child nodes, you'll get a messed-up node object.<br />
<br />
Upon re-use of the messed-up node you'll get an error message that says: "Fatal error: Call to a member function blahblah() on a non-object".<br />
<br />
To remove ALL child nodes, use this recursive function instead:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Helper function that removes all child nodes of $node recursively<br />
&nbsp;* (i.e. including child nodes of the child nodes and so forth).<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">remove_children</span><span class="keyword">(&amp;</span><span class="default">$node</span><span class="keyword">) {<br />
&nbsp; while (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">firstChild</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">firstChild</span><span class="keyword">-&gt;</span><span class="default">firstChild</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">remove_children</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">firstChild</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">firstChild</span><span class="keyword">);<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94445""></a>
  <div class="note">
   <strong class="user">Justin Carlson</strong>
   <a href="#94445" class="date">05-Nov-2009 11:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a note, if you remove a node the whitespace it occupied will remain if you save the file.<br />
<br />
To avoid this, use $document-&gt;preserveWhiteSpace = false;<br />
<br />
For Example:<br />
<br />
<span class="default">&lt;?php<br />
$document </span><span class="keyword">= new </span><span class="default">DomDocument</span><span class="keyword">();<br />
</span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">preserveWhiteSpace </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90292""></a>
  <div class="note">
   <strong class="user">crazy888s at hotmail dot com</strong>
   <a href="#90292" class="date">15-Apr-2009 01:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can't remove DOMNodes from a DOMNodeList as you're iterating over them in a foreach loop. For example...<br />
<br />
<span class="default">&lt;?php<br />
$domNodeList </span><span class="keyword">= </span><span class="default">$domDocument</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagname</span><span class="keyword">(</span><span class="string">'p'</span><span class="keyword">);<br />
foreach ( </span><span class="default">$domNodeList </span><span class="keyword">as </span><span class="default">$domElement </span><span class="keyword">) {<br />
&nbsp; </span><span class="comment">//&nbsp; ...do stuff with $domElement...<br />
&nbsp; </span><span class="default">$domElement</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">-&gt;</span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$domElement</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
... will seemingly leave the internal iterator on the foreach out of wack and results will be quite strange. Though, making a queue of items to remove seems to work. For example...<br />
<br />
<span class="default">&lt;?php<br />
$domNodeList </span><span class="keyword">= </span><span class="default">$domDocument</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagname</span><span class="keyword">(</span><span class="string">'p'</span><span class="keyword">);<br />
</span><span class="default">$domElemsToRemove </span><span class="keyword">= array();<br />
foreach ( </span><span class="default">$domNodeList </span><span class="keyword">as </span><span class="default">$domElement </span><span class="keyword">) {<br />
&nbsp; </span><span class="comment">// ...do stuff with $domElement...<br />
&nbsp; </span><span class="default">$domElemsToRemove</span><span class="keyword">[] = </span><span class="default">$domElement</span><span class="keyword">;<br />
}<br />
foreach( </span><span class="default">$domElemsToRemove </span><span class="keyword">as </span><span class="default">$domElement </span><span class="keyword">){<br />
&nbsp; </span><span class="default">$domElement</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">-&gt;</span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$domElement</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88592""></a>
  <div class="note">
   <strong class="user">Justin Sheckler</strong>
   <a href="#88592" class="date">30-Jan-2009 08:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
These two functions might be helpful to anyone trying to delete a node and all of its children:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">deleteNode</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">deleteChildren</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$parent </span><span class="keyword">= </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$oldnode </span><span class="keyword">= </span><span class="default">$parent</span><span class="keyword">-&gt;</span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">);<br />
}<br />
<br />
function </span><span class="default">deleteChildren</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; while (isset(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">firstChild</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">deleteChildren</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">firstChild</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">firstChild</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84574""></a>
  <div class="note">
   <strong class="user">tim cameron ryan</strong>
   <a href="#84574" class="date">19-Jul-2008 01:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Or something like:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">while (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">firstChild</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84257""></a>
  <div class="note">
   <strong class="user">Michael D (DigitalGemstones.com)</strong>
   <a href="#84257" class="date">05-Jul-2008 04:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that iterating through the childNodes array and removing those children will stop the iteration.<br />
<br />
For example:<br />
foreach($node-&gt;childNodes as $child)<br />
{<br />
&nbsp; if(iWantToDeleteThisNode($child))<br />
&nbsp;&nbsp; &nbsp; $child-&gt;parentNode-&gt;removeChild($child);<br />
}<br />
<br />
Will not work.&nbsp; Note that in removing the node, the childNodes array gets rebuilt (it seems) and so only the first item will be removed.&nbsp; In order to properly remove all the children you want to remove, you will need to do something like the following:<br />
<br />
$nodesToDelete = array();<br />
foreach($node-&gt;childNodes as $child)<br />
{<br />
&nbsp; if(iWantToDeleteThisNode($child))<br />
&nbsp;&nbsp;&nbsp; $nodesToDelete[] = $child;<br />
}<br />
foreach($nodesToDelete as $node)<br />
{<br />
&nbsp; $node-&gt;parentNode-&gt;removeChild($node);<br />
}<br />
<br />
I believe this is actually more efficient than the first snippet would be (if it worked) but obviously I cannot benchmark it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82303""></a>
  <div class="note">
   <strong class="user">Wala</strong>
   <a href="#82303" class="date">04-Apr-2008 10:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I used the following to delete an entire node using the child element:<br />
<br />
<span class="default">&lt;?php<br />
$childElement</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">-&gt; </span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$childElement</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
I could not have thought of it without the help of everyone who contributed to this thread.<br />
<br />
Thanks!<br />
<br />
(I had to introduce the extra space between parentNode-&gt;removeChild to get rid of the wordwrap() warning while posting this note)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78326""></a>
  <div class="note">
   <strong class="user">Vasil Rangelov</strong>
   <a href="#78326" class="date">06-Oct-2007 10:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
At the time of writing, I suppose rightfully, removeChild() removes only the selected node, but when you remove an element, it's child elements are not removed. If you want to achieve that, replaceChild() is the solution.<br />
<br />
The following should remove all descendants of the $node DOMNode, regardless of it's name:<br />
<span class="default">&lt;?php<br />
$node</span><span class="keyword">-&gt;</span><span class="default">replaceChild</span><span class="keyword">(new </span><span class="default">DOMElement</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">), </span><span class="default">$node</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>If you're replacing the root element, you must explicitly state that with $node-&gt;documentElement as the second argument.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73812""></a>
  <div class="note">
   <strong class="user">lsoethout at hotmail dot com</strong>
   <a href="#73812" class="date">11-Mar-2007 09:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The previous example is not correct; it only works when the tags are direct childs of the top-level node.<br />
Better is:<br />
<br />
while($elem = $dom-&gt;getElementsByTagName("name")-&gt;item(0)) {<br />
&nbsp;&nbsp; $elem-&gt;parentNode-&gt;removeChild($elem);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69222""></a>
  <div class="note">
   <strong class="user">dave at dgx dot cz</strong>
   <a href="#69222" class="date">27-Aug-2006 06:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
remove all children of a given node (simple way):<br />
<br />
$node-&gt;nodeValue = '';</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56556""></a>
  <div class="note">
   <strong class="user">mytto at openxtrem dot com</strong>
   <a href="#56556" class="date">07-Sep-2005 02:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Back again on removing childs and iterators robustness. <br />
<br />
Things get a bit more complicated when you only want to remove 'some' nodes according to a certain condition. Then you can't just remove the first one repeatedly.<br />
<br />
The trick is to copy the content of the node list into a more robust collection than DOMNodeList, I name array!<br />
<br />
The following piece of code will, for instance, remove all empty child nodes:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Copy childNodes array<br />
</span><span class="default">$childNodes </span><span class="keyword">= array();<br />
foreach(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">childNodes </span><span class="keyword">as </span><span class="default">$childNode</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$childNodes</span><span class="keyword">[] = </span><span class="default">$childNode</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Browse with the copy&nbsp; &nbsp;&nbsp; <br />
</span><span class="keyword">foreach (</span><span class="default">$childNodes </span><span class="keyword">as </span><span class="default">$childNode</span><span class="keyword">) {<br />
&nbsp; if (!</span><span class="default">$childNode</span><span class="keyword">-&gt;</span><span class="default">hasChildNodes</span><span class="keyword">()); {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$childNode</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">-&gt;</span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$childNode</span><span class="keyword">);<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56235""></a>
  <div class="note">
   <strong class="user">karan</strong>
   <a href="#56235" class="date">28-Aug-2005 02:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
can we directly remove a node which has some children or do we need to remove the children first.<br />
<br />
&nbsp;while($mytn-&gt;hasChildNodes()) <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; $mytn-&gt;removeChild($mytn-&gt;childNodes-&gt;item(0));<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
echo $j;//this shows correct no of children<br />
<br />
echo $mytn-&gt;childNodes-&gt;length;//after removing it <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // shows 0..correct<br />
&nbsp;&nbsp;&nbsp; <br />
$dom-&gt;save(net.xml);<br />
<br />
but the changes r not reflected in the xml file</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56103""></a>
  <div class="note">
   <strong class="user">blaine (at) blainegarrett (dot com)</strong>
   <a href="#56103" class="date">23-Aug-2005 10:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This might be obvious, but might help someone as well...<br />
<br />
If you simply have a node that you need to remove (perhaps from an xpath) and don't know the parent node offhand (the examples seem to assume you have the parent in a variable), then you can do something easy like this...<br />
<br />
$node-&gt;parentNode-&gt;removeChild($node);<br />
<br />
parentNode is a scalar property of the Element.<br />
<br />
Hope that helps.<br />
<br />
--<br />
Blaine Garrett<br />
Executive Director of the Art Attack<br />
<a href="http://theartattack.org" rel="nofollow" target="_blank">http://theartattack.org</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53367""></a>
  <div class="note">
   <strong class="user">pedro at leb dot usp dot br</strong>
   <a href="#53367" class="date">30-May-2005 04:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You may also use the hasChild function:<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">while(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">hasChildNodes</span><span class="keyword">()) {<br />
&nbsp; </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">));<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
When you remove a childNode, the next node becomes the first one!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49945""></a>
  <div class="note">
   <strong class="user">vsematika at centrum dot cz</strong>
   <a href="#49945" class="date">13-Feb-2005 03:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those who don't understand &gt;sbeam at onsetcorps dot net on 02-Feb-2005 12:07&lt; 'hack', here's a little discussion:<br />
<br />
First but *wrong* try would be:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach (</span><span class="default">$parent</span><span class="keyword">-&gt;</span><span class="default">childNodes </span><span class="keyword">as </span><span class="default">$child</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$parent</span><span class="keyword">-&gt;</span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>This doesn't work because DOM tree id modified on-the-fly and this confuses foreach loop.<br />
<br />
The idea behind sbeam's trick is that after removing the first item in the first iteration, the second item in childNodes nodelist immediately becomes the first item. That's why we must _always_ remove the first child. Here's another implementation:<br />
<br />
<span class="default">&lt;?php<br />
$count </span><span class="keyword">= </span><span class="default">$parent</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">;<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; </span><span class="default">$oldNode </span><span class="keyword">= </span><span class="default">$parent</span><span class="keyword">-&gt;</span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$parent</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">)); </span><span class="comment">// !!! not item($i) !!!<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49597""></a>
  <div class="note">
   <strong class="user">sbeam at onsetcorps dot net</strong>
   <a href="#49597" class="date">02-Feb-2005 09:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
remove all children of a given node:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
while ($parent-&gt;childNodes-&gt;length) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $parent-&gt;removeChild($parent-&gt;childNodes-&gt;item(0));<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="domnode.normalize.html">DOMNode::normalize</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="domnode.replacechild.html">DOMNode::replaceChild</a></div>
 <div class="up"><a href="class.domnode.html">DOMNode</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
