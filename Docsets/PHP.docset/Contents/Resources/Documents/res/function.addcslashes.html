<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Quote string with slashes in a C style</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="ref.strings.html">String Functions</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.addslashes.html">addslashes</a></div>
 <div class="up"><a href="ref.strings.html">String Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.addcslashes" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">addcslashes</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">addcslashes</span> &mdash; <span class="dc-title">Quote string with slashes in a C style</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.addcslashes-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><b>addcslashes</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$str</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$charlist</tt></span>
   )</div>

  <p class="para rdfs-comment">
   Returns a string with backslashes before characters that are
   listed in <i><tt class="parameter">charlist</tt></i> parameter. 
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.addcslashes-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">str</tt></i></span>
     <dd>

      <p class="para">
       The string to be escaped.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">charlist</tt></i></span>
     <dd>

      <p class="para">
       A list of characters to be escaped. If
       <i><tt class="parameter">charlist</tt></i> contains characters
       <i>\n</i>, <i>\r</i> etc., they are
       converted in C-like style, while other non-alphanumeric characters
       with ASCII codes lower than 32 and higher than 126 converted to
       octal representation.
      </p>
      <p class="para">
       When you define a sequence of characters in the charlist argument
       make sure that you know what characters come between the
       characters that you set as the start and end of the range.
       <div class="informalexample">
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">addcslashes</span><span style="color: #007700">(</span><span style="color: #DD0000">'foo[&nbsp;]'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'A..z'</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;output:&nbsp;&nbsp;\f\o\o\[&nbsp;\]<br />//&nbsp;All&nbsp;upper&nbsp;and&nbsp;lower-case&nbsp;letters&nbsp;will&nbsp;be&nbsp;escaped<br />//&nbsp;...&nbsp;but&nbsp;so&nbsp;will&nbsp;the&nbsp;[\]^_`<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
       Also, if the first character in a range has a higher ASCII value
       than the second character in the range, no range will be
       constructed.  Only the start, end and period characters will be
       escaped. Use the <span class="function"><a href="function.ord.html" class="function">ord()</a></span> function to find the
       ASCII value for a character.
       <div class="informalexample">
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">addcslashes</span><span style="color: #007700">(</span><span style="color: #DD0000">"zoo['.']"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'z..A'</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;output:&nbsp;&nbsp;\zoo['\.']<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
      </p>
      <p class="para">
       Be careful if you choose to escape characters 0, a, b, f, n, r,
       t and v. They will be converted to \0, \a, \b, \f, \n, \r, \t
       and \v.
       In PHP \0 (NULL), \r (carriage return), \n (newline), \f (form feed),
       \v (vertical tab) and \t (tab) are predefined escape sequences, 
       while in C all of these are predefined escape sequences.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.addcslashes-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the escaped string.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.addcslashes-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle">
       <td align="left">5.2.5</td>
       <td align="left">
        The escape sequences \v and \f were added.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.addcslashes-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
    <i><tt class="parameter">charlist</tt></i> like &quot;\0..\37&quot;, which would
    escape all characters with ASCII code between 0 and 31.
   <div class="example" id="example-4364">
    <p><b>Example #1 <span class="function"><b>addcslashes()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$escaped&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">addcslashes</span><span style="color: #007700">(</span><span style="color: #0000BB">$not_escaped</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\0..\37!@\177..\377"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.addcslashes-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.stripcslashes.html" class="function" rel="rdfs-seeAlso">stripcslashes()</a> - Un-quote string quoted with addcslashes</span></li>
    <li class="member"><span class="function"><a href="function.stripslashes.html" class="function" rel="rdfs-seeAlso">stripslashes()</a> - Un-quotes a quoted string</span></li>
    <li class="member"><span class="function"><a href="function.addslashes.html" class="function" rel="rdfs-seeAlso">addslashes()</a> - Quote string with slashes</span></li>
    <li class="member"><span class="function"><a href="function.htmlspecialchars.html" class="function" rel="rdfs-seeAlso">htmlspecialchars()</a> - Convert special characters to HTML entities</span></li>
    <li class="member"><span class="function"><a href="function.quotemeta.html" class="function" rel="rdfs-seeAlso">quotemeta()</a> - Quote meta characters</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="92495""></a>
  <div class="note">
   <strong class="user">kongaspar at gmail dot com</strong>
   <a href="#92495" class="date">27-Jul-2009 05:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Perhaps the following is a more efficient JavaScript escape function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">jsEscape</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">addcslashes</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="string">"\\\'\"&amp;\n\r&lt;&gt;"</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79126""></a>
  <div class="note">
   <strong class="user">stein at visibone dot com</strong>
   <a href="#79126" class="date">12-Nov-2007 03:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
addcslashes() treats NUL as a string terminator:<br />
<br />
&nbsp;&nbsp; assert("any"&nbsp; === addcslashes("any\0body", "-"));<br />
<br />
unless you order it backslashified:<br />
<br />
&nbsp;&nbsp; assert("any\\000body" === addcslashes("any\0body", "\0"));<br />
<br />
(Uncertain whether this should be declared a bug or simply that addcslashes() is not binary-safe, whatever that means.)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78776""></a>
  <div class="note">
   <strong class="user">Johannes</strong>
   <a href="#78776" class="date">26-Oct-2007 05:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be carefull with adding the \ to the list of encoded characters. When you add it at the last position it encodes all encoding slashes. I got a lot of \\\ by this mistake.<br />
<br />
So always encode \ at first.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49226""></a>
  <div class="note">
   <strong class="user">phpcoder at cyberpimp dot pimpdomain dot com</strong>
   <a href="#49226" class="date">20-Jan-2005 12:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Forgot to add something:<br />
The only time you would likely use addcslashes() without specifying the backslash (\) character in charlist is when you are VALIDATING (not encoding!) a data string.<br />
<br />
(Validation ensures that all control characters and other unsafe characters are correctly encoded / escaped, but does not alter any pre-existing escape sequences.)<br />
<br />
You can validate a data string multiple times without fear of "double encoding".&nbsp; A single decoding pass will return the original data, regardless of how many times it was validated.)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49205""></a>
  <div class="note">
   <strong class="user">phpcoder at cyberpimp dot pimpdomain dot com</strong>
   <a href="#49205" class="date">19-Jan-2005 11:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are using addcslashes() to encode text which is to later be decoded back to it's original form, you MUST specify the backslash (\) character in charlist!<br />
<br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $originaltext </span><span class="keyword">= </span><span class="string">'This text does NOT contain \\n a new-line!'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$encoded </span><span class="keyword">= </span><span class="default">addcslashes</span><span class="keyword">(</span><span class="default">$originaltext</span><span class="keyword">, </span><span class="string">'\\'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$decoded </span><span class="keyword">= </span><span class="default">stripcslashes</span><span class="keyword">(</span><span class="default">$encoded</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">//$decoded now contains a copy of $originaltext with perfect integrity<br />
&nbsp; </span><span class="keyword">echo </span><span class="default">$decoded</span><span class="keyword">; </span><span class="comment">//Display the sentence with it's literal \n intact<br />
</span><span class="default">?&gt;<br />
</span><br />
If the '\\' was not specified in addcslashes(), any literal \n (or other C-style special character) sequences in $originaltext would pass through un-encoded, but then be decoded into control characters by stripcslashes() and the data would lose it's integrity through the encode-decode transaction.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42836""></a>
  <div class="note">
   <strong class="user">ruben at intesys dot it</strong>
   <a href="#42836" class="date">31-May-2004 09:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
jsAddSlashes for XHTML documents:<br />
<br />
<span class="default">&lt;?php<br />
header</span><span class="keyword">(</span><span class="string">"Content-type: text/xml"</span><span class="keyword">);<br />
<br />
print &lt;&lt;&lt;EOF<br />
</span><span class="string">&lt;?xml version="1.0"?&gt;<br />
&lt;html&gt;<br />
&lt;head&gt;<br />
&lt;script type="text/javascript"&gt;<br />
<br />
</span><span class="keyword">EOF;<br />
<br />
function </span><span class="default">jsAddSlashes</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pattern </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"/\\\\/"&nbsp; </span><span class="keyword">, </span><span class="string">"/\n/"&nbsp; &nbsp; </span><span class="keyword">, </span><span class="string">"/\r/"&nbsp; &nbsp; </span><span class="keyword">, </span><span class="string">"/\"/"&nbsp; &nbsp; </span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"/\'/"&nbsp; &nbsp; </span><span class="keyword">, </span><span class="string">"/&amp;/"&nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">"/&lt;/"&nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">"/&gt;/"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$replace </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"\\\\\\\\"</span><span class="keyword">, </span><span class="string">"\\n"&nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">"\\r"&nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">"\\\""&nbsp; &nbsp; </span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"\\'"&nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">"\\x26"&nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">"\\x3C"&nbsp;&nbsp; </span><span class="keyword">, </span><span class="string">"\\x3E"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$message </span><span class="keyword">= </span><span class="default">jsAddSlashes</span><span class="keyword">(</span><span class="string">"\"&lt;Hello&gt;\",\r\n'&amp;World'\\!"</span><span class="keyword">);<br />
<br />
print &lt;&lt;&lt;EOF<br />
</span><span class="string">alert("</span><span class="default">$message</span><span class="string">");<br />
&lt;/script&gt;<br />
&lt;/head&gt;<br />
&lt;body&gt;<br />
&lt;h1&gt;Hello, World!&lt;/h1&gt;<br />
&lt;/body&gt;<br />
&lt;/html&gt;<br />
<br />
</span><span class="keyword">EOF;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35975""></a>
  <div class="note">
   
   <a href="#35975" class="date">21-Sep-2003 11:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">jsaddslashes</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)<br />
{<br />
&nbsp;</span><span class="default">$o</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$l</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$l</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;{<br />
&nbsp; </span><span class="default">$c</span><span class="keyword">=</span><span class="default">$s</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp; switch(</span><span class="default">$c</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp; case </span><span class="string">'&lt;'</span><span class="keyword">: </span><span class="default">$o</span><span class="keyword">.=</span><span class="string">'\\x3C'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; case </span><span class="string">'&gt;'</span><span class="keyword">: </span><span class="default">$o</span><span class="keyword">.=</span><span class="string">'\\x3E'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; case </span><span class="string">'\''</span><span class="keyword">: </span><span class="default">$o</span><span class="keyword">.=</span><span class="string">'\\\''</span><span class="keyword">; break;<br />
&nbsp;&nbsp; case </span><span class="string">'\\'</span><span class="keyword">: </span><span class="default">$o</span><span class="keyword">.=</span><span class="string">'\\\\'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; case </span><span class="string">'"'</span><span class="keyword">:&nbsp; </span><span class="default">$o</span><span class="keyword">.=</span><span class="string">'\\"'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; case </span><span class="string">"\n"</span><span class="keyword">: </span><span class="default">$o</span><span class="keyword">.=</span><span class="string">'\\n'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; case </span><span class="string">"\r"</span><span class="keyword">: </span><span class="default">$o</span><span class="keyword">.=</span><span class="string">'\\r'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; default:<br />
&nbsp;&nbsp; </span><span class="default">$o</span><span class="keyword">.=</span><span class="default">$c</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp;}<br />
&nbsp;return </span><span class="default">$o</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span>&lt;script language="javascript"&gt;<br />
document.write("&lt;? echo jsaddslashes('&lt;h1 style="color:red"&gt;hello&lt;/h1&gt;'); ?&gt;");<br />
&lt;/script&gt;<br />
<br />
output :<br />
<br />
&lt;script language="javascript"&gt;<br />
document.write("\x3Ch1 style=\"color:red\"\x3Ehello\x3C/h1\x3E");<br />
&lt;/script&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21578""></a>
  <div class="note">
   <strong class="user">natNOSPAM at noworrie dot NO_SPAM dot com</strong>
   <a href="#21578" class="date">17-May-2002 04:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have found the following to be much more appropriate code example:<br />
<br />
<span class="default">&lt;?php<br />
$escaped </span><span class="keyword">= </span><span class="default">addcslashes</span><span class="keyword">(</span><span class="default">$not_escaped</span><span class="keyword">, </span><span class="string">"\0..\37!@\@\177..\377"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This will protect original, innocent backslashes from stripcslashes.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="ref.strings.html">String Functions</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.addslashes.html">addslashes</a></div>
 <div class="up"><a href="ref.strings.html">String Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
