<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Computes the difference of arrays with additional index check</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-count-values.html">array_count_values</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-diff-key.html">array_diff_key</a></div>
 <div class="up"><a href="ref.array.html">Array Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.array-diff-assoc" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_diff_assoc</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.3.0, PHP 5)</p><p class="refpurpose"><span class="refname">array_diff_assoc</span> &mdash; <span class="dc-title">Computes the difference of arrays with additional index check</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.array-diff-assoc-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><b>array_diff_assoc</b></span>
    ( <span class="methodparam"><span class="type">array</span> <tt class="parameter">$array1</tt></span>
   , <span class="methodparam"><span class="type">array</span> <tt class="parameter">$array2</tt></span>
   [, <span class="methodparam"><span class="type">array</span> <tt class="parameter">$...</tt></span>
  ] )</div>

  <p class="para rdfs-comment">
   Compares <i><tt class="parameter">array1</tt></i> against <i><tt class="parameter">array2</tt></i> and
   returns the difference. Unlike <span class="function"><a href="function.array-diff.html" class="function">array_diff()</a></span> the array
   keys are used in the comparison.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.array-diff-assoc-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>


    <dt>

     <span class="term"><i><tt class="parameter">array1</tt></i></span>
     <dd>

      <p class="para">
       The array to compare from
      </p>
     </dd>

    </dt>


    <dt>

     <span class="term"><i><tt class="parameter">array2</tt></i></span>
     <dd>

      <p class="para">
       An array to compare against
      </p>
     </dd>

    </dt>


    <dt>

     <span class="term"><i><tt class="parameter">...</tt></i></span>
     <dd>

      <p class="para">
       More arrays to compare against
      </p>
     </dd>

    </dt>


   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.array-diff-assoc-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns an <span class="type"><a href="language.types.array.html" class="type array">array</a></span> containing all the values from
   <i><tt class="parameter">array1</tt></i> that are not present in any of the other arrays.
  </p>
 </div>




 <div class="refsect1 examples" id="refsect1-function.array-diff-assoc-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4482">
    <p><b>Example #1 <span class="function"><b>array_diff_assoc()</b></span> example</b></p>
    <div class="example-contents"><p>
     In this example you see the <i>&quot;a&quot; =&gt; &quot;green&quot;</i>
     pair is present in both arrays and thus it is not in the output from the
     function. Unlike this, the pair <i>0 =&gt; &quot;red&quot;</i>
     is in the output because in the second argument <i>&quot;red&quot;</i>
     has key which is <i>1</i>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array1&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"b"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"brown"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"c"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"blue"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"red"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$array2&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"yellow"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"red"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_diff_assoc</span><span style="color: #007700">(</span><span style="color: #0000BB">$array1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [b] =&gt; brown
    [c] =&gt; blue
    [0] =&gt; red
)
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4483">
    <p><b>Example #2 <span class="function"><b>array_diff_assoc()</b></span> example</b></p>
    <div class="example-contents"><p>
     Two values from <em class="emphasis">key =&gt; value</em> pairs are
     considered equal only if <i>(string) $elem1 === (string)
     $elem2 </i>. In other words a strict check takes place so
     the string representations must be the same.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array1&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$array2&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"00"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"01"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"2"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_diff_assoc</span><span style="color: #007700">(</span><span style="color: #0000BB">$array1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; 0
    [1] =&gt; 1
    )
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.array-diff-assoc-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><b class="note">Note</b>: 
   <span class="simpara">
    This function only checks one dimension of a n-dimensional
    array. Of course you can check deeper dimensions by using, for example,
    <i>array_diff_assoc($array1[0], $array2[0]);</i>.
   </span>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.array-diff-assoc-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.array-diff.html" class="function" rel="rdfs-seeAlso">array_diff()</a> - Computes the difference of arrays</span></li>
    <li class="member"><span class="function"><a href="function.array-intersect.html" class="function" rel="rdfs-seeAlso">array_intersect()</a> - Computes the intersection of arrays</span></li>
    <li class="member"><span class="function"><a href="function.array-intersect-assoc.html" class="function" rel="rdfs-seeAlso">array_intersect_assoc()</a> - Computes the intersection of arrays with additional index check</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="104860""></a>
  <div class="note">
   <strong class="user">news_yodpeirs at thoftware dot de</strong>
   <a href="#104860" class="date">12-Jul-2011 04:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A quite simple (yet not very efficient) way to compare the first level of arrays which have values that are not strings:<br />
array_map('unserialize',array_diff_assoc(array_map('serialize',$arr1),array_map('serialize',$arr2)))<br />
Might be useful for debugging (that's what I use it for).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89635""></a>
  <div class="note">
   <strong class="user">55 dot php at imars dot com</strong>
   <a href="#89635" class="date">17-Mar-2009 07:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've worked on array_diff_assoc_recursive() mentioned by chinello at gmail dot com and I think it might be worth mentioning here. I wrote a dozen test cases and it seems to be holding up pretty well.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// dwarven Differences:<br />
// * Replaced isset() with array_key_exists() to account for keys with null contents<br />
<br />
// 55 dot php at imars dot com Differences:<br />
// Key differences:<br />
// * Removed redundant test;<br />
// * Returns false bool on exact match (not zero integer);<br />
// * Use type-precise comparison "!==" instead of loose "!=";<br />
// * Detect when $array2 contains extraneous elements;<br />
// * Returns "before" and "after" instead of only "before" arrays on mismatch.<br />
<br />
</span><span class="keyword">function </span><span class="default">array_compare</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$diff </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Left-to-right<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$array1 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">,</span><span class="default">$array2</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$diff</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$diff</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$diff</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new </span><span class="keyword">= </span><span class="default">array_compare</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$new </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$new</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])) </span><span class="default">$diff</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$new</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$new</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])) </span><span class="default">$diff</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$new</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; };<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif (</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] !== </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$diff</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$diff</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; };<br />
&nbsp;};<br />
&nbsp;</span><span class="comment">// Right-to-left<br />
&nbsp;</span><span class="keyword">foreach (</span><span class="default">$array2 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">,</span><span class="default">$array1</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$diff</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; };<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// No direct comparsion because matching keys were compared in the<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // left-to-right loop earlier, recursively.<br />
&nbsp;</span><span class="keyword">};<br />
&nbsp;return </span><span class="default">$diff</span><span class="keyword">;<br />
};<br />
</span><span class="default">?&gt;<br />
</span><br />
Note that to catch small type differences, you need to use var_dump() rather than print_r(). For example:<br />
<br />
<span class="default">&lt;?php<br />
first </span><span class="keyword">= Array( </span><span class="string">'first' </span><span class="keyword">=&gt; </span><span class="string">'second'</span><span class="keyword">, </span><span class="string">'third' </span><span class="keyword">=&gt; </span><span class="string">'fourth'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'fifth' </span><span class="keyword">=&gt; Array( </span><span class="string">'oui' </span><span class="keyword">=&gt; </span><span class="string">'yes'</span><span class="keyword">, </span><span class="string">'non' </span><span class="keyword">=&gt; </span><span class="string">'no' </span><span class="keyword">),<br />
&nbsp; </span><span class="string">'sixth' </span><span class="keyword">=&gt; Array( </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">)<br />
);<br />
</span><span class="default">$second </span><span class="keyword">= Array( </span><span class="string">'first' </span><span class="keyword">=&gt; </span><span class="string">'second'</span><span class="keyword">, </span><span class="string">'third' </span><span class="keyword">=&gt; </span><span class="string">'fourth'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'fifth' </span><span class="keyword">=&gt; Array( </span><span class="string">'oui' </span><span class="keyword">=&gt; </span><span class="string">'yes'</span><span class="keyword">, </span><span class="string">'non' </span><span class="keyword">=&gt; </span><span class="string">'no' </span><span class="keyword">),<br />
&nbsp; </span><span class="string">'sixth' </span><span class="keyword">=&gt; Array( </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="string">'2'</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">)<br />
);<br />
</span><span class="default">$diff </span><span class="keyword">= </span><span class="default">array_compare</span><span class="keyword">(</span><span class="default">$first</span><span class="keyword">, </span><span class="default">$second</span><span class="keyword">);<br />
if (</span><span class="default">$diff </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) echo </span><span class="string">"MATCH\n"</span><span class="keyword">;<br />
else </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$diff</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
The above would immediately show that element "sixth", index 2, is int(2) in $first but string(1)"2" in $second. As per the original function, order for associative arrays does not matter, and of course it does with lists.<br />
<br />
[EDIT: Credits to php dot notes at dwarven dot co dot uk]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86607""></a>
  <div class="note">
   <strong class="user">jrajpu10 at gmail dot com</strong>
   <a href="#86607" class="date">25-Oct-2008 12:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_diff_assoc can also be used to find the duplicates in an array<br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(</span><span class="string">'1'</span><span class="keyword">,</span><span class="string">'2'</span><span class="keyword">,</span><span class="string">'3'</span><span class="keyword">,</span><span class="string">'4'</span><span class="keyword">,</span><span class="string">'3'</span><span class="keyword">,</span><span class="string">'2'</span><span class="keyword">,</span><span class="string">'5'</span><span class="keyword">);<br />
</span><span class="default">$uniques </span><span class="keyword">= </span><span class="default">array_unique</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
</span><span class="comment">// array_diff will not work here, array_diff_assoc works as it takes the key // in account.<br />
</span><span class="default">$dups </span><span class="keyword">= </span><span class="default">array_diff_assoc</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$uniques</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$dups</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Note: The index of the $dups is not in strict sequential order as expected by C programmer.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75269""></a>
  <div class="note">
   <strong class="user">cedric at daneel dot net</strong>
   <a href="#75269" class="date">21-May-2007 06:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To diff between n-dimensional array, juste use this : <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_diff_values</span><span class="keyword">(</span><span class="default">$tab1</span><span class="keyword">, </span><span class="default">$tab2</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$tab1 </span><span class="keyword">as </span><span class="default">$values</span><span class="keyword">) if(! </span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">, </span><span class="default">$tab2</span><span class="keyword">)) </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$values</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74428""></a>
  <div class="note">
   <strong class="user">contact at pascalopitz dot com</strong>
   <a href="#74428" class="date">11-Apr-2007 04:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The direction of the arguments does actually make a difference:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'x' </span><span class="keyword">=&gt; </span><span class="string">'x'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'y' </span><span class="keyword">=&gt; </span><span class="string">'y'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'z' </span><span class="keyword">=&gt; </span><span class="string">'z'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'t' </span><span class="keyword">=&gt; </span><span class="string">'t'</span><span class="keyword">,<br />
);<br />
<br />
</span><span class="default">$b </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'x' </span><span class="keyword">=&gt; </span><span class="string">'x'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'y' </span><span class="keyword">=&gt; </span><span class="string">'y'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'z' </span><span class="keyword">=&gt; </span><span class="string">'z'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'t' </span><span class="keyword">=&gt; </span><span class="string">'t'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'g' </span><span class="keyword">=&gt; </span><span class="string">'g'</span><span class="keyword">,<br />
);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_diff_assoc</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_diff_assoc</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
echoes:<br />
<br />
Array<br />
(<br />
)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [g] =&gt; g<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73972""></a>
  <div class="note">
   <strong class="user">chinello at gmail dot com</strong>
   <a href="#73972" class="date">18-Mar-2007 10:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following will recursively do an array_diff_assoc, which will calculate differences on a multi-dimensional level.&nbsp; This not display any notices if a key don't exist and if error_reporting is set to E_ALL:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_diff_assoc_recursive</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array1 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!isset(</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_diff </span><span class="keyword">= </span><span class="default">array_diff_assoc_recursive</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$new_diff </span><span class="keyword">!= </span><span class="default">FALSE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$new_diff</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif(!isset(</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) || </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] != </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return !isset(</span><span class="default">$difference</span><span class="keyword">) ? </span><span class="default">0 </span><span class="keyword">: </span><span class="default">$difference</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
[NOTE BY danbrown AT php DOT net: This is a combination of efforts from previous notes deleted.&nbsp; Contributors included (Michael Johnson), (jochem AT iamjochem DAWT com), (sc1n AT yahoo DOT com), and (anders DOT carlsson AT mds DOT mdh DOT se).]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="66837""></a>
  <div class="note">
   <strong class="user">Alexander Podgorny</strong>
   <a href="#66837" class="date">30-May-2006 02:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
NOTE: the diff_array also removes all the duplicate values that match to the values in the second array:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $array1 </span><span class="keyword">= array(</span><span class="string">"a"</span><span class="keyword">,</span><span class="string">"b"</span><span class="keyword">,</span><span class="string">"c"</span><span class="keyword">,</span><span class="string">"a"</span><span class="keyword">,</span><span class="string">"a"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array2 </span><span class="keyword">= array(</span><span class="string">"a"</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$diff </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">,</span><span class="default">$array2</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// yields: array("b","c") the duplicate "a" values are removed <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48924""></a>
  <div class="note">
   <strong class="user">benjamin at moonfactory dot co dot jp</strong>
   <a href="#48924" class="date">11-Jan-2005 09:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi all,<br />
For php versions &lt; 4.3...<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="comment">/**<br />
&nbsp;* array_diff_assoc for version &lt; 4.3<br />
&nbsp;**/<br />
</span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'array_diff_assoc'</span><span class="keyword">))<br />
{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">array_diff_assoc</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$a1 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if((string) </span><span class="default">$value </span><span class="keyword">!== (string) </span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$r </span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31926""></a>
  <div class="note">
   <strong class="user">carl at thep dot lu dot se</strong>
   <a href="#31926" class="date">09-May-2003 02:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To unset elements in an array if you know the keys but not the values, you can do:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="string">"foo"</span><span class="keyword">, </span><span class="string">"bar"</span><span class="keyword">, </span><span class="string">"baz"</span><span class="keyword">, </span><span class="string">"quux"</span><span class="keyword">);<br />
</span><span class="default">$b </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">); </span><span class="comment">// Elements to get rid of<br />
<br />
</span><span class="keyword">foreach(</span><span class="default">$b </span><span class="keyword">as </span><span class="default">$e</span><span class="keyword">)<br />
&nbsp; unset(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$e</span><span class="keyword">]);<br />
</span><span class="default">?&gt;<br />
</span><br />
Of course this makes most sense if $b has many elements or is dynamically generated.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-count-values.html">array_count_values</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-diff-key.html">array_diff_key</a></div>
 <div class="up"><a href="ref.array.html">Array Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
