<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Computes the difference of arrays using keys for comparison</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-diff-assoc.html">array_diff_assoc</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-diff-uassoc.html">array_diff_uassoc</a></div>
 <div class="up"><a href="ref.array.html">Array Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.array-diff-key" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_diff_key</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.1.0)</p><p class="refpurpose"><span class="refname">array_diff_key</span> &mdash; <span class="dc-title">Computes the difference of arrays using keys for comparison</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.array-diff-key-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><b>array_diff_key</b></span>
    ( <span class="methodparam"><span class="type">array</span> <tt class="parameter">$array1</tt></span>
   , <span class="methodparam"><span class="type">array</span> <tt class="parameter">$array2</tt></span>
   [, <span class="methodparam"><span class="type">array</span> <tt class="parameter">$...</tt></span>
  ] )</div>

  <p class="para rdfs-comment">
   Compares the keys from <i><tt class="parameter">array1</tt></i> against the keys
   from <i><tt class="parameter">array2</tt></i> and returns the difference.
   This function is like <span class="function"><a href="function.array-diff.html" class="function">array_diff()</a></span> except the
   comparison is done on the keys instead of the values.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.array-diff-key-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>


    <dt>

     <span class="term"><i><tt class="parameter">array1</tt></i></span>
     <dd>

      <p class="para">
       The array to compare from
      </p>
     </dd>

    </dt>


    <dt>

     <span class="term"><i><tt class="parameter">array2</tt></i></span>
     <dd>

      <p class="para">
       An array to compare against
      </p>
     </dd>

    </dt>


    <dt>

     <span class="term"><i><tt class="parameter">...</tt></i></span>
     <dd>

      <p class="para">
       More arrays to compare against
      </p>
     </dd>

    </dt>


   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.array-diff-key-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns an <span class="type"><a href="language.types.array.html" class="type array">array</a></span> containing all the entries from
   <i><tt class="parameter">array1</tt></i> whose keys are not present in any of the
   other arrays.
  </p>
 </div>




 <div class="refsect1 examples" id="refsect1-function.array-diff-key-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4484">
    <p><b>Example #1 <span class="function"><b>array_diff_key()</b></span> example</b></p>
    <div class="example-contents"><p>
     The two keys from the <i>key =&gt; value</i> pairs are
     considered equal only if
     <i>(string) $key1 === (string) $key2 </i>. In other words
     a strict type check is executed so the string representation must be
     the same.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array1&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'blue'&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'red'&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'green'&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'purple'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$array2&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'green'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'blue'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">6</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'yellow'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">7</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'cyan'&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_diff_key</span><span style="color: #007700">(</span><span style="color: #0000BB">$array1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array2</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(2) {
  [&quot;red&quot;]=&gt;
  int(2)
  [&quot;purple&quot;]=&gt;
  int(4)
}
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.array-diff-key-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><b class="note">Note</b>: 
   <p class="para">
    This function only checks one dimension of a n-dimensional
    array. Of course you can check deeper dimensions by using
    <i>array_diff_key($array1[0], $array2[0]);</i>.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.array-diff-key-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.array-diff.html" class="function" rel="rdfs-seeAlso">array_diff()</a> - Computes the difference of arrays</span></li>
    <li class="member"><span class="function"><a href="function.array-udiff.html" class="function" rel="rdfs-seeAlso">array_udiff()</a> - Computes the difference of arrays by using a callback function for data comparison</span></li>
    <li class="member"><span class="function"><a href="function.array-diff-assoc.html" class="function" rel="rdfs-seeAlso">array_diff_assoc()</a> - Computes the difference of arrays with additional index check</span></li>
    <li class="member"><span class="function"><a href="function.array-diff-uassoc.html" class="function" rel="rdfs-seeAlso">array_diff_uassoc()</a> - Computes the difference of arrays with additional index check which is performed by a user supplied callback function</span></li>
    <li class="member"><span class="function"><a href="function.array-udiff-assoc.html" class="function" rel="rdfs-seeAlso">array_udiff_assoc()</a> - Computes the difference of arrays with additional index check, compares data by a callback function</span></li>
    <li class="member"><span class="function"><a href="function.array-udiff-uassoc.html" class="function" rel="rdfs-seeAlso">array_udiff_uassoc()</a> - Computes the difference of arrays with additional index check, compares data and indexes by a callback function</span></li>
    <li class="member"><span class="function"><a href="function.array-diff-ukey.html" class="function" rel="rdfs-seeAlso">array_diff_ukey()</a> - Computes the difference of arrays using a callback function on the keys for comparison</span></li>
    <li class="member"><span class="function"><a href="function.array-intersect.html" class="function" rel="rdfs-seeAlso">array_intersect()</a> - Computes the intersection of arrays</span></li>
    <li class="member"><span class="function"><a href="function.array-intersect-assoc.html" class="function" rel="rdfs-seeAlso">array_intersect_assoc()</a> - Computes the intersection of arrays with additional index check</span></li>
    <li class="member"><span class="function"><a href="function.array-intersect-uassoc.html" class="function" rel="rdfs-seeAlso">array_intersect_uassoc()</a> - Computes the intersection of arrays with additional index check, compares indexes by a callback function</span></li>
    <li class="member"><span class="function"><a href="function.array-intersect-key.html" class="function" rel="rdfs-seeAlso">array_intersect_key()</a> - Computes the intersection of arrays using keys for comparison</span></li>
    <li class="member"><span class="function"><a href="function.array-intersect-ukey.html" class="function" rel="rdfs-seeAlso">array_intersect_ukey()</a> - Computes the intersection of arrays using a callback function on the keys for comparison</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="86109""></a>
  <div class="note">
   <strong class="user">division-par-zero at zilon dot net</strong>
   <a href="#86109" class="date">03-Oct-2008 07:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
you can use this function for return the difference of two array !<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_unique_diff_key </span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">)<br />
{<br />
&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">) &amp;&amp; </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_diff_key</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">) + </span><span class="default">array_diff_key</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">);<br />
&nbsp; else if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">)) return </span><span class="default">$array1</span><span class="keyword">;<br />
&nbsp; else if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">)) return </span><span class="default">$array2</span><span class="keyword">;<br />
&nbsp; else return array();<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82257""></a>
  <div class="note">
   <strong class="user">Ashton</strong>
   <a href="#82257" class="date">02-Apr-2008 01:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To return the unique elements (those with a key that exists only once in either array but not in both) try:<br />
function array_unique_diff ($array1, $array2)<br />
{<br />
&nbsp; array_merge(array_diff_key($array1, $array2), array_diff_key($array2, $array1));<br />
}<br />
<br />
Example:<br />
$array1 = array('blue'&nbsp; =&gt; 1, 'red'&nbsp; =&gt; 2, 'green'&nbsp; =&gt; 3, 'purple' =&gt; 4);<br />
$array2 = array('green' =&gt; 5, 'blue' =&gt; 6, 'yellow' =&gt; 7, 'cyan'&nbsp;&nbsp; =&gt; 8);<br />
<br />
&nbsp; array_diff_key($array1, $array2)<br />
<br />
returns<br />
<br />
&nbsp; array ( 'red' =&gt; 2, 'purple' =&gt; 4 ) <br />
<br />
&nbsp; array_diff_key($array2, $array1)<br />
<br />
returns<br />
<br />
&nbsp; array ( 'yellow' =&gt; 7, 'cyan' =&gt; 8, )<br />
<br />
&nbsp; array_unique_diff($array1, $array2);<br />
&nbsp; <br />
returns<br />
<br />
&nbsp; array ( 'red' =&gt; 2, 'purple' =&gt; 4, 'yellow' =&gt; 7, 'cyan' =&gt; 8, )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81456""></a>
  <div class="note">
   <strong class="user">sjungwirth at matrix-consultants dot com</strong>
   <a href="#81456" class="date">28-Feb-2008 12:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed something a little different where maybe even the keys in multidimensional arrays don't match up. Setting $assoc to false will cause only to check for missing keys, otherwise it compares values as well. This was also based on '2ge at 2ge dot us' function<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">n_array_diff_assoc </span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2</span><span class="keyword">, </span><span class="default">$assoc</span><span class="keyword">=</span><span class="default">true</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">current</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">))):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$a1 </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">])):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$diff </span><span class="keyword">= </span><span class="default">n_array_diff</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">], </span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">], </span><span class="default">$assoc</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!empty(</span><span class="default">$diff</span><span class="keyword">)):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$diff</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; endif;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; endif;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; endforeach;<br />
&nbsp;&nbsp;&nbsp; else:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">$assoc </span><span class="keyword">? </span><span class="default">array_diff_assoc</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2</span><span class="keyword">) : </span><span class="default">array_diff_key</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; endif;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$r</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81172""></a>
  <div class="note">
   <strong class="user">coder at gs dot com</strong>
   <a href="#81172" class="date">16-Feb-2008 02:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The PHP4 version below works only unidirectionally. If you switch the arrays around i.e. (ar2, ar1) you get different results than (ar1, ar2).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79483""></a>
  <div class="note">
   <strong class="user">AiFiLTr0 [at host] invyl [dot] ath.cx</strong>
   <a href="#79483" class="date">29-Nov-2007 05:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The recursive function suggested by '2ge at 2ge dot us' will provide you with empty arrays if there's no diff. <br />
This variant of the function cleans up empty arrays and fixes a bug in the first suggested version. It works 100%<br />
.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_diff_key_recursive </span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$a1 </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//$r[$k] = is_array($v) ? $this-&gt;array_diff_key_recursive($a1[$k], $a2[$k]) : array_diff_key($a1, $a2);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]=</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">array_diff_key_recursive</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">], </span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">=</span><span class="default">array_diff_key</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]) &amp;&amp; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">])==</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$r</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76100""></a>
  <div class="note">
   <strong class="user">contact at autonoma dot fr</strong>
   <a href="#76100" class="date">29-Jun-2007 05:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
after kwutzke's comment , here is a PHP4 array_diff_key fonction for those in need<br />
<br />
&nbsp;&nbsp;&nbsp; function PHP4_array_diff_key()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $arrs = func_get_args();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $result = array_shift($arrs);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($arrs as $array) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach ($result as $key =&gt; $v) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (array_key_exists($key, $array)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset($result[$key]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $result;<br />
&nbsp;&nbsp; }<br />
<br />
works for me, enjoy.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71865""></a>
  <div class="note">
   <strong class="user">kwutzke @ somewhere in the net</strong>
   <a href="#71865" class="date">20-Dec-2006 04:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP4 array_diff_key can be copied from the array_intersect_key implementation posted by some anonymous user on 2006-07-17. The only thing you have to do is to delete the '!' in the if and rename the function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62704""></a>
  <div class="note">
   <strong class="user">2ge at 2ge dot us</strong>
   <a href="#62704" class="date">07-Mar-2006 11:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hello, if you need diff key of n-dimensional arrays here is nice solution:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">n_array_diff </span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$a1 </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">) ? </span><span class="default">n_array_diff</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">], </span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]) : </span><span class="default">array_diff_key</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$r</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>it will print everything, what is missing in $a2.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60675""></a>
  <div class="note">
   <strong class="user">vlad_mustafin at ukr dot net</strong>
   <a href="#60675" class="date">13-Jan-2006 07:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One more alternative variant :)<br />
&lt;?<br />
if (!function_exists('array_diff_key')) {<br />
&nbsp;&nbsp;&nbsp; function array_diff_key() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $argCount&nbsp;&nbsp; = func_num_args();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $diff_arg_prefix = 'diffArg';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $diff_arg_names = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for ($i=0; $i &lt; $argCount; $i++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $diff_arg_names[$i] = 'diffArg'.$i;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $$diff_arg_names[$i] = array_keys((array)func_get_arg($i));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $diffArrString = '';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!empty($diff_arg_names)) $diffArrString =&nbsp; '$'.implode(', $', $diff_arg_names);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; eval("\$result = array_diff(".$diffArrString.");");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $result;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59087""></a>
  <div class="note">
   <strong class="user">ampf at egp dot up dot pt</strong>
   <a href="#59087" class="date">25-Nov-2005 12:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Well, you could implement in the code something more powerfull: <br />
<br />
<a href="http://www.php.net/manual/en/function.array-diff.php#31364" rel="nofollow" target="_blank">http://www.php.net/manual/en/function.array-diff.php#31364</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53603""></a>
  <div class="note">
   <strong class="user">ml at iceni dot pl</strong>
   <a href="#53603" class="date">07-Jun-2005 12:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You may obtain this function with PEAR Package PHP_Compat (<a href="http://pear.php.net/package/PHP_Compat" rel="nofollow" target="_blank">http://pear.php.net/package/PHP_Compat</a>) <br />
<br />
Then using such code is quite useful<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'array_diff_key'</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; require_once </span><span class="string">'PHP/Compat/Function/array_diff_key.php'</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53283""></a>
  <div class="note">
   <strong class="user">maxence at pontapreta dot net</strong>
   <a href="#53283" class="date">27-May-2005 10:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Seems to be a great function, especially for n-dimensions arrays. The only problem is that I cannot find it in php 5.0.3 and 5.0.4. Does it really exist ?! :(<br />
<br />
[20:27:05][maxence@conurb] ~/test2/php-5.0.4$ grep PHP_FUNCTION * -r | grep -i array_diff_key <br />
[20:27:09][maxence@conurb] ~/test2/php-5.0.4$</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50640""></a>
  <div class="note">
   <strong class="user">eric dot broersma at phil dot uu dot nl</strong>
   <a href="#50640" class="date">05-Mar-2005 06:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_diff_key</span><span class="keyword">()<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'array_diff'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'array_flip'</span><span class="keyword">,</span><span class="default">$args</span><span class="keyword">)));<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47630""></a>
  <div class="note">
   <strong class="user">denis noessler</strong>
   <a href="#47630" class="date">23-Nov-2004 04:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if (!function_exists('array_diff_key'))<br />
{<br />
&nbsp;&nbsp;&nbsp; /**<br />
&nbsp;&nbsp;&nbsp; * Computes the difference of arrays using keys for comparison<br />
&nbsp;&nbsp;&nbsp; * <br />
&nbsp;&nbsp;&nbsp; * @param&nbsp; &nbsp; array&nbsp; &nbsp; $valuesBase&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Base elements for comparison, associative<br />
&nbsp;&nbsp;&nbsp; * @param&nbsp; &nbsp; array&nbsp; &nbsp; $valuesComp[,..]&nbsp; &nbsp; Comparison elements, associative<br />
&nbsp;&nbsp;&nbsp; * <br />
&nbsp;&nbsp;&nbsp; * @param&nbsp; &nbsp; array&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Elements, not existing in comparison element, associative<br />
&nbsp;&nbsp;&nbsp; */<br />
&nbsp;&nbsp;&nbsp; function array_diff_key()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $argCount&nbsp;&nbsp; = func_num_args();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $argValues&nbsp; = func_get_args();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $valuesDiff = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($argCount &lt; 2)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return false;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($argValues as $argParam)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!is_array($argParam))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return false;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($argValues[0] as $valueKey =&gt; $valueData)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($i = 1; $i &lt; $argCount; $i++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (isset($argValues[$i][$valueKey]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue 2;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $valuesDiff[$valueKey] = $valueData;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $valuesDiff;<br />
&nbsp;&nbsp;&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-diff-assoc.html">array_diff_assoc</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-diff-uassoc.html">array_diff_uassoc</a></div>
 <div class="up"><a href="ref.array.html">Array Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
