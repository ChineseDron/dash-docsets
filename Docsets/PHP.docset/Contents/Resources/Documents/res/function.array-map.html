<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Applies the callback to the elements of the given arrays</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-keys.html">array_keys</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-merge-recursive.html">array_merge_recursive</a></div>
 <div class="up"><a href="ref.array.html">Array Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.array-map" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_map</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.6, PHP 5)</p><p class="refpurpose"><span class="refname">array_map</span> &mdash; <span class="dc-title">Applies the callback to the elements of the given arrays</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.array-map-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><b>array_map</b></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.callback" class="type callback">callback</a></span> <tt class="parameter">$callback</tt></span>
   , <span class="methodparam"><span class="type">array</span> <tt class="parameter">$arr1</tt></span>
   [, <span class="methodparam"><span class="type">array</span> <tt class="parameter">$...</tt></span>
  ] )</div>

  <p class="para rdfs-comment">
   <span class="function"><b>array_map()</b></span> returns an array containing all
   the elements of <i><tt class="parameter">arr1</tt></i> after applying the
   <i><tt class="parameter">callback</tt></i> function to each one.
   The number of parameters that the <i><tt class="parameter">callback</tt></i>
   function accepts
   should match the number of arrays
   passed to the <span class="function"><b>array_map()</b></span>
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.array-map-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">callback</tt></i></span>
     <dd>

      <p class="para">
       Callback function to run for each element in each array.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">arr1</tt></i></span>
     <dd>

      <p class="para">
       An array to run through the <i><tt class="parameter">callback</tt></i> function.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">array</tt></i></span>
     <dd>

      <p class="para">
       Variable list of array arguments to run through the
       <i><tt class="parameter">callback</tt></i> function.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.array-map-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns an array containing all the elements of <i><tt class="parameter">arr1</tt></i>
   after applying the <i><tt class="parameter">callback</tt></i> function to each one.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.array-map-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4502">
    <p><b>Example #1 <span class="function"><b>array_map()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">cube</span><span style="color: #007700">(</span><span style="color: #0000BB">$n</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return(</span><span style="color: #0000BB">$n&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">$n&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">"cube"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$b</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     This makes <var class="varname"><var class="varname">$b</var></var> have:
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; 1
    [1] =&gt; 8
    [2] =&gt; 27
    [3] =&gt; 64
    [4] =&gt; 125
)
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4503">
    <p><b>Example #2 <span class="function"><b>array_map()</b></span> using a lambda function (as of PHP 5.3.0)</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$func&nbsp;</span><span style="color: #007700">=&nbsp;function(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />};<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #0000BB">$func</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">range</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">)));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; 2
    [1] =&gt; 4
    [2] =&gt; 6
    [3] =&gt; 8
    [4] =&gt; 10
)
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4504">
    <p><b>Example #3 <span class="function"><b>array_map()</b></span> - using more arrays</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">show_Spanish</span><span style="color: #007700">(</span><span style="color: #0000BB">$n</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return(</span><span style="color: #DD0000">"The&nbsp;number&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #DD0000">&nbsp;is&nbsp;called&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #DD0000">&nbsp;in&nbsp;Spanish"</span><span style="color: #007700">);<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">map_Spanish</span><span style="color: #007700">(</span><span style="color: #0000BB">$n</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return(array(</span><span style="color: #0000BB">$n&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"uno"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"dos"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"tres"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cuatro"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cinco"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">"show_Spanish"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$d&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">"map_Spanish"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$d</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
// printout of $c
Array
(
    [0] =&gt; The number 1 is called uno in Spanish
    [1] =&gt; The number 2 is called dos in Spanish
    [2] =&gt; The number 3 is called tres in Spanish
    [3] =&gt; The number 4 is called cuatro in Spanish
    [4] =&gt; The number 5 is called cinco in Spanish
)

// printout of $d
Array
(
    [0] =&gt; Array
        (
            [1] =&gt; uno
        )

    [1] =&gt; Array
        (
            [2] =&gt; dos
        )

    [2] =&gt; Array
        (
            [3] =&gt; tres
        )

    [3] =&gt; Array
        (
            [4] =&gt; cuatro
        )

    [4] =&gt; Array
        (
            [5] =&gt; cinco
        )

)
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   Usually when using two or more arrays, they should be of equal length
   because the callback function is applied in parallel to the corresponding
   elements.
   If the arrays are of unequal length, the shortest one will be extended
   with empty elements.
  </p>
  <p class="para">
   An interesting use of this function is to construct an array of arrays,
   which can be easily performed by using <b><tt>NULL</tt></b>
   as the name of the callback function
  </p>
  <p class="para">
   <div class="example" id="example-4505">
    <p><b>Example #4 Creating an array of arrays</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"one"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"two"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"three"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"four"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"five"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"uno"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"dos"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"tres"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cuatro"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cinco"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$d&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$d</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; Array
        (
            [0] =&gt; 1
            [1] =&gt; one
            [2] =&gt; uno
        )

    [1] =&gt; Array
        (
            [0] =&gt; 2
            [1] =&gt; two
            [2] =&gt; dos
        )

    [2] =&gt; Array
        (
            [0] =&gt; 3
            [1] =&gt; three
            [2] =&gt; tres
        )

    [3] =&gt; Array
        (
            [0] =&gt; 4
            [1] =&gt; four
            [2] =&gt; cuatro
        )

    [4] =&gt; Array
        (
            [0] =&gt; 5
            [1] =&gt; five
            [2] =&gt; cinco
        )

)
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   If the array argument contains string keys then the returned array
   will contain string keys if and only if exactly one array is passed. If 
   more than one argument is passed then the returned array always has 
   integer keys.
  </p>
  <p class="para">
   <div class="example" id="example-4506">
    <p><b>Example #5 <span class="function"><b>array_map()</b></span> - with string keys</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"stringkey"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"value"</span><span style="color: #007700">);<br />function&nbsp;</span><span style="color: #0000BB">cb1</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;array&nbsp;(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br />}<br />function&nbsp;</span><span style="color: #0000BB">cb2</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;array&nbsp;(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">"cb1"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">"cb2"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(1) {
  [&quot;stringkey&quot;]=&gt;
  array(1) {
    [0]=&gt;
    string(5) &quot;value&quot;
  }
}
array(1) {
  [0]=&gt;
  array(2) {
    [0]=&gt;
    string(5) &quot;value&quot;
    [1]=&gt;
    string(5) &quot;value&quot;
  }
}
array(1) {
  [&quot;stringkey&quot;]=&gt;
  string(5) &quot;value&quot;
}
array(1) {
  [0]=&gt;
  array(2) {
    [0]=&gt;
    string(5) &quot;value&quot;
    [1]=&gt;
    string(5) &quot;value&quot;
  }
}
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.array-map-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.array-filter.html" class="function" rel="rdfs-seeAlso">array_filter()</a> - Filters elements of an array using a callback function</span></li>
    <li class="member"><span class="function"><a href="function.array-reduce.html" class="function" rel="rdfs-seeAlso">array_reduce()</a> - Iteratively reduce the array to a single value using a callback function</span></li>
    <li class="member"><span class="function"><a href="function.array-walk.html" class="function" rel="rdfs-seeAlso">array_walk()</a> - Apply a user function to every member of an array</span></li>
    <li class="member"><span class="function"><a href="function.create-function.html" class="function" rel="rdfs-seeAlso">create_function()</a> - Create an anonymous (lambda-style) function</span></li>
    <li class="member">information about the <a href="language.pseudo-types.html#language.types.callback" class="link">callback</a> type</li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="106684""></a>
  <div class="note">
   <strong class="user">php/hotblocks/nl</strong>
   <a href="#106684" class="date">28-Nov-2011 05:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the $arr argument has to be an array, not just a Traversable/Iterator.<br />
<br />
For instance this won't work:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$documents </span><span class="keyword">= </span><span class="default">$mongo</span><span class="keyword">-&gt;</span><span class="default">db</span><span class="keyword">-&gt;</span><span class="default">collection</span><span class="keyword">-&gt;</span><span class="default">find</span><span class="keyword">();<br />
</span><span class="comment">// $documents is Traversable by foreach<br />
<br />
</span><span class="default">$ids </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(function(</span><span class="default">$document</span><span class="keyword">) {<br />
&nbsp; return </span><span class="default">$document</span><span class="keyword">[</span><span class="string">'_id'</span><span class="keyword">];<br />
}, </span><span class="default">$objects</span><span class="keyword">);<br />
</span><span class="comment">// $ids will now be NULL, because $documents wasn't an Array<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
A solution is to first use iterator_to_array():<br />
<br />
<span class="default">&lt;?php<br />
<br />
$ids </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(function(</span><span class="default">$document</span><span class="keyword">) {<br />
&nbsp; return </span><span class="default">$document</span><span class="keyword">[</span><span class="string">'_id'</span><span class="keyword">];<br />
}, </span><span class="default">iterator_to_array</span><span class="keyword">(</span><span class="default">$objects</span><span class="keyword">));<br />
</span><span class="comment">// $ids will now be an array of ['_id']s<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
But this is not very efficient: two cycles instead of one. Another solution is to use foreach: one cycle and a lot of freedom (and in the same scope).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105942""></a>
  <div class="note">
   <strong class="user">erik dot stetina at gmail dot com</strong>
   <a href="#105942" class="date">27-Sep-2011 03:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
function to prefix given string to each element of an array:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_prefix_values</span><span class="keyword">(</span><span class="default">$prefix</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$callback </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$str'</span><span class="keyword">,</span><span class="string">'return "'</span><span class="keyword">.</span><span class="default">$prefix</span><span class="keyword">.</span><span class="string">'".$str;'</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
usage:<br />
<br />
<span class="default">&lt;?php<br />
$dir </span><span class="keyword">= </span><span class="string">"./css/"</span><span class="keyword">;<br />
</span><span class="default">$files </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
</span><span class="default">$files </span><span class="keyword">= </span><span class="default">array_prefix_values</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">,</span><span class="default">$files</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
output:<br />
<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; ./css/.<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; ./css/..<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; ./css/default.css<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; ./css/helper.css<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; ./css/page_layout.css<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105707""></a>
  <div class="note">
   <strong class="user">spark at limao dot com dot br</strong>
   <a href="#105707" class="date">08-Sep-2011 07:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
it's a usefull way to filter user input through get and post request arrays:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $get </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">"addslashes"</span><span class="keyword">,</span><span class="default">$_GET</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102130""></a>
  <div class="note">
   <strong class="user">gordon dot mcvey at ntlworld dot com</strong>
   <a href="#102130" class="date">28-Jan-2011 05:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use array_map with PHP native functions as well as user functions.&nbsp; This is very handy if you need to sanitize arrays.&nbsp; <br />
<br />
<span class="default">&lt;?php<br />
<br />
$integers </span><span class="keyword">= </span><span class="default">array_map </span><span class="keyword">(</span><span class="string">'intval'</span><span class="keyword">, </span><span class="default">$integers</span><span class="keyword">);<br />
</span><span class="default">$safeStrings </span><span class="keyword">= </span><span class="default">array_map </span><span class="keyword">(</span><span class="string">'mysql_real_escape_string'</span><span class="keyword">, </span><span class="default">$unsafeStrings</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101791""></a>
  <div class="note">
   <strong class="user">pike-php at kw dot nl</strong>
   <a href="#101791" class="date">11-Jan-2011 06:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're looking for a way to flatten multimaps, look at this:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $multimap </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">"name"</span><span class="keyword">=&gt;</span><span class="string">"value1"</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">"name"</span><span class="keyword">=&gt;</span><span class="string">"value2"</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">"name"</span><span class="keyword">=&gt;</span><span class="string">"value3"</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$flatmap </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">"array_pop"</span><span class="keyword">,</span><span class="default">$multimap</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$flatmap</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; value1<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; value2<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; value3<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98846""></a>
  <div class="note">
   <strong class="user">brendan DOT caffrey AT me DOT com</strong>
   <a href="#98846" class="date">10-Jul-2010 03:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Something that had me confused:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">namespace </span><span class="default">test</span><span class="keyword">;<br />
<br />
class </span><span class="default">Callback<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; static function </span><span class="default">add</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) { return </span><span class="default">$a </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">; }<br />
}<br />
<br />
</span><span class="default">$array </span><span class="keyword">= array(</span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">array_map</span><span class="keyword">(array(</span><span class="string">'Callback'</span><span class="keyword">, </span><span class="string">'add'</span><span class="keyword">), </span><span class="default">$array</span><span class="keyword">); </span><span class="comment">// will not work, even though you're calling this in the test namespace<br />
</span><span class="default">array_map</span><span class="keyword">(array(</span><span class="string">'test\Callback'</span><span class="keyword">, </span><span class="string">'add'</span><span class="keyword">), </span><span class="default">$array</span><span class="keyword">); </span><span class="comment">// will work<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96564""></a>
  <div class="note">
   <strong class="user">virtual dot greg at gmail dot com</strong>
   <a href="#96564" class="date">05-Mar-2010 03:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP 5.3 enables us to use inline anonymous functions with array_map, cleaning up the syntax slightly.<br />
<br />
<span class="default">&lt;?php<br />
$data </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Bob'</span><span class="keyword">, </span><span class="string">'position' </span><span class="keyword">=&gt; </span><span class="string">'Clerk'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Alan'</span><span class="keyword">, </span><span class="string">'position' </span><span class="keyword">=&gt; </span><span class="string">'Manager'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'James'</span><span class="keyword">, </span><span class="string">'position' </span><span class="keyword">=&gt; </span><span class="string">'Director'</span><span class="keyword">)<br />
);<br />
<br />
</span><span class="default">$names </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function(</span><span class="default">$person</span><span class="keyword">) { return </span><span class="default">$person</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]; },<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data<br />
</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$names</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This was possible (although not recommended) in prior versions of PHP 5, via create_function().<br />
<br />
<span class="default">&lt;?php<br />
$names </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$person'</span><span class="keyword">, </span><span class="string">'return $person["name"];'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data<br />
</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
You're less likely to catch errors in the latter version because the code is passed as string arguments.<br />
<br />
These are alternatives to using a foreach:<br />
<br />
<span class="default">&lt;?php<br />
$names </span><span class="keyword">= array();<br />
<br />
foreach (</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$row</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$names</span><span class="keyword">[] = </span><span class="default">$row</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">];<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96269""></a>
  <div class="note">
   <strong class="user">kelly m</strong>
   <a href="#96269" class="date">17-Feb-2010 02:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I realize this function is easy enough to make, but this is a faster version (twice the speed) of [a function] which I find incredibly useful.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_pluck</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$input</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) || !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">)) return array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$input </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">)) </span><span class="default">$array</span><span class="keyword">[]=</span><span class="default">$v</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage: <br />
<br />
<span class="default">&lt;?php $ids </span><span class="keyword">= </span><span class="default">array_pluck</span><span class="keyword">(</span><span class="string">'id'</span><span class="keyword">, </span><span class="default">$users</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94053""></a>
  <div class="note">
   <strong class="user">onassar at gmail dot com</strong>
   <a href="#94053" class="date">13-Oct-2009 07:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Fixed a bug with array recursion.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * arrayMap function. Customized array_map function which preserves keys/associate array indexes. Note that this costs a descent amount more memory (eg. 1.5k per call)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @access public<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param callback $callback Callback function to run for each element in each array.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param mixed $arr1 An array to run through the callback function.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param array $array Variable list of array arugments to run through the callback function.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @return array Array containing all the elements of $arr1 after applying the callback function to each one, recursively, maintain keys.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; */<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">arrayMap</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">,</span><span class="default">$arr1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&nbsp; &nbsp; array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">func_num_args</span><span class="keyword">()&gt;</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; (array) </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">func_get_args</span><span class="keyword">(),</span><span class="default">2</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$arr1 </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp&nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">$args</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">,</span><span class="default">$callback</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]&nbsp; &nbsp; =&nbsp; &nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="string">'self'</span><span class="keyword">,</span><span class="string">'arrayMap'</span><span class="keyword">),</span><span class="default">$temp</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]&nbsp; &nbsp; =&nbsp; &nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">,</span><span class="default">$temp</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$results</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94008""></a>
  <div class="note">
   <strong class="user">onassar at gmail dot com</strong>
   <a href="#94008" class="date">11-Oct-2009 03:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Wrote up my own key preservation function for array mapping. It allows n arguments to be passed, and should be easy enough to follow if you need to make any mods. If you've got any thoughts let me know.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * arrayMap function. Customized array_map function which preserves keys/associate array indexes.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @access public<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param callback $callback Callback function to run for each element in each array.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param mixed $arr1 An array to run through the callback function.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param array $array Variable list of array arugments to run through the callback function.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @return array Array containing all the elements of $arr1 after applying the callback function to each one, recursively, maintain keys.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; */<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">arrayMap</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">,</span><span class="default">$arr1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&nbsp; &nbsp; array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">func_num_args</span><span class="keyword">()&gt;</span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; (array) </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">func_get_args</span><span class="keyword">(),</span><span class="default">2</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$arr1 </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">,</span><span class="default">$callback</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]&nbsp; &nbsp; =&nbsp; &nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="string">'self'</span><span class="keyword">,</span><span class="string">'arrayMap'</span><span class="keyword">),</span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]&nbsp; &nbsp; =&nbsp; &nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">,</span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$results</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93459""></a>
  <div class="note">
   <strong class="user">macnimble at gmail dot com</strong>
   <a href="#93459" class="date">10-Sep-2009 12:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I recently discovered that PHP has no loop-free manner for modifying the keys in an array. I was hoping to use a built-in function to prefix the keys. <br />
<br />
Having found no native function to do this, I threw together this monster:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_prefix_keys </span><span class="keyword">()<br />
{<br />
&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$prefix </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$func </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$p,$k'</span><span class="keyword">,</span><span class="string">'return "$p{$k}";'</span><span class="keyword">);<br />
&nbsp; foreach (</span><span class="default">$args </span><span class="keyword">AS </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$array</span><span class="keyword">):<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">array_combine</span><span class="keyword">( </span><span class="default">array_map</span><span class="keyword">( </span><span class="default">$func<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">, </span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">),</span><span class="default">$prefix</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; , </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; , </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );<br />
&nbsp; endforeach;<br />
&nbsp; return </span><span class="default">$args</span><span class="keyword">;<br />
}<br />
</span><span class="default">$array1 </span><span class="keyword">= array(<br />
&nbsp; </span><span class="string">'id'&nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'title'&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'about-us'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'author' </span><span class="keyword">=&gt; </span><span class="string">'Bill Brown'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'dated'&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'2009-SEP-15'<br />
</span><span class="keyword">);<br />
</span><span class="default">$array2 </span><span class="keyword">= array(<br />
&nbsp; </span><span class="string">'id'&nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'title'&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'about-them'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'author' </span><span class="keyword">=&gt; </span><span class="string">'Bill Smith'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'dated'&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'2010-SEP-15'<br />
</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">,</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">),</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">),</span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_prefix_keys</span><span class="keyword">(</span><span class="string">"content_"</span><span class="keyword">,</span><span class="default">$array1</span><span class="keyword">,</span><span class="default">$array2</span><span class="keyword">);<br />
</span><span class="default">$array1 </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
</span><span class="default">$array2 </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">,</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">),</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">),</span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
This will produce the following output:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [id] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [title] =&gt; about-us<br />
&nbsp;&nbsp;&nbsp; [author] =&gt; Bill Brown<br />
&nbsp;&nbsp;&nbsp; [dated] =&gt; 2009-SEP-15<br />
)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [id] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [title] =&gt; about-them<br />
&nbsp;&nbsp;&nbsp; [author] =&gt; Bill Smith<br />
&nbsp;&nbsp;&nbsp; [dated] =&gt; 2010-SEP-15<br />
)<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [content_id] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [content_title] =&gt; about-us<br />
&nbsp;&nbsp;&nbsp; [content_author] =&gt; Bill Brown<br />
&nbsp;&nbsp;&nbsp; [content_dated] =&gt; 2009-SEP-15<br />
)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [content_id] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [content_title] =&gt; about-them<br />
&nbsp;&nbsp;&nbsp; [content_author] =&gt; Bill Smith<br />
&nbsp;&nbsp;&nbsp; [content_dated] =&gt; 2010-SEP-15<br />
)<br />
<br />
Hope it helps!<br />
Bill<br />
<br />
[EDIT BY danbrown AT php DOT net: The original function and note was removed in favor of this update by the original author.&nbsp; The original note also contained the following descriptive text.]<br />
<br />
I recently discovered that PHP has no loop-free manner for modifying the keys in an array. I was hoping to use a built-in function to prefix the keys.<br />
<br />
Having found no native function to do this, I threw together this monster.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93301""></a>
  <div class="note">
   <strong class="user">ethaizone at hotmail dot com</strong>
   <a href="#93301" class="date">01-Sep-2009 07:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My English is weak but I want to share my code.<br />
I want to change formation of array but when I use null is callback function in array_map().<br />
It has problem in result so I write new small function for it.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_change_formation</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">=array()) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$new_arr </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$v </span><span class="keyword">as </span><span class="default">$k2 </span><span class="keyword">=&gt; </span><span class="default">$v2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_arr</span><span class="keyword">[</span><span class="default">$k2</span><span class="keyword">][</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$v</span><span class="keyword">[</span><span class="default">$k2</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$new_arr</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Input: <br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [Human] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [Pet] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; Cat<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; Dog<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; Rabbit<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; Rat<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
OutPut:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [Human] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [Pet] =&gt; Cat<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [Human] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [Pet] =&gt; Dog<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [Human] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [Pet] =&gt; Rabbit<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [Human] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [Pet] =&gt; Rat<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
I hope it can useful.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91523""></a>
  <div class="note">
   <strong class="user">galenjr at gmail dot com</strong>
   <a href="#91523" class="date">14-Jun-2009 11:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another way to array_map htmlentities with a specific quote style is to create a function that does it and map that function<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">map_entities</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">htmlentities</span><span class="keyword">( </span><span class="default">$str</span><span class="keyword">, </span><span class="default">ENT_QUOTES </span><span class="keyword">);<br />
}<br />
</span><span class="default">$good_array </span><span class="keyword">= </span><span class="default">array_map </span><span class="keyword">( </span><span class="string">'map_entities'</span><span class="keyword">, </span><span class="default">$bad_array </span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86743""></a>
  <div class="note">
   <strong class="user">radist-hack at yandex dot ru</strong>
   <a href="#86743" class="date">01-Nov-2008 01:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To transpose rectangular two-dimension array, use the following code:<br />
<br />
array_unshift($array, null);<br />
$array = call_user_func_array("array_map", $array);<br />
<br />
If you need to rotate rectangular two-dimension array on 90 degree, add the following line before or after (depending on the rotation direction you need) the code above:<br />
$array = array_reverse($array);<br />
<br />
Here is example:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(<br />
&nbsp; array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">),<br />
&nbsp; array(</span><span class="default">4</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">));<br />
</span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">);<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">"array_map"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 5<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 6<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86402""></a>
  <div class="note">
   <strong class="user">Heero</strong>
   <a href="#86402" class="date">16-Oct-2008 10:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can easily remove all HTML tags from $_GET or $_POST variables using something like this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$_POST </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'strip_tags'</span><span class="keyword">, </span><span class="default">$_POST</span><span class="keyword">);<br />
</span><span class="default">$_GET </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'strip_tags'</span><span class="keyword">, </span><span class="default">$_GET</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This is useful when you don't want to parse HTML.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84632""></a>
  <div class="note">
   <strong class="user">stijnleenknegt at gmail dot com</strong>
   <a href="#84632" class="date">22-Jul-2008 04:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to pass an argument like ENT_QUOTES to htmlentities, you can do the follow.<br />
<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">( </span><span class="string">'htmlentities' </span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">, </span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0 </span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) , </span><span class="default">ENT_QUOTES</span><span class="keyword">) );<br />
</span><span class="default">?&gt;<br />
</span><br />
The third argument creates an equal sized array of $array filled with the parameter you want to give with your callback function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84073""></a>
  <div class="note">
   <strong class="user">GUI</strong>
   <a href="#84073" class="date">26-Jun-2008 07:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following takes an array of objects, and returns the result of calling a member function on each object. So if I have an array of objects that all have a getName() method, calling array_map_objects("getName", $thingies) will return the array filled with the getName() value for each object.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_map_objects</span><span class="keyword">(</span><span class="default">$member_function</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$values </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$member_function</span><span class="keyword">) &amp;&amp; </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$callback </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$e'</span><span class="keyword">, </span><span class="string">'return call_user_func(array($e, "' </span><span class="keyword">. </span><span class="default">$member_function </span><span class="keyword">.</span><span class="string">'"));'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$values </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$values</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82817""></a>
  <div class="note">
   <strong class="user">BloodElf</strong>
   <a href="#82817" class="date">27-Apr-2008 06:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a simple way to highlight the matched words in the search results:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">highlight</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static </span><span class="default">$num </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'&lt;span class="word' </span><span class="keyword">. </span><span class="default">$num</span><span class="keyword">++ . </span><span class="string">'"&gt;' </span><span class="keyword">. </span><span class="default">$word </span><span class="keyword">. </span><span class="string">'&lt;/span&gt;'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$text </span><span class="keyword">= </span><span class="string">"ala bala nica turska panica"</span><span class="keyword">;<br />
</span><span class="default">$search </span><span class="keyword">= </span><span class="string">"bala turska"</span><span class="keyword">;<br />
</span><span class="default">$words </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">);<br />
<br />
echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$words</span><span class="keyword">, </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">"highlight"</span><span class="keyword">, </span><span class="default">$words</span><span class="keyword">), </span><span class="default">$text</span><span class="keyword">);</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82256""></a>
  <div class="note">
   <strong class="user">moester at gmail dot com</strong>
   <a href="#82256" class="date">02-Apr-2008 01:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Wish this was built in.&nbsp; Mimics Ruby and Prototype's array pluck function.&nbsp; Returns specific key/column from an array of objects.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_pluck</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) || !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) return array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$funct </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$e'</span><span class="keyword">, </span><span class="string">'return is_array($e) &amp;&amp; array_key_exists("'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'",$e) ? $e["'</span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">.</span><span class="string">'"] : null;'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">$funct</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">// usage:<br />
<br />
</span><span class="default">$a </span><span class="keyword">= array(array(</span><span class="string">"id"</span><span class="keyword">=&gt;</span><span class="default">10</span><span class="keyword">, </span><span class="string">"name"</span><span class="keyword">=&gt;</span><span class="string">"joe"</span><span class="keyword">), array(</span><span class="string">"id"</span><span class="keyword">=&gt;</span><span class="default">11</span><span class="keyword">, </span><span class="string">"name"</span><span class="keyword">=&gt;</span><span class="string">"bob"</span><span class="keyword">));<br />
<br />
</span><span class="default">$ids </span><span class="keyword">= </span><span class="default">array_pluck</span><span class="keyword">(</span><span class="string">"id"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// == array(10,11)<br />
</span><span class="default">$names </span><span class="keyword">= </span><span class="default">array_pluck</span><span class="keyword">(</span><span class="string">"name"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// == array("joe", "bob")<br />
<br />
//works on non-keyed arrays also:<br />
<br />
</span><span class="default">$a </span><span class="keyword">= array(array(</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">), array(</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">));<br />
</span><span class="default">$col2 </span><span class="keyword">= </span><span class="default">array_pluck</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// == array(4,6) (grab 2nd column of data)<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81767""></a>
  <div class="note">
   <strong class="user">chreekat</strong>
   <a href="#81767" class="date">12-Mar-2008 03:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was miffed that array_map didn't have a way to pass values *and* keys to the callback, but then I realized I could do this:<br />
<br />
function callback($k, $v) { ... }<br />
<br />
array_map( "callback", array_keys($array), $array);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81189""></a>
  <div class="note">
   <strong class="user">jo at ho dot nl</strong>
   <a href="#81189" class="date">17-Feb-2008 02:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Could also use things like... <br />
<br />
array_keys(); and array_values(); offcourse...<br />
<br />
However it's just an example off recursion via this function..<br />
Which I found pretty handy at times dealing with arrays..<br />
<br />
could also use:<br />
<br />
<span class="default">&lt;?php<br />
call_user_func</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">__FUNCTION</span><span class="keyword">), </span><span class="default">$args</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
or <br />
<br />
<span class="default">&lt;?php<br />
call_user_fuc_array</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">), </span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
or<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class{<br />
<br />
&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; new </span><span class="default">self</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$arg</span><span class="keyword">.</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Anyway.. plenty off examples..<br />
It was just an idea for others...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80963""></a>
  <div class="note">
   <strong class="user">avartabedian at webservice dot com dot uy</strong>
   <a href="#80963" class="date">08-Feb-2008 05:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
loaded67 at hotmail dot com, there is a little error in the add func params values.<br />
<br />
Warning: Missing argument 2 for test::add(), called in /tmp/test.php on line 34 and defined in /tmp/test.php on line 6<br />
Array =&gt; &lt;br/&gt;<br />
<br />
now it runs...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">test</span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//private $container = array();<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">final public function </span><span class="default">add</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">=</span><span class="default">NULL</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/* params values fix */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">==</span><span class="default">NULL</span><span class="keyword">?</span><span class="default">$key</span><span class="keyword">:</span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/* recursion */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_map</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">), </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/* procedural */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$key</span><span class="keyword">.</span><span class="string">' =&gt; '</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">.</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// do stuff...<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // if(!isset($this-&gt;container[$key])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;container[$key] = $value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //else{&nbsp; // trigger_error() xor throw new Exception?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo 'allready exists!&lt;br/&gt;'.PHP_EOL;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="comment">//<br />
</span><span class="default">$array </span><span class="keyword">= array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'one'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'value1'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'two'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'value2'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'three' </span><span class="keyword">=&gt; </span><span class="string">'value3'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
</span><span class="default">$t </span><span class="keyword">= new </span><span class="default">test</span><span class="keyword">;<br />
</span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
good luck!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80958""></a>
  <div class="note">
   <strong class="user">loaded67 at hotmail dot com</strong>
   <a href="#80958" class="date">08-Feb-2008 02:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this function is really nice for recursion in php!!!<br />
<br />
example in a class:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">test</span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//private $container = array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">final public function </span><span class="default">add</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/* recursion */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_map</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">), </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/* procedural */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$key</span><span class="keyword">.</span><span class="string">' =&gt; '</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">.</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// do stuff...<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // if(!isset($this-&gt;container[$key])){ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;container[$key] = $value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //else{&nbsp; // trigger_error() xor throw new Exception?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo 'allready exists!&lt;br/&gt;'.PHP_EOL;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="comment">//<br />
</span><span class="default">$array </span><span class="keyword">= array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'one'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'value1'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'two'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'value2'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'three' </span><span class="keyword">=&gt; </span><span class="string">'value3'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
</span><span class="default">$t </span><span class="keyword">= new </span><span class="default">test</span><span class="keyword">;<br />
</span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
you could easiely do this without a class too offcourse!<br />
used in php 5.2.5</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80571""></a>
  <div class="note">
   <strong class="user">pmf</strong>
   <a href="#80571" class="date">22-Jan-2008 07:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function behaves exactly like array_map but additionally does not reject non-array arguments. Instead, it transforms them with the array_fill function to a constant valued array of required length according to the other array arguments (if any) and executes the original array_map function.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_map2</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$callback </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$max'</span><span class="keyword">,</span><span class="string">'return is_array($a)? $a: array_fill(0,$max,$a);'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">,</span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">count</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">),</span><span class="default">array_reduce</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$v,$w'</span><span class="keyword">,</span><span class="string">'return max($v,is_array($w)? count($w): 1);'</span><span class="keyword">))));<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">,</span><span class="default">$callback</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">"array_map"</span><span class="keyword">,</span><span class="default">$args</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$get </span><span class="keyword">= </span><span class="string">"first=value1&amp;second=value2&amp;third=value3"</span><span class="keyword">;<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_map2</span><span class="keyword">(</span><span class="string">"explode"</span><span class="keyword">,</span><span class="string">"="</span><span class="keyword">,</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"&amp;"</span><span class="keyword">,</span><span class="default">$get</span><span class="keyword">)));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
would print out: <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">first<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">value1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">1</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">second<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">value2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">2</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">third<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">value3<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
)<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
/pmf</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78904""></a>
  <div class="note">
   <strong class="user">henrique at webcoder dot com dot br</strong>
   <a href="#78904" class="date">01-Nov-2007 08:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Adding method support to function by Andref (multidimensionalArrayMap).<br />
<br />
function array_map_r( $func, $arr )<br />
{<br />
&nbsp;&nbsp;&nbsp; $newArr = array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach( $arr as $key =&gt; $value )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $newArr[ $key ] = ( is_array( $value ) ? array_map_r( $func, $value ) : ( is_array($func) ? call_user_func_array($func, $value) : $func( $value ) ) );<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return $newArr;<br />
}<br />
<br />
array_map_r('function', array());<br />
or<br />
array_map_r(array('class', 'method'), array());</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76533""></a>
  <div class="note">
   <strong class="user">bturchik at iponweb dot net</strong>
   <a href="#76533" class="date">19-Jul-2007 07:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Maybe this one will be useful for someone:<br />
<br />
function array_map_helper($mapper, $array) {<br />
&nbsp;&nbsp;&nbsp; $mapper = preg_replace('/^return (.*?);$/', '$1', trim($mapper));<br />
&nbsp;&nbsp;&nbsp; $result = array();<br />
&nbsp;&nbsp;&nbsp; if (preg_match('/(\(?)(.*?)\s*=&gt;\s*(.*?)(\)?)$/', $mapper, $matches)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; list($full_found, $array_open, $left, $right, $array_close) = $matches;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($array_open &amp;&amp; $array_close) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $mapper = '$result[] = array' . $full_found . ';';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $mapper = '$result[' . $left . '] = ' . $right . ';';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $mapper = '$result[] = ' . $mapper . ';';<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; foreach ($array as $key =&gt; $value) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; eval($mapper);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return $result;<br />
}<br />
<br />
should be used like:<br />
<br />
$array = array(array('foo' =&gt; 11, 'bar' =&gt; 22),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array('foo' =&gt; 111, 'bar' =&gt; 222),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array('foo' =&gt; 1111, 'bar' =&gt; 2222));<br />
$mapped = array_map_helper('$value["foo"] =&gt; $value["bar"]', $array);<br />
<br />
var_dump will give<br />
<br />
array(3) {<br />
&nbsp; [11]=&gt;<br />
&nbsp; int(22)<br />
&nbsp; [111]=&gt;<br />
&nbsp; int(222)<br />
&nbsp; [1111]=&gt;<br />
&nbsp; int(2222)<br />
}<br />
<br />
or<br />
<br />
$mapped = array_map_helper('$value["foo"]', $array);<br />
<br />
var_dump will give<br />
<br />
array(3) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; int(11)<br />
&nbsp; [1]=&gt;<br />
&nbsp; int(111)<br />
&nbsp; [2]=&gt;<br />
&nbsp; int(1111)<br />
}<br />
<br />
or <br />
<br />
$mapped = array_map_helper('$value["foo"] + $value["bar"] . " at position $key"', $array);<br />
<br />
var_dump will give<br />
<br />
array(3) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(16) "33 at position 0"<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(17) "333 at position 1"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(18) "3333 at position 2"<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70710""></a>
  <div class="note">
   <strong class="user">andref dot dias at pronus dot eng dot br</strong>
   <a href="#70710" class="date">24-Oct-2006 12:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A recursive way to handle multidimensional arrays:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">multidimensionalArrayMap</span><span class="keyword">( </span><span class="default">$func</span><span class="keyword">, </span><span class="default">$arr </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$newArr </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach( </span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newArr</span><span class="keyword">[ </span><span class="default">$key </span><span class="keyword">] = ( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">) ? </span><span class="default">multidimensionalArrayMap</span><span class="keyword">( </span><span class="default">$func</span><span class="keyword">, </span><span class="default">$value </span><span class="keyword">) : </span><span class="default">$func</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">) );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$newArr</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63279""></a>
  <div class="note">
   <strong class="user">pcdinh at phpvietnam dot net</strong>
   <a href="#63279" class="date">17-Mar-2006 08:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi benjaminhill,<br />
<br />
You can apply a method of a instantiated class to array_maps as follows:<br />
<br />
class Maths {<br />
&nbsp;&nbsp;&nbsp; function addOne($input) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return ($input + 1);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
$maths = new Maths();<br />
$sum = array_map(array($maths, \\\'addOne\\\'), array(1, 2));<br />
// where $maths is the object which has been instantiated before and addOne is its method without its own parameters<br />
var_dump($sum);<br />
<br />
The code fragment will return:<br />
<br />
array<br />
&nbsp; 0 =&gt; 2<br />
&nbsp; 1 =&gt; 3<br />
<br />
However, I love a syntax like this:<br />
<br />
$sum = array_map($maths-&gt;addOne($this), array(1, 2));<br />
<br />
where $this should be interpreted as each values extracted from the subsequent array, which in this case is array(1, 2).<br />
<br />
This syntax reminds me of Javascript syntax.<br />
<br />
PHP\\\'s callback mechanism should be improved.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56190""></a>
  <div class="note">
   
   <a href="#56190" class="date">26-Aug-2005 06:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a function, very helpfull to me, that allows you to map your callback on mixed args.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_smart_map</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Initialization<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">() ;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">) ; </span><span class="comment">// suppressing the callback<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array() ;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Validating parameters<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$args </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$arg</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// the first array found gives the size of mapping and the keys that will be used for the resulting array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(!isset(</span><span class="default">$size</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$size </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// the others arrays must have the same dimension<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">} elseif(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) != </span><span class="default">$size</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// all keys are suppressed<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// doing the callback thing<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(!isset(</span><span class="default">$size</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// if no arrays were found, returns the result of the callback in an array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">) ;<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$size</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$column </span><span class="keyword">= array() ;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$args </span><span class="keyword">as </span><span class="default">$arg</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$column</span><span class="keyword">[] = ( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) ? </span><span class="default">$arg</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] : </span><span class="default">$arg </span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]] = </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$column</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result </span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Trying with :<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// $_GET is ?foo=bar1-bar2-bar3&amp;bar=foo1<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_smart_map</span><span class="keyword">(</span><span class="string">'explode'</span><span class="keyword">, </span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$_GET</span><span class="keyword">)) ;<br />
</span><span class="default">?&gt;<br />
</span><br />
Returns :<br />
<br />
array(<br />
&nbsp;&nbsp;&nbsp; [foo] =&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 0 =&gt; bar1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 1 =&gt; bar2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 2 =&gt; bar3<br />
&nbsp;&nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [bar] =&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 1 =&gt; foo1<br />
&nbsp;&nbsp;&nbsp; )<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54520""></a>
  <div class="note">
   <strong class="user">david dot tulloh at infaze dot com dot au</strong>
   <a href="#54520" class="date">06-Jul-2005 04:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can pass values to array_map by reference, essentially allowing you to use it as you would array_walk with multiple arrays as parameters.<br />
<br />
A trivial example:<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">);<br />
</span><span class="default">$add_func </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'&amp;$x, $y'</span><span class="keyword">, </span><span class="string">'$x+=$y;'</span><span class="keyword">);<br />
</span><span class="default">array_map</span><span class="keyword">(</span><span class="default">$add_func</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 4<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 6<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 10<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51203""></a>
  <div class="note">
   <strong class="user">Vinicius Cubas Brand</strong>
   <a href="#51203" class="date">23-Mar-2005 05:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following function does exaclty the same thing of array_map. However, maintains the same index of the input arrays<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_map_keys</span><span class="keyword">(</span><span class="default">$param1</span><span class="keyword">,</span><span class="default">$param2</span><span class="keyword">,</span><span class="default">$param3</span><span class="keyword">=</span><span class="default">NULL</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$param3 </span><span class="keyword">!== </span><span class="default">NULL</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(array(</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">) as </span><span class="default">$p_name</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(${</span><span class="string">'param'</span><span class="keyword">.</span><span class="default">$p_name</span><span class="keyword">}))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">__FUNCTION__</span><span class="keyword">.</span><span class="string">'(): Argument #'</span><span class="keyword">.</span><span class="default">$p_name</span><span class="keyword">.</span><span class="string">' should be an array'</span><span class="keyword">,</span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$param2 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$param1</span><span class="keyword">,</span><span class="default">$param2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">],</span><span class="default">$param3</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$param2</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">__FUNCTION__</span><span class="keyword">.</span><span class="string">'(): Argument #2 should be an array'</span><span class="keyword">,</span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$param2 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$param1</span><span class="keyword">,</span><span class="default">$param2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$res</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
For instance:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $arr1 </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'3' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'4' </span><span class="keyword">=&gt; </span><span class="string">'b'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'5' </span><span class="keyword">=&gt; </span><span class="string">'c'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr2 </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'3' </span><span class="keyword">=&gt; </span><span class="string">'d'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'4' </span><span class="keyword">=&gt; </span><span class="string">'e'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'5' </span><span class="keyword">=&gt; </span><span class="string">'f'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr3 </span><span class="keyword">= </span><span class="default">array_map_keys</span><span class="keyword">(</span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$b'</span><span class="keyword">,</span><span class="string">'return $a.$b;'</span><span class="keyword">),</span><span class="default">$arr1</span><span class="keyword">,</span><span class="default">$arr2</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr3</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The result will be:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; ad<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; be<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; cf<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50160""></a>
  <div class="note">
   <strong class="user">endofyourself at yahoo dot com</strong>
   <a href="#50160" class="date">19-Feb-2005 11:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to call a static method from array_map, this will NOT work:<br />
<br />
<span class="default">&lt;?PHP<br />
array_map</span><span class="keyword">(</span><span class="string">'myclass::myMethod' </span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Instead, you need to do this:<br />
<br />
<span class="default">&lt;?PHP<br />
array_map</span><span class="keyword">( array(</span><span class="string">'myclass'</span><span class="keyword">,</span><span class="string">'myMethod'</span><span class="keyword">) , </span><span class="default">$value</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
It is helpful to remember that this will work with any PHP function which expects a callback argument.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43757""></a>
  <div class="note">
   <strong class="user">nd0 at gmx dot de</strong>
   <a href="#43757" class="date">02-Jul-2004 04:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_map works also fine with create_function:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$n'</span><span class="keyword">, </span><span class="string">'return $n*$n*$n;'</span><span class="keyword">), </span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
if you want to manipulate the elements of the array, instead to on a copy,<br />
than take a look at array_walk:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'&amp;$n'</span><span class="keyword">, </span><span class="string">'$n = $n*$n*$n;'</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
The Result of both is:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 27<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 64<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 125<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41433""></a>
  <div class="note">
   <strong class="user">bishop</strong>
   <a href="#41433" class="date">09-Apr-2004 05:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Occasionally, you may find that you need to pull out a column (or several) from an array.&nbsp; Here's a map-like function to do that:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function &amp;</span><span class="default">array_shear</span><span class="keyword">(&amp;</span><span class="default">$arrays</span><span class="keyword">, </span><span class="default">$idx1 </span><span class="comment">/* ... */</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$indexes </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$indexes</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$newArrays </span><span class="keyword">= array ();<br />
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">) as </span><span class="default">$arrayKey</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newArray </span><span class="keyword">= array ();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$indexes </span><span class="keyword">as </span><span class="default">$index</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newArray</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] = </span><span class="default">$arrays</span><span class="keyword">[</span><span class="default">$arrayKey</span><span class="keyword">][</span><span class="default">$index</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$arrays</span><span class="keyword">[</span><span class="default">$arrayKey</span><span class="keyword">][</span><span class="default">$index</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newArrays</span><span class="keyword">[</span><span class="default">$arrayKey</span><span class="keyword">] = </span><span class="default">$newArray</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$newArrays</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
So, doing this:<br />
<br />
<span class="default">&lt;?php<br />
$t1 </span><span class="keyword">= array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array (</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array (</span><span class="string">'d'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'f'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">5 </span><span class="keyword">=&gt; array (</span><span class="string">'g'</span><span class="keyword">, </span><span class="string">'h'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp;&nbsp; );<br />
<br />
</span><span class="default">$t2 </span><span class="keyword">= </span><span class="default">array_shear</span><span class="keyword">(</span><span class="default">$t1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
will result in:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$t1 </span><span class="keyword">= array (<br />
&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt;&nbsp;&nbsp; array (&nbsp; &nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">'c'</span><span class="keyword">,&nbsp; ),<br />
&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;&nbsp;&nbsp; array (&nbsp; &nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">'f'</span><span class="keyword">,&nbsp; ),<br />
&nbsp; </span><span class="default">5 </span><span class="keyword">=&gt;&nbsp;&nbsp; array (&nbsp; &nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">'i'</span><span class="keyword">,&nbsp; ),<br />
);<br />
<br />
</span><span class="default">$t2 </span><span class="keyword">= array (<br />
&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt;&nbsp;&nbsp; array (&nbsp; &nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'b'</span><span class="keyword">,&nbsp; &nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">,&nbsp; ),<br />
&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;&nbsp;&nbsp; array (&nbsp; &nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'e'</span><span class="keyword">,&nbsp; &nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'d'</span><span class="keyword">,&nbsp; ),<br />
&nbsp; </span><span class="default">5 </span><span class="keyword">=&gt;&nbsp;&nbsp; array (&nbsp; &nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'h'</span><span class="keyword">,&nbsp; &nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'g'</span><span class="keyword">,&nbsp; ),<br />
);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28247""></a>
  <div class="note">
   <strong class="user">stephen at mu dot com dot au</strong>
   <a href="#28247" class="date">06-Jan-2003 10:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A note when doing something allong the lines of:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">foo </span><span class="keyword">{<br />
&nbsp; var </span><span class="default">$var</span><span class="keyword">;<br />
&nbsp; function </span><span class="default">bar</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">array_map</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">, </span><span class="string">"baz"</span><span class="keyword">), array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">));<br />
&nbsp; }<br />
<br />
&nbsp; function </span><span class="default">baz</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">var </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">var </span><span class="keyword">+ </span><span class="default">$arg</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This will *not* work as expected. You need to pass $this by reference as with:<br />
<br />
array_map(array(&amp;$this, "baz"), array(1,2,3));<br />
<br />
or you'll be making a copy of the object each time, changing a value, then throwing the result away.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22369""></a>
  <div class="note">
   <strong class="user">dan at mojavelinux dot com</strong>
   <a href="#22369" class="date">14-Jun-2002 10:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a better, more true version of a deep array_map.&nbsp; The only negative of this function is that the array is passed by reference, so just be aware of that. (patches welcome)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_map_deep</span><span class="keyword">(&amp;</span><span class="default">$in_array</span><span class="keyword">, </span><span class="default">$in_func</span><span class="keyword">, </span><span class="default">$in_args </span><span class="keyword">= array(), </span><span class="default">$in_index </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// fix people from messing up the index of the value<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$in_index </span><span class="keyword">&lt; </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$in_index </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$in_array</span><span class="keyword">) as </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// we need a reference, not a copy, normal foreach won't do<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">=&amp; </span><span class="default">$in_array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// we need to copy args because we are doing <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // manipulation on it farther down<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">$in_args</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_map_deep</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$in_func</span><span class="keyword">, </span><span class="default">$in_args</span><span class="keyword">, </span><span class="default">$in_index</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">, </span><span class="default">$in_index </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">, </span><span class="default">$in_index </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$in_func</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$in_array</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This is a neat function because you can pass an array, a function, and an array of parameters, and finally, and index of where in the array of parameters for the callback function the contents you are mapping should get replaced.&nbsp; This index is human based (starts at 1), and can be used in something like a preg_replace callback, where the contents must be the 3rd index.&nbsp; Enjoy!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-keys.html">array_keys</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-merge-recursive.html">array_merge_recursive</a></div>
 <div class="up"><a href="ref.array.html">Array Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
