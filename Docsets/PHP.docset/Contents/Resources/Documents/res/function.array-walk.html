<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Apply a user function to every member of an array</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-walk-recursive.html">array_walk_recursive</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array.html">array</a></div>
 <div class="up"><a href="ref.array.html">Array Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.array-walk" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_walk</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">array_walk</span> &mdash; <span class="dc-title">Apply a user function to every member of an array</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.array-walk-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><b>array_walk</b></span>
    ( <span class="methodparam"><span class="type">array</span> <tt class="parameter reference">&$array</tt></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.callback" class="type callback">callback</a></span> <tt class="parameter">$funcname</tt></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <tt class="parameter">$userdata</tt></span>
  ] )</div>

  <p class="simpara">
   Applies the user-defined function <i><tt class="parameter">funcname</tt></i> to each
   element of the <i><tt class="parameter">array</tt></i> array.
  </p>
  <p class="para">
   <span class="function"><b>array_walk()</b></span> is not affected by the internal array
   pointer of <i><tt class="parameter">array</tt></i>.  <span class="function"><b>array_walk()</b></span>
   will walk through the entire array regardless of pointer position.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.array-walk-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">array</tt></i></span>
     <dd>

      <p class="para">
       The input array.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">funcname</tt></i></span>
     <dd>

      <p class="para">
       Typically, <i><tt class="parameter">funcname</tt></i> takes on two parameters.
       The <i><tt class="parameter">array</tt></i> parameter&#039;s value being the first, and
       the key/index second.
      </p>
      <blockquote class="note"><p><b class="note">Note</b>: 
       <p class="para">
        If <i><tt class="parameter">funcname</tt></i> needs to be working with the
        actual values of the array, specify the first parameter of
        <i><tt class="parameter">funcname</tt></i> as a
        <a href="language.references.html" class="link">reference</a>. Then,
        any changes made to those elements will be made in the
        original array itself.
       </p>
      </p></blockquote>
      <blockquote class="note"><p><b class="note">Note</b>: 
        <p class="para">
          Many internal functions (for example <span class="function"><a href="function.strtolower.html" class="function">strtolower()</a></span>)
          will throw a warning if more than the expected number of argument
          are passed in and are not usable directly as
          <i><tt class="parameter">funcname</tt></i>.
        </p>
      </p></blockquote>
      <p class="para">
       Only the values of the <i><tt class="parameter">array</tt></i> may potentially be
       changed; its structure cannot be altered, i.e., the programmer cannot
       add, unset or reorder elements. If the callback does not respect this
       requirement, the behavior of this function is undefined, and      
       unpredictable.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">userdata</tt></i></span>
     <dd>

      <p class="para">
       If the optional <i><tt class="parameter">userdata</tt></i> parameter is supplied,
       it will be passed as the third parameter to the callback
       <i><tt class="parameter">funcname</tt></i>.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.array-walk-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <b><tt>TRUE</tt></b> on success or <b><tt>FALSE</tt></b> on failure.
  </p>
 </div>

 <div class="refsect1 errors" id="refsect1-function.array-walk-errors">
  <h3 class="title">Errors/Exceptions</h3>
  <p class="para">
   If function <i><tt class="parameter">funcname</tt></i> requires more parameters than
   given to it, an error of level <a href="errorfunc.constants.html" class="link">
   E_WARNING</a> will be generated each time <span class="function"><b>array_walk()</b></span>
   calls <i><tt class="parameter">funcname</tt></i>. These warnings may be suppressed by
   prepending the PHP error operator
   <a href="language.operators.errorcontrol.html" class="link">@</a> to the
   <span class="function"><b>array_walk()</b></span> call, or by using
   <span class="function"><a href="function.error-reporting.html" class="function">error_reporting()</a></span>.
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.array-walk-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4542">
    <p><b>Example #1 <span class="function"><b>array_walk()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$fruits&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"d"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"lemon"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"orange"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"b"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"banana"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"c"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"apple"</span><span style="color: #007700">);<br /><br />function&nbsp;</span><span style="color: #0000BB">test_alter</span><span style="color: #007700">(&amp;</span><span style="color: #0000BB">$item1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$prefix</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$item1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$prefix</span><span style="color: #DD0000">:&nbsp;</span><span style="color: #0000BB">$item1</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">test_print</span><span style="color: #007700">(</span><span style="color: #0000BB">$item2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">.&nbsp;</span><span style="color: #0000BB">$item2</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />}<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Before&nbsp;...:\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">array_walk</span><span style="color: #007700">(</span><span style="color: #0000BB">$fruits</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'test_print'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">array_walk</span><span style="color: #007700">(</span><span style="color: #0000BB">$fruits</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'test_alter'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'fruit'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"...&nbsp;and&nbsp;after:\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">array_walk</span><span style="color: #007700">(</span><span style="color: #0000BB">$fruits</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'test_print'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Before ...:
d. lemon
a. orange
b. banana
c. apple
... and after:
d. fruit: lemon
a. fruit: orange
b. fruit: banana
c. fruit: apple
</pre></div>
    </div>
   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.array-walk-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.array-walk-recursive.html" class="function" rel="rdfs-seeAlso">array_walk_recursive()</a> - Apply a user function recursively to every member of an array</span></li>
    <li class="member"><span class="function"><a href="function.iterator-apply.html" class="function" rel="rdfs-seeAlso">iterator_apply()</a> - Call a function for every element in an iterator</span></li>
    <li class="member"><span class="function"><a href="function.create-function.html" class="function" rel="rdfs-seeAlso">create_function()</a> - Create an anonymous (lambda-style) function</span></li>
    <li class="member"><span class="function"><a href="function.list.html" class="function" rel="rdfs-seeAlso">list()</a> - Assign variables as if they were an array</span></li>
    <li class="member"><span class="function"><a href="function.each.html" class="function" rel="rdfs-seeAlso">each()</a> - Return the current key and value pair from an array and advance the array cursor</span></li>
    <li class="member"><span class="function"><a href="function.call-user-func-array.html" class="function" rel="rdfs-seeAlso">call_user_func_array()</a> - Call a callback with an array of parameters</span></li>
    <li class="member"><span class="function"><a href="function.array-map.html" class="function" rel="rdfs-seeAlso">array_map()</a> - Applies the callback to the elements of the given arrays</span></li>
    <li class="member">information about the <a href="language.pseudo-types.html#language.types.callback" class="link">callback</a> type</li>
    <li class="member"><a href="control-structures.foreach.html" class="link">foreach</a></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="106785""></a>
  <div class="note">
   <strong class="user">manuscle at gmail dot com</strong>
   <a href="#106785" class="date">06-Dec-2011 07:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
example with closures, checking and deleting value in array:<br />
<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= array(</span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="string">'bar'</span><span class="keyword">, </span><span class="string">'baz' </span><span class="keyword">=&gt; </span><span class="string">'bat'</span><span class="keyword">);<br />
<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, function(</span><span class="default">$val</span><span class="keyword">,</span><span class="default">$key</span><span class="keyword">) use(&amp;</span><span class="default">$array</span><span class="keyword">){ <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$val </span><span class="keyword">== </span><span class="string">'bar'</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
});<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106298""></a>
  <div class="note">
   <strong class="user">alex_stanhope at hotmail dot com</strong>
   <a href="#106298" class="date">26-Oct-2011 01:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wanted to walk an array and reverse map it into a second array.&nbsp; I decided to use array_walk because it should be faster than a reset,next loop or foreach(x as &amp;$y) loop.<br />
<br />
<span class="default">&lt;?php<br />
$output </span><span class="keyword">= array();<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="string">'gmapmark_reverse'</span><span class="keyword">, </span><span class="default">$output</span><span class="keyword">);<br />
<br />
function </span><span class="default">gmapmark_reverse</span><span class="keyword">(&amp;</span><span class="default">$item</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">, &amp;</span><span class="default">$target</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$target</span><span class="keyword">[</span><span class="default">$item</span><span class="keyword">[</span><span class="string">'form_key'</span><span class="keyword">]] = </span><span class="default">$index</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
In my debugger I can see that $target is progressively updated, but when array_walk returns, $output is empty.&nbsp; If however I use a (deprecated) call-by-reference:<br />
<br />
<span class="default">&lt;?php<br />
array_walk</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="string">'gmapmark_reverse'</span><span class="keyword">, &amp;</span><span class="default">$output</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
$output is returned correctly.&nbsp; Unfortunately there's not an easy way to suppress the warnings:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">@</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="string">'gmapmark_reverse'</span><span class="keyword">, &amp;</span><span class="default">$output</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
doesn't silence them.&nbsp; I've designed a workaround using a static array:<br />
<br />
<span class="default">&lt;?php<br />
$reverse </span><span class="keyword">= array();<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="string">'gmapmark_reverse'</span><span class="keyword">);<br />
</span><span class="comment">// call function one last time to get target array out, because parameters don't work<br />
</span><span class="default">$reverse </span><span class="keyword">= </span><span class="default">gmapmark_reverse</span><span class="keyword">(</span><span class="default">$reverse</span><span class="keyword">);<br />
<br />
function </span><span class="default">gmapmark_reverse</span><span class="keyword">(&amp;</span><span class="default">$item</span><span class="keyword">, </span><span class="default">$index </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp; static </span><span class="default">$target</span><span class="keyword">;<br />
&nbsp; if (!</span><span class="default">$target</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$target </span><span class="keyword">= array();<br />
&nbsp; }<br />
&nbsp; if (isset(</span><span class="default">$item</span><span class="keyword">[</span><span class="string">'form_key'</span><span class="keyword">])) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$target</span><span class="keyword">[</span><span class="default">$item</span><span class="keyword">[</span><span class="string">'form_key'</span><span class="keyword">]] = </span><span class="default">$index</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; return(</span><span class="default">$target</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106040""></a>
  <div class="note">
   <strong class="user">tufanbarisyildirim at gmail dot com</strong>
   <a href="#106040" class="date">05-Oct-2011 06:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Filter an array by using key.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $product_1 </span><span class="keyword">= </span><span class="string">'test'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$product_2 </span><span class="keyword">= </span><span class="string">'test 2'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">array_key_filter</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$callback </span><span class="keyword">= </span><span class="string">'trim'</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$filtered </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,function (</span><span class="default">$degeri</span><span class="keyword">,</span><span class="default">$degisken_adi</span><span class="keyword">) use (&amp;</span><span class="default">$filtered</span><span class="keyword">,</span><span class="default">$callback</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$callback</span><span class="keyword">(</span><span class="default">$degisken_adi</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$filtered</span><span class="keyword">[</span><span class="default">$degisken_adi</span><span class="keyword">] =&nbsp; </span><span class="default">$degeri</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; });<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$filtered</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">#using<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$degiskenler </span><span class="keyword">= </span><span class="default">array_key_filter</span><span class="keyword">(</span><span class="default">get_defined_vars</span><span class="keyword">(),function(</span><span class="default">$key</span><span class="keyword">) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">,</span><span class="string">'product_'</span><span class="keyword">) === </span><span class="default">0</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; });<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$degiskenler</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>output:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [product_1] =&gt; test<br />
&nbsp;&nbsp;&nbsp; [product_2] =&gt; test 2<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104851""></a>
  <div class="note">
   <strong class="user">Maxim</strong>
   <a href="#104851" class="date">11-Jul-2011 12:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that using array_walk with intval is inappropriate.<br />
There are many examples on internet that suggest to use following code to safely escape $_POST arrays of integers:<br />
<span class="default">&lt;?php<br />
array_walk</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'something'</span><span class="keyword">],</span><span class="string">'intval'</span><span class="keyword">); </span><span class="comment">// does nothing in PHP 5.3.3<br />
</span><span class="default">?&gt;<br />
</span>It works in _some_ older PHP versions (5.2), but is against specifications. Since intval() does not modify it's arguments, but returns modified result, the code above has no effect on the array and will leave security hole in your website.<br />
<br />
You can use following instead:<br />
<span class="default">&lt;?php<br />
$_POST</span><span class="keyword">[</span><span class="string">'something'</span><span class="keyword">] = </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">intval</span><span class="keyword">,</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'something'</span><span class="keyword">]);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103056""></a>
  <div class="note">
   <strong class="user">@jfredys</strong>
   <a href="#103056" class="date">22-Mar-2011 05:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was looking for trimming all the elements in an array, I found this as the simplest solution:<br />
<br />
<span class="default">&lt;?php<br />
array_walk</span><span class="keyword">(</span><span class="default">$ids</span><span class="keyword">, </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'&amp;$val'</span><span class="keyword">, </span><span class="string">'$val = trim($val);'</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102456""></a>
  <div class="note">
   <strong class="user">http://alex.moutonking.com/wordpress</strong>
   <a href="#102456" class="date">15-Feb-2011 10:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For completeness one has to mention the possibility of using this function with PHP 5.3 closures:<br />
<br />
<span class="default">&lt;?php<br />
$names </span><span class="keyword">= array(</span><span class="string">"D\'Artagnan"</span><span class="keyword">, </span><span class="string">"Aramis"</span><span class="keyword">, </span><span class="string">"Portos"</span><span class="keyword">);<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$names</span><span class="keyword">, function(&amp;</span><span class="default">$n</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">);<br />
});<br />
</span><span class="default">?&gt;<br />
</span><br />
The trap with array_walk being it doesn't return the array, instead it's modified by reference.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101211""></a>
  <div class="note">
   <strong class="user">op_adept at yahoo dot co dot uk</strong>
   <a href="#101211" class="date">02-Dec-2010 03:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Prefix array values with keys and retrieve as a glued string, the original array remains unchanged. I used this to create some SQL queries from arrays.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_implode_prefix</span><span class="keyword">(</span><span class="default">$outer_glue</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$inner_glue</span><span class="keyword">, </span><span class="default">$prefix</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_walk</span><span class="keyword">( </span><span class="default">$arr </span><span class="keyword">, </span><span class="string">"prefix"</span><span class="keyword">, array(</span><span class="default">$inner_glue</span><span class="keyword">, </span><span class="default">$prefix</span><span class="keyword">) );<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$outer_glue</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">);<br />
}<br />
<br />
function </span><span class="default">prefix</span><span class="keyword">(&amp;</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, array </span><span class="default">$additional</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$inner_glue </span><span class="keyword">= </span><span class="default">$additional</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$prefix </span><span class="keyword">= isset(</span><span class="default">$additional</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])? </span><span class="default">$additional</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] : </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$prefix </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) </span><span class="default">$prefix </span><span class="keyword">= </span><span class="default">$key</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$prefix</span><span class="keyword">.</span><span class="default">$inner_glue</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//Example 1:<br />
</span><span class="default">$order_by </span><span class="keyword">= array(</span><span class="string">"3"</span><span class="keyword">=&gt;</span><span class="string">"ASC"</span><span class="keyword">, </span><span class="string">"2"</span><span class="keyword">=&gt;</span><span class="string">"DESC"</span><span class="keyword">, </span><span class="string">"7"</span><span class="keyword">=&gt;</span><span class="string">"ASC"</span><span class="keyword">);<br />
echo </span><span class="default">array_implode_prefix</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">, </span><span class="default">$order_by</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">);<br />
</span><span class="comment">//Output: 3 ASC,2 DESC,7 ASC<br />
<br />
//Example 2:<br />
</span><span class="default">$columns </span><span class="keyword">= array(</span><span class="string">"product_id"</span><span class="keyword">, </span><span class="string">"category_id"</span><span class="keyword">, </span><span class="string">"name"</span><span class="keyword">, </span><span class="string">"description"</span><span class="keyword">);<br />
</span><span class="default">$table </span><span class="keyword">= </span><span class="string">"product"</span><span class="keyword">;<br />
<br />
echo </span><span class="default">array_implode_prefix</span><span class="keyword">(</span><span class="string">", "</span><span class="keyword">, </span><span class="default">$columns</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">, </span><span class="default">$table</span><span class="keyword">);<br />
</span><span class="comment">//Output:product.product_id, product.category_id, product.name, product.description <br />
<br />
//Example 3 (function prefix) won't really be used on its own<br />
</span><span class="default">$pre</span><span class="keyword">= </span><span class="string">"vacation"</span><span class="keyword">;<br />
</span><span class="default">$value </span><span class="keyword">= </span><span class="string">"lalaland"</span><span class="keyword">;<br />
</span><span class="default">prefix</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$pre</span><span class="keyword">, array(</span><span class="string">"."</span><span class="keyword">));<br />
echo </span><span class="default">$value</span><span class="keyword">;<br />
<br />
</span><span class="comment">//Output: vacation.lalaland<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100681""></a>
  <div class="note">
   <strong class="user">AskApache</strong>
   <a href="#100681" class="date">30-Oct-2010 12:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a handy function that illustrates using an array_walk that uses a create_function as the callback which in turn uses another array_walk with another create_function that outputs the global variables pretty-print style.<br />
<br />
Note that by using $g=array() as the first arg for array_walk it isn't necessary to declare the array beforehand.<br />
<br />
Other notes:&nbsp; ob_start, (print), and array_walk all return true on success which is how the if processing works.<br />
<br />
Using <span class="default">&lt;?php </span><span class="keyword">!!</span><span class="default">$array</span><span class="keyword">; </span><span class="default">?&gt;</span> returns true only if sizeof array is greater than 0, just a shortcut for <span class="default">&lt;?php </span><span class="keyword">if(</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">);</span><span class="default">?&gt;</span> ... more in the php manual section on booleans.<br />
<br />
The output is meant to be displayed inline on a page so the htmlspecialchars is called on the output.&nbsp; The output is buffered by ob_start and is then output by echoing the return of ob_get_clean(), which returns the buffer and cleans the buffer.<br />
<br />
DEBUG would need to be a defined constant for this to execute, personally I like to <br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REMOTE_ADDR'</span><span class="keyword">]==</span><span class="string">'MYSTATICIPADDRESS'</span><span class="keyword">) </span><span class="default">askapache_global_debug</span><span class="keyword">();<br />
</span><span class="comment">//or<br />
</span><span class="keyword">if(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REMOTE_ADDR'</span><span class="keyword">]==</span><span class="string">'MYSTATICIPADDRESS'</span><span class="keyword">) </span><span class="default">define</span><span class="keyword">(</span><span class="string">'DEBUG'</span><span class="keyword">,</span><span class="default">TRUE</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">askapache_global_debug</span><span class="keyword">()<br />
{<br />
</span><span class="default">array_walk</span><span class="keyword">(<br />
&nbsp;</span><span class="default">$g</span><span class="keyword">=array(</span><span class="string">'_GET'</span><span class="keyword">,</span><span class="string">'_POST'</span><span class="keyword">,</span><span class="string">'_COOKIE'</span><span class="keyword">,</span><span class="string">'_SESSION'</span><span class="keyword">,</span><span class="string">'_ENV'</span><span class="keyword">,</span><span class="string">'_SERVER'</span><span class="keyword">),<br />
&nbsp;&nbsp; </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$n'</span><span class="keyword">,</span><span class="string">'global $$n; <br />
&nbsp;&nbsp;&nbsp; if(<br />
&nbsp;&nbsp; &nbsp;&nbsp; !!$$n<br />
&nbsp;&nbsp; &nbsp;&nbsp; &amp;&amp; ob_start()<br />
&nbsp;&nbsp; &nbsp;&nbsp; &amp;&amp; (print "( $"."$n )\n")<br />
&nbsp;&nbsp; &nbsp;&nbsp; &amp;&amp; array_walk($$n, <br />
&nbsp;&nbsp; &nbsp; &nbsp; create_function(\'&amp;$v,$k\', \'echo "[$k] =&gt; $v\n";\'))<br />
&nbsp;&nbsp; &nbsp; ) <br />
&nbsp;&nbsp;&nbsp; echo "&lt;pre&gt;".htmlspecialchars(ob_get_clean())."&lt;/pre&gt;";'<br />
&nbsp;&nbsp; </span><span class="keyword">)<br />
);<br />
}&nbsp; &nbsp; <br />
if(</span><span class="default">DEBUG</span><span class="keyword">) </span><span class="default">askapache_global_debug</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99748""></a>
  <div class="note">
   <strong class="user">matthew at codenaked dot org</strong>
   <a href="#99748" class="date">02-Sep-2010 11:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using lambdas you can create a handy zip function to zip together the keys and values of an array. I extended it to allow you to pass in the "glue" string as the optional userdata parameter. The following example is used to zip an array of email headers:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* Zip together the keys and values of an array using the provided glue<br />
&nbsp;* <br />
&nbsp;* The values of the array are replaced with the new computed value<br />
&nbsp;* <br />
&nbsp;* @param array $data<br />
&nbsp;* @param string $glue<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">zip</span><span class="keyword">(&amp;</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$glue</span><span class="keyword">=</span><span class="string">': '</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">InvalidArgumentException</span><span class="keyword">(</span><span class="string">'First parameter must be an array'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, function(&amp;</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$joinUsing</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$key </span><span class="keyword">. </span><span class="default">$joinUsing </span><span class="keyword">. </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }, </span><span class="default">$glue</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$myName </span><span class="keyword">= </span><span class="string">'Matthew Purdon'</span><span class="keyword">;<br />
</span><span class="default">$myEmail </span><span class="keyword">= </span><span class="string">'matthew@example.com'</span><span class="keyword">;<br />
</span><span class="default">$from </span><span class="keyword">= </span><span class="string">"</span><span class="default">$myName</span><span class="string"> &lt;</span><span class="default">$myEmail</span><span class="string">&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="default">$headers</span><span class="keyword">[</span><span class="string">'From'</span><span class="keyword">] = </span><span class="default">$from</span><span class="keyword">;<br />
</span><span class="default">$headers</span><span class="keyword">[</span><span class="string">'Reply-To'</span><span class="keyword">] = </span><span class="default">$from</span><span class="keyword">;<br />
</span><span class="default">$headers</span><span class="keyword">[</span><span class="string">'Return-path'</span><span class="keyword">] = </span><span class="string">"&lt;</span><span class="default">$myEmail</span><span class="string">&gt;"</span><span class="keyword">;<br />
</span><span class="default">$headers</span><span class="keyword">[</span><span class="string">'X-Mailer'</span><span class="keyword">] = </span><span class="string">"PHP" </span><span class="keyword">. </span><span class="default">phpversion</span><span class="keyword">() . </span><span class="string">""</span><span class="keyword">;<br />
</span><span class="default">$headers</span><span class="keyword">[</span><span class="string">'Content-Type'</span><span class="keyword">] = </span><span class="string">'text/plain; charset="UTF-8"'</span><span class="keyword">;<br />
<br />
</span><span class="default">zip</span><span class="keyword">(</span><span class="default">$headers</span><span class="keyword">);<br />
<br />
</span><span class="default">$headers </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$headers</span><span class="keyword">);<br />
</span><span class="default">$headers </span><span class="keyword">.= </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
echo </span><span class="default">$headers</span><span class="keyword">;<br />
<br />
</span><span class="comment">/*<br />
From: Matthew Purdon &lt;matthew@example.com&gt;<br />
Reply-To: Matthew Purdon &lt;matthew@example.com&gt;<br />
Return-path: &lt;matthew@example.com&gt;<br />
X-Mailer: PHP5.3.2<br />
Content-Type: text/plain; charset="UTF-8"<br />
*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95437""></a>
  <div class="note">
   <strong class="user">arekandrei at yandex dot ru</strong>
   <a href="#95437" class="date">03-Jan-2010 07:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use lambda function as a second parameter:<br />
<br />
<span class="default">&lt;?php<br />
array_walk</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">, function(&amp;</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// if you want to change array values then "&amp;" before the $value is mandatory.<br />
</span><span class="keyword">});<br />
</span><span class="default">?&gt;<br />
</span><br />
Example (multiply positive values by two):<br />
<br />
<span class="default">&lt;?php<br />
$myArray </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br />
<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">, function(&amp;</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$value </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) </span><span class="default">$value </span><span class="keyword">*= </span><span class="default">2</span><span class="keyword">;<br />
});<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95096""></a>
  <div class="note">
   <strong class="user">rustamabd at gmail dot com</strong>
   <a href="#95096" class="date">13-Dec-2009 06:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Don't forget about the array_map() function, it may be easier to use!<br />
<br />
Here's how to lower-case all elements in an array:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $arr </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'strtolower'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93912""></a>
  <div class="note">
   <strong class="user">Zigbigidorlu</strong>
   <a href="#93912" class="date">06-Oct-2009 10:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I tried this function to create safe SQL arrays when I'm creating query strings from keywords, but I found it to be too bulky for my purposes.&nbsp; So, instead I created this function:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;</span><span class="comment">//Create a SQL safe array<br />
&nbsp;</span><span class="keyword">function </span><span class="default">mysql_safe_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
&nbsp;{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$safe </span><span class="keyword">= </span><span class="default">mysql_real_escape_string</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$safe</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$safe</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;}<br />
<br />
&nbsp;</span><span class="comment">//Example usage<br />
&nbsp;</span><span class="default">$keywords </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'keywords'</span><span class="keyword">]);<br />
<br />
&nbsp;</span><span class="default">$keywords </span><span class="keyword">= </span><span class="default">mysql_safe_array</span><span class="keyword">(</span><span class="default">$keywords</span><span class="keyword">);<br />
<br />
&nbsp;</span><span class="default">$query_s </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">"%' AND `field` LIKE '%"</span><span class="keyword">,</span><span class="default">$keywords</span><span class="keyword">);<br />
&nbsp;</span><span class="default">$query </span><span class="keyword">= </span><span class="string">"`description` LIKE '%</span><span class="default">$query_s</span><span class="string">%'"</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$query </span><span class="keyword">= </span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">implode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$query</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89347""></a>
  <div class="note">
   <strong class="user">erelsgl at gmail dot com</strong>
   <a href="#89347" class="date">04-Mar-2009 03:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to unset elements from the callback function, maybe what you really need is array_filter.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87262""></a>
  <div class="note">
   <strong class="user">jab_creations_-at_-yahoo_-dot-_com</strong>
   <a href="#87262" class="date">26-Nov-2008 04:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Unfortunately I spent a lot of time trying to permanently apply the effects of a function to an array using the array_walk function when instead array_map was what I wanted. Here is a very simple though effective example for those who may be getting overly frustrated with this function...<br />
<br />
<span class="default">&lt;?php<br />
$fruits </span><span class="keyword">= array(</span><span class="string">"Lemony &amp; Fresh"</span><span class="keyword">,</span><span class="string">"Orange Twist"</span><span class="keyword">,</span><span class="string">"Apple Juice"</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$fruits</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
<br />
function </span><span class="default">name_base</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">)<br />
{<br />
&nbsp;</span><span class="default">$name2 </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="string">"_"</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;</span><span class="default">$name3 </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"&amp;"</span><span class="keyword">, </span><span class="string">"and"</span><span class="keyword">, </span><span class="default">$name2</span><span class="keyword">);<br />
&nbsp;</span><span class="default">$name4 </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$name3</span><span class="keyword">);<br />
&nbsp;echo </span><span class="default">$name4</span><span class="keyword">.</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
&nbsp;return </span><span class="default">$name4</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">$test </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'name_base'</span><span class="keyword">, </span><span class="default">$fruits</span><span class="keyword">);<br />
</span><span class="default">$fruits_fixed </span><span class="keyword">= </span><span class="default">$test</span><span class="keyword">;<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$fruits_fixed</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87042""></a>
  <div class="note">
   <strong class="user">peterzuzek AT gmail DOT com</strong>
   <a href="#87042" class="date">16-Nov-2008 09:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had some problems using this function - it didn't want to apply PHP-defined functions. So I decided to write my own - here it is. I had to use some generic-programming skills, didn't really checked the speed (I think it could be slow)... I believe it could be much better, but I don't know, how - well, I guess multiple array support and recursion would be nice. So?<br />
<br />
Prototype:<br />
bool arrayWalk(array &amp;$arry, callback $callback, mixed $params=false)<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">arrayWalk</span><span class="keyword">(&amp;</span><span class="default">$arry</span><span class="keyword">, </span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$params</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$P</span><span class="keyword">=array(</span><span class="string">""</span><span class="keyword">); </span><span class="comment">// parameters<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">; </span><span class="comment">// arguement string :)<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$params </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">) { </span><span class="comment">// add parameters<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">)) { </span><span class="comment">// multiple additional parameters<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$params </span><span class="keyword">as </span><span class="default">$par</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; { </span><span class="default">$P</span><span class="keyword">[]=</span><span class="default">$par</span><span class="keyword">; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else </span><span class="comment">// just one additional<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">{ </span><span class="default">$P</span><span class="keyword">[]=</span><span class="default">$params</span><span class="keyword">; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for( </span><span class="comment">// create the arguement string<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; isset(</span><span class="default">$P</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]); ++</span><span class="default">$i<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; { </span><span class="default">$a</span><span class="keyword">.=</span><span class="string">'$'</span><span class="keyword">.</span><span class="default">chr</span><span class="keyword">(</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">97</span><span class="keyword">).</span><span class="string">', '</span><span class="keyword">; } </span><span class="comment">// random argument names<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, -</span><span class="default">2</span><span class="keyword">); </span><span class="comment">// to get rid of the last comma and two spaces<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$func</span><span class="keyword">=</span><span class="default">create_function</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="string">'return '</span><span class="keyword">.</span><span class="default">$callback</span><span class="keyword">.</span><span class="string">'('</span><span class="keyword">.</span><span class="default">$a</span><span class="keyword">.</span><span class="string">');'</span><span class="keyword">); </span><span class="comment">// the generic function<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$func</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for( </span><span class="comment">// cycle through array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; isset(</span><span class="default">$arry</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]); ++</span><span class="default">$i<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$P</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]=</span><span class="default">$arry</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]; </span><span class="comment">// first element must be the first argument - array value<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arry</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$func</span><span class="keyword">, </span><span class="default">$P</span><span class="keyword">); </span><span class="comment">// assign the new value obtained by the generic function<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; { return </span><span class="default">false</span><span class="keyword">; } </span><span class="comment">// failure - function not callable<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">true</span><span class="keyword">; </span><span class="comment">// success!<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">} </span><span class="comment">// arrayWalk()<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
One big problem I've noticed so far - for example, if you wanted to use str_replace on the array, you'd fail - simply because of the arguement order of str_replace, where the string modified is the third arguement, not the first as arrayWalk requires.<br />
<br />
So, still some work left...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86712""></a>
  <div class="note">
   <strong class="user">diyism</strong>
   <a href="#86712" class="date">30-Oct-2008 11:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When i pass the third parameter by reference in php5.2.5,<br />
happened this: Warning: Call-time pass-by-reference has been deprecated - argument passed by value...<br />
<br />
And to set allow_call_time_pass_reference to true in php.ini won't work, according to <a href="http://bugs.php.net/bug.php?id=19699&nbsp;&nbsp; thus to work around:" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=19699&nbsp;&nbsp; thus to work around:</a><br />
<br />
<span class="default">&lt;?php<br />
array_walk</span><span class="keyword">(</span><span class="default">$arrChnOut</span><span class="keyword">, </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'&amp;$v, $k, $arr_rtn'</span><span class="keyword">, </span><span class="string">'if ($k{0}!="_") {$arr_rtn[0]["_".$v[\'ID\']]=$v; unset($arr_rtn[0][$k]);}'</span><span class="keyword">), array(&amp;</span><span class="default">$arrChnOut</span><span class="keyword">)); <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86499""></a>
  <div class="note">
   <strong class="user">diyism</strong>
   <a href="#86499" class="date">22-Oct-2008 04:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Although the manual warned you not to unset element, but sometimes thus is very useful and work as charm:<br />
<br />
<span class="default">&lt;?php<br />
$arrChnOut</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">=&gt;array(</span><span class="string">'ID' </span><span class="keyword">=&gt; </span><span class="string">'13'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'ChannelName' </span><span class="keyword">=&gt; </span><span class="string">'Computers'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">1</span><span class="keyword">=&gt;array(</span><span class="string">'ID' </span><span class="keyword">=&gt; </span><span class="string">'17'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'ChannelName' </span><span class="keyword">=&gt; </span><span class="string">'Computers'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">2</span><span class="keyword">=&gt;array(</span><span class="string">'ID' </span><span class="keyword">=&gt; </span><span class="string">'18'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'ChannelName' </span><span class="keyword">=&gt; </span><span class="string">'Computers'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; );<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$arrChnOut</span><span class="keyword">, </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'&amp;$v, $k, $arr_rtn'</span><span class="keyword">, </span><span class="string">'if ($k{0}!="_"){$arr_rtn["_".$v[\'ID\']]=$v;unset($arr_rtn[$k]);}'</span><span class="keyword">), &amp;</span><span class="default">$arrChnOut</span><span class="keyword">);<br />
</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$arrChnOut</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85584""></a>
  <div class="note">
   <strong class="user">example at user dot com</strong>
   <a href="#85584" class="date">06-Sep-2008 08:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On array_walk and create_function used within a class scope - Anonymous functions are out of scope.&nbsp; So, if you want to access $this within the anonymous function, you'd have to pass it through the third parameter...<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// example copies all values into $this where key is the same as property name<br />
<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$v,$k,&amp;$that'</span><span class="keyword">, </span><span class="string">'if (property_exists($that,$k)) {$that-&gt;$k = $v;}'</span><span class="keyword">), </span><span class="default">$this</span><span class="keyword">);<br />
<br />
</span><span class="comment">// or, switch it around and array_walk the object<br />
<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'&amp;$v,$k,$array'</span><span class="keyword">,</span><span class="string">'if (array_key_exists($k,$array)) {$v = $array[$k];}'</span><span class="keyword">), </span><span class="default">$array</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83097""></a>
  <div class="note">
   <strong class="user">harmor</strong>
   <a href="#83097" class="date">09-May-2008 12:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I just wanted a function to trim all the array elements.&nbsp; Here is a non-recursive version:<br />
<br />
<span class="default">&lt;?php<br />
$data </span><span class="keyword">= array(</span><span class="string">'&nbsp; &nbsp; &nbsp;&nbsp; a'</span><span class="keyword">,</span><span class="string">' b'</span><span class="keyword">,</span><span class="string">'&nbsp; &nbsp; c&nbsp; &nbsp; &nbsp; &nbsp; d&nbsp;&nbsp; '</span><span class="keyword">);<br />
<br />
function </span><span class="default">_trim</span><span class="keyword">(&amp;</span><span class="default">$value</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);&nbsp; &nbsp; <br />
}<br />
<br />
function </span><span class="default">array_trim</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">,</span><span class="string">"_trim"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$arr </span><span class="keyword">= </span><span class="default">array_trim</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">$single </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">);<br />
<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$single</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
<br />
array(3) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(1) "a"<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(1) "b"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(10) "c&nbsp; &nbsp; &nbsp; &nbsp; d"<br />
}<br />
<br />
string(14) "a b c&nbsp; &nbsp; &nbsp; &nbsp; d"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81624""></a>
  <div class="note">
   <strong class="user">mike &gt;&gt; mike AT debitage.com</strong>
   <a href="#81624" class="date">06-Mar-2008 12:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp;&nbsp; *&nbsp; &nbsp; class.ArrayTool.php lets you search an array based on key =&gt; value pairs<br />
&nbsp;&nbsp;&nbsp; *<br />
&nbsp;&nbsp;&nbsp; *&nbsp;&nbsp; @version 1.0<br />
&nbsp;&nbsp;&nbsp; *&nbsp;&nbsp; @ 1-11-2008 <br />
&nbsp;&nbsp;&nbsp; *&nbsp;&nbsp; @author Mike Volmar<br />
&nbsp;&nbsp;&nbsp; *<br />
&nbsp;&nbsp;&nbsp; *&nbsp; &nbsp; Object for converting between array key and value<br />
&nbsp;&nbsp;&nbsp; *<br />
&nbsp;&nbsp;&nbsp; */&nbsp; &nbsp; <br />
<br />
</span><span class="keyword">class </span><span class="default">ArrayTool </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$mydata </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$flag </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$results</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">ArrayTool</span><span class="keyword">(){<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">tellAll</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">mydata</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">setArray</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">mydata </span><span class="keyword">= </span><span class="default">$data</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">getKey</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">mydata </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if((</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">flag </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">)&amp;&amp;(</span><span class="default">$input </span><span class="keyword">== </span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">results </span><span class="keyword">= </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">flag </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">flag </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">results</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">getValue</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">mydata </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if((</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">flag </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">)&amp;&amp;(</span><span class="default">$input </span><span class="keyword">== </span><span class="default">$key</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">results </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">flag </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">flag </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">results</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71901""></a>
  <div class="note">
   <strong class="user">jerk at yoosic dot de</strong>
   <a href="#71901" class="date">21-Dec-2006 08:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you want to modify every value of an multidimensional array use this function used here:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$array </span><span class="keyword">= array (</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">=&gt; array(</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="default">11</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">=&gt;</span><span class="default">12</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">=&gt;</span><span class="default">13</span><span class="keyword">));<br />
</span><span class="default">$text </span><span class="keyword">= </span><span class="string">"test"</span><span class="keyword">;<br />
<br />
function </span><span class="default">modarr</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)) </span><span class="default">$res</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">modarr</span><span class="keyword">(&amp;</span><span class="default">$arr</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// modification function here<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">else </span><span class="default">$res</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$arr</span><span class="keyword">.</span><span class="default">$text</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$res</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$erg </span><span class="keyword">= </span><span class="default">modarr</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$erg</span><span class="keyword">);&nbsp; <br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
result will be_<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">Array ( [</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">1test </span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] =&gt; </span><span class="default">2test </span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] =&gt; Array ( [</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">11test </span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] =&gt; </span><span class="default">12test </span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] =&gt; </span><span class="default">13test </span><span class="keyword">) )<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="65714""></a>
  <div class="note">
   <strong class="user">nihaopaul at nihaopaul dot com</strong>
   <a href="#65714" class="date">06-May-2006 03:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
no sure if this should go under array-walk but it does what i need, it searches a multidimensionial array by using an array to walk it, it either returns a value or an array.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">walker</span><span class="keyword">(</span><span class="default">$walk</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$walk</span><span class="keyword">) &gt;</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$key </span><span class="keyword">== </span><span class="default">$walk</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$walk</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">walker</span><span class="keyword">(</span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$walk</span><span class="keyword">), </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$walk</span><span class="keyword">) == </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58935""></a>
  <div class="note">
   <strong class="user">ludvig dot ericson at gmail dot com</strong>
   <a href="#58935" class="date">21-Nov-2005 06:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to 'ibolmo', this is an extended version of string_walk, allowing to pass userdata (like array_walk) and to have the function edit the string in the same manner as array_walk allows, note now though that you have to pass a variable, since PHP cannot pass string literals by reference (logically).<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">string_walk</span><span class="keyword">(&amp;</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$funcname</span><span class="keyword">, </span><span class="default">$userdata </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># NOTE: PHP's dereference sucks, we have to do this.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hack </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">};<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$funcname</span><span class="keyword">, &amp;</span><span class="default">$hack</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$userdata</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">} = </span><span class="default">$hack</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function </span><span class="default">yourFunc</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$position</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$value </span><span class="keyword">. </span><span class="string">' '</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">yourOtherFunc</span><span class="keyword">(&amp;</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$position</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">str_rot13</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment"># NOTE: We now need this ugly $x = hack.<br />
</span><span class="default">string_walk</span><span class="keyword">(</span><span class="default">$x </span><span class="keyword">= </span><span class="string">'interesting'</span><span class="keyword">, </span><span class="string">'yourFunc'</span><span class="keyword">);<br />
</span><span class="comment">// Ouput: i n t e r e s t i n g<br />
<br />
</span><span class="default">string_walk</span><span class="keyword">(</span><span class="default">$x </span><span class="keyword">= </span><span class="string">'interesting'</span><span class="keyword">, </span><span class="string">'yourOtherFunc'</span><span class="keyword">);<br />
echo </span><span class="default">$x</span><span class="keyword">;<br />
</span><span class="comment">// Output: vagrerfgvat<br />
</span><span class="default">?&gt;<br />
</span><br />
Also note that calling str_rot13() directly on $x would be much faster ;-) just a sample.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58862""></a>
  <div class="note">
   <strong class="user">ibolmo</strong>
   <a href="#58862" class="date">17-Nov-2005 07:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If anyone is interested to implement the array_walk functionality to a string. I've made this handy function. Note that this can be easily extended for any type of purpose. I've used this to convert from a string of bytes to a hex string then back from hex to a byte string. <br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">string_walk</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$funcname</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$funcname</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">});<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function </span><span class="default">yourFunc</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$val</span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">string_walk</span><span class="keyword">(</span><span class="string">'interesting'</span><span class="keyword">,</span><span class="string">'yourFunc'</span><span class="keyword">);<br />
</span><span class="comment">//ouput: i n t e r e s t i n g<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58322""></a>
  <div class="note">
   <strong class="user">thomas dot hebinck at digionline dot de</strong>
   <a href="#58322" class="date">31-Oct-2005 06:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a short way to concatenate a string to each element of an array:<br />
<br />
$arr=array(1,2,3,4,5,6,7,8,9,0);<br />
$str=' test'; // must not include ' or " ...<br />
<br />
array_walk($arr,create_function('&amp;$elem','$elem .= "' . $str . '";'));<br />
<br />
var_export($arr);<br />
<br />
The output is: <br />
array ( 0 =&gt; '1 test', 1 =&gt; '2 test', 2 =&gt; '3 test', 3 =&gt; '4 test', 4 =&gt; '5 test', 5 =&gt; '6 test', 6 =&gt; '7 test', 7 =&gt; '8 test', 8 =&gt; '9 test', 9 =&gt; '0 test', )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56897""></a>
  <div class="note">
   <strong class="user">Andrzej Martynowicz  at gmail dot com</strong>
   <a href="#56897" class="date">18-Sep-2005 06:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It can be very useful to pass the third (optional) parameter by reference while modifying it permanently in callback function. This will cause passing modified parameter to next iteration of array_walk(). The exaple below enumerates items in the array:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">enumerate</span><span class="keyword">( &amp;</span><span class="default">$item1</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, &amp;</span><span class="default">$startNum </span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$item1 </span><span class="keyword">= </span><span class="default">$startNum</span><span class="keyword">++ .</span><span class="string">" </span><span class="default">$item1</span><span class="string">"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$num </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
<br />
</span><span class="default">$fruits </span><span class="keyword">= array( </span><span class="string">"lemon"</span><span class="keyword">, </span><span class="string">"orange"</span><span class="keyword">, </span><span class="string">"banana"</span><span class="keyword">, </span><span class="string">"apple"</span><span class="keyword">);<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$fruits</span><span class="keyword">, </span><span class="string">'enumerate'</span><span class="keyword">, </span><span class="default">$num </span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$fruits </span><span class="keyword">);<br />
<br />
echo </span><span class="string">'$num is: '</span><span class="keyword">. </span><span class="default">$num </span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
This outputs:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 1 lemon<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 2 orange<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 3 banana<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 4 apple<br />
)<br />
$num is: 1<br />
<br />
Notice at the last line of output that outside of array_walk() the $num parameter has initial value of 1. This is because array_walk() does not take the third parameter by reference.. so what if we pass the reference as the optional parameter..<br />
<br />
<span class="default">&lt;?php<br />
$num </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
<br />
</span><span class="default">$fruits </span><span class="keyword">= array( </span><span class="string">"lemon"</span><span class="keyword">, </span><span class="string">"orange"</span><span class="keyword">, </span><span class="string">"banana"</span><span class="keyword">, </span><span class="string">"apple"</span><span class="keyword">);<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$fruits</span><span class="keyword">, </span><span class="string">'enumerate'</span><span class="keyword">, &amp;</span><span class="default">$num </span><span class="keyword">); </span><span class="comment">// reference here<br />
<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$fruits </span><span class="keyword">);<br />
<br />
echo </span><span class="string">'$num is: '</span><span class="keyword">. </span><span class="default">$num </span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
echo </span><span class="string">"we've got "</span><span class="keyword">. (</span><span class="default">$num </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">) .</span><span class="string">" fruits in the basket!"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span> <br />
This outputs:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 1 lemon<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 2 orange<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 3 banana<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 4 apple<br />
)<br />
$num is: 5<br />
we've got 4 fruits in the basket!<br />
<br />
Now $num has changed so we are able to count the items (without calling count() unnecessarily).<br />
<br />
As a conclusion, using references with array_walk() can be powerful toy but this should be done carefully since modifying third parameter outside the array_walk() is not always what we want.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54880""></a>
  <div class="note">
   <strong class="user">webmaster at tmproductionz dot com</strong>
   <a href="#54880" class="date">18-Jul-2005 12:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to the note right before this one.&nbsp; that will only trim leading and trailing white space. if you want to trim white space inside the string (ie 'hello&nbsp; &nbsp;&nbsp; world' to 'hello world') you should use this:<br />
<br />
$val = preg_replace ( "/\s\s+/" , " " , $val ) ;<br />
<br />
this will also trim leading and trailing white space.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53270""></a>
  <div class="note">
   <strong class="user">el_porno at web dot de</strong>
   <a href="#53270" class="date">27-May-2005 03:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You want to get rid of the whitespaces users add in your form fields...?<br />
Simply use...:<br />
<br />
class SomeVeryImportantClass<br />
{<br />
...<br />
&nbsp;&nbsp;&nbsp; public function mungeFormData(&amp;$data)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array_walk($data, array($this, 'munge'));<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; private function munge(&amp;$value, &amp;$key)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(is_array($value))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;mungeFormData($value);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = trim($value);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
...<br />
}<br />
<br />
so...<br />
$obj = new SomeVeryImportantClass;<br />
$obj-&gt;mungeFormData($_POST);<br />
___<br />
eNc</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53097""></a>
  <div class="note">
   <strong class="user">caliban at darklock dot com</strong>
   <a href="#53097" class="date">23-May-2005 10:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&gt; I believe this relies on the deprecated runtime <br />
&gt; pass-by-reference mechanism <br />
<br />
The array() keyword is a language construct, not a function, so I don't think this is applicable.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51709""></a>
  <div class="note">
   <strong class="user">Enlightened One</strong>
   <a href="#51709" class="date">07-Apr-2005 11:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware that "array ($this, method)" construct. If you're wanting to alter members of the "$this" object inside "method" you should construct the callback like this:<br />
<br />
&nbsp; $callback[] = &amp;$this;<br />
&nbsp; $callback[] = method;<br />
&nbsp; array_walk ($input, $callback);<br />
<br />
Creating your callback using the array() method as suggested by "appletalk" results in a copy of $this being passed to method, not the original object, therefor any changes made to the object by method will be lost when array_walk() returns. While you could construct the callback with "array(&amp;$this, method)", I believe this relies on the deprecated runtime pass-by-reference mechanism which may be removed in future releases of PHP. Better to not create a dependence on that feature now than having to track it down and fix it in the future.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49107""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#49107" class="date">16-Jan-2005 06:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As well as being able to pass the array the callback will be working on by reference, one can pass the optional userdata parameters by reference also:<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">surprise</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$key</span><span class="keyword">,</span><span class="default">$xs</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//$key is unused here.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">.=</span><span class="string">'!'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$xs</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$array1 </span><span class="keyword">= array(</span><span class="string">'this'</span><span class="keyword">,</span><span class="string">'that'</span><span class="keyword">,</span><span class="string">'the other'</span><span class="keyword">);<br />
</span><span class="default">$array2 </span><span class="keyword">= array();<br />
<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">,</span><span class="string">'surprise'</span><span class="keyword">,&amp;</span><span class="default">$array2</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>Of course, that precise example would be better handled by array_map, but the principle is there.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47326""></a>
  <div class="note">
   <strong class="user">memandeemail at gmail dot com</strong>
   <a href="#47326" class="date">11-Nov-2004 05:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are using array_walk on a class, dont will work<br />
<br />
so ... try this on your own class:<br />
<br />
class your_own_class {<br />
&nbsp;&nbsp;&nbsp; /**<br />
&nbsp;&nbsp;&nbsp; * @return void<br />
&nbsp;&nbsp;&nbsp; * @param array $input<br />
&nbsp;&nbsp;&nbsp; * @param string $funcname<br />
&nbsp;&nbsp;&nbsp; * @desc A little workaround, do the same thing.<br />
&nbsp;&nbsp;&nbsp; */<br />
&nbsp;&nbsp;&nbsp; function array_walk($input, $funcname) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($input as $key =&gt; $value) $this-&gt;$funcname($value, $key);<br />
&nbsp;&nbsp;&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47178""></a>
  <div class="note">
   
   <a href="#47178" class="date">04-Nov-2004 11:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If array_walk_recursive() is not present and you want to apply htmlentities() on each array element you can use this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_htmlentities</span><span class="keyword">(&amp;</span><span class="default">$elem</span><span class="keyword">)<br />
{<br />
&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$elem</span><span class="keyword">))<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$elem</span><span class="keyword">=</span><span class="default">htmlentities</span><span class="keyword">(</span><span class="default">$elem</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; else<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$elem </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$elem</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]=</span><span class="default">array_htmlentities</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$elem</span><span class="keyword">;<br />
} </span><span class="comment">// array_htmlentities()<br />
</span><span class="default">?&gt;<br />
</span><br />
If you want to output an array with print_r() and you have html in it this function is very helpful.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46594""></a>
  <div class="note">
   <strong class="user">lgaga dot dont dot spam at muszaki dot info</strong>
   <a href="#46594" class="date">16-Oct-2004 07:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Behaviour like array_walk_recursive() can be achieved in php &lt;=5 by a callback function to array_walk() similar to this:<br />
<br />
function walkcallback(&amp;$val,$key) {<br />
&nbsp;&nbsp;&nbsp; if (is_array($val)) array_walk($val,'walkcallback',$new);<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // do what you want with $val and $key recursively<br />
&nbsp;&nbsp;&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45380""></a>
  <div class="note">
   <strong class="user">bisqwit at iki dot fi</strong>
   <a href="#45380" class="date">03-Sep-2004 04:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's worth nothing that array_walk can not be used to change keys in the array.<br />
The function may be defined as (&amp;$value, $key) but not (&amp;$value, &amp;$key).<br />
Even though PHP does not complain/warn, it does not modify the key.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45376""></a>
  <div class="note">
   <strong class="user">paul at heliosville dot com</strong>
   <a href="#45376" class="date">03-Sep-2004 12:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
one rather important note that was lost in the Great PHP Doc Note Purge of '04 is that you can call methods using array_walk(). Let's assume that we have a class named 'Search', in which there is a method called 'convertKeywords'. Here's how you would call that convertKeywords method from inside the class:<br />
<br />
&nbsp;&nbsp;&nbsp; array_walk($keywords, array($this, 'convertKeywords'));<br />
<br />
Notice that, instead of giving a string as the second argument, you give an array with two items: the variable that holds the class (in this case, $this), and the method to call. Here's what it would look like if you were to call convertKeywords from an already-instantiated class:<br />
<br />
&nbsp;&nbsp;&nbsp; $search = new Search;<br />
&nbsp;&nbsp;&nbsp; array_walk($keywords, array($search, 'convertKeywords'));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45363""></a>
  <div class="note">
   <strong class="user">Eierkoek</strong>
   <a href="#45363" class="date">03-Sep-2004 06:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
normaly the $_GET array will add slashes to the array values. To remove all slashes in this array, i created the folowing code<br />
<br />
&nbsp; set_magic_quotes_runtime (0);<br />
&nbsp; function StripAllSlashes (&amp;$ArrayGET, $Value) <br />
&nbsp; { <br />
&nbsp;&nbsp;&nbsp; if (is_array ($ArrayGET)) array_walk ($ArrayGET, "StripAllSlashes"); <br />
&nbsp;&nbsp;&nbsp; else $ArrayGET = stripslashes ($ArrayGET); <br />
&nbsp; } <br />
&nbsp; if (isset ($_GET) &amp;&amp; get_magic_quotes_gpc ()) array_walk ($_GET, "StripAllSlashes"); <br />
<br />
I hope this code was usefull,<br />
<br />
Eierkoek</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-walk-recursive.html">array_walk_recursive</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array.html">array</a></div>
 <div class="up"><a href="ref.array.html">Array Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
