<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Returns trailing name component of path</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.chgrp.html">chgrp</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.basename" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">basename</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">basename</span> &mdash; <span class="dc-title">Returns trailing name component of path</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.basename-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><b>basename</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$path</tt></span>
   [, <span class="methodparam"><span class="type">string</span> <tt class="parameter">$suffix</tt></span>
  ] )</div>

  <p class="para rdfs-comment">
   Given a string containing the path to a file or directory, this function
   will return the trailing name component.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.basename-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">path</tt></i></span>
     <dd>

      <p class="para">
       A path.
      </p>
      <p class="para">
       On Windows, both slash (<i>/</i>) and backslash
       (<i>\</i>) are used as directory separator character. In
       other environments, it is the forward slash (<i>/</i>).
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">suffix</tt></i></span>
     <dd>

      <p class="para">
       If the name component ends in <i><tt class="parameter">suffix</tt></i> this will also
       be cut off.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.basename-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the base name of the given <i><tt class="parameter">path</tt></i>.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.basename-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle">
       <td align="left">4.1.0</td>
       <td align="left">
        The <i><tt class="parameter">suffix</tt></i> parameter was added
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.basename-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-2144">
    <p><b>Example #1 <span class="function"><b>basename()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"1)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #DD0000">"/etc/sudoers.d"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">".d"</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"2)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #DD0000">"/etc/passwd"</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"3)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #DD0000">"/etc/"</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"4)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #DD0000">"."</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"5)&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #DD0000">"/"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
1) sudoers
2) passwd
3) etc
4) .
5) 
</pre></div>
    </div>
   </div>
  </p>
 </div>

 
 <div class="refsect1 notes" id="refsect1-function.basename-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><b class="note">Note</b>: 
   <p class="para">
    <span class="function"><b>basename()</b></span> operates naively on the input string,
    and is not aware of the actual filesystem, or path components such
    as &quot;<i>..</i>&quot;.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><b class="note">Note</b>: 
   <p class="para">
    <span class="function"><b>basename()</b></span> is locale aware, so for it to see the 
    correct basename with multibyte character paths, the matching locale must 
    be set using the <span class="function"><a href="function.setlocale.html" class="function">setlocale()</a></span> function.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.basename-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.dirname.html" class="function" rel="rdfs-seeAlso">dirname()</a> - Returns parent directory's path</span></li>
    <li class="member"><span class="function"><a href="function.pathinfo.html" class="function" rel="rdfs-seeAlso">pathinfo()</a> - Returns information about a file path</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="106422""></a>
  <div class="note">
   <strong class="user">tamar at atarplpl dot co dot il</strong>
   <a href="#106422" class="date">08-Nov-2011 02:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have problem with this function and UTF8 charset, you only have to upgrade php version to 5.2 or higher</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96421""></a>
  <div class="note">
   <strong class="user">noemail at nosite dot com</strong>
   <a href="#96421" class="date">26-Feb-2010 01:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
you could use this function when you need basename to work with cyrillic filenames<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">pcgbasename</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">, </span><span class="default">$suffix</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$suffix </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmpstr </span><span class="keyword">= </span><span class="default">ltrim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">, </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">, </span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">) ), </span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">, </span><span class="default">$suffix</span><span class="keyword">)+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$suffix</span><span class="keyword">) )&nbsp; ==&nbsp; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">str_ireplace</span><span class="keyword">( </span><span class="default">$suffix</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$tmpstr</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">ltrim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">, </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">, </span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">) ), </span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">ltrim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">, </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">, </span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">) ), </span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94026""></a>
  <div class="note">
   <strong class="user">swedish boy</strong>
   <a href="#94026" class="date">12-Oct-2009 03:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a quick way of fetching only the filename (without extension) regardless of what suffix the file has.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// your file<br />
</span><span class="default">$file </span><span class="keyword">= </span><span class="string">'image.jpg'</span><span class="keyword">;<br />
<br />
</span><span class="default">$info </span><span class="keyword">= </span><span class="default">pathinfo</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br />
</span><span class="default">$file_name </span><span class="keyword">=&nbsp; </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">$info</span><span class="keyword">[</span><span class="string">'extension'</span><span class="keyword">]);<br />
<br />
echo </span><span class="default">$file_name</span><span class="keyword">; </span><span class="comment">// outputs 'image'<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90263""></a>
  <div class="note">
   <strong class="user">leelu123 at gmail dot com</strong>
   <a href="#90263" class="date">13-Apr-2009 05:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To get the inner most dir of a path<br />
<br />
<span class="default">&lt;?php<br />
<br />
$DirPath </span><span class="keyword">= </span><span class="string">'/var/www/fruits/apple/'</span><span class="keyword">;<br />
<br />
</span><span class="comment">//To get the innermost dir 'apple'<br />
<br />
</span><span class="default">$InnermostDir </span><span class="keyword">= </span><span class="default">basename</span><span class="keyword">(</span><span class="default">rtrim</span><span class="keyword">(</span><span class="default">$DirPath</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">));<br />
<br />
echo </span><span class="default">$InnermostDir</span><span class="keyword">; </span><span class="comment">//will display 'apple'<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89127""></a>
  <div class="note">
   <strong class="user">info at smaartweb dot com</strong>
   <a href="#89127" class="date">23-Feb-2009 08:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
here are two good functions to extract the filename and extension part from any given path or url.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">ShowFileExtension</span><span class="keyword">(</span><span class="default">$filepath</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/[^?]*/'</span><span class="keyword">, </span><span class="default">$filepath</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">'/\./'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">PREG_SPLIT_OFFSET_CAPTURE</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># check if there is any extension<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">) == </span><span class="default">1</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'No File Extension Present'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; exit;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">) &gt; </span><span class="default">1</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$filenamepart </span><span class="keyword">= </span><span class="default">$pattern</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/[^?]*/'</span><span class="keyword">, </span><span class="default">$filenamepart</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">ShowFileName</span><span class="keyword">(</span><span class="default">$filepath</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/[^?]*/'</span><span class="keyword">, </span><span class="default">$filepath</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">#split the string by the literal dot in the filename<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">'/\./'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">PREG_SPLIT_OFFSET_CAPTURE</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">#get the last dot position<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lastdot </span><span class="keyword">= </span><span class="default">$pattern</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">#now extract the filename using the basename function<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$filename </span><span class="keyword">= </span><span class="default">basename</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$lastdot</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">#return the filename part<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$filename</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
usage<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; </span><span class="comment">//$string = 'C:\My Documents\My Name\filename.ext';<br />
&nbsp;&nbsp;&nbsp; //$string = '<a href="http://php.net/manual/add-note.php?" rel="nofollow" target="_blank">http://php.net/manual/add-note.php?</a><br />
</span><span class="keyword">&amp;</span><span class="default">redirect</span><span class="keyword">=</span><span class="default">http</span><span class="keyword">:</span><span class="comment">//php.net/function.basename.php';<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">ShowFileName</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">ShowFileExtension</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86972""></a>
  <div class="note">
   <strong class="user">Joel Franusic</strong>
   <a href="#86972" class="date">12-Nov-2008 03:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The results of the basename() function are dependent on your locale setting.<br />
<br />
If basename() is returning blank results for strings with multibyte characters, you can try including the following in your script:<br />
<br />
<span class="default">&lt;?php<br />
<br />
setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'en_US.UTF8'</span><span class="keyword">); </span><span class="comment"># or any other locale that can handle multibyte characters.<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
However, the best solution to do this would be to change the locale setting on your system or webserver. For example, on Debian systems, this is done in /etc/init.d/apache</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85804""></a>
  <div class="note">
   <strong class="user">hello at haroonahmad dot co dot uk</strong>
   <a href="#85804" class="date">18-Sep-2008 08:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I got a blank output from this code<br />
<br />
$cur_dir = basename(dirname($_SERVER[PHP_SELF]))<br />
<br />
suggested earlier by a friend here. <br />
<br />
So anybody who wants to get the current directory path can use another technique that I use as <br />
<br />
//suppose you're using this in pageitself.php page<br />
<br />
$current_dir=dirname(realpath("pageitself.php"));<br />
<br />
I hope it helps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85597""></a>
  <div class="note">
   <strong class="user">zandor_zz at yahoo dot it</strong>
   <a href="#85597" class="date">08-Sep-2008 01:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It might be useful to have a version of the function basename working with arrays too.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">a_basename</span><span class="keyword">( </span><span class="default">$file</span><span class="keyword">, </span><span class="default">$exts </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$onlyfilename </span><span class="keyword">= </span><span class="default">end</span><span class="keyword">( </span><span class="default">explode</span><span class="keyword">( </span><span class="string">"/"</span><span class="keyword">, </span><span class="default">$file </span><span class="keyword">) );<br />
<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">is_string</span><span class="keyword">( </span><span class="default">$exts </span><span class="keyword">) )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">strpos</span><span class="keyword">( </span><span class="default">$onlyfilename</span><span class="keyword">, </span><span class="default">$exts</span><span class="keyword">, </span><span class="default">0 </span><span class="keyword">) !== </span><span class="default">false </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$onlyfilename </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="default">$exts</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$onlyfilename </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else if ( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$exts </span><span class="keyword">) )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// works with PHP version &lt;= 5.x.x<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach( </span><span class="default">$exts </span><span class="keyword">as </span><span class="default">$KEY </span><span class="keyword">=&gt; </span><span class="default">$ext </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$onlyfilename </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="default">$ext</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$onlyfilename </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$onlyfilename </span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85369""></a>
  <div class="note">
   <strong class="user">(remove) dot nasretdinov at (remove) dot gmail dot com</strong>
   <a href="#85369" class="date">27-Aug-2008 08:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is only one variant that works in my case for my Russian UTF-8 letters:<br />
<br />
function mb_basename($file)<br />
{<br />
return end(explode('/',$file));<br />
}<br />
<br />
It is intented for UNIX servers</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85123""></a>
  <div class="note">
   <strong class="user">pai dot ravi at yahoo dot com</strong>
   <a href="#85123" class="date">15-Aug-2008 08:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
once you have extracted the basename from the full path and want to separate the extension from the file name, the following function will do it efficiently:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">splitFilename</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; { </span><span class="comment">// dot is not found in the filename<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return array(</span><span class="default">$filename</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">); </span><span class="comment">// no extension<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$basename </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$extension </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return array(</span><span class="default">$basename</span><span class="keyword">, </span><span class="default">$extension</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82523""></a>
  <div class="note">
   <strong class="user">clothohk at gmail dot com</strong>
   <a href="#82523" class="date">14-Apr-2008 08:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Adding a space is not a solution to my Chinese UTF-8 characters. I guess it will not work for Japanese and Korean too.<br />
<br />
I use this instead:<br />
$filename = mb_substr($path, mb_strrpos($path, '/')+1);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79933""></a>
  <div class="note">
   <strong class="user">adrian at foeder dot de</strong>
   <a href="#79933" class="date">20-Dec-2007 12:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On windows systems, filenames are case-insensitive. If you have to make sure the right case is used when you port your application to an unix system, you may use a combination of the following:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//assume the real filename is mytest.JPG:<br />
<br />
</span><span class="default">$name_i_have </span><span class="keyword">= </span><span class="string">"mytest.jpg"</span><span class="keyword">;<br />
</span><span class="default">$realfilename </span><span class="keyword">= </span><span class="default">basename</span><span class="keyword">(</span><span class="default">realpath</span><span class="keyword">(</span><span class="default">$name_i_have</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
basename itself does not check the filesystem for the given file, it does, so it seems, only string-manipulation.<br />
With realpath() you can "extend" this functionality.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77712""></a>
  <div class="note">
   <strong class="user">mike at mike-griffiths dot co dot uk</strong>
   <a href="#77712" class="date">10-Sep-2007 03:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are trying to get the file extension of a given file then you should see the function pathinfo(), exploding by '.' on basename() is also possible (as long as you use the last array entry).<br />
<br />
<span class="default">&lt;?PHP<br />
</span><span class="comment">// Make an array of the various attributes<br />
</span><span class="default">$path_parts </span><span class="keyword">= </span><span class="default">pathinfo</span><span class="keyword">(</span><span class="string">'/www/htdocs/index.html'</span><span class="keyword">);<br />
<br />
</span><span class="default">$extension </span><span class="keyword">= </span><span class="default">$path_parts</span><span class="keyword">[</span><span class="string">'extension'</span><span class="keyword">];<br />
<br />
echo </span><span class="default">$extension</span><span class="keyword">; </span><span class="comment">// 'html'<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope this helps someone.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74429""></a>
  <div class="note">
   <strong class="user">stephane dot fidanza at gmail dot com</strong>
   <a href="#74429" class="date">11-Apr-2007 04:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Support of the $suffix parameter has changed between PHP4 and PHP5:<br />
in PHP4, $suffix is removed first, and then the core basename is applied.<br />
conversely, in PHP5, $suffix is removed AFTER applying core basename.<br />
<br />
Example:<br />
<span class="default">&lt;?php<br />
&nbsp; $file </span><span class="keyword">= </span><span class="string">"path/to/file.xml#xpointer(/Texture)"</span><span class="keyword">;<br />
&nbsp; echo </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="string">".xml#xpointer(/Texture)"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Result in PHP4: file<br />
Result in PHP5: Texture)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74049""></a>
  <div class="note">
   <strong class="user">phdwight at yahoo dot com</strong>
   <a href="#74049" class="date">21-Mar-2007 06:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Pulled my hair out for this.<br />
<br />
Just like most functions, this does not play well with Japanese characters.<br />
<br />
When you call basename with some Japanese characters, it will return nothing (truncates it) .</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72705""></a>
  <div class="note">
   <strong class="user">thoughts at highermind dot org</strong>
   <a href="#72705" class="date">30-Jan-2007 05:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Basename without query string:<br />
<br />
<span class="default">&lt;?php<br />
$filename&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">'?'</span><span class="keyword">, </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$url_path</span><span class="keyword">)));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72254""></a>
  <div class="note">
   <strong class="user">jonmsawyer at gmail dot com</strong>
   <a href="#72254" class="date">09-Jan-2007 12:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@antrik at users dot sf dot net<br />
&gt; 15-Nov-2004 10:40<br />
&gt; When using basename() on a path to a directory<br />
&gt; ('/bar/foo/'), the last path component ('foo') is returned,<br />
&gt; instead of the empty string one would expect. (Both PHP<br />
&gt; 4.1.2 and 4.3.8 on GNU/Linux.) No idea whether this is<br />
&gt; considered a bug or a feature -- I found it extremely<br />
&gt; annoying. Had to work around using: <span class="default">&lt;?php<br />
</span><span class="keyword">&gt; </span><span class="default">$file</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">)==</span><span class="string">'/'</span><span class="keyword">?</span><span class="string">''</span><span class="keyword">:</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)<br />
&gt; </span><span class="default">?&gt;</span> Watch out!<br />
<br />
There is a reason behind this -- and it has nothing to do with being a feature. PHP was heavily modeled off of the POSIX model. Many of the same functions you see in PHP are also in C, C++, and Java. These languages are modeled on POSIX as well.<br />
<br />
The directory '/bar/foo/', when passed into the function basename(), will output 'foo' because *everything*, including directories, in the POSIX model, is a _file_. Most unix platforms, and all Windows platforms are (some Linux distributions are not) fully compliant to the POSIX model.<br />
<br />
For example, the device file that contains information about your harddisk, in Linux, is probably stored in the _file_ /dev/hda.<br />
<br />
Another example is that when you want to list information about your CPU or Memory using the Linux kernel, you might read the _file_ /proc/cpu/info.<br />
<br />
Directories are no exception. Directories are no more different than your regular text file -- other than the fact that they describe a _file_-list of all files under it, and where the OS can access them. This means that even directories treat other directories as files.<br />
<br />
The reason why we are made to think that directories are not files is because the kernel (the OS) simply treats these culprits differently. Your OS is lying to you! When you try to open up c:\windows in Notepad, you simply get a runaround because the Windows operating system knows it is a directory and knows how to treat it -- and knowing this it will not let you open it up for editing. For if you did that, you would probably lose the data in that directory. If you are familiar with C programming, you will know that if you lose information about a pointer to an object, the object gets lost in memory. The same would happen if you modified a directory in the wrong way. This is why the operating system protects its directories with the upmost care. (Some do anyway, hehe)<br />
<br />
So when doing any kind of programming in PHP, C/++, Java, Ada, Perl, Python, Ruby, FORTRAN, and yes, even RPG IV (for all of you AS/400 folks out there working on the IFS), you must treat directories as files well.<br />
<br />
This is why 'foo' is returned. For more information on POSIX, see <a href="http://en.wikipedia.org/wiki/POSIX" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/POSIX</a><br />
<br />
I hope this helps. Cheers.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72093""></a>
  <div class="note">
   <strong class="user">thovan at gmx dot net</strong>
   <a href="#72093" class="date">02-Jan-2007 07:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After reading all of the earlier comments, I made my own function file_basename():<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">file_basename</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$file</span><span class="keyword">=== </span><span class="default">null </span><span class="keyword">|| </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)&lt;= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$file</span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'?'</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$file</span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$basename</span><span class="keyword">= </span><span class="default">$file</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$basename</span><span class="keyword">;&nbsp; &nbsp; <br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69739""></a>
  <div class="note">
   
   <a href="#69739" class="date">18-Sep-2006 11:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
lazy lester is just confirming what icewind said.<br />
And yes it is correct! unlike what the following comment after icewind says, as that example is the same with the line order reversed! as poniestail at gmail dot com says.<br />
<br />
But poniestail at gmail dot com missed the point that if the url is coming from a log file it will not have its value in $_SERVER["QUERY_STRING"] or $_SERVER["SCRIPT_NAME"] but in a LOG FILE or a DATABASE</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62043""></a>
  <div class="note">
   <strong class="user">lazy lester</strong>
   <a href="#62043" class="date">17-Feb-2006 04:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If your path has a query string appended, and if the query string contains a "/" character, then the suggestions for extracting the filename offered below don't work. <br />
<br />
For instance if the path is like this:<br />
<a href="http://www.ex.com/getdat.php?dep=n/a&amp;title=boss" rel="nofollow" target="_blank">http://www.ex.com/getdat.php?dep=n/a&amp;title=boss</a><br />
<br />
Then both the php basename() function, and also <br />
the $_SERVER[QUERY_STRING] variables get confused.<br />
<br />
In such a case, use:<br />
<br />
&lt;php<br />
$path_with_query="<a href="http://www.ex.com/getdat.php?dep=n/a&amp;title=boss" rel="nofollow" target="_blank">http://www.ex.com/getdat.php?dep=n/a&amp;title=boss</a>";<br />
$path=explode("?",$path_with_query);<br />
$filename=basename($path[0]);<br />
$query=$path[1];<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62031""></a>
  <div class="note">
   <strong class="user">support at rebootconcepts dot com</strong>
   <a href="#62031" class="date">17-Feb-2006 11:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
works on windows and linux, faster/easier than amitabh's...<br />
<br />
<span class="default">&lt;?php<br />
$basename </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'/^.+[\\\\\\/]/'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$filename </span><span class="keyword">);<br />
<br />
</span><span class="comment">// Optional; change any non letter, hyphen, or period to an underscore.<br />
</span><span class="default">$sterile_filename </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">"/[^\w\.-]+/"</span><span class="keyword">, </span><span class="string">"_"</span><span class="keyword">, </span><span class="default">$basename </span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60369""></a>
  <div class="note">
   <strong class="user">poniestail at gmail dot com</strong>
   <a href="#60369" class="date">04-Jan-2006 04:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
examples from "icewind" and "basname" seem highly overdone... not to mention example from "basename" is exactly the same as one from "icewind"...<br />
<br />
possibly a more logical approach?<br />
&lt;?<br />
&nbsp;&nbsp; //possible URL = <a href="http://domain.com/path/to/file.php?var=foo" rel="nofollow" target="_blank">http://domain.com/path/to/file.php?var=foo</a><br />
&nbsp;&nbsp; $filename = substr( $_SERVER["SCRIPT_NAME"], 1 ); //substr( ) used for optional removal of initial "/"<br />
&nbsp;&nbsp; $query = $_SERVER["QUERY_STRING"];<br />
?&gt;<br />
<br />
to see the entire $_SERVER variable try this:<br />
&lt;?<br />
&nbsp;&nbsp; echo "&lt;pre&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; ".print_r( $_SERVER, true )."<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;/pre&gt;<br />
&nbsp;&nbsp; ";<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58763""></a>
  <div class="note">
   
   <a href="#58763" class="date">15-Nov-2005 04:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
icewinds exmaple wouldn't work, the query part would contain the second char of the filename, not the query part of the url.<br />
&lt;?<br />
$file = "path/file.php?var=foo";<br />
$file = explode("?", basename($file));<br />
$query = $file[1];<br />
$file = $file[0];<br />
?&gt;<br />
<br />
That works better.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58372""></a>
  <div class="note">
   <strong class="user">icewind</strong>
   <a href="#58372" class="date">02-Nov-2005 12:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Because of filename() gets "file.php?var=foo", i use explode in addition to basename like here:<br />
<br />
$file = "path/file.php?var=foo";<br />
$file = explode("?", basename($file));<br />
$file = $file[0];<br />
$query = $file[1];<br />
<br />
Now $file only contains "file.php" and $query contains the query-string (in this case "var=foo").</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58110""></a>
  <div class="note">
   <strong class="user">www.turigeza.com</strong>
   <a href="#58110" class="date">24-Oct-2005 12:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
simple but not said in the above examples<br />
<br />
echo basename('somewhere.com/filename.php?id=2', '.php');<br />
will output<br />
filename.php?id=2<br />
<br />
which is not the filename in case you expect!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57074""></a>
  <div class="note">
   <strong class="user">crash  at  subsection dot org dot uk</strong>
   <a href="#57074" class="date">22-Sep-2005 12:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simple way to return the current directory:<br />
$cur_dir = basename(dirname($_SERVER[PHP_SELF]))<br />
<br />
since basename always treats a path as a path to a file, e.g.<br />
<br />
/var/www/site/foo/ indicates /var/www/site as the path to file <br />
foo</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56084""></a>
  <div class="note">
   <strong class="user">b_r_i_a__n at locallinux dot com</strong>
   <a href="#56084" class="date">22-Aug-2005 05:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was looking for a way to get only the filename whether or not I had received the full path to it from the user.&nbsp; I came up with a much simpler (and probably more robust) method by using the power of basename in reverse:<br />
<br />
$infile = "/usr/bin/php";<br />
$filename = stristr ($infile,basename ($infile));<br />
<br />
This even works on those _wacky_ filenames like "/usr/lib/libnetsnmp.so.5.0.9" which are not factored when exploding the full path and taking out only the last segment after "."</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54767""></a>
  <div class="note">
   <strong class="user">pvollma at pcvsoftware dot net</strong>
   <a href="#54767" class="date">14-Jul-2005 09:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that in my example below, I used the stripslashes function on the target string first because I was dealing with the POST array $_FILES. When creating this array, PHP will add slashes to any slashes it finds in the string, so these must be stripped out first before processing the file path. Then again, the only reason I can think of that basename() would fail is when dealing with Windows paths on a *nix server -- and the file upload via POST is the only situation I can think of that would require this. Obviously, if you are not dealing with these additional slashes, invoking stripslashes() first would remove the very separators you need extract the file name from the full path.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54742""></a>
  <div class="note">
   <strong class="user">amitabh at NOSPAM dot saysnetsoft dot com</strong>
   <a href="#54742" class="date">14-Jul-2005 01:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The previous example posted by "pvollma" didn't work out for me, so I modified it slightly:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">GetFileName</span><span class="keyword">(</span><span class="default">$file_name</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newfile </span><span class="keyword">= </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$file_name</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$newfile</span><span class="keyword">,</span><span class="string">'\\'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">"[\\\]"</span><span class="keyword">,</span><span class="default">$newfile</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newfile </span><span class="keyword">= </span><span class="default">$tmp</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="default">$newfile</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="default">$file_name</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54726""></a>
  <div class="note">
   <strong class="user">pvollma at pcvsoftware dot net</strong>
   <a href="#54726" class="date">13-Jul-2005 11:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a real problem when using this function on *nix servers, since it does not handle Windows paths (using the \ as a separator). Why would this be an issue on *nix servers? What if you need to handle file uploads from MS IE? In fact, the manual section "Handling file uploads" uses basename() in an example, but this will NOT extract the file name from a Windows path such as C:\My Documents\My Name\filename.ext. After much frustrated coding, here is how I handled it (might not be the best, but it works):<br />
<br />
<span class="default">&lt;?php<br />
$filen </span><span class="keyword">= </span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'userfile'</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]);<br />
</span><span class="default">$newfile </span><span class="keyword">= </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$filen</span><span class="keyword">);<br />
if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$newfile</span><span class="keyword">,</span><span class="string">'\\'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">"[\\\]"</span><span class="keyword">,</span><span class="default">$newfile</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$newfile </span><span class="keyword">= </span><span class="default">$tmp</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">];<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
$newfile will now contain only the file name and extension, even if the POSTed file name included a full Windows path.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49503""></a>
  <div class="note">
   <strong class="user">KOmaSHOOTER at gmx dot de</strong>
   <a href="#49503" class="date">30-Jan-2005 06:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you want the name of the parent directory<br />
<span class="default">&lt;?php<br />
$_parenDir_path </span><span class="keyword">= </span><span class="default">join</span><span class="keyword">(</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">split</span><span class="keyword">( </span><span class="string">"/" </span><span class="keyword">,</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">])),</span><span class="default">0</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">),</span><span class="string">"/"</span><span class="keyword">).</span><span class="string">'/'</span><span class="keyword">; </span><span class="comment">// returns the full path to the parent dir<br />
</span><span class="default">$_parenDir </span><span class="keyword">=&nbsp; </span><span class="default">basename </span><span class="keyword">(</span><span class="default">$_parenDir_path</span><span class="keyword">,</span><span class="string">"/"</span><span class="keyword">); </span><span class="comment">// returns only the name of the parent dir<br />
// or <br />
</span><span class="default">$_parenDir2 </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">split</span><span class="keyword">( </span><span class="string">"/" </span><span class="keyword">,</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">])),</span><span class="default">0</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">)); </span><span class="comment">// returns also only the name of the parent dir<br />
</span><span class="keyword">echo(</span><span class="string">'$_parenDir_path&nbsp; = '</span><span class="keyword">.</span><span class="default">$_parenDir_path</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">);<br />
echo(</span><span class="string">'$_parenDir&nbsp; = '</span><span class="keyword">.</span><span class="default">$_parenDir</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">);<br />
echo(</span><span class="string">'$_parenDir2&nbsp; = '</span><span class="keyword">.</span><span class="default">$_parenDir2</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49486""></a>
  <div class="note">
   <strong class="user">KOmaSHOOTER at gmx dot de</strong>
   <a href="#49486" class="date">29-Jan-2005 04:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want the current path where youre file is and not the full path then use this :)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo(</span><span class="string">'dir = '</span><span class="keyword">.</span><span class="default">basename </span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">]),</span><span class="string">"/"</span><span class="keyword">));&nbsp; &nbsp; <br />
</span><span class="comment">// retuns the name of current used directory<br />
</span><span class="default">?&gt;<br />
</span><br />
Example: <br />
<br />
www dir: domain.com/temp/2005/january/t1.php<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo(</span><span class="string">'dirname &lt;br&gt;'</span><span class="keyword">.</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">]).</span><span class="string">'&lt;br&gt;&lt;br&gt;'</span><span class="keyword">);&nbsp; &nbsp; <br />
</span><span class="comment">// returns: /temp/2005/january<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo(</span><span class="string">'file = '</span><span class="keyword">.</span><span class="default">basename </span><span class="keyword">(</span><span class="default">$PHP_SELF</span><span class="keyword">,</span><span class="string">".php"</span><span class="keyword">));&nbsp; &nbsp; <br />
</span><span class="comment">// returns: t1<br />
</span><span class="default">?&gt;<br />
</span><br />
if you combine these two you get this<br />
<span class="default">&lt;?php <br />
</span><span class="keyword">echo(</span><span class="string">'dir = '</span><span class="keyword">.</span><span class="default">basename </span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">]),</span><span class="string">"/"</span><span class="keyword">));&nbsp; &nbsp; <br />
</span><span class="comment">// returns: january<br />
</span><span class="default">?&gt;<br />
</span><br />
And for the full path use this<br />
<span class="default">&lt;?php <br />
</span><span class="keyword">echo(</span><span class="string">' PHP_SELF &lt;br&gt;'</span><span class="keyword">.</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">].</span><span class="string">'&lt;br&gt;&lt;br&gt;'</span><span class="keyword">);<br />
</span><span class="comment">// returns: /temp/2005/january/t1.php&nbsp; &nbsp; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47407""></a>
  <div class="note">
   <strong class="user">antrik at users dot sf dot net</strong>
   <a href="#47407" class="date">15-Nov-2004 10:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using basename() on a path to a directory ('/bar/foo/'), the last path component ('foo') is returned, instead of the empty string one would expect. (Both PHP 4.1.2 and 4.3.8 on GNU/Linux.) No idea whether this is considered a bug or a feature -- I found it extremely annoying. Had to work around using: <span class="default">&lt;?php $file</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">)==</span><span class="string">'/'</span><span class="keyword">?</span><span class="string">''</span><span class="keyword">:</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) </span><span class="default">?&gt;</span> Watch out!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41633""></a>
  <div class="note">
   <strong class="user">osanim at cidlisuis dot org</strong>
   <a href="#41633" class="date">17-Apr-2004 11:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want know the real directory of the include file, you have to writte:<br />
<br />
<span class="default">&lt;?php<br />
dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">)<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37813""></a>
  <div class="note">
   <strong class="user">KOmaSHOOTER at gmx dot de</strong>
   <a href="#37813" class="date">28-Nov-2003 02:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Exmaple for exploding ;) the filename to an array <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo(</span><span class="default">basename </span><span class="keyword">(</span><span class="default">$PHP_SELF</span><span class="keyword">).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);&nbsp; </span><span class="comment">// returnes filename.php<br />
</span><span class="default">$file </span><span class="keyword">= </span><span class="default">basename </span><span class="keyword">(</span><span class="default">$PHP_SELF</span><span class="keyword">);<br />
</span><span class="default">$file </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$file</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// returnes Array ( [0] =&gt; filename [1] =&gt; php ) <br />
</span><span class="keyword">echo(</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br />
</span><span class="default">$filename </span><span class="keyword">= </span><span class="default">basename</span><span class="keyword">(</span><span class="default">strval</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]),</span><span class="default">$file</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]); <br />
echo(</span><span class="default">$filename</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);&nbsp; </span><span class="comment">// returnes&nbsp; filename<br />
</span><span class="keyword">echo(</span><span class="default">basename </span><span class="keyword">(</span><span class="default">$PHP_SELF</span><span class="keyword">,</span><span class="string">".php"</span><span class="keyword">).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);&nbsp; </span><span class="comment">// returnes&nbsp; filename<br />
</span><span class="keyword">echo(</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br />
echo(</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br />
</span><span class="comment">//show_source(basename ($PHP_SELF,".php").".php")<br />
</span><span class="default">show_source</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37276""></a>
  <div class="note">
   <strong class="user">giovanni at giacobbi dot net</strong>
   <a href="#37276" class="date">08-Nov-2003 07:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
No comments here seems to take care about UNIX system files, which typically start with a dot, but they are not "extensions-only".<br />
The following function should work with every file path. If not, please let me know at my email address.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">remove_ext</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$noext </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/(.+)\..*$/'</span><span class="keyword">, </span><span class="string">'$1'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
&nbsp; print </span><span class="string">"input: </span><span class="default">$str</span><span class="string">\n"</span><span class="keyword">;<br />
&nbsp; print </span><span class="string">"output: </span><span class="default">$noext</span><span class="string">\n\n"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">remove_ext</span><span class="keyword">(</span><span class="string">"/home/joh.nny/test.php"</span><span class="keyword">);<br />
</span><span class="default">remove_ext</span><span class="keyword">(</span><span class="string">"home/johnny/test.php"</span><span class="keyword">);<br />
</span><span class="default">remove_ext</span><span class="keyword">(</span><span class="string">"weirdfile."</span><span class="keyword">);<br />
</span><span class="default">remove_ext</span><span class="keyword">(</span><span class="string">".hiddenfile"</span><span class="keyword">);<br />
</span><span class="default">remove_ext</span><span class="keyword">(</span><span class="string">"../johnny.conf"</span><span class="keyword">);</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36604""></a>
  <div class="note">
   <strong class="user">daijoubu_NOSP at M_videotron dot ca</strong>
   <a href="#36604" class="date">15-Oct-2003 10:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An faster alternative to:<br />
<br />
<span class="default">&lt;?php<br />
array_pop</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$fpath</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
would be:<br />
<br />
<span class="default">&lt;?php<br />
substr</span><span class="keyword">(</span><span class="default">$fpath</span><span class="keyword">, </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$fpath</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">)); </span><span class="comment">// returns the dot<br />
</span><span class="default">?&gt;<br />
</span><br />
If you don't want the dot, simply adds 1 to the position<br />
<br />
<span class="default">&lt;?php<br />
substr</span><span class="keyword">(</span><span class="default">$fpath</span><span class="keyword">, </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$fpath</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">); </span><span class="comment">// returns the ext only<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30872""></a>
  <div class="note">
   <strong class="user">Richard at Lyders dot Net</strong>
   <a href="#30872" class="date">01-Apr-2003 01:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
you can also make use of the basename() function's second parameter:<br />
<br />
<span class="default">&lt;?PHP<br />
$fpath </span><span class="keyword">= </span><span class="string">"/blah/file.name.has.lots.of.dots.ext"</span><span class="keyword">;<br />
</span><span class="default">$fext&nbsp; </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$fpath</span><span class="keyword">));<br />
</span><span class="default">$fname </span><span class="keyword">= </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$fpath</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">.</span><span class="default">$fext</span><span class="keyword">);<br />
<br />
print </span><span class="string">"fpath: </span><span class="default">$fpath</span><span class="string">\n&lt;br&gt;"</span><span class="keyword">;<br />
print </span><span class="string">"fext: </span><span class="default">$fext</span><span class="string">\n&lt;br&gt;"</span><span class="keyword">;<br />
print </span><span class="string">"fname: </span><span class="default">$fname</span><span class="string">\n&lt;br&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.chgrp.html">chgrp</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
