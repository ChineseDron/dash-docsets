<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Alias of DateTime::__construct</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.date-create-from-format.html">date_create_from_format</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.date-date-set.html">date_date_set</a></div>
 <div class="up"><a href="ref.datetime.html">Date/Time Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.date-create" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">date_create</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.2.0)</p><p class="refpurpose"><span class="refname">date_create</span> &mdash; <span class="dc-title">Alias of  <span class="methodname"><a href="datetime.construct.html" class="methodname">DateTime::__construct()</a></span></span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.date-create-description">
  <h3 class="title">Description</h3>
  <p class="para">
   This function is an alias of:   <span class="methodname"><a href="datetime.construct.html" class="methodname">DateTime::__construct()</a></span>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="104938""></a>
  <div class="note">
   <strong class="user">me at jameswdunne dot com</strong>
   <a href="#104938" class="date">17-Jul-2011 04:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You should also be aware that DateTime has very lax date validation rules. It appears that all months have a maximum of 31 days.<br />
<br />
For example, these will work fine:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $test </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'02/31/2011'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$test </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'06/31/2011'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
We all know that these dates are not real and are invalid so I think a good idea is to do some further validation on dates before creating a DateTime object with them.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87263""></a>
  <div class="note">
   <strong class="user">Keith Humm</strong>
   <a href="#87263" class="date">26-Nov-2008 04:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An interesting note that came from the tutorial (as well as my own testing) is that the DateTime constructor is exception happy. In other languages this is a bit of a no-no - throwing exceptions from within a constructor can cause all sorts of odd problems!<br />
<br />
Either way, because of this you should attempt to catch any exception and only use the object if it does not throw an exception.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$bad_date_string </span><span class="keyword">= </span><span class="string">'ublingah!'</span><span class="keyword">;<br />
try {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dt </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="default">$bad_date_string</span><span class="keyword">);<br />
}<br />
catch(</span><span class="default">Exception $e</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// catches 'Failed to parse time string (ublingah!) at position 0 (u)' exception.<br />
&nbsp;&nbsp;&nbsp; // don't use this object<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85194""></a>
  <div class="note">
   <strong class="user">djspillers at mac dot com</strong>
   <a href="#85194" class="date">19-Aug-2008 12:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Looks like the DateTime class does not exist in my PHP 5.1.5 installation. The only documentation I can find says this class shows up in PHP 5.2</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81228""></a>
  <div class="note">
   <strong class="user">prikkeldraad at gmail dot com</strong>
   <a href="#81228" class="date">19-Feb-2008 05:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Serialization and unserialization fail for the DateTime object (PHP 5.2.5).<br />
<br />
With your own __sleep and __wakeup function in a child class you can work around this problem.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">MyDateTime </span><span class="keyword">extends </span><span class="default">DateTime </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$_str</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__sleep</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_str </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'c'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return array(</span><span class="string">'_str'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__wakeup</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_str</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Regards, Mick<br />
<br />
[Ed. Please be aware that this is *not* 100% correct as you lose the timezone information. Always use the standard serialization if it's available!]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79756""></a>
  <div class="note">
   <strong class="user">mroximoron</strong>
   <a href="#79756" class="date">11-Dec-2007 07:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The string format here is a bit wrong, yes it accepts the same format, but not the same range as strtotime.<br />
<br />
strtotime can't handle dates like 2100-01-01 while this one can..</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78803""></a>
  <div class="note">
   <strong class="user">jsnell at e-normous dot com</strong>
   <a href="#78803" class="date">28-Oct-2007 03:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using these functions inside of destructors or functions called as a result of being registered with register_shutdown_handler, be sure to use date_create() instead of new DateTime().&nbsp; This is because new DateTime will throw an exception on failure, which is not permitted in any of the above circumstances.&nbsp; If new DateTime() does fail in one of these circumstances, you will get an error stating "Fatal error: Exception thrown without a stack frame in Unknown on line 0."</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77871""></a>
  <div class="note">
   <strong class="user">karsten at typo3 dot org</strong>
   <a href="#77871" class="date">17-Sep-2007 09:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The manual says "Returns DateTime object on success or FALSE on failure".<br />
<br />
I tried hard to provoke a failure, but I seem to always get a DateTime object back, even though the PHP log says things like: "Failed to parse time string (2007W992-11:16:47+00:00) at position 5 (9): Unexpected character"<br />
<br />
So if you (need to) check the result, beware!<br />
<br />
[red. in PHP 5.3 and higher, you can do that with DateTime::getLastErrors().]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76216""></a>
  <div class="note">
   <strong class="user">Dok</strong>
   <a href="#76216" class="date">05-Jul-2007 07:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to create the DateTime object directly from a timestamp use this<br />
<br />
<span class="default">&lt;?php<br />
$st </span><span class="keyword">= </span><span class="default">1170288000 </span><span class="comment">//&nbsp; a timestamp<br />
</span><span class="default">$dt </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"@</span><span class="default">$st</span><span class="string">"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
See also: <a href="http://bugs.php.net/bug.php?id=40171" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=40171</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74599""></a>
  <div class="note">
   <strong class="user">artur at jedlinski dot pl</strong>
   <a href="#74599" class="date">19-Apr-2007 05:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"String in a format accepted by strtotime()" is not 100% truth - you cannot pass timezone info in the string used as DateTime constructor, while you can do it with strtotime(). It may be a problem if you would like to create a date from GMT time and then display it in your local timezone, for example:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $timeZone </span><span class="keyword">= </span><span class="string">'Europe/Warsaw'</span><span class="keyword">;&nbsp; </span><span class="comment">// +2 hours<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">date_default_timezone_set</span><span class="keyword">(</span><span class="default">$timeZone</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dateSrc </span><span class="keyword">= </span><span class="string">'2007-04-19 12:50 GMT'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dateTime </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="default">$dateSrc</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'date(): '</span><span class="keyword">.</span><span class="default">date</span><span class="keyword">(</span><span class="string">'H:i:s'</span><span class="keyword">, </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$dateSrc</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// correct! date(): 14:50:00<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">'DateTime::format(): '</span><span class="keyword">.</span><span class="default">$dateTime</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'H:i:s'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// INCORRECT! DateTime::format(): 12:50:00<br />
</span><span class="default">?&gt;<br />
</span><br />
[red. your claim that "is not 100% truth" is incorrect, you're seeing desired behavior here. The timezone passed as 2nd argument is used as a default fall back, in case the parsed string doesn't provide TZ information.]<br />
<br />
So if you want to convert date between different timezones, you have to create two DateTimeZone objects - one for the input and one for output, like this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $timeZone </span><span class="keyword">= </span><span class="string">'Europe/Warsaw'</span><span class="keyword">;&nbsp; </span><span class="comment">// +2 hours<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dateSrc </span><span class="keyword">= </span><span class="string">'2007-04-19 12:50'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dateTime </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="default">$dateSrc</span><span class="keyword">, new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="string">'GMT'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dateTime</span><span class="keyword">-&gt;</span><span class="default">setTimeZone</span><span class="keyword">(new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="default">$timeZone</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'DateTime::format(): '</span><span class="keyword">.</span><span class="default">$dateTime</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'H:i:s'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// CORRECT! DateTime::format(): 14:50:00<br />
</span><span class="default">?&gt;<br />
</span><br />
I'm not sure if this is a bug or desired behaviour.<br />
[red. you don't have to do create two DateTimeZone objects, this works too:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $timeZone </span><span class="keyword">= </span><span class="string">'Europe/Warsaw'</span><span class="keyword">;&nbsp; </span><span class="comment">// +2 hours<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dateSrc </span><span class="keyword">= </span><span class="string">'2007-04-19 12:50 GMT'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dateTime </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="default">$dateSrc</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dateTime</span><span class="keyword">-&gt;</span><span class="default">setTimeZone</span><span class="keyword">(new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="default">$timeZone</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'DateTime::format(): '</span><span class="keyword">.</span><span class="default">$dateTime</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'H:i:s'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// CORRECT! DateTime::format(): 14:50:00<br />
</span><span class="default">?&gt;<br />
</span>]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73709""></a>
  <div class="note">
   <strong class="user">nizar dot jouini at gmail.com</strong>
   <a href="#73709" class="date">07-Mar-2007 05:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
date_create and other DateTime related functions are included by default only in PHP versions equal and greater than 5.2.<br />
<br />
In PHP 5.1.2 this functionality is marked to be experimental and has to be enabled at compile time.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.date-create-from-format.html">date_create_from_format</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.date-date-set.html">date_date_set</a></div>
 <div class="up"><a href="ref.datetime.html">Date/Time Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
