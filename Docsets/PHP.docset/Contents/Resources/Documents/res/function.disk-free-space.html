<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Returns available space on filesystem or disk partition</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.dirname.html">dirname</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.disk-total-space.html">disk_total_space</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.disk-free-space" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">disk_free_space</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.1.0, PHP 5)</p><p class="refpurpose"><span class="refname">disk_free_space</span> &mdash; <span class="dc-title">Returns available space on filesystem or disk partition</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.disk-free-space-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">float</span> <span class="methodname"><b>disk_free_space</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$directory</tt></span>
   )</div>

  <p class="para rdfs-comment">
   Given a string containing a directory, this function will return the
   number of bytes available on the corresponding filesystem or disk
   partition.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.disk-free-space-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">directory</tt></i></span>
     <dd>

      <p class="para">
       A directory of the filesystem or disk partition.
      </p>
      <blockquote class="note"><p><b class="note">Note</b>: 
       <p class="para">
        Given a file name instead of a directory, the behaviour of the
        function is unspecified and may differ between operating systems and
        PHP versions.
       </p>
      </p></blockquote>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.disk-free-space-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the number of available bytes as a float
    or <b><tt>FALSE</tt></b> on failure.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.disk-free-space-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-2150">
    <p><b>Example #1 <span class="function"><b>disk_free_space()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;$df&nbsp;contains&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;available&nbsp;on&nbsp;"/"<br /></span><span style="color: #0000BB">$df&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">disk_free_space</span><span style="color: #007700">(</span><span style="color: #DD0000">"/"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;On&nbsp;Windows:<br /></span><span style="color: #0000BB">$df_c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">disk_free_space</span><span style="color: #007700">(</span><span style="color: #DD0000">"C:"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$df_d&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">disk_free_space</span><span style="color: #007700">(</span><span style="color: #DD0000">"D:"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.disk-free-space-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><b class="note">Note</b>: <span class="simpara">This function will not work on
<a href="features.remote-files.html" class="link">remote files</a> as the file to
be examined must be accessible via the server&#039;s filesystem.</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.disk-free-space-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.disk-total-space.html" class="function" rel="rdfs-seeAlso">disk_total_space()</a> - Returns the total size of a filesystem or disk partition</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="106955""></a>
  <div class="note">
   <strong class="user">crrodriguez at opensuse dot org</strong>
   <a href="#106955" class="date">20-Dec-2011 01:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that you should not rely on this function on linux BTRFS filesystems.read the FAQ for more info<br />
<br />
https://btrfs.wiki.kernel.org/articles/f/a/q/FAQ_1fe9.htm</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103382""></a>
  <div class="note">
   <strong class="user">wiede at gmx dot net</strong>
   <a href="#103382" class="date">11-Apr-2011 05:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Transformation is possible WITHOUT using loops:<br />
<br />
<span class="default">&lt;?php <br />
&nbsp;&nbsp;&nbsp; $bytes </span><span class="keyword">= </span><span class="default">disk_free_space</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$si_prefix </span><span class="keyword">= array( </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'KB'</span><span class="keyword">, </span><span class="string">'MB'</span><span class="keyword">, </span><span class="string">'GB'</span><span class="keyword">, </span><span class="string">'TB'</span><span class="keyword">, </span><span class="string">'EB'</span><span class="keyword">, </span><span class="string">'ZB'</span><span class="keyword">, </span><span class="string">'YB' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$base </span><span class="keyword">= </span><span class="default">1024</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$class </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">((int)</span><span class="default">log</span><span class="keyword">(</span><span class="default">$bytes </span><span class="keyword">, </span><span class="default">$base</span><span class="keyword">) , </span><span class="default">count</span><span class="keyword">(</span><span class="default">$si_prefix</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$bytes </span><span class="keyword">. </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%1.2f' </span><span class="keyword">, </span><span class="default">$bytes </span><span class="keyword">/ </span><span class="default">pow</span><span class="keyword">(</span><span class="default">$base</span><span class="keyword">,</span><span class="default">$class</span><span class="keyword">)) . </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">$si_prefix</span><span class="keyword">[</span><span class="default">$class</span><span class="keyword">] . </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87711""></a>
  <div class="note">
   <strong class="user">sam</strong>
   <a href="#87711" class="date">17-Dec-2008 01:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Nice, but please be aware of the prefixes.<br />
<br />
SI specifies a lower case 'k' as 1'000 prefix.<br />
It doesn't make sense to use an upper case 'K' as binary prefix,<br />
while the decimal Mega (M and following) prefixes in SI are uppercase.<br />
Furthermore, there are REAL binary prefixes since a few years.<br />
<br />
Do it the (newest and recommended) "IEC" way:<br />
<br />
KB's are calculated decimal; power of 10 (1000 bytes each)<br />
KiB's are calculated binary; power of 2 (1024 bytes each).<br />
The same goes for MB, MiB and so on...<br />
<br />
Feel free to read:<br />
<a href="http://en.wikipedia.org/wiki/Binary_prefix" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Binary_prefix</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81207""></a>
  <div class="note">
   <strong class="user">rostvertol dot mil at gmail dot com</strong>
   <a href="#81207" class="date">18-Feb-2008 11:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A cleaner and more efficient way of making human readable file sizes:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">decodeSize</span><span class="keyword">( </span><span class="default">$bytes </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$types </span><span class="keyword">= array( </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'KB'</span><span class="keyword">, </span><span class="string">'MB'</span><span class="keyword">, </span><span class="string">'GB'</span><span class="keyword">, </span><span class="string">'TB' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for( </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$bytes </span><span class="keyword">&gt;= </span><span class="default">1024 </span><span class="keyword">&amp;&amp; </span><span class="default">$i </span><span class="keyword">&lt; ( </span><span class="default">count</span><span class="keyword">( </span><span class="default">$types </span><span class="keyword">) -</span><span class="default">1 </span><span class="keyword">); </span><span class="default">$bytes </span><span class="keyword">/= </span><span class="default">1024</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">++ );<br />
&nbsp;&nbsp;&nbsp; return( </span><span class="default">round</span><span class="keyword">( </span><span class="default">$bytes</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">) . </span><span class="string">" " </span><span class="keyword">. </span><span class="default">$types</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] );<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79648""></a>
  <div class="note">
   <strong class="user">root at mantoru dot de</strong>
   <a href="#79648" class="date">06-Dec-2007 08:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that disk_free_space() does an open_basedir check.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72281""></a>
  <div class="note">
   <strong class="user">Nitrogen</strong>
   <a href="#72281" class="date">10-Jan-2007 05:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another easy way to convert bytes to human readable sizes would be this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">HumanSize</span><span class="keyword">(</span><span class="default">$Bytes</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$Type</span><span class="keyword">=array(</span><span class="string">""</span><span class="keyword">, </span><span class="string">"kilo"</span><span class="keyword">, </span><span class="string">"mega"</span><span class="keyword">, </span><span class="string">"giga"</span><span class="keyword">, </span><span class="string">"tera"</span><span class="keyword">, </span><span class="string">"peta"</span><span class="keyword">, </span><span class="string">"exa"</span><span class="keyword">, </span><span class="string">"zetta"</span><span class="keyword">, </span><span class="string">"yotta"</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$Index</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp; while(</span><span class="default">$Bytes</span><span class="keyword">&gt;=</span><span class="default">1024</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Bytes</span><span class="keyword">/=</span><span class="default">1024</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Index</span><span class="keyword">++;<br />
&nbsp; }<br />
&nbsp; return(</span><span class="string">""</span><span class="keyword">.</span><span class="default">$Bytes</span><span class="keyword">.</span><span class="string">" "</span><span class="keyword">.</span><span class="default">$Type</span><span class="keyword">[</span><span class="default">$Index</span><span class="keyword">].</span><span class="string">"bytes"</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
It simply takes the $Bytes and divides it by 1024 bytes untill it's no longer over or equal to 1024, meanwhile it increases the $Index to allocate which suffix belongs to the return (adding 'bytes' to the end to save some space).<br />
You can easily modify it so it's shorter, but I made it so it's more clearer.<br />
<br />
Nitrogen.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71523""></a>
  <div class="note">
   <strong class="user">mixar at yandex dot ru</strong>
   <a href="#71523" class="date">04-Dec-2006 03:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This the right function is:<br />
<br />
function formatSize($size){<br />
&nbsp;&nbsp;&nbsp; switch (true){<br />
&nbsp;&nbsp;&nbsp; case ($size &gt; 1099511627776):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $size /= 1099511627776;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $suffix = 'TB';<br />
&nbsp;&nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; case ($size &gt; 1073741824):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $size /= 1073741824;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $suffix = 'GB';<br />
&nbsp;&nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; case ($size &gt; 1048576):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $size /= 1048576;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $suffix = 'MB';&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; case ($size &gt; 1024):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $size /= 1024;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $suffix = 'KB';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; default:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $suffix = 'B';<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return round($size, 2).$suffix;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68080""></a>
  <div class="note">
   <strong class="user">djneoform at gmail dot com</strong>
   <a href="#68080" class="date">12-Jul-2006 07:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
List all drives, free space, total space and percentage free.<br />
<br />
&lt;?<br />
&nbsp;&nbsp;&nbsp; for ($i = 67; $i &lt;= 90; $i++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $drive = chr($i);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (is_dir($drive.':'))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $freespace&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; = disk_free_space($drive.':');<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $total_space&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; = disk_total_space($drive.':');<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $percentage_free&nbsp; &nbsp;&nbsp; = $freespace ? round($freespace / $total_space, 2) * 100 : 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo $drive.': '.to_readble_size($freespace).' / '.to_readble_size($total_space).' ['.$percentage_free.'%]&lt;br /&gt;';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function to_readble_size($size)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; switch (true)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case ($size &gt; 1000000000000):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $size /= 1000000000000;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $suffix = 'TB';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case ($size &gt; 1000000000):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $size /= 1000000000;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $suffix = 'GB';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case ($size &gt; 1000000):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $size /= 1000000;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $suffix = 'MB';&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case ($size &gt; 1000):<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $size /= 1000;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $suffix = 'KB';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; default:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $suffix = 'B';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return round($size, 2).$suffix;<br />
&nbsp;&nbsp;&nbsp; }<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50502""></a>
  <div class="note">
   <strong class="user">Ashraf M Kaabi</strong>
   <a href="#50502" class="date">01-Mar-2005 08:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
and also you can know the used space , in this <br />
example :<br />
&lt;?<br />
function disk_used_space($drive)<br />
{<br />
&nbsp;&nbsp;&nbsp; return disk_total_space("$drive:") - disk_free_space("$drive:");<br />
}<br />
<br />
echo disk_used_space('C');<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.dirname.html">dirname</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.disk-total-space.html">disk_total_space</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
