<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Creates a tree of PHP objects from an XML document</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.domxml-version.html">domxml_version</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.domxml-xslt-stylesheet-doc.html">domxml_xslt_stylesheet_doc</a></div>
 <div class="up"><a href="ref.domxml.html">DOM XML (PHP 4) Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.domxml-xmltree" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">domxml_xmltree</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.2.0)</p><p class="refpurpose"><span class="refname">domxml_xmltree</span> &mdash; <span class="dc-title">
   Creates a tree of PHP objects from an XML document
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.domxml-xmltree-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="class.domdocument.html" class="type DomDocument">DomDocument</a></span> <span class="methodname"><b>domxml_xmltree</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$str</tt></span>
   )</div>

  <p class="para rdfs-comment">
   The function parses the XML document in <i><tt class="parameter">str</tt></i> and
   returns a tree PHP objects as the parsed document.
  </p>
  <p class="para">
   This function is isolated from the other functions, which means you cannot
   access the tree with any of the other functions.
   Modifying it, for example by adding nodes, makes no sense since there
   is currently no way to dump it as an XML file.
  </p>
  <p class="para">
   However this function may be valuable if you want to read a file and
   investigate the content.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.domxml-xmltree-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">str</tt></i></span>
     <dd>

      <p class="para">
       The contents of the XML file.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.domxml-xmltree-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns a tree of Dom objects starting by a 
   <a href="class.domdocument.html" class="classname">DomDocument</a>.
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="79950""></a>
  <div class="note">
   <strong class="user">MediaHound</strong>
   <a href="#79950" class="date">20-Dec-2007 08:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
And, arguably more important: <br />
&nbsp;&nbsp;&nbsp; Note: This extension has been moved to the Â» PECL repository and is no longer bundled with PHP as of PHP 5.0.0.<br />
<br />
&nbsp;&nbsp;&nbsp; Note: This extension is no longer marked experimental. It will, however, never be released with PHP 5, and will only be distributed with PHP 4. If you need DOM XML support with PHP 5 you can use the DOM extension. This domxml extension is not compatible with the DOM extension. <br />
<br />
<a href="http://www.php.net/domxml" rel="nofollow" target="_blank">http://www.php.net/domxml</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="66156""></a>
  <div class="note">
   <strong class="user">jeroen dot s at zonnet dot nl</strong>
   <a href="#66156" class="date">16-May-2006 01:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can modify the returned DomDocument, and dump it as an XML file <br />
by using DomDocument-&gt;dump_mem() or DomDocument-&gt;dump_file().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50274""></a>
  <div class="note">
   
   <a href="#50274" class="date">23-Feb-2005 06:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Replacing line 10 works well, but replacing line 15 causes some errors. I have a tree like:<br />
<br />
&lt;admin&gt;<br />
<br />
&lt;user level="0"&gt;<br />
&lt;username&gt;admin&lt;/username&gt;<br />
&lt;password&gt;admin_pass&lt;/password&gt;<br />
&lt;/user&gt;<br />
&lt;user level="1"&gt;<br />
&lt;username&gt;moder&lt;/username&gt;<br />
&lt;password&gt;moder_pass&lt;/password&gt;<br />
&lt;/user&gt;<br />
<br />
&lt;/admin&gt;<br />
<br />
when I remove those brackets only the last &lt;user&gt; is included into array. In this example it would be <br />
&lt;user level="1"&gt;<br />
&lt;username&gt;moder&lt;/username&gt;<br />
&lt;password&gt;juozux&lt;/password&gt;<br />
&lt;/user&gt;<br />
<br />
no user name admin, etc.<br />
<br />
p.s. I don't store passwords in plain text in xml, that was just an example :))</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39684""></a>
  <div class="note">
   <strong class="user">Alan71</strong>
   <a href="#39684" class="date">07-Feb-2004 10:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In the function of nutbar, try to&nbsp; replace line 10 by<br />
$objptr = $branch-&gt;node_value();<br />
and line 15 by :<br />
$objptr = &amp;$object[$branch-&gt;node_name()]; //without the '[]'<br />
<br />
it makes an array much more easier to read.<br />
Previously, it produces an array like $MyArray[ROOT][0][BRANCH1][0][BRANCH2][0][5], and now $MyArray[ROOT][BRANCH1][BRANCH2][5]. There isn't bugs in the example I use, and I haven't tested with arguments. I think that an implementation of a part of nospam's code is enough.<br />
<br />
I hope this will help!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27951""></a>
  <div class="note">
   <strong class="user">samc  a t  rampantlabs dot net</strong>
   <a href="#27951" class="date">27-Dec-2002 12:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Forgive me if I am mistaken, but the whole point of including the "useless white space" is because of the existence of mixed types, for example:<br />
<br />
the schema def:<br />
<br />
&lt;xsd:element name="paragraph"&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;xsd:complexType mixed="true"&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;xsd:choice&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;xsd:element ref="link" /&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;xsd:element ref="emphasisText" /&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;/xsd:choice&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;/xsd:complexType&gt;<br />
&lt;/xsd:element&gt;<br />
<br />
and an example:<br />
<br />
&lt;paragraph&gt;This here is a paragraph.&nbsp; You'll notice that it has within it a bunch of text punctuated by other &lt;emphasisText&gt;tags&lt;/emphasisText&gt; and it is &lt;link target="me.html&gt;my&lt;/url&gt; understanding that the only way to read this text is by reading the tagless nodes that your functions strip.&lt;/paragraph&gt;<br />
<br />
I could be way off though...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27616""></a>
  <div class="note">
   <strong class="user">colin at omenmedia dot com</strong>
   <a href="#27616" class="date">12-Dec-2002 07:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a genuinely useful function, however, as with any DOM-based markup parser, be mindful of the size of the XML document you are parsing.&nbsp; Representing very large XML files as object structures requires *a lot* of memory and processing, and may even crash your server (which is what happened to my Apache when I tried parsing a 2MB XML file using this function, just for fun... ;).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="26023""></a>
  <div class="note">
   <strong class="user">nospam at candlefire dot org</strong>
   <a href="#26023" class="date">15-Oct-2002 08:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Consider the following revisions for including attributes into the array.<br />
<br />
function domxml_xmlarray ($branch)<br />
{<br />
&nbsp;&nbsp;&nbsp; $object = Array ();<br />
&nbsp;&nbsp;&nbsp; $objptr =&amp; $object;<br />
&nbsp;&nbsp;&nbsp; $branch = $branch-&gt;first_child ();<br />
<br />
&nbsp;&nbsp;&nbsp; while ($branch)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!($branch-&gt;is_blank_node()))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; switch ($branch-&gt;node_type())<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case XML_TEXT_NODE:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $objptr['cdata'] = $branch-&gt;node_value ();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case XML_ELEMENT_NODE:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $objptr =&amp; $object[$branch-&gt;node_name ()][];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($branch-&gt;has_attributes ())<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $attributes = $branch-&gt;attributes ();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!is_array ($attributes)) { break; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach ($attributes as $index =&gt; $domobj)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $objptr[$index] = $objptr[$domobj-&gt;name] = $domobj-&gt;value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($branch-&gt;has_child_nodes ()) { $objptr = array_merge ($objptr, domxml_xmlarray ($branch)); }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $branch = $branch-&gt;next_sibling ();<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return $object;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25964""></a>
  <div class="note">
   <strong class="user">nutbar at innocent dot com</strong>
   <a href="#25964" class="date">13-Oct-2002 12:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Same concept as previous function, except uses node names as key items in the arrays.&nbsp; This function may prove a bit more useful than the previous one:<br />
<br />
&nbsp;&nbsp;&nbsp; function domxml_xmlarray($branch) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $object = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $objptr = &amp;$object;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $branch = $branch-&gt;first_child();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while ($branch) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!($branch-&gt;is_blank_node())) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; switch ($branch-&gt;node_type()) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case XML_TEXT_NODE: {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $objptr['cdata'] = $branch-&gt;node_value();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case XML_ELEMENT_NODE: {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $objptr = &amp;$object[$branch-&gt;node_name()][];<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($branch-&gt;has_child_nodes()) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $objptr = array_merge($objptr, domxml_xmlarray($branch));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $branch = $branch-&gt;next_sibling();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $object;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
Usage is identical to the previous function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.domxml-version.html">domxml_version</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.domxml-xslt-stylesheet-doc.html">domxml_xslt_stylesheet_doc</a></div>
 <div class="up"><a href="ref.domxml.html">DOM XML (PHP 4) Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
