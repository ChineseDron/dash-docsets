<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Reads entire file into an array</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.file-put-contents.html">file_put_contents</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.fileatime.html">fileatime</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.file" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">file</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">file</span> &mdash; <span class="dc-title">Reads entire file into an array</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.file-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><b>file</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$filename</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$flags</tt><span class="initializer"> = 0</span></span>
   [, <span class="methodparam"><span class="type">resource</span> <tt class="parameter">$context</tt></span>
  ]] )</div>

  <p class="para rdfs-comment">
   Reads an entire file into an array.
  </p>
  <blockquote class="note"><p><b class="note">Note</b>: 
   <p class="para">
    You can use <span class="function"><a href="function.file-get-contents.html" class="function">file_get_contents()</a></span> to return the contents
    of a file as a string.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.file-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">filename</tt></i></span>
     <dd>

      <p class="para">
       Path to the file.
      </p>
      <div class="tip"><b class="tip">Tip</b><p class="simpara">A URL can be used as a
filename with this function if the <a href="filesystem.configuration.html#ini.allow-url-fopen" class="link">fopen wrappers</a> have been enabled.
See <span class="function"><a href="function.fopen.html" class="function">fopen()</a></span> for more details on how to specify the
filename. See the <a href="wrappers.html" class="xref">Supported Protocols and Wrappers</a> for links to information
about what abilities the various wrappers have, notes on their usage,
and information on any predefined variables they may
provide.</p></div>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">flags</tt></i></span>
     <dd>

      <p class="para">
       The optional parameter <i><tt class="parameter">flags</tt></i> can be one, or
       more, of the following constants:
       <dl>

        <dt>

         <span class="term">
          <b><tt>FILE_USE_INCLUDE_PATH</tt></b>
         </span>
         <dd>

          <span class="simpara">
           Search for the file in the <a href="ini.core.html#ini.include-path" class="link">include_path</a>.
          </span>
         </dd>

        </dt>

        <dt>

         <span class="term">
          <b><tt>FILE_IGNORE_NEW_LINES</tt></b>
         </span>
         <dd>

          <span class="simpara">
           Do not add newline at the end of each array element
          </span>
         </dd>

        </dt>

        <dt>

         <span class="term">
          <b><tt>FILE_SKIP_EMPTY_LINES</tt></b>
         </span>
         <dd>

          <span class="simpara">
           Skip empty lines
          </span>
         </dd>

        </dt>

        
       </dl>

      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">context</tt></i></span>
     <dd>

      <p class="para">
       A context resource created with the 
       <span class="function"><a href="function.stream-context-create.html" class="function">stream_context_create()</a></span> function.
      </p>
      <p class="para">
       <blockquote class="note"><p><b class="note">Note</b>: <span class="simpara">Context support was added
with PHP 5.0.0. For a description of <i>contexts</i>, refer to
<a href="book.stream.html" class="xref">Streams</a>.</span></p></blockquote>
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.file-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the file in an array. Each element of the array corresponds to a
   line in the file, with the newline still attached. Upon failure,
   <span class="function"><b>file()</b></span> returns <b><tt>FALSE</tt></b>.
  </p>
  <blockquote class="note"><p><b class="note">Note</b>: 
   <p class="para">
    Each line in the resulting array will include the line ending, unless
    <b><tt>FILE_IGNORE_NEW_LINES</tt></b> is used, so you still need to
    use <span class="function"><a href="function.rtrim.html" class="function">rtrim()</a></span> if you do not want the line ending
    present.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><b class="note">Note</b>: <span class="simpara">If PHP is not properly recognizing
the line endings when reading files either on or created by a Macintosh
computer, enabling the
<a href="filesystem.configuration.html#ini.auto-detect-line-endings" class="link">auto_detect_line_endings</a>
run-time configuration option may help resolve the problem.</span></p></blockquote>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.file-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      
      <tr valign="middle">
       <td align="left">5.0.0</td>
       <td align="left">
        The <i><tt class="parameter">context</tt></i> parameter was added
       </td>
      </tr>

      <tr valign="middle">
       <td align="left">5.0.0</td>
       <td align="left">
        Prior to PHP 5.0.0 the <i><tt class="parameter">flags</tt></i> parameter only
        covered <a href="ini.core.html#ini.include-path" class="link">include_path</a> and was
        enabled with 1
       </td>
      </tr>

      <tr valign="middle">
       <td align="left">4.3.0</td>
       <td align="left">
        <span class="function"><b>file()</b></span> became binary safe
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.file-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-2167">
    <p><b>Example #1 <span class="function"><b>file()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Get&nbsp;a&nbsp;file&nbsp;into&nbsp;an&nbsp;array.&nbsp;&nbsp;In&nbsp;this&nbsp;example&nbsp;we'll&nbsp;go&nbsp;through&nbsp;HTTP&nbsp;to&nbsp;get<br />//&nbsp;the&nbsp;HTML&nbsp;source&nbsp;of&nbsp;a&nbsp;URL.<br /></span><span style="color: #0000BB">$lines&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">file</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://www.example.com/'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Loop&nbsp;through&nbsp;our&nbsp;array,&nbsp;show&nbsp;HTML&nbsp;source&nbsp;as&nbsp;HTML&nbsp;source;&nbsp;and&nbsp;line&nbsp;numbers&nbsp;too.<br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$lines&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$line_num&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$line</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Line&nbsp;#&lt;b&gt;</span><span style="color: #007700">{</span><span style="color: #0000BB">$line_num</span><span style="color: #007700">}</span><span style="color: #DD0000">&lt;/b&gt;&nbsp;:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$line</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Another&nbsp;example,&nbsp;let's&nbsp;get&nbsp;a&nbsp;web&nbsp;page&nbsp;into&nbsp;a&nbsp;string.&nbsp;&nbsp;See&nbsp;also&nbsp;file_get_contents().<br /></span><span style="color: #0000BB">$html&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">file</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://www.example.com/'</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;Using&nbsp;the&nbsp;optional&nbsp;flags&nbsp;parameter&nbsp;since&nbsp;PHP&nbsp;5<br /></span><span style="color: #0000BB">$trimmed&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">file</span><span style="color: #007700">(</span><span style="color: #DD0000">'somefile.txt'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">FILE_IGNORE_NEW_LINES&nbsp;</span><span style="color: #007700">|&nbsp;</span><span style="color: #0000BB">FILE_SKIP_EMPTY_LINES</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.file-notes">
  <h3 class="title">Notes</h3>
  <div class="warning"><b class="warning">Warning</b><p class="para">When using SSL, Microsoft IIS
will violate the protocol by closing the connection without sending a
<i>close_notify</i> indicator. PHP will report this as &quot;SSL: Fatal
Protocol Error&quot; when you reach the end of the data. To work around this, the
value of <a href="errorfunc.configuration.html#ini.error-reporting" class="link">error_reporting</a> should be
lowered to a level that does not include warnings.
PHP 4.3.7 and higher can detect buggy IIS server software when you open
the stream using the <i>https://</i> wrapper and will suppress the
warning. When using <span class="function"><a href="function.fsockopen.html" class="function">fsockopen()</a></span> to create an
<i>ssl://</i> socket, the developer is responsible for detecting
and suppressing this warning.</p></div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.file-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.readfile.html" class="function" rel="rdfs-seeAlso">readfile()</a> - Outputs a file</span></li>
    <li class="member"><span class="function"><a href="function.fopen.html" class="function" rel="rdfs-seeAlso">fopen()</a> - Opens file or URL</span></li>
    <li class="member"><span class="function"><a href="function.fsockopen.html" class="function" rel="rdfs-seeAlso">fsockopen()</a> - Open Internet or Unix domain socket connection</span></li>
    <li class="member"><span class="function"><a href="function.popen.html" class="function" rel="rdfs-seeAlso">popen()</a> - Opens process file pointer</span></li>
    <li class="member"><span class="function"><a href="function.file-get-contents.html" class="function" rel="rdfs-seeAlso">file_get_contents()</a> - Reads entire file into a string</span></li>
    <li class="member"><span class="function"><b>include()</b></span></li>
    <li class="member"><span class="function"><a href="function.stream-context-create.html" class="function" rel="rdfs-seeAlso">stream_context_create()</a> - Create a streams context</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="105772""></a>
  <div class="note">
   <strong class="user">twichi at web dot de</strong>
   <a href="#105772" class="date">13-Sep-2011 12:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
read from CSV data (file) into an array with named keys<br />
<br />
... with or without 1st row = header (keys) <br />
(see 4th parameter of function call as&nbsp; true / false) <br />
<br />
<span class="default">&lt;?php <br />
</span><span class="comment">// --------------------------------------------------------------<br />
<br />
</span><span class="keyword">function </span><span class="default">csv_in_array</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="default">$delm</span><span class="keyword">=</span><span class="string">";"</span><span class="keyword">,</span><span class="default">$encl</span><span class="keyword">=</span><span class="string">"\""</span><span class="keyword">,</span><span class="default">$head</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) { <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$csvxrow </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// ---- csv rows to array ----<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$csvxrow</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">chop</span><span class="keyword">(</span><span class="default">$csvxrow</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$csvxrow</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$encl</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$csvxrow</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keydata </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$delm</span><span class="keyword">,</span><span class="default">$csvxrow</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keynumb </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$keydata</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$head </span><span class="keyword">=== </span><span class="default">true</span><span class="keyword">) { <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$anzdata </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$csvxrow</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$z</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$x</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$x</span><span class="keyword">&lt;</span><span class="default">$anzdata</span><span class="keyword">; </span><span class="default">$x</span><span class="keyword">++) { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$csvxrow</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">] = </span><span class="default">chop</span><span class="keyword">(</span><span class="default">$csvxrow</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]); <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$csvxrow</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">] = </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$encl</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$csvxrow</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]); <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$csv_data</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">] = </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$delm</span><span class="keyword">,</span><span class="default">$csvxrow</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]); <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$keydata </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$z</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$csv_data</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$z</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$csvxrow </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$item </span><span class="keyword">= </span><span class="default">chop</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$item </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$encl</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$item</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$csv_data </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$delm</span><span class="keyword">,</span><span class="default">$item</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$y</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$y</span><span class="keyword">&lt;</span><span class="default">$keynumb</span><span class="keyword">; </span><span class="default">$y</span><span class="keyword">++) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$y</span><span class="keyword">] = </span><span class="default">$csv_data</span><span class="keyword">[</span><span class="default">$y</span><span class="keyword">]; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
return </span><span class="default">$out</span><span class="keyword">; <br />
}<br />
<br />
</span><span class="comment">// --------------------------------------------------------------<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
fuction call with 4 parameters: <br />
<br />
(1) = the file with CSV data (url / string)<br />
(2) = colum delimiter (e.g: ; or | or , ...)<br />
(3) = values enclosed by (e.g: ' or " or ^ or ...)<br />
(4) = with or without 1st row = head (true/false) <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// ----- call ------ <br />
</span><span class="default">$csvdata </span><span class="keyword">= </span><span class="default">csv_in_array</span><span class="keyword">( </span><span class="default">$yourcsvfile</span><span class="keyword">, </span><span class="string">";"</span><span class="keyword">, </span><span class="string">"\""</span><span class="keyword">, </span><span class="default">true </span><span class="keyword">); <br />
</span><span class="comment">// ----------------- <br />
<br />
// ----- view ------ <br />
</span><span class="keyword">echo </span><span class="string">"&lt;pre&gt;\r\n"</span><span class="keyword">; <br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$csvdata</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;/pre&gt;\r\n"</span><span class="keyword">; <br />
</span><span class="comment">// -----------------<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
PS: also see: <a href="http://php.net/manual/de/function.fgetcsv.php to read CSV data into an array" rel="nofollow" target="_blank">http://php.net/manual/de/function.fgetcsv.php to read CSV data into an array</a><br />
... and other file-handling methods <br />
<br />
^</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96066""></a>
  <div class="note">
   <strong class="user">marios88 at gmail dot com</strong>
   <a href="#96066" class="date">06-Feb-2010 02:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Quick and easy way to reverse read a file without array_reverse<br />
<br />
<span class="default">&lt;?php<br />
$myfile </span><span class="keyword">= </span><span class="string">'test.txt'</span><span class="keyword">;<br />
</span><span class="default">$lines </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="default">$myfile</span><span class="keyword">);&nbsp; &nbsp; <br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$lines</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">--){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$lines</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94067""></a>
  <div class="note">
   <strong class="user">d basin</strong>
   <a href="#94067" class="date">14-Oct-2009 03:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this may be obvious, but it took me a while to figure out what I was doing wrong. So I wanted to share. I have a file on my "c:\" drive. How do I file() it? <br />
<br />
Don't forget the backslash is special and you have to "escape" the backslash i.e. "\\":<br />
<br />
<span class="default">&lt;?php<br />
<br />
$lines </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="string">"C:\\Documents and Settings\\myfile.txt"</span><span class="keyword">);<br />
<br />
foreach(</span><span class="default">$lines </span><span class="keyword">as </span><span class="default">$line</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; echo(</span><span class="default">$line</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span> <br />
<br />
hope this helps...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82681""></a>
  <div class="note">
   <strong class="user">PenguinMan98 at usa dot net</strong>
   <a href="#82681" class="date">21-Apr-2008 03:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
on file() and flock()<br />
<br />
My supervisor came up with a brilliant plan to workaround the inability of the file() to work on a flock()'ed file.<br />
<br />
We created a dummy file called lockfile.txt.&nbsp; We would flock() lockfile.txt.&nbsp; Once we had a lock on it, we used file() on the file we wanted to read, then altered the file and called fclose on both files.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82548""></a>
  <div class="note">
   <strong class="user">jon+spamcheck at phpsitesolutions dot com</strong>
   <a href="#82548" class="date">16-Apr-2008 01:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A user suggested using rtrim always, due to the line ending conflict with files that have an EOL that differs from the server EOL.<br />
<br />
Using rtrim with it's default character replacement is a bad solution though, as it removes all whitespace in addition to the '\r' and '\n' characters.<br />
<br />
A good solution using rtrim follows:<br />
<br />
<span class="default">&lt;?php<br />
$line </span><span class="keyword">= </span><span class="default">rtrim</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, </span><span class="string">"\r\n"</span><span class="keyword">) . </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
This removes only EOL characters, and replaces with the server's EOL character, thus making preg_* work fine when matching the EOL ($)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81164""></a>
  <div class="note">
   <strong class="user">vbchris at gmail dot com</strong>
   <a href="#81164" class="date">16-Feb-2008 01:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're getting "failed to open stream: Permission denied" when trying to use either file() or fopen() to access files on another server. Check your host doesn't have any firewall restrictions in-place which prevent outbound connections. This is the case with my host Aplus.net</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76367""></a>
  <div class="note">
   <strong class="user">Reversed: moc dot liamg at senroc dot werdna</strong>
   <a href="#76367" class="date">12-Jul-2007 02:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This note applies to PHP 5.1.6 under Windows (although may apply to other versions).<br />
<br />
It appears that the 'FILE_IGNORE_NEW_LINES' flag doesn't remove newlines properly when reading Windows-style text files, i.e. files whose lines end in '\r\n'.<br />
<br />
Solution: Always use 'rtrim()' in preference to 'FILE_IGNORE_NEW_LINES'.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71419""></a>
  <div class="note">
   <strong class="user">info at carstanje dot com</strong>
   <a href="#71419" class="date">28-Nov-2006 12:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using file() for reading large text files &gt; 10 Mb gives problems, therefore you should use this instead. It is much slower but it works fine. $lines will return an array with all the lines.<br />
<br />
<span class="default">&lt;?php<br />
$handle </span><span class="keyword">= @</span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'yourfile...'</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br />
if (</span><span class="default">$handle</span><span class="keyword">) {<br />
&nbsp;&nbsp; while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$lines</span><span class="keyword">[] = </span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">4096</span><span class="keyword">);<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68033""></a>
  <div class="note">
   <strong class="user">richardtcunningham at gmail dot com</strong>
   <a href="#68033" class="date">11-Jul-2006 02:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
justin at visunet dot ie's note of 20-Mar-2003 states<br />
"Note: Now that file() is binary safe it is 'much' slower than it used to be. If you are planning to read large files it may be worth your while using fgets() instead of file()."<br />
<br />
I tested fgets(), file_get_contents(), and file() on PHP 4.3.2 and PHP 5 and timed each to be under a second with over 200,000 lines. I do not know if he was testing extremely long lines or what, but I could not duplicate the difference that he mentioned.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61349""></a>
  <div class="note">
   <strong class="user">jonathan dot gotti at free dot fr</strong>
   <a href="#61349" class="date">01-Feb-2006 02:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
you can use <br />
$file = array_map('rtrim',file('myfile.txt'));<br />
to remove annoying ending lines of the resulting array.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60874""></a>
  <div class="note">
   <strong class="user">Nuts</strong>
   <a href="#60874" class="date">18-Jan-2006 03:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
WARNING ON WINDOWS:<br />
file() function will add "\r\n" in to the end of the row, even if you use only "\n" char to make rows in the file!<br />
<br />
On UNIX systems there is no such problem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35739""></a>
  <div class="note">
   <strong class="user">dir @ badblue com</strong>
   <a href="#35739" class="date">12-Sep-2003 02:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Jeff's array2file function is a good start; here are a couple of improvements (no possibility of handle leak when fwrite fails, additional capability of both string2file and array2file; presumably faster performance through use of implode).<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">String2File</span><span class="keyword">(</span><span class="default">$sIn</span><span class="keyword">, </span><span class="default">$sFileOut</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$rc </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp; do {<br />
&nbsp;&nbsp;&nbsp; if (!(</span><span class="default">$f </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$sFileOut</span><span class="keyword">, </span><span class="string">"wa+"</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$rc </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; break;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">, </span><span class="default">$sIn</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$rc </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">; break;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rc </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp; } while (</span><span class="default">0</span><span class="keyword">);<br />
&nbsp; if (</span><span class="default">$f</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; return (</span><span class="default">$rc</span><span class="keyword">);<br />
}<br />
<br />
function </span><span class="default">Array2File</span><span class="keyword">(</span><span class="default">$aIn</span><span class="keyword">, </span><span class="default">$sFileOut</span><span class="keyword">) {<br />
&nbsp; return (</span><span class="default">String2File</span><span class="keyword">(</span><span class="default">implode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$aIn</span><span class="keyword">), </span><span class="default">$sFileOut</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
If you're generating your string text using a GET or POST from a TEXTAREA (e.g., a mini-web-text-editor), remember that strip_slashes and str_replace of "/r/n" to "/n" may be necessary as well using these functions.<br />
<br />
HTH --dir @ badblue com</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="34270""></a>
  <div class="note">
   <strong class="user">John</strong>
   <a href="#34270" class="date">20-Jul-2003 04:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
after many months of confusion and frustration, i have finally figured out something that i should have noticed the first time around.<br />
<br />
you can't file("test.txt") when that same file has been flocked. i guess i didn't have a full understanding of what i was doing when i used flock(). all i had to do was move the flock() around, and all was well.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30503""></a>
  <div class="note">
   <strong class="user">justin at visunet dot ie</strong>
   <a href="#30503" class="date">20-Mar-2003 09:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note: Now that file() is binary safe it is 'much' slower than it used to be. If you are planning to read large files it may be worth your while using fgets() instead of file() For example:<br />
<br />
<span class="default">&lt;?php<br />
$fd </span><span class="keyword">= </span><span class="default">fopen </span><span class="keyword">(</span><span class="string">"log_file.txt"</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br />
while (!</span><span class="default">feof </span><span class="keyword">(</span><span class="default">$fd</span><span class="keyword">)) <br />
{<br />
&nbsp;&nbsp; </span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$fd</span><span class="keyword">, </span><span class="default">4096</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$lines</span><span class="keyword">[] = </span><span class="default">$buffer</span><span class="keyword">;<br />
}<br />
</span><span class="default">fclose </span><span class="keyword">(</span><span class="default">$fd</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
The resulting array is $lines.<br />
<br />
I did a test on a 200,000 line file. It took seconds with fgets()&nbsp; compared to minutes with file().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19955""></a>
  <div class="note">
   <strong class="user">andrea at brancatelli dot it</strong>
   <a href="#19955" class="date">16-Mar-2002 11:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
file() has a strange behaviour when reading file with both \n and \r as line delimitator (DOS files), since it will return an array with every single line but with just a \n in the end. It seems like \r just disappears.<br />
<br />
This is happening with PHP 4.0.4 for OS/2. Don't know about the Windows version.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18909""></a>
  <div class="note">
   <strong class="user">php@don't_spam_me</strong>
   <a href="#18909" class="date">09-Feb-2002 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It appears that the file() function causes file access problems for perl cgi scripts accessing the same files.&nbsp; I am using Perl v5.6.0 in linux with PHP/4.0.4pl1.&nbsp; After running a php app using the file() function, any perl cgi trying to access the same file randomly dies returning an internal server error: premature end of script headers.<br />
<br />
The simple fix is to use fopen(), fgets() and fclose() instead of file().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.file-put-contents.html">file_put_contents</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.fileatime.html">fileatime</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
