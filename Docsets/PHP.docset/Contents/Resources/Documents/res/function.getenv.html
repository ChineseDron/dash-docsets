<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Gets the value of an environment variable</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.get-required-files.html">get_required_files</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.getlastmod.html">getlastmod</a></div>
 <div class="up"><a href="ref.info.html">PHP Options/Info Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.getenv" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">getenv</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">getenv</span> &mdash; <span class="dc-title">Gets the value of an environment variable</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.getenv-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><b>getenv</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$varname</tt></span>
   )</div>

  <p class="para rdfs-comment">
   Gets the value of an environment variable.
  </p>
  <p class="para">
   You can see a list of all the environmental variables by using
   <span class="function"><a href="function.phpinfo.html" class="function">phpinfo()</a></span>. Many of these variables are listed within
   <a href="http://www.faqs.org/rfcs/rfc3875" class="link external" title="Link : http://www.faqs.org/rfcs/rfc3875">&raquo;&nbsp;RFC 3875</a>, specifically
   section 4.1, &quot;Request Meta-Variables&quot;.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.getenv-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">varname</tt></i></span>
     <dd>

      <p class="para">
       The variable name.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.getenv-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the value of the environment variable
   <i><tt class="parameter">varname</tt></i>, or <b><tt>FALSE</tt></b> if the environment
   variable <i><tt class="parameter">varname</tt></i> does not exist.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.getenv-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-461">
    <p><b>Example #1 <span class="function"><b>getenv()</b></span> Example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Example&nbsp;use&nbsp;of&nbsp;getenv()<br /></span><span style="color: #0000BB">$ip&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">getenv</span><span style="color: #007700">(</span><span style="color: #DD0000">'REMOTE_ADDR'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Or&nbsp;simply&nbsp;use&nbsp;a&nbsp;Superglobal&nbsp;($_SERVER&nbsp;or&nbsp;$_ENV)<br /></span><span style="color: #0000BB">$ip&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'REMOTE_ADDR'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.getenv-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.putenv.html" class="function" rel="rdfs-seeAlso">putenv()</a> - Sets the value of an environment variable</span></li>
    <li class="member"><span class="function"><a href="function.apache-getenv.html" class="function" rel="rdfs-seeAlso">apache_getenv()</a> - Get an Apache subprocess_env variable</span></li>
    <li class="member"><a href="language.variables.superglobals.html" class="link">Superglobals</a></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="99134""></a>
  <div class="note">
   <strong class="user">eng.mrkto.com</strong>
   <a href="#99134" class="date">29-Jul-2010 11:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function is useful (compared to $_SERVER, $_ENV) because it searches $varname key in those array case-insensitive manner.<br />
For example on Windows $_SERVER['Path'] is like you see Capitalized, not 'PATH' as you expected.<br />
So just: <span class="default">&lt;?php getenv</span><span class="keyword">(</span><span class="string">'path'</span><span class="keyword">) </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97763""></a>
  <div class="note">
   <strong class="user">chuck dot reeves at gmail dot com</strong>
   <a href="#97763" class="date">06-May-2010 11:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When writing CLI applications, not that any environment variables that are set in your web server config will not be passed through.&nbsp; PHP will pass through system environment variables that are prefixed based off the safe_mode_allowed_env_vars directive in your php.ini</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92412""></a>
  <div class="note">
   <strong class="user">f dot hartmann2 at gmx dot net</strong>
   <a href="#92412" class="date">23-Jul-2009 05:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A function returning the remote adress of the visiting browser could look like this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getIPfromXForwarded</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ipString</span><span class="keyword">=@</span><span class="default">getenv</span><span class="keyword">(</span><span class="string">"HTTP_X_FORWARDED_FOR"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$addr </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">,</span><span class="default">$ipString</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$addr</span><span class="keyword">[</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$addr</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">];<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Note that some adresses are followed by a whitespace and ip2long(getIPfromXForwarded()) would not return the expected result.<br />
<br />
Make use of trim() in your scripts, either in the function itself, or the surrounding space of the caller.<br />
<br />
Greetings</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89045""></a>
  <div class="note">
   <strong class="user">estarapapax at gmail dot com</strong>
   <a href="#89045" class="date">18-Feb-2009 09:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a sample function for checking if your visitor comes from this certain country. This is especially useful for amateur webmasters who don't want to use sql databases.<br />
<br />
Sample use of function:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(</span><span class="default">check_coutry</span><span class="keyword">(</span><span class="string">'<a href="http://www.domain.com/files/philippines.csv" rel="nofollow" target="_blank">http://www.domain.com/files/philippines.csv</a>'</span><span class="keyword">) === </span><span class="default">true</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="string">'You are from the Philippines'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Basically, you'll need CSV (or TXT) which lists the IP ranges of a certain country. Example (excerpt of the philippines.csv only):<br />
<br />
58.69.0.0, 58.69.255.255<br />
58.71.0.0, 58.71.127.255<br />
61.9.0.0, 61.9.127.255<br />
61.14.28.0, 61.14.28.63<br />
61.14.41.136, 61.14.41.143<br />
and so on until the end<br />
<br />
You may obtain these CSV files in a number of websites out there. Be sure to update these CSV files regularly as these IP ranges change from time to time.<br />
<br />
Here is the function:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">check_country</span><span class="keyword">(</span><span class="default">$url_csv</span><span class="keyword">){<br />
</span><span class="default">$curl_handle </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br />
</span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$curl_handle</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$url_csv</span><span class="keyword">);<br />
</span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$curl_handle</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">$str_fromfile </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$curl_handle</span><span class="keyword">);<br />
</span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$curl_handle</span><span class="keyword">);<br />
</span><span class="default">$range </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$str_fromfile</span><span class="keyword">);<br />
<br />
</span><span class="default">$ip_addr </span><span class="keyword">= </span><span class="default">getenv</span><span class="keyword">(</span><span class="default">REMOTE_ADDR</span><span class="keyword">); </span><span class="comment">//gets the IP of the visitor<br />
</span><span class="default">$ip_byte </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$ip_addr</span><span class="keyword">);<br />
</span><span class="default">$ip_number </span><span class="keyword">= (</span><span class="default">16777216 </span><span class="keyword">* (int) </span><span class="default">$ip_byte</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) + (</span><span class="default">65536 </span><span class="keyword">* (int) </span><span class="default">$ip_byte</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) + (</span><span class="default">256 </span><span class="keyword">* (int) </span><span class="default">$ip_byte</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]) + ((int) </span><span class="default">$ip_byte</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]);<br />
<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$range</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] != </span><span class="default">NULL </span><span class="keyword">&amp;&amp; </span><span class="default">$is_positive </span><span class="keyword">== </span><span class="default">NULL</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){ </span><span class="comment">// the condition $line[$i] != NULL means that you should not put blank lines before the end of your CSV. The values should start at line 1.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$range</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">rtrim</span><span class="keyword">(</span><span class="default">ltrim</span><span class="keyword">(</span><span class="default">$range</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])); </span><span class="comment">//you may remove this if you are sure the CSV doesnt contain whitespaces<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ends_addr </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="default">$range</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]); </span><span class="comment">//for CSV (comma-separated values), comma is the separator. You may change this if your TXT uses different separator.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ends_addr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">rtrim</span><span class="keyword">(</span><span class="default">$ends_addr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); </span><span class="comment">//again, you may remove this if your CSV is free from whitespaces<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ends_addr</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="default">ltrim</span><span class="keyword">(</span><span class="default">$ends_addr</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]); </span><span class="comment">//yet, again<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$start_ip_byte </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$ends_addr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$end_ip_byte </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$ends_addr</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$start_ip_number </span><span class="keyword">= (</span><span class="default">16777216 </span><span class="keyword">* (int) </span><span class="default">$start_ip_byte</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) + (</span><span class="default">65536 </span><span class="keyword">* (int) </span><span class="default">$start_ip_byte</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) + (</span><span class="default">256 </span><span class="keyword">* (int) </span><span class="default">$start_ip_byte</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]) + ((int) </span><span class="default">$start_ip_byte</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$end_ip_number </span><span class="keyword">= (</span><span class="default">16777216 </span><span class="keyword">* (int) </span><span class="default">$end_ip_byte</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) + (</span><span class="default">65536 </span><span class="keyword">* (int) </span><span class="default">$end_ip_byte</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) + (</span><span class="default">256 </span><span class="keyword">* (int) </span><span class="default">$end_ip_byte</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]) + ((int) </span><span class="default">$end_ip_byte</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$ip_number </span><span class="keyword">&gt;= </span><span class="default">$start_ip_number </span><span class="keyword">&amp;&amp; </span><span class="default">$ip_number </span><span class="keyword">&lt;= </span><span class="default">$end_ip_number</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$is_positive </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
}<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$is_positive </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81771""></a>
  <div class="note">
   <strong class="user">sam at sambarrow dot com</strong>
   <a href="#81771" class="date">12-Mar-2008 05:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
SERVER_NAME is the name defined in the apache configuration.<br />
HTTP_HOST is the host header sent by the client when using the more recent versions of the http protocol.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47247""></a>
  <div class="note">
   <strong class="user">renko at &lt;remove&gt;virtual-life dot net</strong>
   <a href="#47247" class="date">08-Nov-2004 06:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The function 'getenv' does not work if your Server API is ASAPI (IIS).<br />
<br />
So, try to don't use getenv('REMOTE_ADDR'), but $_SERVER["REMOTE_ADDR"].</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39603""></a>
  <div class="note">
   <strong class="user">kyong</strong>
   <a href="#39603" class="date">04-Feb-2004 01:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As you know, getenv('DOCUMENT_ROOT') is useful.<br />
However, under CLI environment(I tend to do quick check<br />
if it works or not), it doesn't work without modified php.ini<br />
file. So I add "export DOCUMENT_ROOT=~" in my .bash_profile.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25024""></a>
  <div class="note">
   <strong class="user">daman at SPAM_BlockERmralaska dot com</strong>
   <a href="#25024" class="date">08-Sep-2002 06:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful using HTTP_X_FORWARDED_FOR in conditional statements collecting the IP address. Sometimes the user's LAN address will get forwarded, which of course is pretty worthless by itself.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23602""></a>
  <div class="note">
   <strong class="user">alex at acid-edge dot net</strong>
   <a href="#23602" class="date">23-Jul-2002 10:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that some caches seem to send the client-ip header *backwards*. be careful :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="7799""></a>
  <div class="note">
   <strong class="user">john-php at pc dot xs4all dot nl</strong>
   <a href="#7799" class="date">15-Aug-2000 06:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the X-Forwarded for header might contain multiple addresses, comma separated, if the request was forwarded through multiple proxies.<br />
<br />
Finally, note that any user can add an X-Forwarded-For header themselves. The header is only good for traceback information, never for authentication. If you use it for traceback, just log the entire X-Forwarded-For header, along with the REMOTE_ADDR.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.get-required-files.html">get_required_files</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.getlastmod.html">getlastmod</a></div>
 <div class="up"><a href="ref.info.html">PHP Options/Info Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
