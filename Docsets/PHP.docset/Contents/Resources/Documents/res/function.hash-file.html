<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Generate a hash value using the contents of a given file</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.hash-copy.html">hash_copy</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.hash-final.html">hash_final</a></div>
 <div class="up"><a href="ref.hash.html">Hash Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.hash-file" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">hash_file</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.1.2, PECL hash &gt;= 1.1)</p><p class="refpurpose"><span class="refname">hash_file</span> &mdash; <span class="dc-title">Generate a hash value using the contents of a given file</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.hash-file-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><b>hash_file</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$algo</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$filename</tt></span>
   [, <span class="methodparam"><span class="type">bool</span> <tt class="parameter">$raw_output</tt><span class="initializer"> = false</span></span>
  ] )</div>


 </div>

 <div class="refsect1 parameters" id="refsect1-function.hash-file-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">algo</tt></i></span>
     <dd>

      <p class="para">
       Name of selected hashing algorithm (i.e. &quot;md5&quot;, &quot;sha256&quot;, &quot;haval160,4&quot;, etc..)
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">filename</tt></i></span>
     <dd>

      <p class="para">
       URL describing location of file to be hashed; Supports fopen wrappers.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">raw_output</tt></i></span>
     <dd>

      <p class="para">
       When set to <b><tt>TRUE</tt></b>, outputs raw binary data.
       <b><tt>FALSE</tt></b> outputs lowercase hexits.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.hash-file-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns a string containing the calculated message digest as lowercase hexits
   unless <i><tt class="parameter">raw_output</tt></i> is set to true in which case the raw
   binary representation of the message digest is returned.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.hash-file-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-873">
    <p><b>Example #1 Using <span class="function"><b>hash_file()</b></span></b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;Create&nbsp;a&nbsp;file&nbsp;to&nbsp;calculate&nbsp;hash&nbsp;of&nbsp;*/<br /></span><span style="color: #0000BB">file_put_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'example.txt'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'The&nbsp;quick&nbsp;brown&nbsp;fox&nbsp;jumped&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.'</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #0000BB">hash_file</span><span style="color: #007700">(</span><span style="color: #DD0000">'md5'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'example.txt'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
5c6ffbdd40d9556b73a21e63c3e0e904
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.hash-file-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.hash.html" class="function" rel="rdfs-seeAlso">hash()</a> - Generate a hash value (message digest)</span></li>
    <li class="member"><span class="function"><a href="function.hash-hmac-file.html" class="function" rel="rdfs-seeAlso">hash_hmac_file()</a> - Generate a keyed hash value using the HMAC method and the contents of a given file</span></li>
    <li class="member"><span class="function"><a href="function.hash-update-file.html" class="function" rel="rdfs-seeAlso">hash_update_file()</a> - Pump data into an active hashing context from a file</span></li>
    <li class="member"><span class="function"><a href="function.md5-file.html" class="function" rel="rdfs-seeAlso">md5_file()</a> - Calculates the md5 hash of a given file</span></li>
    <li class="member"><span class="function"><a href="function.sha1-file.html" class="function" rel="rdfs-seeAlso">sha1_file()</a> - Calculate the sha1 hash of a file</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="104836""></a>
  <div class="note">
   <strong class="user">apm at domain itsmee.co.uk</strong>
   <a href="#104836" class="date">10-Jul-2011 04:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have verified that the output of the "crc32" is the ITU I.363.5 algorithm (a.k.a. AAL5 CRC - popularised by BZIP2 but also used in ATM transmissions - the algorithm is the same as that in POSIX 1003.2-1992 in Cksum but that stuffs the size into the CRC at the end for extra measure).&nbsp; However, the output is expressed in reverse order to many CRC programs.&nbsp; Using the "standard" crctest.txt (numbers 1 to 9 in sequence - google it, it's not hard to find), php will output 181989fc - many other (Intel little endian) programs would output this as fc891918, hence the confusion (that I have had, at least).<br />
<br />
The crc32b is the 32-bit Frame Check Sequence of ITU V.42 (used in Ethernet and popularised by PKZip).&nbsp; The output from this CRC is popularised in Intel little endian format and would produce cbf43926 on the same file.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103656""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#103656" class="date">26-Apr-2011 09:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please take note that hash-file will throw error on files &gt;=2GB.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100061""></a>
  <div class="note">
   <strong class="user">chernyshevsky at hotmail dot com</strong>
   <a href="#100061" class="date">22-Sep-2010 04:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to use hash_file() to get the CRC32 value of a file, use the following to unpack the hex string returned by the function to an integer (similar to crc32()):<br />
<br />
$hash = hash_file('crc32b', $filepath);<br />
$array = unpack('N', pack('H*', $hash));<br />
$crc32 = $array[1];</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99937""></a>
  <div class="note">
   <strong class="user">gabri dot ns at gmail dot com</strong>
   <a href="#99937" class="date">15-Sep-2010 08:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
i've browsing about crc32 recently<br />
from <a href="http://en.wikipedia.org/wiki/Cyclic_redundancy_check" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Cyclic_redundancy_check</a><br />
#Commonly_used_and_standardized_CRCs<br />
it is said that ethernet and png using the same polynomial, 0x04C11DB7<br />
<br />
so, it still unclear (for me) wich standard does 'crc32' uses<br />
IMO, 'crc32b' is the most common used in software<br />
PKzip us this, 7zip and SVF file use this too<br />
<br />
to check wether an implementation is using 'crc32b',<br />
try to hash string or file containing string:<br />
"123456789" (without quote of course :D )<br />
it should return CBF43926</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85672""></a>
  <div class="note">
   <strong class="user">Keisial at gmail dot com</strong>
   <a href="#85672" class="date">11-Sep-2008 11:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The 'octets reversed' you are seeing is the bug 45028 which has been fixed. <a href="http://bugs.php.net/bug.php?id=45028" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=45028</a><br />
<br />
The difference between crc32 and crc32b is explained on mhash man page. crc32 is the one used on ethernet, while crc32b is the one used on zip, png... They differ on the table used.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84653""></a>
  <div class="note">
   <strong class="user">allaryin at gmail dot com</strong>
   <a href="#84653" class="date">23-Jul-2008 03:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those who are wondering, there appears to be no fundamental difference between hash_file('md5')/hash_file('sha1') and md5_file()/sha1_file(). They produce identical output and have comparable performance.<br />
<br />
There is, however, a difference between hash_file('crc32') and something silly like crc32(file_get_contents()).<br />
<br />
crc32(file_get_contents())'s results are most similar to those of hash_file('crc32b'), just with the octets reversed:<br />
<br />
<span class="default">&lt;?php<br />
$fname </span><span class="keyword">= </span><span class="string">"something.png"</span><span class="keyword">;<br />
<br />
</span><span class="default">$hash </span><span class="keyword">= </span><span class="default">hash_file</span><span class="keyword">( </span><span class="string">'crc32'</span><span class="keyword">, </span><span class="default">$fname </span><span class="keyword">);<br />
echo </span><span class="string">"crc32&nbsp; = </span><span class="default">$hash</span><span class="string">\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">$hash </span><span class="keyword">= </span><span class="default">hash_file</span><span class="keyword">( </span><span class="string">'crc32b'</span><span class="keyword">, </span><span class="default">$fname </span><span class="keyword">);<br />
echo </span><span class="string">"crc32b = </span><span class="default">$hash</span><span class="string">\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">$hash </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%x"</span><span class="keyword">,</span><span class="default">crc32</span><span class="keyword">(</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$fname</span><span class="keyword">)));<br />
echo </span><span class="string">"manual = </span><span class="default">$hash</span><span class="string">\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
crc32&nbsp; = f41d7f4e<br />
crc32b = 7dafbba4<br />
manual = a4bbaf7d</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.hash-copy.html">hash_copy</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.hash-final.html">hash_final</a></div>
 <div class="up"><a href="ref.hash.html">Hash Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
