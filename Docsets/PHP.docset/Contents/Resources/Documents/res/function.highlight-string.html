<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Syntax highlighting of a string</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.highlight-file.html">highlight_file</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.ignore-user-abort.html">ignore_user_abort</a></div>
 <div class="up"><a href="ref.misc.html">Misc. Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.highlight-string" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">highlight_string</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">highlight_string</span> &mdash; <span class="dc-title">Syntax highlighting of a string</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.highlight-string-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><b>highlight_string</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$str</tt></span>
   [, <span class="methodparam"><span class="type">bool</span> <tt class="parameter">$return</tt><span class="initializer"> = false</span></span>
  ] )</div>

  <p class="simpara">
   Outputs or returns a syntax highlighted version of the given PHP code
   using the colors defined in the built-in syntax highlighter for PHP.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.highlight-string-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">str</tt></i></span>
     <dd>

      <p class="para">
       The PHP code to be highlighted. This should include the opening tag.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">return</tt></i></span>
     <dd>

      <p class="para">
       Set this parameter to <b><tt>TRUE</tt></b> to make this function return the
       highlighted code.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.highlight-string-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   If <i><tt class="parameter">return</tt></i> is set to <b><tt>TRUE</tt></b>, returns the highlighted
   code as a string instead of printing it out. Otherwise, it will return
   <b><tt>TRUE</tt></b> on success, <b><tt>FALSE</tt></b> on failure.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.highlight-string-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle">
       <td align="left">4.2.0</td>
       <td align="left">
        The <i><tt class="parameter">return</tt></i> parameter was added.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.highlight-string-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-3427">
    <p><b>Example #1 <span class="function"><b>highlight_string()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />highlight_string</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;?php&nbsp;phpinfo();&nbsp;?&gt;'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     The above example will output (in PHP 4):
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
&lt;code&gt;&lt;font color=&quot;#000000&quot;&gt;
&lt;font color=&quot;#0000BB&quot;&gt;&amp;lt;?php phpinfo&lt;/font&gt;&lt;font color=&quot;#007700&quot;&gt;(); &lt;/font&gt;&lt;font color=&quot;#0000BB&quot;&gt;?&amp;gt;&lt;/font&gt;
&lt;/font&gt;
&lt;/code&gt;
</pre></div>
    </div>
    <div class="example-contents"><p>
     The above example will output (in PHP 5):
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
&lt;code&gt;&lt;span style=&quot;color: #000000&quot;&gt;
&lt;span style=&quot;color: #0000BB&quot;&gt;&amp;lt;?php phpinfo&lt;/span&gt;&lt;span style=&quot;color: #007700&quot;&gt;(); &lt;/span&gt;&lt;span style=&quot;color: #0000BB&quot;&gt;?&amp;gt;&lt;/span&gt;
&lt;/span&gt;
&lt;/code&gt;
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.highlight-string-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><b class="note">Note</b>: <p class="para">When the <i><tt class="parameter">return</tt></i> parameter
is used, this function uses internal output buffering so it can not be used inside an
<span class="function"><a href="function.ob-start.html" class="function">ob_start()</a></span> callback function.</p></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.highlight-string-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.highlight-file.html" class="function" rel="rdfs-seeAlso">highlight_file()</a> - Syntax highlighting of a file</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="90378""></a>
  <div class="note">
   <strong class="user">Mean^_^</strong>
   <a href="#90378" class="date">18-Apr-2009 09:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[EDIT BY danbrown AT php DOT net: The following note contains a user-supplied version of a syntax highlighter.]<br />
<br />
&lt;style type="text/css"&gt;<br />
.linenum{<br />
&nbsp;&nbsp;&nbsp; text-align:right;<br />
&nbsp;&nbsp;&nbsp; background:#FDECE1;<br />
&nbsp;&nbsp;&nbsp; border:1px solid #cc6666;<br />
&nbsp;&nbsp;&nbsp; padding:0px 1px 0px 1px;<br />
&nbsp;&nbsp;&nbsp; font-family:Courier New, Courier;<br />
&nbsp;&nbsp;&nbsp; float:left;<br />
&nbsp;&nbsp;&nbsp; width:17px;<br />
&nbsp;&nbsp;&nbsp; margin:3px 0px 30px 0px;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
code&nbsp; &nbsp; {/* safari/konq hack */<br />
&nbsp;&nbsp;&nbsp; font-family:Courier New, Courier;<br />
}<br />
<br />
.linetext{<br />
&nbsp;&nbsp;&nbsp; width:700px;<br />
&nbsp;&nbsp;&nbsp; text-align:left;<br />
&nbsp;&nbsp;&nbsp; background:white;<br />
&nbsp;&nbsp;&nbsp; border:1px solid #cc6666;<br />
&nbsp;&nbsp;&nbsp; border-left:0px;<br />
&nbsp;&nbsp;&nbsp; padding:0px 1px 0px 8px;<br />
&nbsp;&nbsp;&nbsp; font-family:Courier New, Courier;<br />
&nbsp;&nbsp;&nbsp; float:left;<br />
&nbsp;&nbsp;&nbsp; margin:3px 0px 30px 0px;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
br.clear&nbsp; &nbsp; {<br />
&nbsp;&nbsp;&nbsp; clear:both;<br />
}<br />
<br />
&lt;/style&gt;<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;</span><span class="keyword">function </span><span class="default">printCode</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">, </span><span class="default">$lines_number </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)&nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">)) </span><span class="default">$codeE </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count_lines </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$codeE</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r1 </span><span class="keyword">= </span><span class="string">"Code:&lt;br /&gt;"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$lines_number</span><span class="keyword">){&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r1 </span><span class="keyword">.= </span><span class="string">"&lt;div class=\"linenum\"&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$codeE </span><span class="keyword">as </span><span class="default">$line </span><span class="keyword">=&gt;</span><span class="default">$c</span><span class="keyword">) {&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$count_lines</span><span class="keyword">==</span><span class="string">'1'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r1 </span><span class="keyword">.= </span><span class="string">"1&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r1 </span><span class="keyword">.= (</span><span class="default">$line </span><span class="keyword">== (</span><span class="default">$count_lines </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">)) ? </span><span class="string">"" </span><span class="keyword">:&nbsp; (</span><span class="default">$line</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">).</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r1 </span><span class="keyword">.= </span><span class="string">"&lt;/div&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r2 </span><span class="keyword">= </span><span class="string">"&lt;div class=\"linetext\"&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r2 </span><span class="keyword">.= </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r2 </span><span class="keyword">.= </span><span class="string">"&lt;/div&gt;"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">.= </span><span class="default">$r1</span><span class="keyword">.</span><span class="default">$r2</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;div class=\"code\"&gt;"</span><span class="keyword">.</span><span class="default">$r</span><span class="keyword">.</span><span class="string">"&lt;/div&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">printCode</span><span class="keyword">(</span><span class="string">'&lt;?php echo "PHP Code" ?&gt;&nbsp; &nbsp; '</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
by mean<br />
Share idea.<br />
good luck ^_^</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84661""></a>
  <div class="note">
   <strong class="user">Dmitry S</strong>
   <a href="#84661" class="date">24-Jul-2008 01:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Alternative XML syntax highlighting.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">xml_highlight</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)<br />
{&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"#&amp;lt;([/]*?)(.*)([\s]*?)&amp;gt;#sU"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"&lt;font color=\"#0000FF\"&gt;&amp;lt;\\1\\2\\3&amp;gt;&lt;/font&gt;"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"#&amp;lt;([\?])(.*)([\?])&amp;gt;#sU"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"&lt;font color=\"#800000\"&gt;&amp;lt;\\1\\2\\3&amp;gt;&lt;/font&gt;"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"#&amp;lt;([^\s\?/=])(.*)([\[\s/]|&amp;gt;)#iU"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"&amp;lt;&lt;font color=\"#808000\"&gt;\\1\\2&lt;/font&gt;\\3"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"#&amp;lt;([/])([^\s]*?)([\s\]]*?)&amp;gt;#iU"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"&amp;lt;\\1&lt;font color=\"#808000\"&gt;\\2&lt;/font&gt;\\3&amp;gt;"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"#([^\s]*?)\=(&amp;quot;|')(.*)(&amp;quot;|')#isU"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"&lt;font color=\"#800080\"&gt;\\1&lt;/font&gt;=&lt;font color=\"#FF00FF\"&gt;\\2\\3\\4&lt;/font&gt;"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"#&amp;lt;(.*)(\[)(.*)(\])&amp;gt;#isU"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"&amp;lt;\\1&lt;font color=\"#800080\"&gt;\\2\\3\\4&lt;/font&gt;&amp;gt;"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">nl2br</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83824""></a>
  <div class="note">
   <strong class="user">fsx dot nr01 at gmail dot com</strong>
   <a href="#83824" class="date">13-Jun-2008 09:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is an improved version of the code highlighter w/ linenumbers from 'vanessaschissato at gmail dot com' - <a href="http://nl.php.net/manual/en/function.highlight-string.php#70456" rel="nofollow" target="_blank">http://nl.php.net/manual/en/function.highlight-string.php#70456</a><br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">printCode</span><span class="keyword">(</span><span class="default">$source_code</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$source_code</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$source_code </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">"\r\n"</span><span class="keyword">, </span><span class="string">"\r"</span><span class="keyword">), </span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$source_code</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$line_count </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$source_code </span><span class="keyword">as </span><span class="default">$code_line</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$formatted_code </span><span class="keyword">.= </span><span class="string">'&lt;tr&gt;&lt;td&gt;'</span><span class="keyword">.</span><span class="default">$line_count</span><span class="keyword">.</span><span class="string">'&lt;/td&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$line_count</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">'&lt;\?(php)?[^[:graph:]]'</span><span class="keyword">, </span><span class="default">$code_line</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$formatted_code </span><span class="keyword">.= </span><span class="string">'&lt;td&gt;'</span><span class="keyword">. </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'&lt;code&gt;'</span><span class="keyword">, </span><span class="string">'&lt;/code&gt;'</span><span class="keyword">), </span><span class="string">''</span><span class="keyword">, </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$code_line</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">)).</span><span class="string">'&lt;/td&gt;&lt;/tr&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$formatted_code </span><span class="keyword">.= </span><span class="string">'&lt;td&gt;'</span><span class="keyword">.</span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">'(&amp;lt;\?php&amp;nbsp;)+'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'&lt;code&gt;'</span><span class="keyword">, </span><span class="string">'&lt;/code&gt;'</span><span class="keyword">), </span><span class="string">''</span><span class="keyword">, </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="string">'&lt;?php '</span><span class="keyword">.</span><span class="default">$code_line</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">))).</span><span class="string">'&lt;/td&gt;&lt;/tr&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'&lt;table style="font: 1em Consolas, \'andale mono\', \'monotype.com\', \'lucida console\', monospace;"&gt;'</span><span class="keyword">.</span><span class="default">$formatted_code</span><span class="keyword">.</span><span class="string">'&lt;/table&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83460""></a>
  <div class="note">
   <strong class="user">Dobromir Velev</strong>
   <a href="#83460" class="date">27-May-2008 04:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is an improved version of Dimitry's xml_highlight function.<br />
I fixed a bug which replaced the first character of the tags name,<br />
and added a line to replace the tabs and spaces with<br />
non-breaking space symbols to keep the identation.<br />
<br />
&lt;?<br />
function xml_highlight($s){<br />
&nbsp; $s = preg_replace("|&lt;([^/?])(.*)\s(.*)&gt;|isU", "[1]&lt;[2]\\1\\2[/2] [5]\\3[/5]&gt;[/1]", $s);<br />
&nbsp; $s = preg_replace("|&lt;/(.*)&gt;|isU", "[1]&lt;/[2]\\1[/2]&gt;[/1]", $s);<br />
&nbsp; $s = preg_replace("|&lt;\?(.*)\?&gt;|isU","[3]&lt;?\\1?&gt;[/3]", $s);<br />
&nbsp; $s = preg_replace("|\=\"(.*)\"|isU", "[6]=[/6][4]\"\\1\"[/4]",$s);<br />
&nbsp; $s = htmlspecialchars($s);<br />
&nbsp; $s = str_replace("\t","&amp;nbsp;&amp;nbsp;",$s);<br />
&nbsp; $s = str_replace(" ","&amp;nbsp;",$s);<br />
&nbsp; $replace = array(1=&gt;'0000FF', 2=&gt;'0000FF', 3=&gt;'800000', 4=&gt;'FF00FF', 5=&gt;'FF0000', 6=&gt;'0000FF');<br />
&nbsp; foreach($replace as $k=&gt;$v) {<br />
&nbsp;&nbsp;&nbsp; $s = preg_replace("|\[".$k."\](.*)\[/".$k."\]|isU", "&lt;font color=\"#".$v."\"&gt;\\1&lt;/font&gt;", $s);<br />
&nbsp; }<br />
<br />
&nbsp; return nl2br($s);<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83136""></a>
  <div class="note">
   <strong class="user">Dmitry S</strong>
   <a href="#83136" class="date">12-May-2008 06:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The simple XML syntax highlighting.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">xml_highlight</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|&lt;[^/?](.*)\s(.*)&gt;|isU"</span><span class="keyword">,</span><span class="string">"[1]&lt;[2]\\1[/2] [5]\\2[/5]&gt;[/1]"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|&lt;/(.*)&gt;|isU"</span><span class="keyword">,</span><span class="string">"[1]&lt;/[2]\\1[/2]&gt;[/1]"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|&lt;\?(.*)\?&gt;|isU"</span><span class="keyword">,</span><span class="string">"[3]&lt;?\\1?&gt;[/3]"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|\=\"(.*)\"|isU"</span><span class="keyword">,</span><span class="string">"[6]=[/6][4]\"\\1\"[/4]"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$replace </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="string">'0000FF'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">=&gt;</span><span class="string">'808000'</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">=&gt;</span><span class="string">'800000'</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">=&gt;</span><span class="string">'FF00FF'</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">=&gt;</span><span class="string">'FF0000'</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">=&gt;</span><span class="string">'0000FF'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; foreach(</span><span class="default">$replace </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"|\["</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">.</span><span class="string">"\](.*)\[/"</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">.</span><span class="string">"\]|isU"</span><span class="keyword">,</span><span class="string">"&lt;font color=\""</span><span class="keyword">.</span><span class="default">$v</span><span class="keyword">.</span><span class="string">"\"&gt;\\1&lt;/font&gt;"</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">nl2br</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81257""></a>
  <div class="note">
   <strong class="user">Daniel</strong>
   <a href="#81257" class="date">20-Feb-2008 02:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Well, Just a little something I wrote which highlights an HTML code...It'll be going through many changes in the next few days.... until then =) enjoy<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/*************************************\<br />
&nbsp;CODE PANE 1.0 - SILVERWINGS - D. Suissa<br />
\*************************************/<br />
<br />
</span><span class="keyword">class </span><span class="default">HTMLcolorizer</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$pointer </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="comment">//Cursor position.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">private </span><span class="default">$content </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">; </span><span class="comment">//content of document.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">private </span><span class="default">$colorized </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content </span><span class="keyword">= </span><span class="default">$content</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">colorComment</span><span class="keyword">(</span><span class="default">$position</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$buffer </span><span class="keyword">= </span><span class="string">"&amp;lt;&lt;span class='HTMLComment'&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$position</span><span class="keyword">+=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$position </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">) &amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">"&gt;" </span><span class="keyword">;</span><span class="default">$position</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$buffer</span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$buffer </span><span class="keyword">.= </span><span class="string">"&lt;/span&gt;&amp;gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">colorized </span><span class="keyword">.= </span><span class="default">$buffer</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$position</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">colorTag</span><span class="keyword">(</span><span class="default">$position</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$buffer </span><span class="keyword">= </span><span class="string">"&amp;lt;&lt;span class='tagName'&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$coloredTagName </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//As long as we're in the tag scope<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$position</span><span class="keyword">+=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$position </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">) &amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">"&gt;" </span><span class="keyword">;</span><span class="default">$position</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] == </span><span class="string">" " </span><span class="keyword">&amp;&amp; !</span><span class="default">$coloredTagName</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$coloredTagName </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$buffer</span><span class="keyword">.=</span><span class="string">"&lt;/span&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">" " </span><span class="keyword">&amp;&amp; </span><span class="default">$coloredTagName</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Expect attribute<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attribute </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//While we're in the tag<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for(;</span><span class="default">$position </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">) &amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">"&gt;" </span><span class="keyword">;</span><span class="default">$position</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">"="</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attribute </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$buffer </span><span class="keyword">.= </span><span class="string">"&lt;span class='tagAttribute'&gt;"</span><span class="keyword">.</span><span class="default">$attribute</span><span class="keyword">.</span><span class="string">"&lt;/span&gt;="</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attribute </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">; </span><span class="comment">//initialize it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$inQuote </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$QuoteType </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$position</span><span class="keyword">+=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$position </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">) &amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">"&gt;" </span><span class="keyword">&amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">" "&nbsp; </span><span class="keyword">;</span><span class="default">$position</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] == </span><span class="string">'"' </span><span class="keyword">|| </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] == </span><span class="string">"'"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$inQuote </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$QuoteType </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">.=</span><span class="default">$QuoteType</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Read Until next quotation mark.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$position</span><span class="keyword">+=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$position </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">) &amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="string">"&gt;" </span><span class="keyword">&amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] != </span><span class="default">$QuoteType&nbsp; </span><span class="keyword">;</span><span class="default">$position</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">.=</span><span class="default">$QuoteType</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{</span><span class="comment">//No Quotation marks.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$buffer </span><span class="keyword">.= </span><span class="string">"&lt;span class='tagValue'&gt;"</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">.</span><span class="string">"&lt;/span&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$attribute </span><span class="keyword">!= </span><span class="string">""</span><span class="keyword">){</span><span class="default">$buffer</span><span class="keyword">.=</span><span class="string">"&lt;span class='tagAttribute'&gt;"</span><span class="keyword">.</span><span class="default">$attribute</span><span class="keyword">.</span><span class="string">"&lt;/span&gt;"</span><span class="keyword">;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] == </span><span class="string">"&gt;" </span><span class="keyword">){break;}else{</span><span class="default">$buffer</span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">];}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//In case there were no attributes.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">] == </span><span class="string">"&gt;" </span><span class="keyword">&amp;&amp; !</span><span class="default">$coloredTagName</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$buffer</span><span class="keyword">.=</span><span class="string">"&lt;/span&gt;&amp;gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$position</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">colorized </span><span class="keyword">.= </span><span class="default">$buffer</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return --</span><span class="default">$position</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">colorize</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">colorized</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$inTag </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$pointer </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;</span><span class="default">$pointer</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">);</span><span class="default">$pointer</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$thisChar </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$pointer</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nextChar </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$pointer</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$thisChar </span><span class="keyword">== </span><span class="string">"&lt;"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$nextChar </span><span class="keyword">== </span><span class="string">"!"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pointer </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">colorComment</span><span class="keyword">(</span><span class="default">$pointer</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else if(</span><span class="default">$nextChar </span><span class="keyword">== </span><span class="string">"?"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//colorPHP();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pointer </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">colorTag</span><span class="keyword">(</span><span class="default">$pointer</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">colorized </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">content</span><span class="keyword">[</span><span class="default">$pointer</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">colorized</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">$curDocName </span><span class="keyword">= </span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'doc'</span><span class="keyword">];<br />
</span><span class="default">$docHandle </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$curDocName</span><span class="keyword">,</span><span class="string">"r"</span><span class="keyword">);<br />
</span><span class="default">$docStrContent </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$docHandle</span><span class="keyword">,</span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$curDocName</span><span class="keyword">));<br />
</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$docHandle</span><span class="keyword">);<br />
</span><span class="default">$HTMLinspector </span><span class="keyword">= new </span><span class="default">HTMLcolorizer</span><span class="keyword">(</span><span class="default">$docStrContent</span><span class="keyword">);<br />
</span><span class="default">$document </span><span class="keyword">= </span><span class="default">$HTMLinspector</span><span class="keyword">-&gt;</span><span class="default">colorize</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
&lt;html&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;head&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;style type="text/css"&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; /**********************\<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * MOZILLA FIREFOX STYLE<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; \**********************/<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; /*pre{font-family:Tahoma;font-size:px;}*/<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; .tagName{color:purple;}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; .tagAttribute{color:red;}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; .tagValue{color:blue;}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; .HTMLComment{font-style:italic;color:green;}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;/style&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/head&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;body&gt;<br />
&nbsp;&nbsp;&nbsp; <span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">.</span><span class="default">$document</span><span class="keyword">.</span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &lt;/body&gt;<br />
&lt;/html&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79869""></a>
  <div class="note">
   <strong class="user">wm at tellinya dot com</strong>
   <a href="#79869" class="date">17-Dec-2007 04:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wanted to build a better function and exclude operators {}=- from keywords span class. I also wanted to link functions used in my PHP code directly to the PHP site.<br />
A lot more changes and tweaks have been made and the output is much better!<br />
<br />
Find the function here :<br />
<a href="http://www.tellinya.com/art2/262/highligh-php-syntax/" rel="nofollow" target="_blank">http://www.tellinya.com/art2/262/highligh-php-syntax/</a><br />
and ditch the old PHP one permanently.<br />
Tested and built on PHP 5.2.0.<br />
<br />
Looking forward to any input.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77914""></a>
  <div class="note">
   <strong class="user">phpnotes dot 20 dot zsh at spamgourmet dot com</strong>
   <a href="#77914" class="date">19-Sep-2007 08:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
peter at int8 dot com &gt; "This hasn't been mentioned, but it appears that PHP opening and closing tags are required to be part of the code snippet."<br />
<br />
It does also require enabled open/close tags. For example:<br />
<br />
<span class="default">&lt;?php<br />
highlight_string</span><span class="keyword">(</span><span class="string">'&lt;? echo "Hello world!";?&gt;'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Won't work with short_open_tag = Off. Compare example 10.2 on:<br />
Main mirror (<a href="http://www.php.net/manual/en/language.basic-syntax.php#id2530407" rel="nofollow" target="_blank">http://www.php.net/manual/en/language.basic-syntax.php#id2530407</a>)<br />
US mirror (<a href="http://us.php.net/manual/en/language.basic-syntax.php#id2530407" rel="nofollow" target="_blank">http://us.php.net/manual/en/language.basic-syntax.php#id2530407</a>)<br />
IN mirror (<a href="http://in.php.net/manual/en/language.basic-syntax.php#id2530407" rel="nofollow" target="_blank">http://in.php.net/manual/en/language.basic-syntax.php#id2530407</a>)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77620""></a>
  <div class="note">
   <strong class="user">www.phella.net</strong>
   <a href="#77620" class="date">05-Sep-2007 08:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When you quote highlighted PHP code in your website you need to escape quotes. If you quote a lot it may be annoyning. Here is tiny snippet how to make quoting tidy and clean. Write your code like this:<br />
<br />
&lt;?code()?&gt;<br />
&nbsp; $string = 'Here I put my code';<br />
&lt;?code()?&gt;<br />
<br />
And somewhere else define the function:<br />
<br />
&lt;?<br />
&nbsp; function code()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; static $on=false;<br />
&nbsp;&nbsp;&nbsp; if (!$on) ob_start();<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $buffer= "&lt;?\n".ob_get_contents()."?&gt;";<br />
&nbsp;&nbsp; &nbsp;&nbsp; ob_end_clean();<br />
&nbsp;&nbsp; &nbsp;&nbsp; highlight_string($buffer);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; $on=!$on;<br />
&nbsp; }<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77535""></a>
  <div class="note">
   <strong class="user">dark_messenger84 at yahoo dot co dot uk</strong>
   <a href="#77535" class="date">02-Sep-2007 01:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's an improved version of supremacy2k at gmail dot com's code. It's a small function that accepts either PHP syntax in plain text or from another script, and then parses it into an ordered list with syntax highlighting.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">print_php_code</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$type</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; switch (</span><span class="default">$type</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">"text"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">"file"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;div&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;ol&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$str </span><span class="keyword">as </span><span class="default">$line </span><span class="keyword">=&gt; </span><span class="default">$syntax</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;li&gt;&lt;code&gt;" </span><span class="keyword">. </span><span class="default">$syntax </span><span class="keyword">. </span><span class="string">"&lt;/code&gt;&lt;/li&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;/ol&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;/div&gt;"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74249""></a>
  <div class="note">
   <strong class="user">supremacy2k at gmail dot com</strong>
   <a href="#74249" class="date">31-Mar-2007 04:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simplification of functions vanessaschissato at gmail dot com at 17-Oct-2006 05:04.<br />
<br />
Since it had trouble keeping the code intact. (It removed /* )<br />
<br />
function showCode($code) {<br />
&nbsp;$code = highlight_string($code, true);<br />
&nbsp;$code = explode("&lt;br /&gt;", $code);<br />
&nbsp;<br />
&nbsp;$i = "1";<br />
&nbsp;foreach ($code as $line =&gt; $syntax) {<br />
&nbsp; echo "&lt;font color='black'&gt;".$i."&lt;/font&gt; ".$syntax."&lt;br&gt;";<br />
&nbsp; $i++;<br />
&nbsp;}<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73624""></a>
  <div class="note">
   <strong class="user">Pyerre</strong>
   <a href="#73624" class="date">04-Mar-2007 01:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This fonction replaces every space with the html code &amp;nbsp; (non-breaking space)<br />
this is not very good because text will not go to the line and causes a big width<br />
for example in a bordered div, text will go across the border<br />
<br />
my solution : <br />
echo str_replace("&amp;nbsp;", " ",highlight_string("Arise, you children of the fatherland",true));<br />
echo str_replace("&amp;nbsp;", " ",highlight_file("test.php",true));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70456""></a>
  <div class="note">
   <strong class="user">vanessaschissato at gmail dot com</strong>
   <a href="#70456" class="date">17-Oct-2006 08:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This class show a code formated.<br />
Allow options for to format.<br />
Options: highlight code and to show line number<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Code<br />
</span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">printCode</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">, </span><span class="default">$high_light </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$lines_number </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">)) </span><span class="default">$code </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count_lines </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$code </span><span class="keyword">as </span><span class="default">$line </span><span class="keyword">=&gt; </span><span class="default">$code_line</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$lines_number</span><span class="keyword">) </span><span class="default">$r1 </span><span class="keyword">= </span><span class="string">"&lt;span class=\"lines_number\"&gt;"</span><span class="keyword">.(</span><span class="default">$line </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">).</span><span class="string">" &lt;/span&gt;"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$high_light</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"&lt;\?(php)?[^[:graph:]]"</span><span class="keyword">, </span><span class="default">$code_line</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r2 </span><span class="keyword">= </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$code_line</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">).</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r2 </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"(&amp;lt;\?php&amp;nbsp;)+"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="string">"&lt;?php "</span><span class="keyword">.</span><span class="default">$code_line</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">)).</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r2 </span><span class="keyword">= (!</span><span class="default">$line</span><span class="keyword">) ? </span><span class="string">"&lt;pre&gt;" </span><span class="keyword">: </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r2 </span><span class="keyword">.= </span><span class="default">htmlentities</span><span class="keyword">(</span><span class="default">$code_line</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r2 </span><span class="keyword">.= (</span><span class="default">$line </span><span class="keyword">== (</span><span class="default">$count_lines </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">)) ? </span><span class="string">"&lt;br /&gt;&lt;/pre&gt;" </span><span class="keyword">: </span><span class="string">""</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">.= </span><span class="default">$r1</span><span class="keyword">.</span><span class="default">$r2</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;div class=\"code\"&gt;"</span><span class="keyword">.</span><span class="default">$r</span><span class="keyword">.</span><span class="string">"&lt;/div&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70059""></a>
  <div class="note">
   <strong class="user">tyler dot reed at brokeguysinc dot com</strong>
   <a href="#70059" class="date">01-Oct-2006 06:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a little chunk of code that i use to show the source of a file, i took part of the idea from a example i found on another php function page.<br />
<br />
This code takes a php file and highlights it and places a line number next to it.&nbsp; Great for on the fly debugging.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Get a file into an array<br />
</span><span class="default">$lines </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="string">'index.php'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Loop through our array, show HTML source as HTML source; and line numbers too.<br />
</span><span class="keyword">echo(</span><span class="string">'&lt;table border=0 cellpadding=0 cellspacing=0&gt;'</span><span class="keyword">);<br />
foreach (</span><span class="default">$lines </span><span class="keyword">as </span><span class="default">$line_num </span><span class="keyword">=&gt; </span><span class="default">$line</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo(</span><span class="string">'&lt;tr&gt;'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo(</span><span class="string">'&lt;td bgcolor = "#cccccc"&gt;'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo(</span><span class="string">'&lt;code&gt;' </span><span class="keyword">. (</span><span class="default">$line_num </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">) . </span><span class="string">'&lt;/code&gt;'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo(</span><span class="string">'&lt;/td&gt;'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo(</span><span class="string">'&lt;td&gt;'</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo(</span><span class="string">'&lt;/td&gt;'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo(</span><span class="string">'&lt;/tr&gt;'</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68274""></a>
  <div class="note">
   <strong class="user">thomas et luegger _dot_ de</strong>
   <a href="#68274" class="date">20-Jul-2006 05:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Thanks to peter at int8 dot com, your comment saved quite some time.<br />
<br />
In my case even short tags didn't work right (PHP 5.0.5).<br />
<br />
The following function offers subversion independent highlighting for PHP5. If you want to display code snippets without tags or use css for code formating it might be a usefull starting point. It is intented for small code fragments only and does not handle sources with multiple php blocks correctly.<br />
<br />
Beware, the &lt;code&gt; tag is stripped off. <br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; </span><span class="comment">/*<br />
<br />
&nbsp; These classes are used for highlighting, happy css-ing:<br />
<br />
&nbsp; .phpdefault { color:#0000BB; font-weight: bold;}<br />
&nbsp; .phpkeyword { color:#007700; font-weight: bold;}<br />
&nbsp; .phpstring&nbsp; { color:#DD0000; font-weight: normal;}<br />
&nbsp; .phpcomment { color:#FF8000; font-weight: normal;}<br />
<br />
&nbsp; */<br />
<br />
/**<br />
&nbsp;* Highlights PHP-source snippets with and without php-tags, inserts class definitions on request<br />
&nbsp;*<br />
&nbsp;* Strips &lt;code&gt; and &lt;span color:black&gt;, removes empty spans<br />
&nbsp;*<br />
&nbsp;* @param string $source Source to highlight<br />
&nbsp;* @param boolean $classes, true links source elements to classes<br />
&nbsp;* @return string<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">php_highlight</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">, </span><span class="default">$classes </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">)<br />
{<br />
&nbsp; if (</span><span class="default">version_compare</span><span class="keyword">( </span><span class="default">phpversion</span><span class="keyword">(), </span><span class="string">"5.0.0"</span><span class="keyword">, </span><span class="string">"&lt;"</span><span class="keyword">)) return </span><span class="string">"PHP 5 required"</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$r1 </span><span class="keyword">= </span><span class="default">$r2 </span><span class="keyword">= </span><span class="string">'##'</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">// adds required PHP tags (at least with vers. 5.0.5 this is required)<br />
&nbsp; </span><span class="keyword">if ( </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">,</span><span class="string">' ?&gt;'</span><span class="keyword">) === </span><span class="default">false </span><span class="keyword">) </span><span class="comment">// xml is not THAT important ;-)<br />
&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$source </span><span class="keyword">= </span><span class="string">"&lt;?php "</span><span class="keyword">.</span><span class="default">$source</span><span class="keyword">.</span><span class="string">" ?&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$r1 </span><span class="keyword">= </span><span class="string">'#&amp;lt;\?.*?(php)?.*?&amp;nbsp;#s'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$r2 </span><span class="keyword">= </span><span class="string">'#\?&amp;gt;#s'</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">,</span><span class="string">'&lt;? '</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$r1 </span><span class="keyword">= </span><span class="string">'--'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$source </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'&lt;? '</span><span class="keyword">,</span><span class="string">'&lt;?php '</span><span class="keyword">,</span><span class="default">$source</span><span class="keyword">);<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="default">$source </span><span class="keyword">= </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />
<br />
&nbsp; if (</span><span class="default">$r1 </span><span class="keyword">==</span><span class="string">'--'</span><span class="keyword">) </span><span class="default">$source </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#(&amp;lt;\?.*?)(php)?(.*?&amp;nbsp;)#s'</span><span class="keyword">,</span><span class="string">'\\1\\3'</span><span class="keyword">,</span><span class="default">$source</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">$source </span><span class="keyword">= </span><span class="default">preg_replace </span><span class="keyword">(array ( </span><span class="string">'/.*&lt;code&gt;\s*&lt;span style="color: #000000"&gt;/'</span><span class="keyword">,&nbsp; &nbsp; </span><span class="comment">//<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'#&lt;/span&gt;\s*&lt;/code&gt;#'</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//&nbsp; &lt;code&gt;&lt;span black&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r1</span><span class="keyword">, </span><span class="default">$r2</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// php tags<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/&lt;span[^&gt;]*&gt;&lt;\/span&gt;/'&nbsp;&nbsp; </span><span class="comment">// empty spans<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">),</span><span class="string">''</span><span class="keyword">,</span><span class="default">$source</span><span class="keyword">);<br />
<br />
&nbsp; if (</span><span class="default">$classes</span><span class="keyword">) </span><span class="default">$source </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( array(</span><span class="string">'style="color: #0000BB"'</span><span class="keyword">,</span><span class="string">'style="color: #007700"'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'style="color: #DD0000"'</span><span class="keyword">,</span><span class="string">'style="color: #FF8000"'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(</span><span class="string">'class="phpdefault"'</span><span class="keyword">,</span><span class="string">'class="phpkeyword"'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'class="phpstring"'</span><span class="keyword">,</span><span class="string">'class="phpcomment"'</span><span class="keyword">,),</span><span class="default">$source</span><span class="keyword">);<br />
<br />
&nbsp; return </span><span class="default">$source</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="string">'&lt;p&gt;Some tests:&lt;/p&gt;&lt;p&gt;'</span><span class="keyword">;<br />
echo </span><span class="default">php_highlight</span><span class="keyword">(</span><span class="string">'&lt;?php $test = new func("Text"); /* regular tags, use classes */ ?&gt;'</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">),</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
echo </span><span class="string">'Inline code: '</span><span class="keyword">,</span><span class="default">php_highlight</span><span class="keyword">(</span><span class="string">'&lt;? $test = new func("Text"); /* short tags */ ?&gt;'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; </span><span class="string">' works without or '</span><span class="keyword">,</span><span class="default">php_highlight</span><span class="keyword">(</span><span class="string">'define (\'WITH_CLASSES\',\' too\'); /* no tags */'</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">),</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
echo </span><span class="default">php_highlight</span><span class="keyword">(</span><span class="string">'$test = new func("Text"); /* no tags, no classes */'</span><span class="keyword">),</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
echo </span><span class="string">'&lt;/p&gt;&lt;p&gt;You are running PHP: '</span><span class="keyword">.</span><span class="default">phpversion</span><span class="keyword">().</span><span class="string">'&lt;/p&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
hope it saves someones time, Tom</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64715""></a>
  <div class="note">
   <strong class="user">peter at int8 dot com</strong>
   <a href="#64715" class="date">19-Apr-2006 04:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This hasn't been mentioned, but it appears that PHP opening and closing tags are required to be part of the code snippet.<br />
<span class="default">&lt;?php highlight_string</span><span class="keyword">(</span><span class="string">"&lt;? \$var = 15; ?&gt;"</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span>works, while<br />
<span class="default">&lt;?php highlight_string</span><span class="keyword">(</span><span class="string">"\$var = 15;"</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span>does not. This is unforunate for those of use who want to show tiny code snippets, but there you go. Earlier versions of this function did not have this requirement, if I remember correctly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64100""></a>
  <div class="note">
   <strong class="user">m dot lebkowski+phpnet at gmail dot com</strong>
   <a href="#64100" class="date">07-Apr-2006 04:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
stalker, I`m afraid your function has a bug. Whenever a input string will contain a substring: 'color="foo.bar"' it will be replaced by your function, whitch is of course incorrect. Try this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">xhtmlHighlightString</span><span class="keyword">( </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$return</span><span class="keyword">=</span><span class="default">false </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; </span><span class="default">$hlt </span><span class="keyword">= </span><span class="default">highlight_string</span><span class="keyword">( </span><span class="default">$str</span><span class="keyword">, </span><span class="default">true </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; array( </span><span class="string">'&lt;font color="'</span><span class="keyword">, </span><span class="string">'&lt;/font&gt;' </span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; array( </span><span class="string">'&lt;span style="color: '</span><span class="keyword">, </span><span class="string">'&lt;/span&gt;' </span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$hlt </span><span class="keyword">);<br />
&nbsp;&nbsp; if(</span><span class="default">$return</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
&nbsp;&nbsp; echo </span><span class="default">$ret</span><span class="keyword">;<br />
&nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">xhtmlHilightFile</span><span class="keyword">( </span><span class="default">$path</span><span class="keyword">, </span><span class="default">$return </span><span class="keyword">= </span><span class="default">false </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">xhtmlHighlightString</span><span class="keyword">( </span><span class="default">file_get_contents</span><span class="keyword">( </span><span class="default">$path </span><span class="keyword">), </span><span class="default">$return </span><span class="keyword">);<br />
} </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60251""></a>
  <div class="note">
   <strong class="user">stalker at ruun dot de</strong>
   <a href="#60251" class="date">31-Dec-2005 01:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to vouksh: I expanded your functions a bit:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">xhtmlHighlightString</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$return</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$hlt </span><span class="keyword">= </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">), </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$fon </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'&lt;font '</span><span class="keyword">, </span><span class="string">'&lt;/font&gt;'</span><span class="keyword">), array(</span><span class="string">'&lt;span '</span><span class="keyword">, </span><span class="string">'&lt;/span&gt;'</span><span class="keyword">), </span><span class="default">$hlt</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#color="(.*?)"#'</span><span class="keyword">, </span><span class="string">'style="color: \\1"'</span><span class="keyword">, </span><span class="default">$fon</span><span class="keyword">);<br />
&nbsp;&nbsp; if(</span><span class="default">$return</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
&nbsp;&nbsp; echo </span><span class="default">$ret</span><span class="keyword">;<br />
&nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
}<br />
function </span><span class="default">xhtmlHighlightFile</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,</span><span class="default">$return</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$hlt </span><span class="keyword">= </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$fon </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'&lt;font '</span><span class="keyword">, </span><span class="string">'&lt;/font&gt;'</span><span class="keyword">), array(</span><span class="string">'&lt;span '</span><span class="keyword">, </span><span class="string">'&lt;/span&gt;'</span><span class="keyword">), </span><span class="default">$hlt</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#color="(.*?)"#'</span><span class="keyword">, </span><span class="string">'style="color: \\1"'</span><span class="keyword">, </span><span class="default">$fon</span><span class="keyword">);<br />
&nbsp;&nbsp; if(</span><span class="default">$return</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
&nbsp;&nbsp; echo </span><span class="default">$ret</span><span class="keyword">;<br />
&nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58485""></a>
  <div class="note">
   
   <a href="#58485" class="date">05-Nov-2005 11:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
growling octopus's code didn't work under Windows, so I made this and it worked:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (!empty(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'source'</span><span class="keyword">])) {<br />
&nbsp;&nbsp; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'SCRIPT_FILENAME'</span><span class="keyword">]);<br />
&nbsp;&nbsp; </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">);<br />
&nbsp;&nbsp; exit();<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57867""></a>
  <div class="note">
   <strong class="user">growlingoctopus at no-spam dot gmail dot com</strong>
   <a href="#57867" class="date">17-Oct-2005 04:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a trick I use when I want to show people the source to one of my scripts, but don't feel like uploading phps files or the host doesn't support them.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (!empty(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'source'</span><span class="keyword">])) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="default">file</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">,</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">,</span><span class="string">'/'</span><span class="keyword">)+</span><span class="default">1</span><span class="keyword">)));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">,</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">,</span><span class="string">'?'</span><span class="keyword">.</span><span class="string">'&gt;'</span><span class="keyword">)+</span><span class="default">2</span><span class="keyword">)));<br />
&nbsp;&nbsp;&nbsp; exit();&nbsp; &nbsp; <br />
}<br />
</span><span class="default">?&gt;<br />
</span>By adding that to the top of the script, you can then call the script with ?source=1 and it will show the source for the file ... it should work with any script (as long as you aren't using $_GET['source'] for something else, you can always change that if you do).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56642""></a>
  <div class="note">
   <strong class="user">vouksh at vouksh dot info</strong>
   <a href="#56642" class="date">10-Sep-2005 10:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Fully working, XHTML 1.1 ready xhtml_highlight function. I included the stripslashes, because of some problems I had with out it. It should be safe to leave it in there, but if you experience problems, feel free to take it out.<br />
<br />
&lt;?<br />
function xhtml_highlight($str) {<br />
&nbsp;&nbsp;&nbsp; $hlt = highlight_string(stripslashes($str), true);<br />
&nbsp;&nbsp;&nbsp; $fon = str_replace(array('&lt;font ', '&lt;/font&gt;'), array('&lt;span ', '&lt;/span&gt;'), $hlt);<br />
&nbsp;&nbsp;&nbsp; $ret = preg_replace('#color="(.*?)"#', 'style="color: \\1"', $fon);<br />
&nbsp;&nbsp;&nbsp; echo $ret;<br />
&nbsp;&nbsp;&nbsp; return true;<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56017""></a>
  <div class="note">
   <strong class="user">webmaster at gelan dot org</strong>
   <a href="#56017" class="date">20-Aug-2005 11:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Some BB-codes width preg_replace:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">bb_url</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">){<br />
return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#[URL=([^\']*)]([^\']*)[/URL]#'</span><span class="keyword">, </span><span class="string">'&lt;a href="\\1" target=_blank&gt;\\2&lt;/a&gt;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
}<br />
function </span><span class="default">bb_php</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">){<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"]\n"</span><span class="keyword">, </span><span class="string">"]"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
</span><span class="default">$match </span><span class="keyword">= array(</span><span class="string">'#\[php\](.*?)\[\/php\]#se'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">"'&lt;div&gt;'.highlight_string(stripslashes('$1'), true).'&lt;/div&gt;'"</span><span class="keyword">);<br />
return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
}<br />
function </span><span class="default">bb_img</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">){<br />
return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#[IMG]([^\']*)[/IMG]#'</span><span class="keyword">, </span><span class="string">'&lt;img src="\\1" /&gt;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
}<br />
function </span><span class="default">bb_b</span><span class="keyword">{</span><span class="default">$str</span><span class="keyword">){<br />
return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#[B]([^\']*)[/B]'</span><span class="keyword">, </span><span class="string">'&lt;strong&gt;\\1&lt;/strong&gt;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
}<br />
function </span><span class="default">bb_i</span><span class="keyword">{</span><span class="default">$str</span><span class="keyword">){<br />
return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#[I]([^\']*)[/I]'</span><span class="keyword">, </span><span class="string">'&lt;em&gt;\\1&lt;/em&gt;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
}<br />
function </span><span class="default">bb_parse</span><span class="keyword">{</span><span class="default">$str</span><span class="keyword">){<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">bb_url</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">bb_php</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">bb_img</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">bb_b</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">bb_i</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
return </span><span class="default">$str<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54015""></a>
  <div class="note">
   <strong class="user">zer0</strong>
   <a href="#54015" class="date">20-Jun-2005 09:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Concerning my code below:<br />
<br />
I'm sorry, I completely forgot about str_ireplace being for PHP 5 for some reason. Also, there was another error I missed (too many late nights ;)). Here's the corrected code:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">highlight_code</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">, </span><span class="default">$inline</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">, </span><span class="default">$return</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) </span><span class="comment">// Pre php 4 support for capturing highlight<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (string) </span><span class="default">$highlight </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">version_compare</span><span class="keyword">(</span><span class="default">PHP_VERSION</span><span class="keyword">, </span><span class="string">"4.2.0"</span><span class="keyword">, </span><span class="string">"&lt;"</span><span class="keyword">) === </span><span class="default">1 </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ob_start</span><span class="keyword">(); </span><span class="comment">// start output buffering to capture contents of highlight<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$highlight </span><span class="keyword">= </span><span class="default">ob_get_contents</span><span class="keyword">(); </span><span class="comment">// capture output<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ob_end_clean</span><span class="keyword">(); </span><span class="comment">// clear buffer cleanly<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$highlight</span><span class="keyword">=</span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Using preg_replace will allow PHP 4 in on the fun<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if ( </span><span class="default">$inline </span><span class="keyword">=== </span><span class="default">true </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$highlight</span><span class="keyword">=</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/&lt;code&gt;/i"</span><span class="keyword">,</span><span class="string">"&lt;code class=\"inline\"&gt;"</span><span class="keyword">,</span><span class="default">$highlight</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$highlight</span><span class="keyword">=</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/&lt;code&gt;/i"</span><span class="keyword">,</span><span class="string">"&lt;code class=\"block\"&gt;"</span><span class="keyword">,</span><span class="default">$highlight</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$return </span><span class="keyword">=== </span><span class="default">true </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$highlight</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$highlight</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53896""></a>
  <div class="note">
   <strong class="user">zero</strong>
   <a href="#53896" class="date">16-Jun-2005 03:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In some cases, I found that it's useful to have highlight_string format &lt;code&gt;...&lt;/code&gt; inline as part of a paragraph, and other times, as a block for demonstrating multiple lines of code. I made this function to help out.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">highlight_code</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">, </span><span class="default">$inline</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">, </span><span class="default">$return</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) </span><span class="comment">// Pre php 4 support for capturing highlight<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (string) </span><span class="default">$highlight </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">version_compare</span><span class="keyword">(</span><span class="default">phpversion</span><span class="keyword">(), </span><span class="string">"4.2.0"</span><span class="keyword">, </span><span class="string">"&lt;"</span><span class="keyword">) === </span><span class="default">1 </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ob_start</span><span class="keyword">(); </span><span class="comment">// start output buffering to capture contents of highlight<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$highlight </span><span class="keyword">= </span><span class="default">ob_get_contents</span><span class="keyword">(); </span><span class="comment">// capture output<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ob_end_clean</span><span class="keyword">(); </span><span class="comment">// clear buffer cleanly<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$highlight</span><span class="keyword">=</span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">## The classes below need to correspond to a stylesheet!<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if ( </span><span class="default">$inline </span><span class="keyword">=== </span><span class="default">true </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$highlight</span><span class="keyword">=</span><span class="default">str_ireplace</span><span class="keyword">(</span><span class="string">"&lt;code&gt;"</span><span class="keyword">,</span><span class="string">"&lt;code class=\"inline\"&gt;"</span><span class="keyword">,</span><span class="default">$highlight</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$highlight</span><span class="keyword">=</span><span class="default">str_ireplace</span><span class="keyword">(</span><span class="string">"&lt;code&gt;"</span><span class="keyword">,</span><span class="string">"&lt;code class=\"block\"&gt;"</span><span class="keyword">,</span><span class="default">$highlight</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$return </span><span class="keyword">=== </span><span class="default">true </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$highlight</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$highlight</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53845""></a>
  <div class="note">
   <strong class="user">Sam Wilson</strong>
   <a href="#53845" class="date">14-Jun-2005 11:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
manithu at fahr-zur-hoelle dot org forgot only one thing:&nbsp; to fix the break tags.&nbsp; The addidtion of the following should do it.<br />
<br />
<span class="default">&lt;?php<br />
$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"&lt;br&gt;"</span><span class="keyword">, </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53800""></a>
  <div class="note">
   <strong class="user">bpgordon at gmail dot com</strong>
   <a href="#53800" class="date">13-Jun-2005 01:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On dleavitt AT ucsc DOT edu's comment:<br />
<br />
You might want to use md5($html_string) instead of "piggusmaloy" as a generally good programming practice. Just in case "piggusmaloy" is actually in $html_string.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53515""></a>
  <div class="note">
   <strong class="user">dleavitt at ucsc dot edu</strong>
   <a href="#53515" class="date">04-Jun-2005 02:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function does not seem to like &lt;script&gt; tags in HTML strings: if there are any close tags for scripts (whatever their language/type) the syntax highlighter will poop out. The workaround is simple though: <br />
<span class="default">&lt;?php<br />
$html_string </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"script"</span><span class="keyword">,</span><span class="string">"piggusmaloy"</span><span class="keyword">, </span><span class="default">$html_string</span><span class="keyword">);<br />
</span><span class="default">$html_string </span><span class="keyword">= </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$html_string</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">$html_string </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"piggusmaloy"</span><span class="keyword">,</span><span class="string">"script"</span><span class="keyword">, </span><span class="default">$html_string</span><span class="keyword">);<br />
echo </span><span class="default">$html_string</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>This works best if you don't have "piggusmaloy" anywhere in your string (a safe assumption?)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53351""></a>
  <div class="note">
   <strong class="user">trixsey at animania dot nu</strong>
   <a href="#53351" class="date">29-May-2005 04:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A neat function I made. Syntax coloring, row numbers, varying background colors per row in the table.<br />
<br />
&lt;?<br />
function showCode($code) {<br />
&nbsp;&nbsp;&nbsp; $html = highlight_string($code, true);<br />
&nbsp;&nbsp;&nbsp; $html = str_replace("\n", "", $html);<br />
&nbsp;&nbsp;&nbsp; $rows = explode("&lt;br /&gt;", $html);<br />
<br />
&nbsp;&nbsp;&nbsp; $row_num = array();<br />
&nbsp;&nbsp;&nbsp; $i = 1;<br />
<br />
&nbsp;&nbsp;&nbsp; foreach($rows as $row) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($i &lt; 10) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $i = "0".$i;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($i==1) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $row_num[] = "&lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;font color=\"#000000\"&gt;&lt;code&gt;$i&lt;/code&gt;&lt;/font&gt;\t$row&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($i!=1) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(is_int($i/2)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $row_num[] = "&lt;tr bgcolor=\"#F9F9F9\"&gt;&lt;td&gt;&lt;code&gt;&lt;font color=\"#000000\"&gt;$i&lt;/font&gt;\t$row&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $row_num[] = "&lt;tr&gt;&lt;td&gt;&lt;code&gt;&lt;font color=\"#000000\"&gt;$i&lt;/font&gt;\t$row&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $i++;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return "&lt;pre&gt;\nFilename: &lt;b&gt;$_GET[file]&lt;/b&gt;\n&lt;table<br />
&nbsp;&nbsp;&nbsp; style=\"border:1px #000000 solid\"&gt;".implode($row_num)."&lt;/table&gt;&lt;/pre&gt;";<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51762""></a>
  <div class="note">
   <strong class="user">support at superhp dot de</strong>
   <a href="#51762" class="date">10-Apr-2005 04:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
With this function you can highlight php code with line numbers:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">highlight_php</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$Line </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);<br />
<br />
&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$Line</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$line </span><span class="keyword">.= </span><span class="string">"&amp;nbsp;"</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">.</span><span class="string">"&amp;nbsp;&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp; </span><span class="default">ob_start</span><span class="keyword">();<br />
&nbsp; </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$Code</span><span class="keyword">=</span><span class="default">ob_get_contents</span><span class="keyword">();<br />
&nbsp; </span><span class="default">ob_end_clean</span><span class="keyword">();<br />
&nbsp; <br />
&nbsp; </span><span class="default">$header</span><span class="keyword">=</span><span class="string">'&lt;table border="0" cellpadding="0" cellspacing="0" width="95%" style="border-style: solid; border-width:1px; border-color: white black black white"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;tr&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;td width="100%" colspan="2"&nbsp; style="border-style: solid; border-width:1px; border-color: white; background-color: #99ccff; font-family:Arial; color:white; font-weight:bold;"&gt;Php-Code:&lt;/td&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/tr&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;tr&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;td width="3%" valign="top" style="background-color: #99ccff; border-style: solid; border-width:1px; border-color: white;"&gt;&lt;code&gt;'</span><span class="keyword">.</span><span class="default">$line</span><span class="keyword">.</span><span class="string">'&lt;/code&gt;&lt;/td&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;td width="97%" valign="top" style="background-color: white;"&gt;&lt;div style="white-space: nowrap; overflow: auto;"&gt;&lt;code&gt;'</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$footer</span><span class="keyword">=</span><span class="default">$Code</span><span class="keyword">.</span><span class="string">'&lt;/div&gt;&lt;/code&gt;&lt;/td&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/tr&gt;<br />
&nbsp; &lt;/table&gt;'</span><span class="keyword">;<br />
<br />
&nbsp; return </span><span class="default">$header</span><span class="keyword">.</span><span class="default">$footer</span><span class="keyword">;<br />
} </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50069""></a>
  <div class="note">
   <strong class="user">admin [at] develogix [dot] com</strong>
   <a href="#50069" class="date">16-Feb-2005 11:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've been working on a good replacement for the highlight_string() function; and here is what I've come up with so far:<br />
<br />
&lt;?<br />
function get_sourcecode_string($str, $return = false, $counting = true, $first_line_num = '1', $font_color = '#666'){<br />
&nbsp;&nbsp;&nbsp; $str = highlight_string($str, TRUE);<br />
&nbsp;&nbsp;&nbsp; $replace = array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '&lt;font' =&gt; '&lt;span',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'color="' =&gt; 'style="color: ',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '&lt;/font&gt;' =&gt; '&lt;/span&gt;',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '&lt;code&gt;' =&gt; '',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '&lt;/code&gt;' =&gt; '',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '&lt;span style="color: #FF8000"&gt;' =&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '&lt;span style="color: '.$font_color.'"&gt;'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; foreach ($replace as $html =&gt; $xhtml){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $str = str_replace($html, $xhtml, $str);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; // delete the first &lt;span style="color:#000000;"&gt; and the corresponding &lt;/span&gt;<br />
&nbsp;&nbsp;&nbsp; $str = substr($str, 30, -9);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $arr_html&nbsp; &nbsp; &nbsp; = explode('&lt;br /&gt;', $str);<br />
&nbsp;&nbsp;&nbsp; $total_lines&nbsp;&nbsp; = count($arr_html);&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; $out&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; = '';<br />
&nbsp;&nbsp;&nbsp; $line_counter&nbsp; = 0;<br />
&nbsp;&nbsp;&nbsp; $last_line_num = $first_line_num + $total_lines;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach ($arr_html as $line){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $line = str_replace(chr(13), '', $line);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $current_line = $first_line_num + $line_counter;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($counting){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $out .= '&lt;span style="color:'.$font_color.'"&gt;'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; . str_repeat('&amp;nbsp;', strlen($last_line_num) - strlen($current_line))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; . $current_line<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; . ': &lt;/span&gt;';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $out .= $line<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; . '&lt;br /&gt;'."\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $line_counter++;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; $out = '&lt;code&gt;'."\n".$out.'&lt;/code&gt;."\n"';<br />
<br />
&nbsp;&nbsp;&nbsp; if ($return){return $out;}<br />
&nbsp;&nbsp;&nbsp; else {echo $out;}<br />
}<br />
?&gt;<br />
<br />
This function outputs valid XHTML 1.1 code by replacing font tags with span tags. You can also specify whether you want it to return or echo, output a line-count, the color of the line-count, and the starting line-count number.<br />
<br />
Usage:<br />
&lt;?<br />
// $str = string with php<br />
// $return = true (return) / false (echo)<br />
//&nbsp; &nbsp; default of false<br />
// $counting = true (count) / false (don't count)<br />
//&nbsp; &nbsp; default of true<br />
// $start = starting count number<br />
//&nbsp; &nbsp; default of '1'<br />
// $color = count color with preceding #<br />
//&nbsp; &nbsp; defalut of '#666'<br />
get_sourcecode_string($str, $return,&nbsp;&nbsp; $counting, $start, $color);<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49506""></a>
  <div class="note">
   <strong class="user">gaggge at gmail dot com</strong>
   <a href="#49506" class="date">30-Jan-2005 08:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a little function for highlighting bbcode-stylish PHP code from a mysql database.<br />
(Like this: [php]<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="string">"test"</span><span class="keyword">; </span><span class="default">?&gt;</span>[/php])<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">bbcode</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"]\n"</span><span class="keyword">, </span><span class="string">"]"</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$match </span><span class="keyword">= array(</span><span class="string">'#\[php\](.*?)\[\/php\]#se'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">"'&lt;div&gt;'.highlight_string(stripslashes('$1'), true).'&lt;/div&gt;'"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48742""></a>
  <div class="note">
   <strong class="user">admin at bwongar dot com</strong>
   <a href="#48742" class="date">05-Jan-2005 03:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I didn't get the expected results from the other XHTML_highlight function, so I developed my own and it is much more efficient. The older one uses a preg_replace to replace the contents of the tag to within a span tag. The only preg_replace in my function pulls the color attribute, and puts it within a str_replace'd span tag.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">xhtml_highlight</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'&lt;font '</span><span class="keyword">, </span><span class="string">'&lt;/font&gt;'</span><span class="keyword">), array(</span><span class="string">'&lt;span '</span><span class="keyword">, </span><span class="string">'&lt;/span&gt;'</span><span class="keyword">), </span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#color="(.*?)"#'</span><span class="keyword">, </span><span class="string">'style="color: \\1"'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47214""></a>
  <div class="note">
   <strong class="user">manithu at fahr-zur-hoelle dot org</strong>
   <a href="#47214" class="date">06-Nov-2004 11:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function will return highlighted, xhtml 1.1 valid code (replaces &lt;font&gt; with &lt;span&gt; elements and color with style attributes):<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">xhtml_highlight</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//replace &lt;code&gt;&lt;font color=""&gt;&lt;/font&gt;&lt;/code&gt;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#&lt;font color="([^\']*)"&gt;([^\']*)&lt;/font&gt;#'</span><span class="keyword">, </span><span class="string">'&lt;span style="color: \\1"&gt;\\2&lt;/span&gt;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//replace other &lt;font&gt; elements<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#&lt;font color="([^\']*)"&gt;([^\']*)&lt;/font&gt;#U'</span><span class="keyword">, </span><span class="string">'&lt;span style="color: \\1"&gt;\\2&lt;/span&gt;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46010""></a>
  <div class="note">
   <strong class="user">aidan at php dot net</strong>
   <a href="#46010" class="date">26-Sep-2004 08:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To add line numbers to source code, with optional function linking, use the below function:<br />
<br />
<a href="http://aidanlister.com/repos/v/function.highlight_file_linenum.php" rel="nofollow" target="_blank">http://aidanlister.com/repos/v/function.highlight_file_linenum.php</a><br />
<br />
A much more thorough and smarter, though slower version is here:<br />
<br />
<a href="http://aidanlister.com/repos/v/PHP_Highlight.php" rel="nofollow" target="_blank">http://aidanlister.com/repos/v/PHP_Highlight.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.highlight-file.html">highlight_file</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.ignore-user-abort.html">ignore_user_abort</a></div>
 <div class="up"><a href="ref.misc.html">Misc. Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
