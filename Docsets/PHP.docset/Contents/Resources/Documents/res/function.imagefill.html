<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Flood fill</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.imageellipse.html">imageellipse</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.imagefilledarc.html">imagefilledarc</a></div>
 <div class="up"><a href="ref.image.html">GD and Image Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.imagefill" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">imagefill</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">imagefill</span> &mdash; <span class="dc-title">Flood fill</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.imagefill-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><b>imagefill</b></span>
    ( <span class="methodparam"><span class="type">resource</span> <tt class="parameter">$image</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$x</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$y</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$color</tt></span>
   )</div>

  <p class="para rdfs-comment">
   Performs a flood fill starting at the given coordinate (top left is 0, 0)
   with the given <i><tt class="parameter">color</tt></i> in the
   <i><tt class="parameter">image</tt></i>.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.imagefill-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>
<span class="term"><i><tt class="parameter">
image</tt></i></span><dd>
<p class="para">An image resource, returned by one of the image creation functions,
such as <span class="function"><a href="function.imagecreatetruecolor.html" class="function">imagecreatetruecolor()</a></span>.</p></dd>
</dt>

    <dt>

     <span class="term"><i><tt class="parameter">x</tt></i></span>
     <dd>

      <p class="para">
       x-coordinate of start point.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">y</tt></i></span>
     <dd>

      <p class="para">
       y-coordinate of start point.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">color</tt></i></span>
     <dd>

      <p class="para">
       The fill color. A color identifier created with 
       <span class="function"><a href="function.imagecolorallocate.html" class="function">imagecolorallocate()</a></span>.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.imagefill-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <b><tt>TRUE</tt></b> on success or <b><tt>FALSE</tt></b> on failure.
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.imagefill-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-2975">
    <p><b>Example #1 <span class="function"><b>imagefill()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$im&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imagecreatetruecolor</span><span style="color: #007700">(</span><span style="color: #0000BB">100</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;sets&nbsp;background&nbsp;to&nbsp;red<br /></span><span style="color: #0000BB">$red&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imagecolorallocate</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">imagefill</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$red</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-type:&nbsp;image/png'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">imagepng</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">imagedestroy</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output
something similar to:</p></div>
    <div class="mediaobject">
     
     <div class="imageobject">
      <img src="images/21009b70229598c6a80eef8b45bf282b-imagefill.png" alt="Output of example : imagefill()" width="100" height="100" />
     </div>
    </div>
   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.imagefill-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.imagecolorallocate.html" class="function" rel="rdfs-seeAlso">imagecolorallocate()</a> - Allocate a color for an image</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="102004""></a>
  <div class="note">
   <strong class="user">Eduard Resina</strong>
   <a href="#102004" class="date">22-Jan-2011 07:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using imagefill with alpha colors in a png file does not allow for blending the filling with the original image. On the other hand, substituting imagefill with imagefilledrectangle in order to fill with alpha colors is only helpful when a rectangle shape is desired. This example shows how to imagefill with alpha color or alpha tile images allowing the existing background of the original image to come through, and yet filling only the area with the same color surrounding the filling start point.<br />
<br />
<span class="default">&lt;?php <br />
<br />
$fillstartx </span><span class="keyword">= </span><span class="default">30</span><span class="keyword">;<br />
</span><span class="default">$fillstarty </span><span class="keyword">= </span><span class="default">80</span><span class="keyword">;<br />
</span><span class="default">$r </span><span class="keyword">= </span><span class="default">180</span><span class="keyword">;<br />
</span><span class="default">$g </span><span class="keyword">= </span><span class="default">200</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">60</span><span class="keyword">;<br />
</span><span class="default">$alpha </span><span class="keyword">= </span><span class="default">80</span><span class="keyword">;<br />
</span><span class="default">$tileimage </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
<br />
</span><span class="default">$mainimage </span><span class="keyword">= </span><span class="default">imagecreatefrompng</span><span class="keyword">(</span><span class="string">"myimage.png"</span><span class="keyword">);<br />
</span><span class="default">$intermediateimage </span><span class="keyword">= </span><span class="default">imagecreatefrompng</span><span class="keyword">(</span><span class="string">"myimage.png"</span><span class="keyword">); </span><span class="comment">//intermediate copy<br />
<br />
</span><span class="default">$imagewidth </span><span class="keyword">= </span><span class="default">imagesx</span><span class="keyword">(</span><span class="default">$mainimage</span><span class="keyword">);<br />
</span><span class="default">$imageheight </span><span class="keyword">= </span><span class="default">imagesy</span><span class="keyword">(</span><span class="default">$mainimage</span><span class="keyword">);<br />
<br />
</span><span class="comment">/* $tileimage = imagecreatefrompng("tile.png");&nbsp; //FOR TILE IMAGEFILL */<br />
<br />
</span><span class="keyword">if (</span><span class="default">$tileimage</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagesettile</span><span class="keyword">(</span><span class="default">$intermediateimage</span><span class="keyword">, </span><span class="default">$tileimage</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$color </span><span class="keyword">= </span><span class="default">IMG_COLOR_TILED</span><span class="keyword">;<br />
}<br />
else </span><span class="default">$color </span><span class="keyword">= </span><span class="default">imagecolorallocatealpha</span><span class="keyword">(</span><span class="default">$intermediateimage</span><span class="keyword">, </span><span class="default">$r</span><span class="keyword">, </span><span class="default">$g</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$alpha</span><span class="keyword">); <br />
<br />
</span><span class="default">imagealphablending</span><span class="keyword">(</span><span class="default">$intermediateimage</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br />
</span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$intermediateimage</span><span class="keyword">, </span><span class="default">$fillstartx</span><span class="keyword">, </span><span class="default">$fillstarty</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);<br />
</span><span class="default">imagesettile</span><span class="keyword">(</span><span class="default">$mainimage</span><span class="keyword">, </span><span class="default">$intermediateimage</span><span class="keyword">);&nbsp; </span><span class="comment">//set the filled copy as a tile to the main image<br />
<br />
</span><span class="default">imagealphablending</span><span class="keyword">(</span><span class="default">$mainimage</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">imagefilledrectangle</span><span class="keyword">(</span><span class="default">$mainimage</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$imagewidth</span><span class="keyword">, </span><span class="default">$imageheight</span><span class="keyword">, </span><span class="default">IMG_COLOR_TILED</span><span class="keyword">); </span><span class="comment">//apply the tile copy on top of the original<br />
<br />
</span><span class="default">imagealphablending</span><span class="keyword">(</span><span class="default">$mainimage</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br />
</span><span class="default">imagesavealpha</span><span class="keyword">(</span><span class="default">$mainimage</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$mainimage</span><span class="keyword">, </span><span class="string">"myimage.png"</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$intermediateimage</span><span class="keyword">);<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$mainimage</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93920""></a>
  <div class="note">
   <strong class="user">Christopher Kramer</strong>
   <a href="#93920" class="date">06-Oct-2009 03:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a function to generate a gradient.<br />
You specify width, heigth and 4 colors (of the 4 corners).<br />
<br />
An image handle of the gradient image will be returned.<br />
You can copy the returned image onto another image using imageecopy.<br />
This can be helpful if you want to generate a shadow for example.<br />
("Glow effect example": Generate 8 gradients, one for each side and one for each corner. The outer side of the gradients have the background color and the inner sides have a bright color such as white.)&nbsp; <br />
<br />
But beware: This function is not optimized for performance, it might become slow on big images. For shadows, better cache the generated gradients.<br />
<br />
Note: For gradients, using true-color is highly recommended.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">gradient</span><span class="keyword">(</span><span class="default">$w</span><span class="keyword">=</span><span class="default">100</span><span class="keyword">, </span><span class="default">$h</span><span class="keyword">=</span><span class="default">100</span><span class="keyword">, </span><span class="default">$c</span><span class="keyword">=array(</span><span class="string">'#FFFFFF'</span><span class="keyword">,</span><span class="string">'#FF0000'</span><span class="keyword">,</span><span class="string">'#00FF00'</span><span class="keyword">,</span><span class="string">'#0000FF'</span><span class="keyword">), </span><span class="default">$hex</span><span class="keyword">=</span><span class="default">true</span><span class="keyword">) {<br />
<br />
&nbsp;</span><span class="comment">/*<br />
&nbsp;Generates a gradient image<br />
<br />
&nbsp;Author: Christopher Kramer<br />
&nbsp;<br />
&nbsp;Parameters:<br />
&nbsp;w: width in px<br />
&nbsp;h: height in px<br />
&nbsp;c: color-array with 4 elements:<br />
&nbsp;&nbsp;&nbsp; $c[0]:&nbsp;&nbsp; top left color<br />
&nbsp;&nbsp;&nbsp; $c[1]:&nbsp;&nbsp; top right color<br />
&nbsp;&nbsp;&nbsp; $c[2]:&nbsp;&nbsp; bottom left color<br />
&nbsp;&nbsp;&nbsp; $c[3]:&nbsp;&nbsp; bottom right color<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;if $hex is true (default), colors are hex-strings like '#FFFFFF' (NOT '#FFF')<br />
&nbsp;if $hex is false, a color is an array of 3 elements which are the rgb-values, e.g.:<br />
&nbsp;$c[0]=array(0,255,255);<br />
&nbsp;<br />
&nbsp;*/<br />
&nbsp;<br />
&nbsp;</span><span class="default">$im</span><span class="keyword">=</span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">$w</span><span class="keyword">,</span><span class="default">$h</span><span class="keyword">);<br />
&nbsp;<br />
&nbsp;if(</span><span class="default">$hex</span><span class="keyword">) {&nbsp; </span><span class="comment">// convert hex-values to rgb<br />
&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">3</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) { <br />
&nbsp;&nbsp; </span><span class="default">$c</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">hex2rgb</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
&nbsp; }<br />
&nbsp;}<br />
&nbsp;<br />
&nbsp;</span><span class="default">$rgb</span><span class="keyword">=</span><span class="default">$c</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]; </span><span class="comment">// start with top left color<br />
&nbsp;</span><span class="keyword">for(</span><span class="default">$x</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">&lt;=</span><span class="default">$w</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">++) { </span><span class="comment">// loop columns<br />
&nbsp; </span><span class="keyword">for(</span><span class="default">$y</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$y</span><span class="keyword">&lt;=</span><span class="default">$h</span><span class="keyword">;</span><span class="default">$y</span><span class="keyword">++) { </span><span class="comment">// loop rows<br />
&nbsp;&nbsp; // set pixel color <br />
&nbsp;&nbsp; </span><span class="default">$col</span><span class="keyword">=</span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">,</span><span class="default">$rgb</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$rgb</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">],</span><span class="default">$rgb</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br />
&nbsp;&nbsp; </span><span class="default">imagesetpixel</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$col</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// calculate new color&nbsp; <br />
&nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">2</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rgb</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$c</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]*((</span><span class="default">$w</span><span class="keyword">-</span><span class="default">$x</span><span class="keyword">)*(</span><span class="default">$h</span><span class="keyword">-</span><span class="default">$y</span><span class="keyword">)/(</span><span class="default">$w</span><span class="keyword">*</span><span class="default">$h</span><span class="keyword">)) +<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$c</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]*(</span><span class="default">$x&nbsp; &nbsp;&nbsp; </span><span class="keyword">*(</span><span class="default">$h</span><span class="keyword">-</span><span class="default">$y</span><span class="keyword">)/(</span><span class="default">$w</span><span class="keyword">*</span><span class="default">$h</span><span class="keyword">)) +<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$c</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]*((</span><span class="default">$w</span><span class="keyword">-</span><span class="default">$x</span><span class="keyword">)*</span><span class="default">$y&nbsp; &nbsp;&nbsp; </span><span class="keyword">/(</span><span class="default">$w</span><span class="keyword">*</span><span class="default">$h</span><span class="keyword">)) +<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$c</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]*(</span><span class="default">$x&nbsp; &nbsp;&nbsp; </span><span class="keyword">*</span><span class="default">$y&nbsp; &nbsp;&nbsp; </span><span class="keyword">/(</span><span class="default">$w</span><span class="keyword">*</span><span class="default">$h</span><span class="keyword">));<br />
&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp;}<br />
&nbsp;return </span><span class="default">$im</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">hex2rgb</span><span class="keyword">(</span><span class="default">$hex</span><span class="keyword">)<br />
&nbsp;{<br />
&nbsp;</span><span class="default">$rgb</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]=</span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$hex</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">));<br />
&nbsp;</span><span class="default">$rgb</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]=</span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$hex</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">));<br />
&nbsp;</span><span class="default">$rgb</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]=</span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$hex</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">));<br />
&nbsp;return(</span><span class="default">$rgb</span><span class="keyword">);<br />
&nbsp;}<br />
<br />
</span><span class="comment">// usage example<br />
<br />
</span><span class="default">$image</span><span class="keyword">=</span><span class="default">gradient</span><span class="keyword">(</span><span class="default">300</span><span class="keyword">, </span><span class="default">300</span><span class="keyword">, array(</span><span class="string">'#000000'</span><span class="keyword">, </span><span class="string">'#FFFFFF'</span><span class="keyword">, </span><span class="string">'#FF0000'</span><span class="keyword">, </span><span class="string">'#0000FF'</span><span class="keyword">));<br />
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-type: image/png'</span><span class="keyword">);<br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85474""></a>
  <div class="note">
   <strong class="user">dunhamzzz [A] gmail</strong>
   <a href="#85474" class="date">01-Sep-2008 08:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I feel its worth pointing out that you cannot fill a transparent colour that you have assigned with imagecolorallocatealpha, the colour will fill, but without its transparency,<br />
<br />
I find the easiest method around this is to just fill a rectangle using imagefilledrectangle() to draw a fill instead.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84288""></a>
  <div class="note">
   <strong class="user">daniel_nocturnal at hotmail dot com</strong>
   <a href="#84288" class="date">07-Jul-2008 07:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've used razonklnbd's example, I had to fill an image with a background pattern from an image (file). So I put the code to pieces and come up with a lighter version that suited me, all thanks to razonklnbd.<br />
<br />
My version receives three parameters, $image, $width, $height.<br />
<br />
$image = The background pattern image<br />
$width = Width of the new image<br />
$height = Height of the new image<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">imagefillfromfile</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$width</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$imageWidth </span><span class="keyword">= </span><span class="default">imagesx</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$imageHeight </span><span class="keyword">= </span><span class="default">imagesy</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newImage </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">$width</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$imageX </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$imageX </span><span class="keyword">&lt; </span><span class="default">$width</span><span class="keyword">; </span><span class="default">$imageX </span><span class="keyword">+= </span><span class="default">$imageWidth</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$imageY </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$imageY </span><span class="keyword">&lt; </span><span class="default">$height</span><span class="keyword">; </span><span class="default">$imageY </span><span class="keyword">+= </span><span class="default">$imageHeight</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagecopy</span><span class="keyword">(</span><span class="default">$newImage</span><span class="keyword">, </span><span class="default">$image</span><span class="keyword">, </span><span class="default">$imageX</span><span class="keyword">, </span><span class="default">$imageY</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$imageWidth</span><span class="keyword">, </span><span class="default">$imageHeight</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="default">$newImage</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$newImage</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
This function returns a new image with a filled canvas of an image (file) with a fixed width/height.<br />
<br />
Example usage:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $pattern </span><span class="keyword">= </span><span class="default">imagecreatefrompng</span><span class="keyword">(</span><span class="string">'pattern.png'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$image </span><span class="keyword">= </span><span class="default">imagefillfromfile</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">400</span><span class="keyword">, </span><span class="default">300</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81873""></a>
  <div class="note">
   <strong class="user">Cypog</strong>
   <a href="#81873" class="date">17-Mar-2008 07:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
imagefill can't deal with alpha colors, use imagefilledrectangle instead.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; header</span><span class="keyword">(</span><span class="string">"Content-Type: image/png"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$im </span><span class="keyword">= </span><span class="default">imagecreatefrompng</span><span class="keyword">(</span><span class="string">"img/button.png"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (empty(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'alpha'</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'alpha'</span><span class="keyword">] = </span><span class="default">10</span><span class="keyword">;}<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$color </span><span class="keyword">= </span><span class="default">imagecolorallocatealpha</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'alpha'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagefillalpha</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">ImageFillAlpha</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagefilledrectangle</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">imagesx</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">), </span><span class="default">imagesy</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">), </span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73770""></a>
  <div class="note">
   <strong class="user">info at educar dot pro dot br</strong>
   <a href="#73770" class="date">09-Mar-2007 07:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Example 1<br />
The filled region will be external to a demarcated region, if the initial coordinates will be outside of this region.<br />
<br />
<span class="default">&lt;?php<br />
$src621 </span><span class="keyword">= </span><span class="default">imagecreate</span><span class="keyword">(</span><span class="default">200</span><span class="keyword">,</span><span class="default">200</span><span class="keyword">); <br />
</span><span class="default">$clr_1_621 </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$src621</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">$clr_2_621 </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$src621</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">250</span><span class="keyword">);<br />
</span><span class="default">$clr_4_621 </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$src621</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">55</span><span class="keyword">);<br />
</span><span class="default">imagerectangle</span><span class="keyword">(</span><span class="default">$src621</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">, </span><span class="default">150</span><span class="keyword">, </span><span class="default">150</span><span class="keyword">, </span><span class="default">$clr_4_621</span><span class="keyword">);<br />
</span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$src621</span><span class="keyword">, </span><span class="default">110</span><span class="keyword">, </span><span class="default">110</span><span class="keyword">, </span><span class="default">$clr_2_621</span><span class="keyword">);<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Type: image/png"</span><span class="keyword">);<br />
</span><span class="default">imagepng </span><span class="keyword">(</span><span class="default">$src621</span><span class="keyword">);<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$src621</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Example 2<br />
The filled region will be internal to a demarcated region, if the initial coordinates will be inside of this region. <br />
<span class="default">&lt;?php<br />
$src622 </span><span class="keyword">= </span><span class="default">imagecreate</span><span class="keyword">(</span><span class="default">200</span><span class="keyword">,</span><span class="default">200</span><span class="keyword">); <br />
</span><span class="default">$clr_1_622 </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$src622</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">$clr_2_622 </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$src622</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">250</span><span class="keyword">);<br />
</span><span class="default">$clr_4_622 </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$src622</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">55</span><span class="keyword">);<br />
</span><span class="default">imagerectangle</span><span class="keyword">(</span><span class="default">$src622</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">, </span><span class="default">150</span><span class="keyword">, </span><span class="default">150</span><span class="keyword">, </span><span class="default">$clr_4_622</span><span class="keyword">);<br />
</span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$src622</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">$clr_2_622</span><span class="keyword">);<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Type: image/png"</span><span class="keyword">);<br />
</span><span class="default">imagepng </span><span class="keyword">(</span><span class="default">$src622</span><span class="keyword">);<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$src622</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
See another examples at:<br />
<a href="http://www.educar.pro.br/a/gdlib/index.php?pn=50&amp;tr=97" rel="nofollow" target="_blank">http://www.educar.pro.br/a/gdlib/index.php?pn=50&amp;tr=97</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73686""></a>
  <div class="note">
   <strong class="user">Gromitt</strong>
   <a href="#73686" class="date">06-Mar-2007 10:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to fill a whole image (immediatly after its creation for instance), consider applying a filled rectangle instead, using imagefilledrectangle() :<br />
<br />
<span class="default">&lt;?php<br />
<br />
$gdImage </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">100</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">);<br />
</span><span class="default">$gdColor </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$gdImage</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">); </span><span class="comment">// red<br />
</span><span class="default">imagefilledrectangle</span><span class="keyword">(</span><span class="default">$gdImage</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">99</span><span class="keyword">, </span><span class="default">99</span><span class="keyword">, </span><span class="default">$gdColor</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
which will require much less logic and processing from GD.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69865""></a>
  <div class="note">
   <strong class="user">razonklnbd at yahoo dot com</strong>
   <a href="#69865" class="date">24-Sep-2006 03:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I spend more then two hour to find a function that can fill a pattern or file as background instead of color. but i can't find. so i develop the following function. i though this function will save time who need it...<br />
<br />
Function will get four parameter<br />
1. Main Image Identifier<br />
2. Pattern Image Identifier<br />
3. Final Image Width<br />
4. Final Image Height<br />
<br />
If you set final image width or height is less then main image width or height then you may get wrong result<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">fill_with_patternfile</span><span class="keyword">(</span><span class="default">$p_main_im</span><span class="keyword">, </span><span class="default">$p_patternfile_im</span><span class="keyword">, </span><span class="default">$p_width</span><span class="keyword">, </span><span class="default">$p_height</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pimiX</span><span class="keyword">=</span><span class="default">$p_patternfile_im</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pw</span><span class="keyword">=</span><span class="default">imagesx</span><span class="keyword">(</span><span class="default">$pimiX</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ph</span><span class="keyword">=</span><span class="default">imagesy</span><span class="keyword">(</span><span class="default">$pimiX</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$targetImageIdentifier</span><span class="keyword">=</span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">$p_width</span><span class="keyword">,</span><span class="default">$p_height</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$pw</span><span class="keyword">&lt;</span><span class="default">$p_width </span><span class="keyword">&amp;&amp; </span><span class="default">$ph</span><span class="keyword">&lt;</span><span class="default">$p_height</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$pX</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$pX</span><span class="keyword">&lt;</span><span class="default">$p_width</span><span class="keyword">;</span><span class="default">$pX</span><span class="keyword">+=</span><span class="default">$pw</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$pY</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$pY</span><span class="keyword">&lt;</span><span class="default">$p_height</span><span class="keyword">;</span><span class="default">$pY</span><span class="keyword">+=</span><span class="default">$ph</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagecopy</span><span class="keyword">(</span><span class="default">$targetImageIdentifier</span><span class="keyword">,</span><span class="default">$pimiX</span><span class="keyword">,</span><span class="default">$pX</span><span class="keyword">,</span><span class="default">$pY</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$pw</span><span class="keyword">,</span><span class="default">$ph</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }else </span><span class="default">imagecopy</span><span class="keyword">(</span><span class="default">$targetImageIdentifier</span><span class="keyword">,</span><span class="default">$pimiX</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$pw</span><span class="keyword">,</span><span class="default">$ph</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$w</span><span class="keyword">=</span><span class="default">imagesx</span><span class="keyword">(</span><span class="default">$p_main_im</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$h</span><span class="keyword">=</span><span class="default">imagesy</span><span class="keyword">(</span><span class="default">$p_main_im</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nX</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$w</span><span class="keyword">&lt;</span><span class="default">$p_width</span><span class="keyword">) </span><span class="default">$nX</span><span class="keyword">=</span><span class="default">intval</span><span class="keyword">((</span><span class="default">$p_width</span><span class="keyword">-</span><span class="default">$w</span><span class="keyword">)/</span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nY</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$h</span><span class="keyword">&lt;</span><span class="default">$p_height</span><span class="keyword">) </span><span class="default">$nY</span><span class="keyword">=</span><span class="default">intval</span><span class="keyword">((</span><span class="default">$p_height</span><span class="keyword">-</span><span class="default">$h</span><span class="keyword">)/</span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagecopy</span><span class="keyword">(</span><span class="default">$targetImageIdentifier</span><span class="keyword">,</span><span class="default">$p_main_im</span><span class="keyword">,</span><span class="default">$nX</span><span class="keyword">,</span><span class="default">$nY</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$w</span><span class="keyword">,</span><span class="default">$h</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$targetImageIdentifier</span><span class="keyword">;<br />
}<br />
</span><span class="comment">//&nbsp; &nbsp; If you want to use a gif or png file as<br />
//&nbsp; &nbsp; pattern file you need to change function below :)<br />
</span><span class="default">$pattern_im</span><span class="keyword">=</span><span class="default">imagecreatefromjpeg</span><span class="keyword">(</span><span class="string">'logo.jpg'</span><span class="keyword">);<br />
</span><span class="comment">//&nbsp; &nbsp; If you want to use a gif or png file as<br />
//&nbsp; &nbsp; main file you need to change function below :)<br />
</span><span class="default">$main_im</span><span class="keyword">=</span><span class="default">imagecreatefromjpeg</span><span class="keyword">(</span><span class="string">'r2.jpg'</span><span class="keyword">);<br />
</span><span class="comment">//&nbsp; &nbsp; call the function width 500 and height 500<br />
//&nbsp; &nbsp; if your width and height is less then main images<br />
//&nbsp; &nbsp; width and height then you can't understand any change!<br />
</span><span class="default">$final</span><span class="keyword">=</span><span class="default">fill_with_patternfile</span><span class="keyword">(</span><span class="default">$main_im</span><span class="keyword">, </span><span class="default">$pattern_im</span><span class="keyword">, </span><span class="default">500</span><span class="keyword">, </span><span class="default">500</span><span class="keyword">);<br />
</span><span class="comment">//&nbsp; &nbsp; view the image and destroy all instance<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-type: image/jpeg'</span><span class="keyword">);<br />
</span><span class="default">imagejpeg</span><span class="keyword">(</span><span class="default">$final</span><span class="keyword">);<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$final</span><span class="keyword">);<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$main_im</span><span class="keyword">);<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$pattern_im</span><span class="keyword">);<br />
exit();<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67593""></a>
  <div class="note">
   <strong class="user">jonathan dot aquino at gmail dot com</strong>
   <a href="#67593" class="date">08-Jun-2006 03:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Use imageSaveAlpha($image, true); to preserve transparency.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59229""></a>
  <div class="note">
   <strong class="user">gelak</strong>
   <a href="#59229" class="date">29-Nov-2005 11:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
//A smiley face ;]<br />
<br />
<span class="default">&lt;?php<br />
<br />
header</span><span class="keyword">(</span><span class="string">'Content-type: image/png'</span><span class="keyword">);<br />
<br />
</span><span class="default">$smile</span><span class="keyword">=</span><span class="default">imagecreate</span><span class="keyword">(</span><span class="default">400</span><span class="keyword">,</span><span class="default">400</span><span class="keyword">);<br />
</span><span class="default">$kek</span><span class="keyword">=</span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$smile</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">);<br />
</span><span class="default">$feher</span><span class="keyword">=</span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$smile</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">);<br />
</span><span class="default">$sarga</span><span class="keyword">=</span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$smile</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">$fekete</span><span class="keyword">=</span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$smile</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$smile</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$kek</span><span class="keyword">);<br />
<br />
</span><span class="default">imagearc</span><span class="keyword">(</span><span class="default">$smile</span><span class="keyword">,</span><span class="default">200</span><span class="keyword">,</span><span class="default">200</span><span class="keyword">,</span><span class="default">300</span><span class="keyword">,</span><span class="default">300</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">360</span><span class="keyword">,</span><span class="default">$fekete</span><span class="keyword">);<br />
</span><span class="default">imagearc</span><span class="keyword">(</span><span class="default">$smile</span><span class="keyword">,</span><span class="default">200</span><span class="keyword">,</span><span class="default">225</span><span class="keyword">,</span><span class="default">200</span><span class="keyword">,</span><span class="default">150</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">180</span><span class="keyword">,</span><span class="default">$fekete</span><span class="keyword">);<br />
</span><span class="default">imagearc</span><span class="keyword">(</span><span class="default">$smile</span><span class="keyword">,</span><span class="default">200</span><span class="keyword">,</span><span class="default">225</span><span class="keyword">,</span><span class="default">200</span><span class="keyword">,</span><span class="default">123</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">180</span><span class="keyword">,</span><span class="default">$fekete</span><span class="keyword">);<br />
</span><span class="default">imagearc</span><span class="keyword">(</span><span class="default">$smile</span><span class="keyword">,</span><span class="default">150</span><span class="keyword">,</span><span class="default">150</span><span class="keyword">,</span><span class="default">20</span><span class="keyword">,</span><span class="default">20</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">360</span><span class="keyword">,</span><span class="default">$fekete</span><span class="keyword">);<br />
</span><span class="default">imagearc</span><span class="keyword">(</span><span class="default">$smile</span><span class="keyword">,</span><span class="default">250</span><span class="keyword">,</span><span class="default">150</span><span class="keyword">,</span><span class="default">20</span><span class="keyword">,</span><span class="default">20</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">360</span><span class="keyword">,</span><span class="default">$fekete</span><span class="keyword">);<br />
</span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$smile</span><span class="keyword">,</span><span class="default">200</span><span class="keyword">,</span><span class="default">200</span><span class="keyword">,</span><span class="default">$sarga</span><span class="keyword">);<br />
</span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$smile</span><span class="keyword">,</span><span class="default">200</span><span class="keyword">,</span><span class="default">290</span><span class="keyword">,</span><span class="default">$fekete</span><span class="keyword">);<br />
</span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$smile</span><span class="keyword">,</span><span class="default">155</span><span class="keyword">,</span><span class="default">155</span><span class="keyword">,</span><span class="default">$fekete</span><span class="keyword">);<br />
</span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$smile</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">155</span><span class="keyword">,</span><span class="default">$fekete</span><span class="keyword">);<br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$smile</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59222""></a>
  <div class="note">
   <strong class="user">pisu at estmail dot hu</strong>
   <a href="#59222" class="date">29-Nov-2005 01:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
chess board<br />
<span class="default">&lt;?php<br />
<br />
$kep </span><span class="keyword">= </span><span class="default">imagecreate</span><span class="keyword">(</span><span class="default">400</span><span class="keyword">,</span><span class="default">400</span><span class="keyword">);<br />
</span><span class="default">$fekete </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$kep</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">$feher </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$kep</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">);<br />
<br />
</span><span class="comment">//imagefill($kep,50,50,$fekete);<br />
</span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$kep</span><span class="keyword">,</span><span class="default">50</span><span class="keyword">,</span><span class="default">20</span><span class="keyword">,</span><span class="default">$feher</span><span class="keyword">);<br />
<br />
for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">8</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)&nbsp; {<br />
&nbsp; </span><span class="default">$k </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">*</span><span class="default">50</span><span class="keyword">;<br />
&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$kep</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$k</span><span class="keyword">,</span><span class="default">400</span><span class="keyword">,</span><span class="default">$k</span><span class="keyword">,</span><span class="default">$fekete</span><span class="keyword">);<br />
&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$kep</span><span class="keyword">,</span><span class="default">$k</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$k</span><span class="keyword">,</span><span class="default">400</span><span class="keyword">,</span><span class="default">$fekete</span><span class="keyword">);<br />
&nbsp; }<br />
<br />
for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">8</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)&nbsp; {<br />
&nbsp; for (</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">8</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">++)&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">*</span><span class="default">50 </span><span class="keyword">+ </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">$j</span><span class="keyword">*</span><span class="default">50 </span><span class="keyword">+ </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (&nbsp; ( (</span><span class="default">$i </span><span class="keyword">% </span><span class="default">2</span><span class="keyword">) + (</span><span class="default">$j </span><span class="keyword">% </span><span class="default">2</span><span class="keyword">) )&nbsp; % </span><span class="default">2 </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">)&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$kep</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">,</span><span class="default">$fekete</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
</span><span class="comment">// imagecolortransparent($kek,$piros);<br />
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">'content-type : image/png'</span><span class="keyword">);<br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$kep</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55280""></a>
  <div class="note">
   <strong class="user">colin at galaxyinteractive dot net</strong>
   <a href="#55280" class="date">28-Jul-2005 08:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Didn't see this documented, although it's outlined in imagefilledrectangle, it wasn't quite so obvious to me at first<br />
<br />
imageSetTile($image,$imageBack);<br />
imagefill($image,0,0,IMG_COLOR_TILED);<br />
<br />
Will fill an image with a texture (this is great as I'm building a logo/template creator)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="33518""></a>
  <div class="note">
   <strong class="user">Igor Garcia</strong>
   <a href="#33518" class="date">28-Jun-2003 03:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function, cannot deal with transparencies. <br />
So you need to use imagecolorallocate instead of imagecolorallocatealpha.<br />
Thus, be careful with color variables that allready set with imageallocatecoloralpha because this can slow-down or hang-up your system.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32712""></a>
  <div class="note">
   <strong class="user">norxh</strong>
   <a href="#32712" class="date">04-Jun-2003 08:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For new images, you must allocate a color before this function will work.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29283""></a>
  <div class="note">
   
   <a href="#29283" class="date">08-Feb-2003 05:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Actually, it can handle pre-transparent images. To remove it you need to do something like:<br />
&nbsp;&nbsp; imagecolortransparent($img, 0);<br />
to null out the previous transparency colors. ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="3109""></a>
  <div class="note">
   <strong class="user">aqmprod at iname dot com</strong>
   <a href="#3109" class="date">09-Jan-2000 05:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function does not seem to work with images already been transparent. If you fill at x=0, y=0, and there are still transparent parts that you did<br />
not reach with your fill, they change to a different color.<br />
<br />
The ImageColorSet function seems to be the solution, but i can't work with transparancy.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.imageellipse.html">imageellipse</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.imagefilledarc.html">imagefilledarc</a></div>
 <div class="up"><a href="ref.image.html">GD and Image Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
