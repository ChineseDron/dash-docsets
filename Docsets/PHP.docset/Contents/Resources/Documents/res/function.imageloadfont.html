<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Load a new font</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.imageline.html">imageline</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.imagepalettecopy.html">imagepalettecopy</a></div>
 <div class="up"><a href="ref.image.html">GD and Image Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.imageloadfont" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">imageloadfont</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">imageloadfont</span> &mdash; <span class="dc-title">Load a new font</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.imageloadfont-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><b>imageloadfont</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$file</tt></span>
   )</div>

  <p class="para rdfs-comment">
   <span class="function"><b>imageloadfont()</b></span> loads a user-defined bitmap and returns
   its identifier.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.imageloadfont-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">file</tt></i></span>
     <dd>

      <p class="para">
       The font file format is currently binary and architecture
       dependent.  This means you should generate the font files on the
       same type of CPU as the machine you are running PHP on.
      </p>
      <p class="para">
       <table class="doctable table">
        <caption><b>Font file format</b></caption>
        
         <thead valign="middle">
         <tr valign="middle">
          <th>byte position</th>
          <th>C data type</th>
          <th>description</th>
         </tr>

         </thead>

         <tbody valign="middle" class="tbody">
          <tr valign="middle">
           <td align="left">byte 0-3</td>
           <td align="left">int</td>
           <td align="left">number of characters in the font</td>
          </tr>

          <tr valign="middle">
           <td align="left">byte 4-7</td>
           <td align="left">int</td>
           <td align="left">
            value of first character in the font (often 32 for space)
           </td>
          </tr>

          <tr valign="middle">
           <td align="left">byte 8-11</td>
           <td align="left">int</td>
           <td align="left">pixel width of each character</td>
          </tr>

          <tr valign="middle">
           <td align="left">byte 12-15</td>
           <td align="left">int</td>
           <td align="left">pixel height of each character</td>
          </tr>

          <tr valign="middle">
           <td align="left">byte 16-</td>
           <td align="left">char</td>
           <td align="left">
            array with character data, one byte per pixel in each
            character, for a total of (nchars*width*height) bytes.
           </td>
          </tr>

         </tbody>
        
       </table>

      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.imageloadfont-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   The font identifier which is always bigger than 5 to avoid conflicts with
   built-in fonts or <b><tt>FALSE</tt></b> on errors.
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.imageloadfont-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-3008">
    <p><b>Example #1 <span class="function"><b>imageloadfont()</b></span> usage example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Create&nbsp;a&nbsp;new&nbsp;image&nbsp;instance<br /></span><span style="color: #0000BB">$im&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imagecreatetruecolor</span><span style="color: #007700">(</span><span style="color: #0000BB">50</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">20</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$black&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imagecolorallocate</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$white&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imagecolorallocate</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">255</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Make&nbsp;the&nbsp;background&nbsp;white<br /></span><span style="color: #0000BB">imagefilledrectangle</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">49</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">19</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$white</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Load&nbsp;the&nbsp;gd&nbsp;font&nbsp;and&nbsp;write&nbsp;'Hello'<br /></span><span style="color: #0000BB">$font&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imageloadfont</span><span style="color: #007700">(</span><span style="color: #DD0000">'./04b.gdf'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">imagestring</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$font</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Hello'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$black</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Output&nbsp;to&nbsp;browser<br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-type:&nbsp;image/png'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">imagepng</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">imagedestroy</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.imageloadfont-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.imagefontwidth.html" class="function" rel="rdfs-seeAlso">imagefontwidth()</a> - Get font width</span></li>
    <li class="member"><span class="function"><a href="function.imagefontheight.html" class="function" rel="rdfs-seeAlso">imagefontheight()</a> - Get font height</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="56263""></a>
  <div class="note">
   <strong class="user">siker at norwinter dot com</strong>
   <a href="#56263" class="date">28-Aug-2005 06:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Working under the assumption that the only 'architecture dependant' part of the font files is endianness, I wrote a quick and dirty Python script to convert between the two. It has only been tested on a single font on a single machine so don't bet your life on it working. All it does is swap the byte order of the first four ints.<br />
<br />
#!/usr/bin/env python<br />
<br />
f = open("myfont.gdf", "rb");<br />
d = open("myconvertedfont.gdf", "wb");<br />
<br />
for i in xrange(4):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; b = [f.read(1) for j in xrange(4)];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; b.reverse();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; d.write(''.join(b));<br />
<br />
d.write(f.read());<br />
<br />
I successfully used this script to convert anonymous.gdf, from one of the font links below, into something useable on Mac OS X.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55849""></a>
  <div class="note">
   <strong class="user">matthew at exanimo dot com</strong>
   <a href="#55849" class="date">15-Aug-2005 10:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Remember - GD fonts aren't antialiased.&nbsp; If you're planning on using a pre-existing (TrueType) font, you may want to consider using imagettftext() instead of phillip's function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54385""></a>
  <div class="note">
   <strong class="user">alex at bestgames dot ro</strong>
   <a href="#54385" class="date">02-Jul-2005 05:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Confirmation code generation for preventing automated registrations on a website.<br />
<br />
Function arguments are:<br />
$code - the code that you shall random generate<br />
$location - relative location of the image that shall be generated<br />
$fonts_dir - relative location for the GDF fonts directory<br />
<br />
This function will create an image with the code given by you and will save it in the directory specified with the name formed by MD5 hash of the code.<br />
<br />
You may insert as many font types in the fonts directory as you wish, with random names.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">generate_image</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">, </span><span class="default">$location</span><span class="keyword">, </span><span class="default">$fonts_dir</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$image&nbsp; </span><span class="keyword">= </span><span class="default">imagecreate</span><span class="keyword">(</span><span class="default">150</span><span class="keyword">, </span><span class="default">60</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">), </span><span class="default">rand</span><span class="keyword">(</span><span class="default">100</span><span class="keyword">, </span><span class="default">150</span><span class="keyword">), </span><span class="default">rand</span><span class="keyword">(</span><span class="default">150</span><span class="keyword">, </span><span class="default">250</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$fonts </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$fonts_dir</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$max </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$fonts</span><span class="keyword">) - </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$width </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; {&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$textcolor </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rand </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">, </span><span class="default">$max</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$font </span><span class="keyword">= </span><span class="default">imageloadfont</span><span class="keyword">(</span><span class="default">$fonts_dir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$fonts</span><span class="keyword">[</span><span class="default">$rand</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fh </span><span class="keyword">= </span><span class="default">imagefontheight</span><span class="keyword">(</span><span class="default">$font</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fw </span><span class="keyword">= </span><span class="default">imagefontwidth</span><span class="keyword">(</span><span class="default">$font</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imagechar</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="default">$width</span><span class="keyword">, </span><span class="default">rand</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">, </span><span class="default">50 </span><span class="keyword">- </span><span class="default">$fh</span><span class="keyword">), </span><span class="default">$code</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$textcolor</span><span class="keyword">);&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$width </span><span class="keyword">= </span><span class="default">$width </span><span class="keyword">+ </span><span class="default">$fw</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; </span><span class="default">imagejpeg</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$location</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">md5</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">).</span><span class="string">".jpg"</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">$code</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; <br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52151""></a>
  <div class="note">
   <strong class="user">puremango dot co dot uk at gmail dot com</strong>
   <a href="#52151" class="date">22-Apr-2005 05:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've written an online tool in PHP that allows you to create GD fonts from PNG images.<br />
<br />
much usefulness for custom font creation, I feel.<br />
<br />
see the tool@<br />
<a href="http://puremango.co.uk/cm_fontmaker_114.php" rel="nofollow" target="_blank">http://puremango.co.uk/cm_fontmaker_114.php</a><br />
(source available online)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48409""></a>
  <div class="note">
   <strong class="user">null at phpmix dot com</strong>
   <a href="#48409" class="date">22-Dec-2004 09:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sometime ago I wrote a small tutorial on how to create dynamic signatures using gd_fonts. I also uploaded some gd_fonts...<br />
<br />
You can check it out here, if you wish:<br />
<a href="http://www.phpmix.com/phpBB2/viewtopic.php?t=328" rel="nofollow" target="_blank">http://www.phpmix.com/phpBB2/viewtopic.php?t=328</a><br />
<br />
Hope that helps</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42974""></a>
  <div class="note">
   <strong class="user">widget at oneblacksheep dot com</strong>
   <a href="#42974" class="date">05-Jun-2004 05:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After noting the gd fonts page from dryes58 above was down I contacted the him and have put the pages up at <a href="http://www.widgnet.com/gdf_fonts/ hows about that then =" rel="nofollow" target="_blank">http://www.widgnet.com/gdf_fonts/ hows about that then =</a>)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="7977""></a>
  <div class="note">
   <strong class="user">angryziber at mail dot com</strong>
   <a href="#7977" class="date">23-Aug-2000 07:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You all should look at the GD image library site for information on extra fonts, it can be found at <a href="http://www.boutell.com/gd/" rel="nofollow" target="_blank">http://www.boutell.com/gd/</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.imageline.html">imageline</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.imagepalettecopy.html">imagepalettecopy</a></div>
 <div class="up"><a href="ref.image.html">GD and Image Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
