<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Converts Julian Day Count to Gregorian date</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.jdtofrench.html">JDToFrench</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.jdtojewish.html">jdtojewish</a></div>
 <div class="up"><a href="ref.calendar.html">Calendar Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.jdtogregorian" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">JDToGregorian</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">JDToGregorian</span> &mdash; <span class="dc-title">Converts Julian Day Count to Gregorian date</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.jdtogregorian-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><b>jdtogregorian</b></span>
    ( <span class="methodparam"><span class="type">int</span> <tt class="parameter">$julianday</tt></span>
   )</div>

  <p class="para rdfs-comment">
   Converts Julian Day Count to a string containing the Gregorian
   date in the format of &quot;month/day/year&quot;.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.jdtogregorian-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">julianday</tt></i></span>
     <dd>

      <p class="para">
       A julian day number as integer
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.jdtogregorian-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   The gregorian date as a string in the form &quot;month/day/year&quot;
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.jdtogregorian-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.gregoriantojd.html" class="function" rel="rdfs-seeAlso">gregoriantojd()</a> - Converts a Gregorian date to Julian Day Count</span></li> 
    <li class="member"><span class="function"><a href="function.cal-from-jd.html" class="function" rel="rdfs-seeAlso">cal_from_jd()</a> - Converts from Julian Day Count to a supported calendar</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="88469""></a>
  <div class="note">
   <strong class="user">swiles at ddbc dot edu dot tw</strong>
   <a href="#88469" class="date">25-Jan-2009 09:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The php gregoriantojd() and jdtogregorian() functions, in addition to the limitations noted by httpwebwitch, does not take account of the 'Astronomical' system of reckoning - i.e. using a year zero, instead of going directly from 1BCE to 1CE, as with the Christian Anno Domini system.<br />
<br />
These functions can be used to wrap the php built-ins to return ISO 8601 compliant dates:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">ISO8601toJD</span><span class="keyword">(</span><span class="default">$ceDate</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$day</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">) = </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'strrev'</span><span class="keyword">,</span><span class="default">explode</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">, </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$ceDate</span><span class="keyword">), </span><span class="default">3</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$year </span><span class="keyword">&lt;= </span><span class="default">0</span><span class="keyword">) </span><span class="default">$year</span><span class="keyword">--;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">gregoriantojd</span><span class="keyword">(</span><span class="default">$month</span><span class="keyword">, </span><span class="default">$day</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">);<br />
}<br />
<br />
function </span><span class="default">JDtoISO8601</span><span class="keyword">(</span><span class="default">$JD</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$JD </span><span class="keyword">&lt;= </span><span class="default">1721425</span><span class="keyword">) </span><span class="default">$JD </span><span class="keyword">+= </span><span class="default">365</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$month</span><span class="keyword">, </span><span class="default">$day</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">jdtogregorian</span><span class="keyword">(</span><span class="default">$JD</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%+05d-%02d-%02d'</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">, </span><span class="default">$day</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76993""></a>
  <div class="note">
   <strong class="user">lubosdz at hotmail dot com</strong>
   <a href="#76993" class="date">09-Aug-2007 03:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">// original script: <br />
// <a href="http://www.codeproject.com/datetime/exceldmy.asp" rel="nofollow" target="_blank">http://www.codeproject.com/datetime/exceldmy.asp</a><br />
// Excel/Lotus 123 have a bug with 29-02-1900. <br />
// 1900 is not a leap year, but Excel/Lotus 123 think it is...<br />
</span><span class="keyword">function </span><span class="default">excel_D2DMY</span><span class="keyword">(</span><span class="default">$days</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">$days </span><span class="keyword">&lt;</span><span class="default">1</span><span class="keyword">) return </span><span class="string">""</span><span class="keyword">;<br />
&nbsp; if (</span><span class="default">$days </span><span class="keyword">== </span><span class="default">60</span><span class="keyword">)&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return array(</span><span class="string">'day'</span><span class="keyword">=&gt;</span><span class="default">29</span><span class="keyword">,</span><span class="string">'month'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">,</span><span class="string">'year'</span><span class="keyword">=&gt;</span><span class="default">1900</span><span class="keyword">);<br />
&nbsp; } else { <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$days </span><span class="keyword">&lt; </span><span class="default">60</span><span class="keyword">)&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// Because of the 29-02-1900 bug, any serial date <br />
&nbsp;&nbsp; &nbsp;&nbsp; // under 60 is one off... Compensate.<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">++</span><span class="default">$days</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Modified Julian to DMY calculation with an addition of 2415019<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$l </span><span class="keyword">= </span><span class="default">$days </span><span class="keyword">+ </span><span class="default">68569 </span><span class="keyword">+ </span><span class="default">2415019</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(( </span><span class="default">4 </span><span class="keyword">* </span><span class="default">$l </span><span class="keyword">) / </span><span class="default">146097</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$l </span><span class="keyword">= </span><span class="default">$l </span><span class="keyword">- </span><span class="default">floor</span><span class="keyword">(( </span><span class="default">146097 </span><span class="keyword">* </span><span class="default">$n </span><span class="keyword">+ </span><span class="default">3 </span><span class="keyword">) / </span><span class="default">4</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(( </span><span class="default">4000 </span><span class="keyword">* ( </span><span class="default">$l </span><span class="keyword">+ </span><span class="default">1 </span><span class="keyword">) ) / </span><span class="default">1461001</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$l </span><span class="keyword">= </span><span class="default">$l </span><span class="keyword">- </span><span class="default">floor</span><span class="keyword">(( </span><span class="default">1461 </span><span class="keyword">* </span><span class="default">$i </span><span class="keyword">) / </span><span class="default">4</span><span class="keyword">) + </span><span class="default">31</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$j </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(( </span><span class="default">80 </span><span class="keyword">* </span><span class="default">$l </span><span class="keyword">) / </span><span class="default">2447</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nDay </span><span class="keyword">= </span><span class="default">$l </span><span class="keyword">- </span><span class="default">floor</span><span class="keyword">(( </span><span class="default">2447 </span><span class="keyword">* </span><span class="default">$j </span><span class="keyword">) / </span><span class="default">80</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$l </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$j </span><span class="keyword">/ </span><span class="default">11</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nMonth </span><span class="keyword">= </span><span class="default">$j </span><span class="keyword">+ </span><span class="default">2 </span><span class="keyword">- ( </span><span class="default">12 </span><span class="keyword">* </span><span class="default">$l </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nYear </span><span class="keyword">= </span><span class="default">100 </span><span class="keyword">* ( </span><span class="default">$n </span><span class="keyword">- </span><span class="default">49 </span><span class="keyword">) + </span><span class="default">$i </span><span class="keyword">+ </span><span class="default">$l</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= array(</span><span class="string">'day'</span><span class="keyword">=&gt;</span><span class="default">$nDay</span><span class="keyword">,</span><span class="string">'month'</span><span class="keyword">=&gt;</span><span class="default">$nMonth</span><span class="keyword">,</span><span class="string">'year'</span><span class="keyword">=&gt;</span><span class="default">$nYear</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="comment">/**<br />
* @desc Returns Excel serialDate constant calculated from gregorian date<br />
* original javascript found @ <a href="http://wwwmacho.mcmaster.ca/JAVA/JD.html" rel="nofollow" target="_blank">http://wwwmacho.mcmaster.ca/JAVA/JD.html</a><br />
* ported to PHP by XL:-)<br />
* <br />
* tested compatibility with EXCEL dates between 01/01/1900..31.12.2099, <br />
* year given eventually as 0 (=1900)..199 (=2099)<br />
* adds also days if supplied argument more than real number of days <br />
* in particular month (same applies to months)<br />
* as for years bellow 1900: algorhytm is not exact, therefore limitation <br />
* for years 1900 - 2099<br />
*/<br />
</span><span class="keyword">function </span><span class="default">excel_DMY2D</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$uh</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$um</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$us</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$y</span><span class="keyword">&lt;</span><span class="default">1900</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$y</span><span class="keyword">&lt;</span><span class="default">0 </span><span class="keyword">|| </span><span class="default">$y</span><span class="keyword">&gt;</span><span class="default">199</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">' !!! Invalid year ['</span><span class="keyword">.</span><span class="default">$y</span><span class="keyword">.</span><span class="string">'], must be between 1900 - 2099 or 0 - 199 !!!'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y </span><span class="keyword">+= </span><span class="default">1900</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$extra </span><span class="keyword">= </span><span class="default">100.0</span><span class="keyword">*</span><span class="default">$y </span><span class="keyword">+ </span><span class="default">$m </span><span class="keyword">- </span><span class="default">190002.5</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rjd </span><span class="keyword">= </span><span class="default">367.0</span><span class="keyword">*</span><span class="default">$y</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rjd </span><span class="keyword">-= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">7.0</span><span class="keyword">*(</span><span class="default">$y</span><span class="keyword">+</span><span class="default">floor</span><span class="keyword">((</span><span class="default">$m</span><span class="keyword">+</span><span class="default">9.0</span><span class="keyword">)/</span><span class="default">12.0</span><span class="keyword">))/</span><span class="default">4.0</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rjd </span><span class="keyword">+= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">275.0</span><span class="keyword">*</span><span class="default">$m</span><span class="keyword">/</span><span class="default">9.0</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rjd </span><span class="keyword">+= </span><span class="default">$d</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rjd </span><span class="keyword">+= (</span><span class="default">$uh </span><span class="keyword">+ (</span><span class="default">$um </span><span class="keyword">+ </span><span class="default">$us</span><span class="keyword">/</span><span class="default">60.0</span><span class="keyword">)/</span><span class="default">60.</span><span class="keyword">)/</span><span class="default">24.0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rjd </span><span class="keyword">+= </span><span class="default">1721013.5</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rjd </span><span class="keyword">-= </span><span class="default">0.5</span><span class="keyword">*</span><span class="default">$extra</span><span class="keyword">/</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$extra</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rjd </span><span class="keyword">+= </span><span class="default">0.5</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rjd </span><span class="keyword">-= </span><span class="default">2415020.5</span><span class="keyword">; </span><span class="comment">// JD correction constant for 01/01/1900<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rjd </span><span class="keyword">+= (</span><span class="default">$rjd</span><span class="keyword">&gt;</span><span class="default">60</span><span class="keyword">) ? </span><span class="default">2 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">; </span><span class="comment">// adjust to inheritet EXCEL/LOTUS bug<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$rjd</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54516""></a>
  <div class="note">
   <strong class="user">pctips</strong>
   <a href="#54516" class="date">06-Jul-2005 02:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have changed treebe's function a bit:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">jd_to_greg</span><span class="keyword">(</span><span class="default">$julian</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">$julian </span><span class="keyword">- </span><span class="default">1721119</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calc1 </span><span class="keyword">= </span><span class="default">4 </span><span class="keyword">* </span><span class="default">$julian </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc1 </span><span class="keyword">/ </span><span class="default">146097</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc1 </span><span class="keyword">- </span><span class="default">146097 </span><span class="keyword">* </span><span class="default">$year</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$julian </span><span class="keyword">/ </span><span class="default">4</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calc2 </span><span class="keyword">= </span><span class="default">4 </span><span class="keyword">* </span><span class="default">$day </span><span class="keyword">+ </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc2 </span><span class="keyword">/ </span><span class="default">1461</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">$calc2 </span><span class="keyword">- </span><span class="default">1461 </span><span class="keyword">* </span><span class="default">$julian</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((</span><span class="default">$day </span><span class="keyword">+ </span><span class="default">4</span><span class="keyword">) / </span><span class="default">4</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calc3 </span><span class="keyword">= </span><span class="default">5 </span><span class="keyword">* </span><span class="default">$day </span><span class="keyword">- </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc3 </span><span class="keyword">/ </span><span class="default">153</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">$calc3 </span><span class="keyword">- </span><span class="default">153 </span><span class="keyword">* </span><span class="default">$month</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((</span><span class="default">$day </span><span class="keyword">+ </span><span class="default">5</span><span class="keyword">) / </span><span class="default">5</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">100 </span><span class="keyword">* </span><span class="default">$year </span><span class="keyword">+ </span><span class="default">$julian</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$month </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">$month </span><span class="keyword">+ </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">$month </span><span class="keyword">- </span><span class="default">9</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">$year </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$day </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="string">"0"</span><span class="keyword">.</span><span class="default">$day</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$month </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="string">"0"</span><span class="keyword">.</span><span class="default">$month</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$day</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$month</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$year</span><span class="keyword">;<br />
} <br />
</span><span class="default">?&gt;<br />
</span><br />
So, if the in the old format the 1st January 2005 was "1.1.2005", now the function will return "01/01/2005". I hope it could be useful to someone :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43470""></a>
  <div class="note">
   <strong class="user">httpwebwitch</strong>
   <a href="#43470" class="date">22-Jun-2004 10:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
JD days may have decimal fractions which correspond to the time of day. The Julian day begins at noon, and the decimal fraction measures fractional days until the beginning of the next day at noon.<br />
<br />
For instance, Julian Day 2453179.00000 is June 22, 2004, at 12:00pm (noon). <br />
<br />
One hour later, it's 2453179.04167<br />
At 2453179.20833 I'll have dinner, and<br />
at 2453179.45833, it's time for the evening news.<br />
After a good night of sleep, my alarm will go off at 2453179.83333, <br />
then at noon on June 23, a new Julian Day begins at 2453180.<br />
<br />
To use these functions with fractional days, strip the fractional part with floor(), and apply the function to the integer part. <br />
<br />
Then add 12 hours, bringing you to noon of that day. That is the actual time returned by JDToGregorian().<br />
<br />
Then add the fractional part of the day, by multiplying the decimal part of the Julian Day by (24*60*60) seconds. This may take you forward or backward to a different Gregorian calendar date.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35774""></a>
  <div class="note">
   <strong class="user">uni_fl4r3  at t hotmail dot com</strong>
   <a href="#35774" class="date">14-Sep-2003 08:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have made a slight modification to treebe's jd to greg function, this one will transform a unix timestamp to Gregorian day/month/year format...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">unix_to_greg</span><span class="keyword">(</span><span class="default">$unix_timestamp</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((((</span><span class="default">$unix_timestamp </span><span class="keyword">/ </span><span class="string">"60"</span><span class="keyword">) / </span><span class="string">"60"</span><span class="keyword">) / </span><span class="string">"24"</span><span class="keyword">) + </span><span class="string">"2440588"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">$julian </span><span class="keyword">- </span><span class="default">1721119</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calc1 </span><span class="keyword">= </span><span class="default">4 </span><span class="keyword">* </span><span class="default">$julian </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc1 </span><span class="keyword">/ </span><span class="default">146097</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc1 </span><span class="keyword">- </span><span class="default">146097 </span><span class="keyword">* </span><span class="default">$year</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$julian </span><span class="keyword">/ </span><span class="default">4</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calc2 </span><span class="keyword">= </span><span class="default">4 </span><span class="keyword">* </span><span class="default">$day </span><span class="keyword">+ </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc2 </span><span class="keyword">/ </span><span class="default">1461</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">$calc2 </span><span class="keyword">- </span><span class="default">1461 </span><span class="keyword">* </span><span class="default">$julian</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((</span><span class="default">$day </span><span class="keyword">+ </span><span class="default">4</span><span class="keyword">) / </span><span class="default">4</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calc3 </span><span class="keyword">= </span><span class="default">5 </span><span class="keyword">* </span><span class="default">$day </span><span class="keyword">- </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc3 </span><span class="keyword">/ </span><span class="default">153</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">$calc3 </span><span class="keyword">- </span><span class="default">153 </span><span class="keyword">* </span><span class="default">$month</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((</span><span class="default">$day </span><span class="keyword">+ </span><span class="default">5</span><span class="keyword">) / </span><span class="default">5</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">100 </span><span class="keyword">* </span><span class="default">$year </span><span class="keyword">+ </span><span class="default">$julian</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$month </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">$month </span><span class="keyword">+ </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">$month </span><span class="keyword">- </span><span class="default">9</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">$year </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"</span><span class="default">$day</span><span class="string">.</span><span class="default">$month</span><span class="string">.</span><span class="default">$year</span><span class="string">"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32561""></a>
  <div class="note">
   <strong class="user">treebe</strong>
   <a href="#32561" class="date">31-May-2003 05:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Julian to Gregorian date change.<br />
If you do not have the calendar extensions loaded this is little function works realy well.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">jd_to_greg</span><span class="keyword">(</span><span class="default">$julian</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">$julian </span><span class="keyword">- </span><span class="default">1721119</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calc1 </span><span class="keyword">= </span><span class="default">4 </span><span class="keyword">* </span><span class="default">$julian </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc1 </span><span class="keyword">/ </span><span class="default">146097</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc1 </span><span class="keyword">- </span><span class="default">146097 </span><span class="keyword">* </span><span class="default">$year</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$julian </span><span class="keyword">/ </span><span class="default">4</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calc2 </span><span class="keyword">= </span><span class="default">4 </span><span class="keyword">* </span><span class="default">$day </span><span class="keyword">+ </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc2 </span><span class="keyword">/ </span><span class="default">1461</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">$calc2 </span><span class="keyword">- </span><span class="default">1461 </span><span class="keyword">* </span><span class="default">$julian</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((</span><span class="default">$day </span><span class="keyword">+ </span><span class="default">4</span><span class="keyword">) / </span><span class="default">4</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calc3 </span><span class="keyword">= </span><span class="default">5 </span><span class="keyword">* </span><span class="default">$day </span><span class="keyword">- </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc3 </span><span class="keyword">/ </span><span class="default">153</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">$calc3 </span><span class="keyword">- </span><span class="default">153 </span><span class="keyword">* </span><span class="default">$month</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((</span><span class="default">$day </span><span class="keyword">+ </span><span class="default">5</span><span class="keyword">) / </span><span class="default">5</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">100 </span><span class="keyword">* </span><span class="default">$year </span><span class="keyword">+ </span><span class="default">$julian</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$month </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">$month </span><span class="keyword">+ </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">$month </span><span class="keyword">- </span><span class="default">9</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">$year </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"</span><span class="default">$day</span><span class="string">.</span><span class="default">$month</span><span class="string">.</span><span class="default">$year</span><span class="string">"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.jdtofrench.html">JDToFrench</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.jdtojewish.html">jdtojewish</a></div>
 <div class="up"><a href="ref.calendar.html">Calendar Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
