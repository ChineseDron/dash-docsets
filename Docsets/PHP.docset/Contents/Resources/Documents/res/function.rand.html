<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Generate a random integer</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.rad2deg.html">rad2deg</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.round.html">round</a></div>
 <div class="up"><a href="ref.math.html">Math Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.rand" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">rand</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">rand</span> &mdash; <span class="dc-title">Generate a random integer</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.rand-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><b>rand</b></span>
    ( <span class="methodparam">void</span>
   )</div>

  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><b>rand</b></span>
    ( <span class="methodparam"><span class="type">int</span> <tt class="parameter">$min</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$max</tt></span>
   )</div>

  <p class="simpara">
   If called without the optional <i><tt class="parameter">min</tt></i>,
   <i><tt class="parameter">max</tt></i> arguments <span class="function"><b>rand()</b></span>
   returns a pseudo-random integer between 0 and
   <span class="function"><a href="function.getrandmax.html" class="function">getrandmax()</a></span>.  If you want a random number
   between 5 and 15 (inclusive), for example, use <i>rand(5,
   15)</i>.
  </p>
  <blockquote class="note"><p><b class="note">Note</b>: 
   <span class="simpara">
    On some platforms (such as Windows), <span class="function"><a href="function.getrandmax.html" class="function">getrandmax()</a></span>
    is only 32767.  If you require a range larger than 32767, specifying
    <i><tt class="parameter">min</tt></i> and <i><tt class="parameter">max</tt></i> will allow
    you to create a range larger than this, or consider using
    <span class="function"><a href="function.mt-rand.html" class="function">mt_rand()</a></span> instead.
   </span>
  </p></blockquote>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.rand-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">min</tt></i></span>
     <dd>

      <p class="para">
       The lowest value to return (default: 0)
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">max</tt></i></span>
     <dd>

      <p class="para">
       The highest value to return (default: <span class="function"><a href="function.getrandmax.html" class="function">getrandmax()</a></span>)
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.rand-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   A pseudo random value between <i><tt class="parameter">min</tt></i>
   (or 0) and <i><tt class="parameter">max</tt></i> (or <span class="function"><a href="function.getrandmax.html" class="function">getrandmax()</a></span>, inclusive).
  </p>
 </div>

 <div class="refsect1 changelog" id="refsect1-function.rand-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle"><td align="left">4.2.0</td><td align="left">The random
number generator is seeded automatically.</td></tr>

     </tbody>
    
   </table>

  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.rand-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-3196">
    <p><b>Example #1 <span class="function"><b>rand()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">rand</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">rand</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #0000BB">rand</span><span style="color: #007700">(</span><span style="color: #0000BB">5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">15</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output
something similar to:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
7771
22264
11
</pre></div>
    </div>
   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.rand-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.srand.html" class="function" rel="rdfs-seeAlso">srand()</a> - Seed the random number generator</span></li>
    <li class="member"><span class="function"><a href="function.getrandmax.html" class="function" rel="rdfs-seeAlso">getrandmax()</a> - Show largest possible random value</span></li>
    <li class="member"><span class="function"><a href="function.mt-rand.html" class="function" rel="rdfs-seeAlso">mt_rand()</a> - Generate a better random value</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="106004""></a>
  <div class="note">
   <strong class="user">Zak</strong>
   <a href="#106004" class="date">01-Oct-2011 08:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I couldn't find a suitable random alpha-numeric generator function so I rolled my own. It gives a random number in base 36 (0-9, a-z) to a given length.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">randomAlphaNum</span><span class="keyword">(</span><span class="default">$length</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rangeMin </span><span class="keyword">= </span><span class="default">pow</span><span class="keyword">(</span><span class="default">36</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">); </span><span class="comment">//smallest number to give length digits in base 36<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rangeMax </span><span class="keyword">= </span><span class="default">pow</span><span class="keyword">(</span><span class="default">36</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">; </span><span class="comment">//largest number to give length digits in base 36<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$base10Rand </span><span class="keyword">= </span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">$rangeMin</span><span class="keyword">, </span><span class="default">$rangeMax</span><span class="keyword">); </span><span class="comment">//get the random number<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$newRand </span><span class="keyword">= </span><span class="default">base_convert</span><span class="keyword">(</span><span class="default">$base10Rand</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">36</span><span class="keyword">); </span><span class="comment">//convert it<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$newRand</span><span class="keyword">; </span><span class="comment">//spit it out<br />
<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
hopefully helps someone</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105452""></a>
  <div class="note">
   <strong class="user">Daniel Klein.</strong>
   <a href="#105452" class="date">19-Aug-2011 03:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
rand() has a granularity of getrandmax() which means that if you're on a Windows system where getrandmax()==32767 then specifying a range greater than 0-32767 will still only give 32768 unique values. Specifying min=0 and max &gt; getrandmax()+1 where max == 2^n or max == 2^n-1 will return numbers that are multiples of some 2^m where (getrandmax()+1) * 2^m == 2^n.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">gcd</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">) { </span><span class="comment">// If gmp_gcd() is not available<br />
&nbsp; </span><span class="keyword">for (;;) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$x </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) return </span><span class="default">$y</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; else </span><span class="default">$y </span><span class="keyword">%= </span><span class="default">$x</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$y </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) return </span><span class="default">$x</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; else </span><span class="default">$x </span><span class="keyword">%= </span><span class="default">$y</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="comment">//$rand_max = 0xFFFFFE; // This gives 1<br />
&nbsp; </span><span class="default">$rand_max </span><span class="keyword">= </span><span class="default">0xFFFFFF</span><span class="keyword">; </span><span class="comment">// This gives 512<br />
&nbsp; </span><span class="default">$rand_max </span><span class="keyword">= </span><span class="default">0x1000000</span><span class="keyword">; </span><span class="comment">// This gives 512<br />
//$rand_max = 0x1000001; // This gives 1<br />
<br />
</span><span class="default">$gcd </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$rand_max</span><span class="keyword">);<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">1000</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$gcd </span><span class="keyword">= </span><span class="default">gcd</span><span class="keyword">(</span><span class="default">$gcd</span><span class="keyword">, </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$rand_max</span><span class="keyword">));<br />
}<br />
print(</span><span class="default">$gcd</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
I would suggest always using mt_rand() instead as a good habit to get into.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105195""></a>
  <div class="note">
   <strong class="user">shiawase at gmail dot com</strong>
   <a href="#105195" class="date">02-Aug-2011 07:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another one-liner to generate strings:<br />
<span class="default">&lt;?php<br />
substr</span><span class="keyword">(</span><span class="default">str_shuffle</span><span class="keyword">(</span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">)),</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>The strings can be repeated to have the possibility that a character appears multiple times.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105095""></a>
  <div class="note">
   <strong class="user">ilya dot iz at i dot ua</strong>
   <a href="#105095" class="date">27-Jul-2011 08:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had to come up with a quick way to get a random row from a table, and came up with the following:<br />
<br />
<span class="default">&lt;?php<br />
$query </span><span class="keyword">= </span><span class="string">"SELECT `id` FROM [TABLE]"</span><span class="keyword">;<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">, </span><span class="default">$link</span><span class="keyword">);<br />
</span><span class="default">$num </span><span class="keyword">= </span><span class="default">mysql_num_rows</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
if (</span><span class="default">$num </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Array the ID's...<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$id_array </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_assoc</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$id_array </span><span class="keyword">[]=</span><span class="default">$row</span><span class="keyword">[</span><span class="string">"id"</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$query </span><span class="keyword">= </span><span class="string">"SELECT * FROM [TABLE] WHERE `id`="</span><span class="keyword">.</span><span class="default">$id_array</span><span class="keyword">[</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$id_array</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">))];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">, </span><span class="default">$link</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_assoc</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// ...<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
LOL<br />
SELECT * from [TABLE] ORDER BY rand() LIMIT 1</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104156""></a>
  <div class="note">
   <strong class="user">Hamza Kubba</strong>
   <a href="#104156" class="date">26-May-2011 06:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding getting a random row from a table in MySQL (or Postgres), it is better to offload that to the database rather than doing one query to grab tons of data from the database, then a second query to fetch one row.<br />
<br />
I.e., this is far more efficient for small to medium sized tables (i.e. less than 1 mil. rows):<br />
<br />
SELECT * FROM [TABLE] ORDER BY RAND() LIMIT 1;<br />
<br />
For large tables, this is both easy to implement and efficient:<br />
<br />
SELECT COUNT(id) AS number_of_rows FROM [TABLE];<br />
<br />
then something alone the lines of:<br />
<br />
<span class="default">&lt;?php <br />
$sql </span><span class="keyword">= </span><span class="string">"SELECT * FROM [TABLE] LIMIT 1 OFFSET "</span><span class="keyword">.(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$number_of_rows </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">));<br />
</span><span class="comment">// ...<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103009""></a>
  <div class="note">
   <strong class="user">Alex Khimch alex at khim dot removeit dot ich dot org</strong>
   <a href="#103009" class="date">19-Mar-2011 01:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Random is NOT actually random.<br />
<br />
It is easily illustrated by multiplying rand(1,500) by rand(1,500) and showing the output on the image:<br />
<br />
<span class="default">&lt;?php<br />
header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
</span><span class="default">$img </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">500</span><span class="keyword">,</span><span class="default">500</span><span class="keyword">);<br />
<br />
</span><span class="default">$ink </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">);<br />
<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">500</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp; for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">500</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">++) {<br />
&nbsp; </span><span class="default">imagesetpixel</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">500</span><span class="keyword">), </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">500</span><span class="keyword">), </span><span class="default">$ink1</span><span class="keyword">);<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
I expected to get pixel noise, but instead one can see plain diagonal lines.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102618""></a>
  <div class="note">
   <strong class="user">szeryf.wordpress.com</strong>
   <a href="#102618" class="date">24-Feb-2011 11:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Much easier way to generate random string of numbers and letters:<br />
<br />
<span class="default">&lt;?php<br />
$n </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">10e16</span><span class="keyword">, </span><span class="default">10e20</span><span class="keyword">);<br />
echo </span><span class="default">base_convert</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">36</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This generates strings of about 11 characters. Experiment with the range for rand() if you want shorter or longer.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101524""></a>
  <div class="note">
   <strong class="user">Jesse</strong>
   <a href="#101524" class="date">21-Dec-2010 11:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had to come up with a quick way to get a random row from a table, and came up with the following:<br />
<br />
<span class="default">&lt;?php<br />
$query </span><span class="keyword">= </span><span class="string">"SELECT `id` FROM [TABLE]"</span><span class="keyword">;<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">, </span><span class="default">$link</span><span class="keyword">);<br />
</span><span class="default">$num </span><span class="keyword">= </span><span class="default">mysql_num_rows</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
if (</span><span class="default">$num </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Array the ID's...<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$id_array </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_assoc</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$id_array </span><span class="keyword">[]=</span><span class="default">$row</span><span class="keyword">[</span><span class="string">"id"</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$query </span><span class="keyword">= </span><span class="string">"SELECT * FROM [TABLE] WHERE `id`="</span><span class="keyword">.</span><span class="default">$id_array</span><span class="keyword">[</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$id_array</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">))];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">, </span><span class="default">$link</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_assoc</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// ...<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99859""></a>
  <div class="note">
   <strong class="user">Alireza Eliaderani</strong>
   <a href="#99859" class="date">10-Sep-2010 02:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Random integers with normal distribution, <br />
it's not scientifically approved, but worked for me.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/*<br />
* @param float&nbsp; $mean, desired average<br />
* @param number $sd, number of items in array<br />
* @param number $min, minimum desired random number<br />
* @param number $max, maximum desired random number<br />
* @return array<br />
*/<br />
</span><span class="keyword">function </span><span class="default">array_distribute</span><span class="keyword">(</span><span class="default">$mean</span><span class="keyword">,</span><span class="default">$sd</span><span class="keyword">,</span><span class="default">$min</span><span class="keyword">,</span><span class="default">$max</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$total_mean </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$mean</span><span class="keyword">*</span><span class="default">$sd</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">$sd</span><span class="keyword">&gt;</span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$allowed_max </span><span class="keyword">= </span><span class="default">$total_mean </span><span class="keyword">- </span><span class="default">$sd </span><span class="keyword">- </span><span class="default">$min</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$allowed_min </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$total_mean</span><span class="keyword">/</span><span class="default">$sd</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$random </span><span class="keyword">= </span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">max</span><span class="keyword">(</span><span class="default">$min</span><span class="keyword">,</span><span class="default">$allowed_min</span><span class="keyword">),</span><span class="default">min</span><span class="keyword">(</span><span class="default">$max</span><span class="keyword">,</span><span class="default">$allowed_max</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[]=</span><span class="default">$random</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sd</span><span class="keyword">--;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$total_mean</span><span class="keyword">-=</span><span class="default">$random</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$total_mean</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98195""></a>
  <div class="note">
   <strong class="user">liveonaware [at] gmail [dot] com</strong>
   <a href="#98195" class="date">31-May-2010 08:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">//To Pull 7 Unique Random Values Out Of AlphaNumeric<br />
<br />
//removed number 0, capital o, number 1 and small L<br />
//Total: keys = 32, elements = 33<br />
</span><span class="default">$characters </span><span class="keyword">= array(<br />
</span><span class="string">"A"</span><span class="keyword">,</span><span class="string">"B"</span><span class="keyword">,</span><span class="string">"C"</span><span class="keyword">,</span><span class="string">"D"</span><span class="keyword">,</span><span class="string">"E"</span><span class="keyword">,</span><span class="string">"F"</span><span class="keyword">,</span><span class="string">"G"</span><span class="keyword">,</span><span class="string">"H"</span><span class="keyword">,</span><span class="string">"J"</span><span class="keyword">,</span><span class="string">"K"</span><span class="keyword">,</span><span class="string">"L"</span><span class="keyword">,</span><span class="string">"M"</span><span class="keyword">,<br />
</span><span class="string">"N"</span><span class="keyword">,</span><span class="string">"P"</span><span class="keyword">,</span><span class="string">"Q"</span><span class="keyword">,</span><span class="string">"R"</span><span class="keyword">,</span><span class="string">"S"</span><span class="keyword">,</span><span class="string">"T"</span><span class="keyword">,</span><span class="string">"U"</span><span class="keyword">,</span><span class="string">"V"</span><span class="keyword">,</span><span class="string">"W"</span><span class="keyword">,</span><span class="string">"X"</span><span class="keyword">,</span><span class="string">"Y"</span><span class="keyword">,</span><span class="string">"Z"</span><span class="keyword">,<br />
</span><span class="string">"1"</span><span class="keyword">,</span><span class="string">"2"</span><span class="keyword">,</span><span class="string">"3"</span><span class="keyword">,</span><span class="string">"4"</span><span class="keyword">,</span><span class="string">"5"</span><span class="keyword">,</span><span class="string">"6"</span><span class="keyword">,</span><span class="string">"7"</span><span class="keyword">,</span><span class="string">"8"</span><span class="keyword">,</span><span class="string">"9"</span><span class="keyword">);<br />
<br />
</span><span class="comment">//make an "empty container" or array for our keys<br />
</span><span class="default">$keys </span><span class="keyword">= array();<br />
<br />
</span><span class="comment">//first count of $keys is empty so "1", remaining count is 1-6 = total 7 times<br />
</span><span class="keyword">while(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">) &lt; </span><span class="default">7</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//"0" because we use this to FIND ARRAY KEYS which has a 0 value<br />
&nbsp;&nbsp;&nbsp; //"-1" because were only concerned of number of keys which is 32 not 33<br />
&nbsp;&nbsp;&nbsp; //count($characters) = 33<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$characters</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">$keys</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$keys</span><span class="keyword">[] = </span><span class="default">$x</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">){<br />
&nbsp;&nbsp; </span><span class="default">$random_chars </span><span class="keyword">.= </span><span class="default">$characters</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
}<br />
echo </span><span class="default">$random_chars</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96583""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#96583" class="date">05-Mar-2010 06:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Generate a random 5 character A-Z0-9&nbsp; string<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">6</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) { <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$d</span><span class="keyword">=</span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">)%</span><span class="default">2</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$d </span><span class="keyword">? </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)) : </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">48</span><span class="keyword">,</span><span class="default">57</span><span class="keyword">)); <br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
# php -r 'for ($i=0; $i&lt;6; $i++) { $d=rand(1,30)%2; echo $d ? chr(rand(65,90)) : chr(rand(48,57)); } echo "\n";'<br />
14BW1A</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96378""></a>
  <div class="note">
   <strong class="user">mike at marylandwebsites dot net</strong>
   <a href="#96378" class="date">23-Feb-2010 06:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Rather then counting the rows or running the RAND in my query, I find this to work just fine.<br />
This code is used to display business highlights at random<br />
<br />
Would love to get feedback on this<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// First get the last id from the table<br />
<br />
</span><span class="default">$SQL </span><span class="keyword">= </span><span class="string">"SELECT * FROM HIGHLIGHTS ORDER BY highlight_id DESC LIMIT 1"</span><span class="keyword">;<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">( </span><span class="default">$SQL </span><span class="keyword">);<br />
while( </span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">( </span><span class="default">$result </span><span class="keyword">) ) {<br />
</span><span class="default">$ending_id </span><span class="keyword">= </span><span class="default">$row</span><span class="keyword">[</span><span class="string">"highlight_id"</span><span class="keyword">]; <br />
}<br />
<br />
</span><span class="comment">// I only want the 5 most recent entries<br />
// So I just subtract 5 from the last ID<br />
<br />
</span><span class="default">$starting_id </span><span class="keyword">= </span><span class="default">$ending_id </span><span class="keyword">- </span><span class="default">5</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Because I we don't want a nagitive number I just <br />
// make sure that the starting ID is at least 1<br />
<br />
</span><span class="keyword">if(</span><span class="default">$starting_id </span><span class="keyword">&lt;= </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$starting_id </span><span class="keyword">= </span><span class="string">"1"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;<br />
</span><span class="comment">// now I run the the $starting_id $ending_id at RAND<br />
<br />
</span><span class="default">$howey </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">$starting_id</span><span class="keyword">, </span><span class="default">$ending_id</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Now I use howey as my id<br />
<br />
</span><span class="default">$SQL </span><span class="keyword">= </span><span class="string">"SELECT * FROM HIGHLIGHTS WHERE highlight_id = '</span><span class="default">$howey</span><span class="string">'"</span><span class="keyword">;<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">( </span><span class="default">$SQL </span><span class="keyword">);<br />
while( </span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">( </span><span class="default">$result </span><span class="keyword">) ) {<br />
</span><span class="default">$highlight_id </span><span class="keyword">= </span><span class="default">$row</span><span class="keyword">[</span><span class="string">"highlight_id"</span><span class="keyword">]; <br />
</span><span class="default">$highlight_title </span><span class="keyword">= </span><span class="default">$row</span><span class="keyword">[</span><span class="string">"highlight_title"</span><span class="keyword">]; <br />
}<br />
echo </span><span class="string">"</span><span class="default">$highlight_id</span><span class="string"> </span><span class="default">$highlight_title</span><span class="string">"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96323""></a>
  <div class="note">
   <strong class="user">djindjojlo AT gmail DOT com</strong>
   <a href="#96323" class="date">20-Feb-2010 05:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
a very easy random letters and numbers... one of my beginers scripts :)<br />
<br />
<span class="default">&lt;?php<br />
<br />
$abc</span><span class="keyword">= array(</span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">, </span><span class="string">"c"</span><span class="keyword">, </span><span class="string">"d"</span><span class="keyword">, </span><span class="string">"e"</span><span class="keyword">, </span><span class="string">"f"</span><span class="keyword">, </span><span class="string">"g"</span><span class="keyword">, </span><span class="string">"h"</span><span class="keyword">, </span><span class="string">"i"</span><span class="keyword">, </span><span class="string">"j"</span><span class="keyword">, </span><span class="string">"k"</span><span class="keyword">, </span><span class="string">"l"</span><span class="keyword">, </span><span class="string">"m"</span><span class="keyword">, </span><span class="string">"n"</span><span class="keyword">, </span><span class="string">"o"</span><span class="keyword">, </span><span class="string">"p"</span><span class="keyword">, </span><span class="string">"q"</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">, </span><span class="string">"s"</span><span class="keyword">, </span><span class="string">"t"</span><span class="keyword">, </span><span class="string">"u"</span><span class="keyword">, </span><span class="string">"v"</span><span class="keyword">, </span><span class="string">"w"</span><span class="keyword">, </span><span class="string">"x"</span><span class="keyword">, </span><span class="string">"y"</span><span class="keyword">, </span><span class="string">"z"</span><span class="keyword">); <br />
</span><span class="default">$num</span><span class="keyword">= array(</span><span class="string">"0"</span><span class="keyword">, </span><span class="string">"1"</span><span class="keyword">, </span><span class="string">"2"</span><span class="keyword">, </span><span class="string">"3"</span><span class="keyword">, </span><span class="string">"4"</span><span class="keyword">, </span><span class="string">"5"</span><span class="keyword">, </span><span class="string">"6"</span><span class="keyword">, </span><span class="string">"7"</span><span class="keyword">, </span><span class="string">"8"</span><span class="keyword">, </span><span class="string">"9"</span><span class="keyword">);<br />
echo </span><span class="default">$abc</span><span class="keyword">[</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">25</span><span class="keyword">)]; <br />
echo </span><span class="default">$num</span><span class="keyword">[</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">)];&nbsp; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95420""></a>
  <div class="note">
   <strong class="user">John Galt</strong>
   <a href="#95420" class="date">02-Jan-2010 11:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another way to create an array of random numbers where there are no identical numbers.<br />
<br />
($n = number of random numbers to return in the array<br />
$min = minimum number<br />
$max = maximum number)<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;</span><span class="keyword">function </span><span class="default">uniqueRand</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">, </span><span class="default">$min </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$max </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;{<br />
&nbsp; if(</span><span class="default">$max </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp; </span><span class="default">$max </span><span class="keyword">= </span><span class="default">getrandmax</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">$min</span><span class="keyword">, </span><span class="default">$max</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br />
&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">);<br />
&nbsp; foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">)<br />
&nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92561""></a>
  <div class="note">
   <strong class="user">Hugo Scott hrmscott at hotmail dot com</strong>
   <a href="#92561" class="date">29-Jul-2009 07:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a simple function to generate a random date between a start date and an end date. <br />
<br />
It is inclusive of BOTH dates - so using dates 2009-04-01 and 2009-04-03 would generate a random date that could be 2009-04-01, 2009-04-02 or 2009-04-03.<br />
<br />
It won't work if the end date is prior to the start date and if you use a non-existant date (eg 2009-02-30) it defaults to 1970-01-01<br />
<br />
the longer version:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">makeRandomDateInclusive</span><span class="keyword">(</span><span class="default">$startDate</span><span class="keyword">,</span><span class="default">$endDate</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$days </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">((</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$endDate</span><span class="keyword">) - </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$startDate</span><span class="keyword">)) / (</span><span class="default">60 </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">24</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$days</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">,</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"</span><span class="default">$startDate</span><span class="string"> + </span><span class="default">$n</span><span class="string"> days"</span><span class="keyword">));&nbsp; &nbsp; <br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
and the one-line version for compactness freaks:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">makeRandomDateInclusive</span><span class="keyword">(</span><span class="default">$startDate</span><span class="keyword">,</span><span class="default">$endDate</span><span class="keyword">){&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">,</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"</span><span class="default">$startDate</span><span class="string"> + "</span><span class="keyword">.</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">round</span><span class="keyword">((</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$endDate</span><span class="keyword">) - </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$startDate</span><span class="keyword">)) / (</span><span class="default">60 </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">24</span><span class="keyword">))).</span><span class="string">" days"</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
it is called like this <br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">makeRandomDateInclusive</span><span class="keyword">(</span><span class="string">'2009-04-01'</span><span class="keyword">,</span><span class="string">'2009-04-03'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>Hope this is of some use to someone</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91534""></a>
  <div class="note">
   <strong class="user">Greg R.</strong>
   <a href="#91534" class="date">15-Jun-2009 04:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I thought this function (random color) might be of use to someone [to create and return a random hex for HTML colors]:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">get_random_color</span><span class="keyword">()<br />
{<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">6</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">.=&nbsp; </span><span class="default">dechex</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">15</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"#</span><span class="default">$c</span><span class="string">"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91531""></a>
  <div class="note">
   <strong class="user">alex at bimpson dot com</strong>
   <a href="#91531" class="date">15-Jun-2009 09:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A very easy method for generating for generating an array of UNIQUE random numbers:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$rand </span><span class="keyword">= array();<br />
while (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$rand</span><span class="keyword">) &lt; </span><span class="default">$total </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">$min</span><span class="keyword">,</span><span class="default">$max</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; if ( !</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">,</span><span class="default">$rand</span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rand</span><span class="keyword">[] = </span><span class="default">$r</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
whereby $total is the number of unique random numbers you want, $min is the lowest possible value and $max is the highest possible value.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91135""></a>
  <div class="note">
   <strong class="user">david [at] ddrewdesign [dot] com</strong>
   <a href="#91135" class="date">26-May-2009 06:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To Jano and Peta:<br />
<br />
Thanks for the code. In real world usage, I only had one problem with it: It will never return the first result of the array (or it will return nothing if there's only one item in the array). To remedy this, I simply subtracted 1 from <br />
<br />
<span class="default">&lt;?php<br />
$rand </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">$max</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
like so:<br />
<br />
<span class="default">&lt;?php<br />
$rand </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">$max</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Thanks though, for the code you supplied. It was exactly what I needed.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90773""></a>
  <div class="note">
   <strong class="user">kyle dot florence [@t] gmail dot com</strong>
   <a href="#90773" class="date">08-May-2009 03:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Improved random string generation function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Generate a random character string<br />
</span><span class="keyword">function </span><span class="default">rand_str</span><span class="keyword">(</span><span class="default">$length </span><span class="keyword">= </span><span class="default">32</span><span class="keyword">, </span><span class="default">$chars </span><span class="keyword">= </span><span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890'</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Length of character list<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$chars_length </span><span class="keyword">= (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$chars</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Start our string<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">$chars</span><span class="keyword">{</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$chars_length</span><span class="keyword">)};<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Generate random string<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Grab a random character from our list<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">$chars</span><span class="keyword">{</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$chars_length</span><span class="keyword">)};<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Make sure the same two characters don't appear next to each other<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$r </span><span class="keyword">!= </span><span class="default">$string</span><span class="keyword">{</span><span class="default">$i </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">}) </span><span class="default">$string </span><span class="keyword">.=&nbsp; </span><span class="default">$r</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Return the string<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$string</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90509""></a>
  <div class="note">
   <strong class="user">admin at djs-music dot com</strong>
   <a href="#90509" class="date">25-Apr-2009 10:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A nice function to generate a random string, using any character:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">generateRandStr</span><span class="keyword">(</span><span class="default">$length</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$randstr </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$length</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$randnum </span><span class="keyword">= </span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">61</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$randnum </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$randstr </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$randnum</span><span class="keyword">+</span><span class="default">48</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }else if(</span><span class="default">$randnum </span><span class="keyword">&lt; </span><span class="default">36</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$randstr </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$randnum</span><span class="keyword">+</span><span class="default">55</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$randstr </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$randnum</span><span class="keyword">+</span><span class="default">61</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$randstr</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Simply use:<br />
generateRandStr(10);<br />
<br />
Sample output: $%29zon(4f</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89590""></a>
  <div class="note">
   <strong class="user">petabyte.se</strong>
   <a href="#89590" class="date">15-Mar-2009 08:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As an further optimization on janoserki[at]gmail[dot]com previous post i would recommend that you optimize you first part of php/sql code to something like this.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// estimate the number of rows in a table<br />
</span><span class="default">$lekerdezes </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"select count(*) as rows from table"</span><span class="keyword">);<br />
while (</span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_assoc</span><span class="keyword">(</span><span class="default">$lekerdezes</span><span class="keyword">))<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$max </span><span class="keyword">= </span><span class="default">$row</span><span class="keyword">[</span><span class="string">"rows"</span><span class="keyword">];<br />
}<br />
</span><span class="default">?&gt;<br />
</span>the count(*) is much faster for the database than grabbing the hole dataset from the table.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89343""></a>
  <div class="note">
   <strong class="user">janoserki [at] gmail [dot] com</strong>
   <a href="#89343" class="date">04-Mar-2009 12:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Easy way for mysql: random row<br />
the original form is: "... order by rand()"<br />
but this is not the best way, because it's very slow by a big database (it can take more minutes to complete the request!)<br />
My suggestion:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// estimate the number of rows in a table<br />
</span><span class="default">$lekerdezes </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"select * from table"</span><span class="keyword">);<br />
</span><span class="default">$max </span><span class="keyword">= </span><span class="default">mysql_num_rows</span><span class="keyword">(</span><span class="default">$lekerdezes</span><span class="keyword">);<br />
<br />
</span><span class="comment">// pick one<br />
</span><span class="default">$rand </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">$max</span><span class="keyword">);<br />
<br />
</span><span class="default">$lekerdezes2 </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"select * from table limit </span><span class="default">$rand</span><span class="string">, 1"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// that's all folks :)<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87487""></a>
  <div class="note">
   <strong class="user">whatchildisthis at gmail dot com</strong>
   <a href="#87487" class="date">06-Dec-2008 04:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I also enjoy making one-liners.<br />
<br />
Here's a non-regular expression approach. It generates a random 32 character string consisting of, by default, only A-Z, a-z, and 0-9, but you can change the value of $a for other characters. The random string will be in variable $s after this line.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">for (</span><span class="default">$s </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">, </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$z </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$a </span><span class="keyword">= </span><span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">!= </span><span class="default">32</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$z</span><span class="keyword">), </span><span class="default">$s </span><span class="keyword">.= </span><span class="default">$a</span><span class="keyword">{</span><span class="default">$x</span><span class="keyword">}, </span><span class="default">$i</span><span class="keyword">++);<br />
</span><span class="default">?&gt;<br />
</span><br />
If you don't want the same character to appear beside itself, use this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$z </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$a </span><span class="keyword">= </span><span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890'</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">, </span><span class="default">$s </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">{</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$z</span><span class="keyword">)}, </span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">!= </span><span class="default">32</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$z</span><span class="keyword">), </span><span class="default">$s </span><span class="keyword">.= </span><span class="default">$a</span><span class="keyword">{</span><span class="default">$x</span><span class="keyword">}, </span><span class="default">$s </span><span class="keyword">= (</span><span class="default">$s</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">} == </span><span class="default">$s</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">} ? </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">) : </span><span class="default">$s</span><span class="keyword">), </span><span class="default">$i</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
For those of you who want both as a function, use this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">rand_chars</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">, </span><span class="default">$l</span><span class="keyword">, </span><span class="default">$u </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;if (!</span><span class="default">$u</span><span class="keyword">) for (</span><span class="default">$s </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">, </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$z </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$l</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$z</span><span class="keyword">), </span><span class="default">$s </span><span class="keyword">.= </span><span class="default">$c</span><span class="keyword">{</span><span class="default">$x</span><span class="keyword">}, </span><span class="default">$i</span><span class="keyword">++);<br />
&nbsp;else for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$z </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">, </span><span class="default">$s </span><span class="keyword">= </span><span class="default">$c</span><span class="keyword">{</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$z</span><span class="keyword">)}, </span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">!= </span><span class="default">$l</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$z</span><span class="keyword">), </span><span class="default">$s </span><span class="keyword">.= </span><span class="default">$c</span><span class="keyword">{</span><span class="default">$x</span><span class="keyword">}, </span><span class="default">$s </span><span class="keyword">= (</span><span class="default">$s</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">} == </span><span class="default">$s</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">} ? </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">) : </span><span class="default">$s</span><span class="keyword">), </span><span class="default">$i</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">));<br />
&nbsp;return </span><span class="default">$s</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
string $c is the string of characters to use.<br />
integer $l is how long you want the string to be.<br />
boolean $u is whether or not a character can appear beside itself.<br />
<br />
Examples:<br />
rand_chars("ABCEDFG", 10) == GABGFFGCDA<br />
rand_chars("ABCEDFG", 10, TRUE) == CBGFAEDFEC</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87373""></a>
  <div class="note">
   <strong class="user">adam at greatbigmassive dot com</strong>
   <a href="#87373" class="date">02-Dec-2008 05:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've noticed alot of people doing long winded random string generators so I thought I'd post my one liner to give a bit of a fresh approach.<br />
<br />
The concept is simple. The rand() function generates a number made up of 10 different digits. (0,1,2,3,4,5,6,7,8,9).<br />
To generate an equivalent string I only need 10 alpha characters to replace the numbers. <br />
<br />
I am using (p,q,r,s,t,u,v,w,x,y). I chose these letters because they don't include any characters that resemble numbers and was the best set generated by the chr() function.<br />
<br />
Anyway, to create a 6 character random string I do this:<br />
<br />
$rand = preg_replace("/([0-9])/e","chr((\\1+112))",rand(100000,999999));<br />
<br />
The length of the string is based on the length of the random number generated. <br />
This would also mean you could generate a random string at a random length too if you wanted.<br />
<br />
Adam</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87095""></a>
  <div class="note">
   <strong class="user">amossoma at o2 dot pl</strong>
   <a href="#87095" class="date">19-Nov-2008 01:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">generateRandomString</span><span class="keyword">(</span><span class="default">$length </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">, </span><span class="default">$letters </span><span class="keyword">= </span><span class="string">'1234567890qwertyuiopasdfghjklzxcvbnm'</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$lettersLength </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$letters</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0 </span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length </span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">.= </span><span class="default">$letters</span><span class="keyword">[</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$lettersLength</span><span class="keyword">)];<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$s</span><span class="keyword">;<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86465""></a>
  <div class="note">
   <strong class="user">opbarnes</strong>
   <a href="#86465" class="date">20-Oct-2008 12:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Generate a random 5 character alpha string:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">print </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/([ ])/e'</span><span class="keyword">, </span><span class="string">'chr(rand(97,122))'</span><span class="keyword">, </span><span class="string">'&nbsp; &nbsp;&nbsp; '</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85099""></a>
  <div class="note">
   <strong class="user">szczepan[DoT]Krol #HT# gmail [knowRest]</strong>
   <a href="#85099" class="date">14-Aug-2008 06:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Heres another function to generate Random Unique numbers.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">UniqueRand</span><span class="keyword">{<br />
&nbsp; var </span><span class="default">$alreadyExists </span><span class="keyword">= array();<br />
<br />
&nbsp; function </span><span class="default">uRand</span><span class="keyword">(</span><span class="default">$min </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$max </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$break</span><span class="keyword">=</span><span class="string">'false'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">$break</span><span class="keyword">==</span><span class="string">'false'</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$rand</span><span class="keyword">=</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">$min</span><span class="keyword">,</span><span class="default">$max</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$rand</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">alreadyExists</span><span class="keyword">)===</span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">alreadyExists</span><span class="keyword">[]=</span><span class="default">$rand</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$break</span><span class="keyword">=</span><span class="string">'stop'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">" </span><span class="default">$rand</span><span class="string"> already!&nbsp; "</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">alreadyExists</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$rand</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
</span><span class="default">$rand</span><span class="keyword">=new </span><span class="default">UniqueRand</span><span class="keyword">();<br />
<br />
<br />
echo</span><span class="string">"&lt;b&gt; "</span><span class="keyword">. </span><span class="default">$rand</span><span class="keyword">-&gt;</span><span class="default">uRand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">).</span><span class="string">"&lt;/b&gt;"</span><span class="keyword">;<br />
echo</span><span class="string">"&lt;b&gt; "</span><span class="keyword">. </span><span class="default">$rand</span><span class="keyword">-&gt;</span><span class="default">uRand</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">).</span><span class="string">"&lt;/b&gt;"</span><span class="keyword">;<br />
echo</span><span class="string">"&lt;b&gt; "</span><span class="keyword">. </span><span class="default">$rand</span><span class="keyword">-&gt;</span><span class="default">uRand</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">).</span><span class="string">"&lt;/b&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84820""></a>
  <div class="note">
   <strong class="user">thomas at tgohome dot com</strong>
   <a href="#84820" class="date">31-Jul-2008 08:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You don't need fancy queries to grab a random row(s) from MySQL; it's actually quite simple. In fact, you can do it in a single query. <br />
<br />
<span class="default">&lt;?php<br />
$random_rows </span><span class="keyword">= array();<br />
<br />
</span><span class="default">$query </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"SELECT * FROM tablename ORDER BY RAND() LIMIT 1"</span><span class="keyword">);<br />
<br />
while(</span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">))<br />
{<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$random_rows</span><span class="keyword">[] = </span><span class="default">$row</span><span class="keyword">; <br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
You can extend LIMIT to any number, so you can select 10 random rows. Also, because it uses ORDER BY the rows are always unique if you select 10 rows, for example. <br />
<br />
This might work on other database systems such as MsSQL and PostgreSQL but I haven't tested them.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84810""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#84810" class="date">30-Jul-2008 04:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
quick way to generate randomish numbers and simple strings.<br />
no messing around with functions, so you can just pop the line into the middle of your existing code.<br />
<br />
not the most perfect for sure, but ok for plenty of situations...<br />
<br />
<span class="default">&lt;?php<br />
<br />
$random_number </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">( </span><span class="string">"0" </span><span class="keyword">. </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">) . </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">) . </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">) . </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">) . </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">) ); </span><span class="comment">// random(ish) 5 digit int<br />
<br />
</span><span class="default">$random_string </span><span class="keyword">= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)) . </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)) . </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)) . </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)) . </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)); </span><span class="comment">// random(ish) 5 character string<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
hope someone finds it useful for somthing.<br />
<br />
regards,<br />
deeeeeen alxndr0u</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83514""></a>
  <div class="note">
   <strong class="user">gacek at my dot planet</strong>
   <a href="#83514" class="date">29-May-2008 04:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For some people who would need to generate random string:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">random_letters </span><span class="keyword">(</span><span class="default">$numofletters</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (!isset(</span><span class="default">$numofletters</span><span class="keyword">)) </span><span class="default">$numofletters </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">; </span><span class="comment">// if $numofletters is not specified sets to 10 letters<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$literki </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'F'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'H'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'J'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">, </span><span class="string">'L'</span><span class="keyword">, </span><span class="string">'M'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'P'</span><span class="keyword">, </span><span class="string">'R'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'W'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ilosc_literek </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$literki</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$licz </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$licz </span><span class="keyword">&lt; </span><span class="default">$numofletters</span><span class="keyword">; </span><span class="default">$licz</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rand </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$ilosc_literek</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vercode </span><span class="keyword">= </span><span class="default">$vercode</span><span class="keyword">.</span><span class="default">$literki</span><span class="keyword">[</span><span class="default">$rand</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82807""></a>
  <div class="note">
   <strong class="user">davidsteinsland [at] gmail [dot] com</strong>
   <a href="#82807" class="date">26-Apr-2008 12:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
emad_ramahi at hotmail dot com:<br />
I've actually noticed that with a large dataset (100k rows), the query dramatically slows down the server and performance is way too bad.<br />
<br />
The way I see it, you have to workable solutions:<br />
<br />
Using PHP:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//$Table holds the name of the table we're getting the random row from<br />
//$Rows specifies how many rows we need to fetch <br />
</span><span class="keyword">function </span><span class="default">mysql_rand </span><span class="keyword">(</span><span class="default">$Query</span><span class="keyword">, </span><span class="default">$Rows </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//getting the table name from $query<br />
&nbsp;&nbsp;&nbsp; //what you can do, is replace the $query argument with $table,<br />
&nbsp;&nbsp;&nbsp; //this way to dont have to search for the table's name<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$SQL </span><span class="keyword">= </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">'SELECT COUNT(*) FROM %s'</span><span class="keyword">, </span><span class="default">substr </span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">, </span><span class="default">stripos </span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">, </span><span class="string">'from'</span><span class="keyword">)+</span><span class="default">5</span><span class="keyword">, </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">)));<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Max </span><span class="keyword">= </span><span class="default">mysql_result </span><span class="keyword">(</span><span class="default">mysql_query </span><span class="keyword">(</span><span class="default">$SQL</span><span class="keyword">), </span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Random </span><span class="keyword">= </span><span class="default">rand </span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$Max</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//If the random number is 99, and the database only has 100 rows<br />
&nbsp;&nbsp;&nbsp; //We'll subtract the random number, so we don't exceed 100, thus preventing a MySQL error message<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$Query </span><span class="keyword">. </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">'LIMIT %d, %d'</span><span class="keyword">, (</span><span class="default">$Max </span><span class="keyword">&lt; </span><span class="default">$Rows</span><span class="keyword">) ? </span><span class="default">0 </span><span class="keyword">: ((</span><span class="default">$Random </span><span class="keyword">&gt; </span><span class="default">$Max </span><span class="keyword">- </span><span class="default">$Rows</span><span class="keyword">) ? </span><span class="default">$Max </span><span class="keyword">- </span><span class="default">$Rows </span><span class="keyword">: </span><span class="default">$Random</span><span class="keyword">), </span><span class="default">$Rows</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">//Instead of using MySQL's RAND(), we use LIMIT to fetch rows<br />
//E.g. LIMIT 5,9 fetches from row 5, and the subsequent 9<br />
</span><span class="default">$SQL </span><span class="keyword">= </span><span class="default">mysql_rand </span><span class="keyword">(</span><span class="string">'SELECT row FROM table'</span><span class="keyword">); </span><span class="comment">//SELECT row FROM table LIMIT x, y<br />
</span><span class="default">?&gt;<br />
</span><br />
or SQL:<br />
SELECT * FROM Table T JOIN (SELECT FLOOR(MAX(ID)*RAND()) AS ID FROM Table) AS x ON T.ID &gt;= x.ID LIMIT 1;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81666""></a>
  <div class="note">
   <strong class="user">emad_ramahi at hotmail dot com</strong>
   <a href="#81666" class="date">09-Mar-2008 01:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi All,<br />
For those whom wants to get a random value from MySQL:<br />
select coumnName from TableName order by rand()</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81379""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#81379" class="date">25-Feb-2008 12:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using the script below with rand() instead of mt_rand(), <br />
I was suprised to find many "words" and part of "phrases" in common.<br />
<br />
mt_rand() is highly recomanded when you want to build test cases.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;$ressbdd </span><span class="keyword">= </span><span class="default">mysql_connect</span><span class="keyword">(</span><span class="string">"localhost"</span><span class="keyword">, </span><span class="string">"usr"</span><span class="keyword">, </span><span class="string">"pass"</span><span class="keyword">) <br />
&nbsp; or&nbsp; die(</span><span class="string">"Could not connect: " </span><span class="keyword">. </span><span class="default">mysql_error</span><span class="keyword">()); <br />
&nbsp;for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">100000</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp; </span><span class="default">$xx1</span><span class="keyword">=</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">15</span><span class="keyword">,</span><span class="default">80</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$texte </span><span class="keyword">= </span><span class="default">phrase</span><span class="keyword">(</span><span class="default">$xx1</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$sql </span><span class="keyword">= </span><span class="string">'INSERT into phrases.valeurs set valeur = \'' </span><span class="keyword">. </span><span class="default">$texte </span><span class="keyword">. </span><span class="string">'\''</span><span class="keyword">;<br />
&nbsp; </span><span class="default">mysql_query</span><span class="keyword">( </span><span class="default">$sql </span><span class="keyword">, </span><span class="default">$ressbdd </span><span class="keyword">);<br />
&nbsp;}<br />
</span><span class="comment">//=============================================<br />
</span><span class="keyword">function </span><span class="default">phrase</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">){<br />
&nbsp;</span><span class="default">$phrase</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br />
&nbsp;for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$n</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp; </span><span class="default">$xx2</span><span class="keyword">=</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">,</span><span class="default">20</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$phrase</span><span class="keyword">.=</span><span class="default">mot</span><span class="keyword">(</span><span class="default">$xx2</span><span class="keyword">) . </span><span class="string">' '</span><span class="keyword">;<br />
&nbsp;}<br />
&nbsp;return(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$phrase</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">).</span><span class="string">'.'</span><span class="keyword">); </span><span class="comment">// phrase ends with a .<br />
</span><span class="keyword">}<br />
</span><span class="comment">//=============================================<br />
</span><span class="keyword">function </span><span class="default">mot</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">){<br />
&nbsp;if(</span><span class="default">$n</span><span class="keyword">&lt;=</span><span class="default">0</span><span class="keyword">)&nbsp; return </span><span class="string">'hello'</span><span class="keyword">;<br />
&nbsp;if(</span><span class="default">$n</span><span class="keyword">&gt;=</span><span class="default">31</span><span class="keyword">) return </span><span class="string">'world'</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$voyelle </span><span class="keyword">=Array(</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'e'</span><span class="keyword">,</span><span class="string">'i'</span><span class="keyword">,</span><span class="string">'o'</span><span class="keyword">,</span><span class="string">'u'</span><span class="keyword">,</span><span class="string">'y'</span><span class="keyword">);<br />
&nbsp;</span><span class="default">$consonne</span><span class="keyword">=Array(<br />
</span><span class="string">'b'</span><span class="keyword">,</span><span class="string">'c'</span><span class="keyword">,</span><span class="string">'d'</span><span class="keyword">,</span><span class="string">'f'</span><span class="keyword">,</span><span class="string">'g'</span><span class="keyword">,</span><span class="string">'h'</span><span class="keyword">,</span><span class="string">'j'</span><span class="keyword">,</span><span class="string">'k'</span><span class="keyword">,</span><span class="string">'l'</span><span class="keyword">,</span><span class="string">'m'</span><span class="keyword">,<br />
</span><span class="string">'n'</span><span class="keyword">,</span><span class="string">'p'</span><span class="keyword">,</span><span class="string">'q'</span><span class="keyword">,</span><span class="string">'r'</span><span class="keyword">,</span><span class="string">'s'</span><span class="keyword">,</span><span class="string">'t'</span><span class="keyword">,</span><span class="string">'v'</span><span class="keyword">,</span><span class="string">'w'</span><span class="keyword">,</span><span class="string">'x'</span><span class="keyword">,</span><span class="string">'z'</span><span class="keyword">);<br />
&nbsp;</span><span class="default">$mot</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br />
&nbsp;for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$n</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp; if(</span><span class="default">$i</span><span class="keyword">%</span><span class="default">2</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; </span><span class="default">$xx3</span><span class="keyword">=</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">19</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$mot</span><span class="keyword">.=</span><span class="default">$consonne</span><span class="keyword">[</span><span class="default">$xx3</span><span class="keyword">];<br />
&nbsp; }else{<br />
&nbsp;&nbsp; </span><span class="default">$xx4</span><span class="keyword">=</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$mot</span><span class="keyword">.=</span><span class="default">$voyelle</span><span class="keyword">[</span><span class="default">$xx4</span><span class="keyword">];<br />
&nbsp; }<br />
&nbsp;}<br />
&nbsp;return </span><span class="default">$mot</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78986""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#78986" class="date">06-Nov-2007 01:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note, the function used by PHP to constrain a random number between (min, max) is the following:<br />
<br />
$number = $min + (($max - $min + 1) * ($number / ($rand_max + 1));<br />
<br />
where the following:<br />
$number - the initially generated random number<br />
$min - the minimum in the range<br />
$max - the maximum in the range<br />
$rand_max - the maximum possible random value<br />
<br />
What this algorithm does is constrain the generated number to a 0-1 range, then multiply it against your range, mapping the two to each other. <br />
<br />
In practice you'll see the following results:<br />
For a generated $number of 16384 and a $rand_max of 32768:<br />
rand(0, 10) = 5<br />
rand(0, 100) = 50<br />
rand(0, 1000) = 500<br />
<br />
with the additional property that if the range you're asking for is larger than $rand_max, random numbers will be in a multiple of $max/$rand_max.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77716""></a>
  <div class="note">
   <strong class="user">Ishtar</strong>
   <a href="#77716" class="date">10-Sep-2007 06:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A small comment on phpdev-dunnbypauls conclusion that rand() only generates numbers that are a multiply of 3. <br />
<span class="default">&lt;?php<br />
$n </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">100000</span><span class="keyword">); </span><span class="comment">// with MAX_RAND=32768<br />
</span><span class="default">?&gt;<br />
</span>Since, 100000/32768=3.05 you get multiples of 3. The random integer will be multiplied by 3.05 to fit between 0 and 100000. rand() works fine, if you don't ask for bigger numbers then RAND_MAX.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75794""></a>
  <div class="note">
   <strong class="user">rok dot kralj at gmail dot com</strong>
   <a href="#75794" class="date">16-Jun-2007 12:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
rand function returns just a whole numbers. If you want a random float, then here's an elegant way:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">random_float </span><span class="keyword">(</span><span class="default">$min</span><span class="keyword">,</span><span class="default">$max</span><span class="keyword">) {<br />
&nbsp;&nbsp; return (</span><span class="default">$min</span><span class="keyword">+</span><span class="default">lcg_value</span><span class="keyword">()*(</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$max</span><span class="keyword">-</span><span class="default">$min</span><span class="keyword">)));<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75325""></a>
  <div class="note">
   <strong class="user">bozo_z_clown at yahoo dot com</strong>
   <a href="#75325" class="date">23-May-2007 05:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the automatic seeding seems to be done with the current number of seconds which means you can get the same results for several runs on a fast server.&nbsp; Either call srand() yourself with a more frequently changing seed or use mt_rand() which doesn't appear to suffer from the problem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74325""></a>
  <div class="note">
   <strong class="user">jont at live dot co dot uk</strong>
   <a href="#74325" class="date">05-Apr-2007 03:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
isn't this just a simpler way of making a random id for somthing? I mean i know that there is a very slight chance that a duplicate could be made but its a very, very, very small chance, nearly impossible.<br />
<br />
$rand = mt_rand(0, 32);<br />
$code = md5($rand . time());<br />
echo "$code";<br />
<br />
and if you don't want it the md5 can be removed, I've just added it as a prefer it there :)<br />
<br />
Jon</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73730""></a>
  <div class="note">
   <strong class="user">phpdev at dunnbypaul dot net</strong>
   <a href="#73730" class="date">07-Mar-2007 08:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's an interesting note about the inferiority of the rand() function. Try, for example, the following code...<br />
<br />
<span class="default">&lt;?php<br />
$r </span><span class="keyword">= array(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">1000000</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">100000</span><span class="keyword">);<br />
&nbsp; if (</span><span class="default">$n</span><span class="keyword">&lt;=</span><span class="default">10</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">]++;<br />
&nbsp; }<br />
}<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">); <br />
</span><span class="default">?&gt;<br />
</span><br />
which produces something similar to the following output (on my windows box, where RAND_MAX is 32768):<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 31<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 0<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 0<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 31<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 0<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; 0<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; 30<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; 0<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; 0<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; 31<br />
&nbsp;&nbsp;&nbsp; [10] =&gt; 0<br />
)<br />
<br />
Within this range only multiples of 3 are being selected. Also note that values that are filled are always 30 or 31 (no other values! really!) <br />
<br />
Now replace rand() with mt_rand() and see the difference...<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 14<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 16<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 9<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; 11<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; 9<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; 7<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; 7<br />
&nbsp;&nbsp;&nbsp; [10] =&gt; 9<br />
)<br />
<br />
Much more randomly distributed!<br />
<br />
Conclusion: mt_rand() is not just faster, it is a far superior algorithm.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73587""></a>
  <div class="note">
   <strong class="user">Patrick Daryll G.</strong>
   <a href="#73587" class="date">02-Mar-2007 06:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using rand()%x is faster than rand(0,x) yes, but it is wrong.<br />
Consider the following example:<br />
RAND_MAX is 32768 (like on Windows for example)<br />
You use rand()%30000<br />
Imagine rand() returns a value between 30000 and 32768.<br />
Modulo could make any value between 0 and 2768, but not any between 2769 and 29999 (except the value is below 29999).<br />
This would double the chance of getting a number between 0 and 2768, which is speaking against the principles of randomness.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69934""></a>
  <div class="note">
   <strong class="user">ludicruz at yahoo dot com</strong>
   <a href="#69934" class="date">27-Sep-2006 05:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
frank, nick at nerdynick dot com, and kniht<br />
this is now O(n) instead of O(n^2) ish...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">rand_permute</span><span class="keyword">(</span><span class="default">$size</span><span class="keyword">, </span><span class="default">$min</span><span class="keyword">, </span><span class="default">$max</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$retval </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//initialize an array of integers from $min to $max<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$min</span><span class="keyword">;</span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">$max</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//start with the the first index ($min).<br />
&nbsp;&nbsp;&nbsp; //randomly swap this number with any other number in the array.<br />
&nbsp;&nbsp;&nbsp; //this way we guarantee all numbers are permuted in the array,<br />
&nbsp;&nbsp;&nbsp; //and we assure no number is used more than once (technically reiterating prev line).<br />
&nbsp;&nbsp;&nbsp; //therefore we don't have to do the random checking each time we put something into the array.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">$min</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$size</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$retval</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$retval</span><span class="keyword">[</span><span class="default">$tmpkey </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">$min</span><span class="keyword">, </span><span class="default">$max</span><span class="keyword">)];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval</span><span class="keyword">[</span><span class="default">$tmpkey</span><span class="keyword">] = </span><span class="default">$tmp</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$retval</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$size</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53784""></a>
  <div class="note">
   <strong class="user">umpalump at poczta dot neostrada dot pl</strong>
   <a href="#53784" class="date">13-Jun-2005 05:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Random numbers with Gauss distribution (normal distribution).<br />
A correct alghoritm. Without aproximations, like Smaaps'<br />
It is specially usefull for simulations in physics.<br />
Check yourself, and have a fun.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">gauss</span><span class="keyword">()<br />
{&nbsp;&nbsp; </span><span class="comment">// N(0,1)<br />
&nbsp;&nbsp;&nbsp; // returns random number with normal distribution:<br />
&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp; mean=0<br />
&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp; std dev=1<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; // auxilary vars<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">=</span><span class="default">random_0_1</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$y</span><span class="keyword">=</span><span class="default">random_0_1</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// two independent variables with normal distribution N(0,1)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$u</span><span class="keyword">=</span><span class="default">sqrt</span><span class="keyword">(-</span><span class="default">2</span><span class="keyword">*</span><span class="default">log</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">))*</span><span class="default">cos</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">*</span><span class="default">pi</span><span class="keyword">()*</span><span class="default">$y</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$v</span><span class="keyword">=</span><span class="default">sqrt</span><span class="keyword">(-</span><span class="default">2</span><span class="keyword">*</span><span class="default">log</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">))*</span><span class="default">sin</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">*</span><span class="default">pi</span><span class="keyword">()*</span><span class="default">$y</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// i will return only one, couse only one needed<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$u</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">gauss_ms</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">=</span><span class="default">0.0</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">=</span><span class="default">1.0</span><span class="keyword">)<br />
{&nbsp;&nbsp; </span><span class="comment">// N(m,s)<br />
&nbsp;&nbsp;&nbsp; // returns random number with normal distribution:<br />
&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp; mean=m<br />
&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp; std dev=s<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">gauss</span><span class="keyword">()*</span><span class="default">$s</span><span class="keyword">+</span><span class="default">$m</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">random_0_1</span><span class="keyword">()<br />
{&nbsp;&nbsp; </span><span class="comment">// auxiliary function<br />
&nbsp;&nbsp;&nbsp; // returns random number with flat distribution from 0 to 1<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return (float)</span><span class="default">rand</span><span class="keyword">()/(float)</span><span class="default">getrandmax</span><span class="keyword">();<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
JanS<br />
student of astronomy<br />
on Warsaw University</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53600""></a>
  <div class="note">
   <strong class="user">smaaps at kaldamar dot de</strong>
   <a href="#53600" class="date">06-Jun-2005 10:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Lately I needed some random numbers with a gaussian (normal) distribution, not evenly distributed as the numbers generated by rand(). After googling a while, I found out that there is no perfect algrorithm that creates such numbers out of evenly distruted random numbers but a few methods that have similar effect. The following function implements all three algorithms I found- The the last two methods create numbers where you can find a lower and upper boundary and the first one will create a number from time to time (such as one in every 10000) that may be very far from the average value. Have fun testing and using it.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">gauss</span><span class="keyword">(</span><span class="default">$algorithm </span><span class="keyword">= </span><span class="string">"polar"</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$randmax </span><span class="keyword">= </span><span class="default">9999</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; switch(</span><span class="default">$algorithm</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//polar-methode by marsaglia<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">case </span><span class="string">"polar"</span><span class="keyword">: <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">$v </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$u1 </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$randmax</span><span class="keyword">) / </span><span class="default">$randmax</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$u2 </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$randmax</span><span class="keyword">) / </span><span class="default">$randmax</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= (</span><span class="default">2 </span><span class="keyword">* </span><span class="default">$u1 </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">) * (</span><span class="default">2 </span><span class="keyword">* </span><span class="default">$u1 </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">) + (</span><span class="default">2 </span><span class="keyword">* </span><span class="default">$u2 </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">) * (</span><span class="default">2 </span><span class="keyword">* </span><span class="default">$u2 </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">2</span><span class="keyword">* </span><span class="default">$u1 </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">) * (( -</span><span class="default">2 </span><span class="keyword">* </span><span class="default">log</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">) / </span><span class="default">$v</span><span class="keyword">) ^ </span><span class="default">0.5</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// box-muller-method<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">case </span><span class="string">"boxmuller"</span><span class="keyword">: <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$u1 </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$randmax</span><span class="keyword">) / </span><span class="default">$randmax</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$u2 </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$randmax</span><span class="keyword">) / </span><span class="default">$randmax</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">sqrt</span><span class="keyword">(-</span><span class="default">2 </span><span class="keyword">* </span><span class="default">log</span><span class="keyword">(</span><span class="default">$u1</span><span class="keyword">)) * </span><span class="default">cos</span><span class="keyword">(</span><span class="default">2 </span><span class="keyword">* </span><span class="default">pi</span><span class="keyword">() * </span><span class="default">$u2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } while (</span><span class="default">strval</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) == </span><span class="string">"1.#INF" </span><span class="keyword">or </span><span class="default">strval</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) == </span><span class="string">"-1.#INF"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// the check has to be done cause sometimes (1:10000)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // values such as "1.#INF" occur and i dont know why<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$x</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// twelve random numbers&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">case </span><span class="string">"zwoelfer"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sum </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">12</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sum </span><span class="keyword">+= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$randmax</span><span class="keyword">) / </span><span class="default">$randmax</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$sum</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; }&nbsp; &nbsp; &nbsp;&nbsp; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49246""></a>
  <div class="note">
   <strong class="user">relsqui at armory dot com</strong>
   <a href="#49246" class="date">21-Jan-2005 02:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Don't forget, it's faster to use bitwise operations when you need a random number that's less than some power of two. For example,<br />
<br />
<span class="default">&lt;?php<br />
rand</span><span class="keyword">()&amp;</span><span class="default">1</span><span class="keyword">;<br />
</span><span class="comment">// instead of<br />
</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
</span><span class="comment">// for generating 0 or 1,<br />
<br />
</span><span class="default">rand</span><span class="keyword">()&amp;</span><span class="default">3</span><span class="keyword">;<br />
</span><span class="comment">// instead of<br />
</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br />
</span><span class="comment">// for generating 0, 1, 2, or 3,<br />
<br />
</span><span class="default">rand</span><span class="keyword">()&amp;</span><span class="default">7</span><span class="keyword">;<br />
</span><span class="comment">// instead of<br />
</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">)<br />
</span><span class="comment">// for generating 0, 1, 2, 3, 4, 5, 6, or 7,<br />
</span><span class="default">?&gt;<br />
</span><br />
and so on. All you're doing there is generating a default random number (so PHP doesn't have to parse any arguments) and chopping off the piece that's useful to you (using a bitwise operation which is faster than even basic math).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.rad2deg.html">rad2deg</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.round.html">round</a></div>
 <div class="up"><a href="ref.math.html">Math Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
