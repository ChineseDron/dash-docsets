<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Rounds a float</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.rand.html">rand</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.sin.html">sin</a></div>
 <div class="up"><a href="ref.math.html">Math Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.round" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">round</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">round</span> &mdash; <span class="dc-title">Rounds a float</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.round-description">
  <h3 class="title">Description</h3>
   <div class="methodsynopsis dc-description">
    <span class="type">float</span> <span class="methodname"><b>round</b></span>
     ( <span class="methodparam"><span class="type">float</span> <tt class="parameter">$val</tt></span>
    [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$precision</tt><span class="initializer"> = 0</span></span>
    [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$mode</tt><span class="initializer"> = PHP_ROUND_HALF_UP</span></span>
   ]] )</div>

  <p class="para rdfs-comment">
   Returns the rounded value of <i><tt class="parameter">val</tt></i> to
   specified <i><tt class="parameter">precision</tt></i>
   (number of digits after the decimal point).
   <i><tt class="parameter">precision</tt></i> can also be negative or zero (default).
  </p>
  
  <p class="para">
   <blockquote class="note"><p><b class="note">Note</b>: 
    <span class="simpara">
     PHP doesn&#039;t handle strings like <i>&quot;12,300.2&quot;</i> correctly
     by default. See <a href="language.types.string.html#language.types.string.conversion" class="link">converting from strings</a>.
    </span>
   </p></blockquote>
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.round-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">val</tt></i></span>
     <dd>

      <p class="para">
       The value to round
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">precision</tt></i></span>
     <dd>

      <p class="para">
       The optional number of decimal digits to round to.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">mode</tt></i></span>
     <dd>

      <p class="para">
       One of <b><tt>PHP_ROUND_HALF_UP</tt></b>,
       <b><tt>PHP_ROUND_HALF_DOWN</tt></b>,
       <b><tt>PHP_ROUND_HALF_EVEN</tt></b>, or
       <b><tt>PHP_ROUND_HALF_ODD</tt></b>.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.round-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   The rounded value
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.round-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-3197">
    <p><b>Example #1 <span class="function"><b>round()</b></span> examples</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">3.4</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;3<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">3.5</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;4<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">3.6</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;4<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">3.6</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;4<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">1.95583</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;1.96<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">1241757</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">3</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;1242000<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">5.045</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;5.05<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">5.055</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;5.06<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-3198">
    <p><b>Example #2 <i><tt class="parameter">mode</tt></i> examples</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">9.5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PHP_ROUND_HALF_UP</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;10<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">9.5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PHP_ROUND_HALF_DOWN</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;9<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">9.5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PHP_ROUND_HALF_EVEN</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;10<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">9.5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PHP_ROUND_HALF_ODD</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;9<br /><br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">8.5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PHP_ROUND_HALF_UP</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;9<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">8.5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PHP_ROUND_HALF_DOWN</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;8<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">8.5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PHP_ROUND_HALF_EVEN</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;8<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">8.5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PHP_ROUND_HALF_ODD</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;9<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 <div class="refsect1 changelog" id="refsect1-function.round-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle">
       <td align="left">5.3.0</td>
       <td align="left">
        The <i><tt class="parameter">mode</tt></i> parameter was introduced.
       </td>
      </tr>

      <tr valign="middle">
       <td align="left">5.2.7</td>
       <td align="left">
        The inner workings of <span class="function"><b>round()</b></span> was changed 
        to conform to the C99 standard.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.round-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.ceil.html" class="function" rel="rdfs-seeAlso">ceil()</a> - Round fractions up</span></li>
    <li class="member"><span class="function"><a href="function.floor.html" class="function" rel="rdfs-seeAlso">floor()</a> - Round fractions down</span></li>
    <li class="member"><span class="function"><a href="function.number-format.html" class="function" rel="rdfs-seeAlso">number_format()</a> - Format a number with grouped thousands</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="106961""></a>
  <div class="note">
   <strong class="user">LT Workshop</strong>
   <a href="#106961" class="date">21-Dec-2011 02:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Normal Round Up Method<br />
&nbsp;*<br />
&nbsp;* @param double $val<br />
&nbsp;* @param int $precision<br />
&nbsp;* @return double<br />
&nbsp;*/<br />
<br />
</span><span class="keyword">function </span><span class="default">round_up </span><span class="keyword">( </span><span class="default">$val</span><span class="keyword">, </span><span class="default">$precision </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p </span><span class="keyword">= </span><span class="default">pow </span><span class="keyword">( </span><span class="default">10</span><span class="keyword">, </span><span class="default">$precision </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">$p </span><span class="keyword">* </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if((</span><span class="default">round</span><span class="keyword">(</span><span class="default">$b </span><span class="keyword">- </span><span class="default">$a</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">) &gt; </span><span class="default">0.5</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">-= </span><span class="default">1.0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$b </span><span class="keyword">/ </span><span class="default">$p</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106818""></a>
  <div class="note">
   <strong class="user">James Dudeck</strong>
   <a href="#106818" class="date">08-Dec-2011 03:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Rounding decimal points<br />
<br />
<span class="default">&lt;?php <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">rfloor</span><span class="keyword">(</span><span class="default">$real</span><span class="keyword">,</span><span class="default">$decimals </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$real</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">,</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$real</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">) + (</span><span class="default">1 </span><span class="keyword">+ </span><span class="default">$decimals</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">rceil</span><span class="keyword">(</span><span class="default">$real</span><span class="keyword">,</span><span class="default">$decimals </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newreal </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$real</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">,</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$real</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">) + (</span><span class="default">1 </span><span class="keyword">+ </span><span class="default">$decimals</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$real</span><span class="keyword">[</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$newreal</span><span class="keyword">)] &gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newreal</span><span class="keyword">[</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$newreal</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">] += </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$newreal</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">rround</span><span class="keyword">(</span><span class="default">$real</span><span class="keyword">,</span><span class="default">$decimals </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">,</span><span class="default">$halfdown </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newreal </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$real</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">,</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$real</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">) + (</span><span class="default">1 </span><span class="keyword">+ </span><span class="default">$decimals</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if((</span><span class="default">$halfdown </span><span class="keyword">== </span><span class="default">FALSE</span><span class="keyword">) &amp;&amp; (</span><span class="default">$real</span><span class="keyword">[</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$newreal</span><span class="keyword">)] = </span><span class="default">5</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newreal</span><span class="keyword">[</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$newreal</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">] += </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if(</span><span class="default">$real</span><span class="keyword">[</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$newreal</span><span class="keyword">)] &gt; </span><span class="default">5</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newreal</span><span class="keyword">[</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$newreal</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">] += </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$newreal</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage:<br />
rceil(12.12146321,2); //12.13 -- as long as the value is greater than 0, round up.<br />
rfloor(12.12946321,2); //12.12 -- drop everything after the number of decimal places<br />
rround(12.12546321,2); //12.13 -- round half up<br />
rround(12.12546321,2,TRUE); //12.12 -- round half down</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105790""></a>
  <div class="note">
   <strong class="user">christian at deligant dot net</strong>
   <a href="#105790" class="date">15-Sep-2011 01:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this function (as all mathematical operators) takes care of the setlocale setting, resulting in some weirdness when using the result where the english math notation is expected, as the printout of the result in a width: style attribute!<br />
<br />
<span class="default">&lt;?php<br />
$a</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">/</span><span class="default">4</span><span class="keyword">;<br />
echo </span><span class="default">round</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">); </span><span class="comment">// 0.75<br />
<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'it_IT@euro'</span><span class="keyword">, </span><span class="string">'it_IT'</span><span class="keyword">, </span><span class="string">'it'</span><span class="keyword">);<br />
</span><span class="default">$b</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">/</span><span class="default">4</span><span class="keyword">;<br />
echo </span><span class="default">round</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">); </span><span class="comment">// 0,75<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102641""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#102641" class="date">25-Feb-2011 09:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Round function with PHP_ROUND_HALF_UP conversion<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">round_up </span><span class="keyword">( </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$precision </span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pow </span><span class="keyword">= </span><span class="default">pow </span><span class="keyword">( </span><span class="default">10</span><span class="keyword">, </span><span class="default">$precision </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; return ( </span><span class="default">ceil </span><span class="keyword">( </span><span class="default">$pow </span><span class="keyword">* </span><span class="default">$value </span><span class="keyword">) + </span><span class="default">ceil </span><span class="keyword">( </span><span class="default">$pow </span><span class="keyword">* </span><span class="default">$value </span><span class="keyword">- </span><span class="default">ceil </span><span class="keyword">( </span><span class="default">$pow </span><span class="keyword">* </span><span class="default">$value </span><span class="keyword">) ) ) / </span><span class="default">$pow</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="default">var_dump </span><span class="keyword">( </span><span class="default">round_up </span><span class="keyword">( </span><span class="default">499.9440000046</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">) ); </span><span class="comment">// float(499.945)<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102290""></a>
  <div class="note">
   <strong class="user">cheezfan at gmail dot com</strong>
   <a href="#102290" class="date">06-Feb-2011 06:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're confused about how precision works, these mean the same:<br />
<br />
<span class="default">&lt;?php<br />
round</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$precision</span><span class="keyword">);<br />
</span><span class="default">round</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">*</span><span class="default">10</span><span class="keyword">^</span><span class="default">$precision</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100994""></a>
  <div class="note">
   <strong class="user">omnibus at omnibus dot edu dot pl</strong>
   <a href="#100994" class="date">19-Nov-2010 02:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware strange behaviour if number is negative and precision is bigger than the actual number of digits after comma.<br />
<br />
round(-0.07, 4);<br />
<br />
returns<br />
<br />
-0.07000000000000001<br />
<br />
So if you validate it against a regular expression requiring the maximum amount of digits after comma, you'll get into trouble.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100322""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#100322" class="date">07-Oct-2010 04:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is function that rounds to a specified increment, but always up. I had to use it for price adjustment that always went up to $5 increments.<br />
<br />
<span class="default">&lt;?php&nbsp; <br />
</span><span class="keyword">function </span><span class="default">roundUpTo</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">, </span><span class="default">$increments</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$increments </span><span class="keyword">= </span><span class="default">1 </span><span class="keyword">/ </span><span class="default">$increments</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$number </span><span class="keyword">* </span><span class="default">$increments</span><span class="keyword">) / </span><span class="default">$increments</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99633""></a>
  <div class="note">
   <strong class="user">feha at vision dot to</strong>
   <a href="#99633" class="date">27-Aug-2010 07:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a short neat function to round minutes (hour) ...<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">minutes_round </span><span class="keyword">(</span><span class="default">$hour </span><span class="keyword">= </span><span class="string">'14:03:32'</span><span class="keyword">, </span><span class="default">$minutes </span><span class="keyword">= </span><span class="string">'5'</span><span class="keyword">, </span><span class="default">$format </span><span class="keyword">= </span><span class="string">"H:i"</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// by Femi Hasani [www.vision.to]<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$seconds </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$hour</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rounded </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$seconds </span><span class="keyword">/ (</span><span class="default">$minutes </span><span class="keyword">* </span><span class="default">60</span><span class="keyword">)) * (</span><span class="default">$minutes </span><span class="keyword">* </span><span class="default">60</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">date</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$rounded</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
You decide to round to nearest minute ...<br />
example will produce : 14:05</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98918""></a>
  <div class="note">
   <strong class="user">lossantis at ig dot com dot br</strong>
   <a href="#98918" class="date">15-Jul-2010 07:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The PHP_ROUND_HALF_UP is unabled to less php 5.3, but I've a solution for this:<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">252 </span><span class="keyword">/ </span><span class="default">40</span><span class="keyword">; </span><span class="comment">// 6.3 </span><span class="default">?&gt;<br />
</span><br />
If I round this:<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">round</span><span class="keyword">(</span><span class="default">252 </span><span class="keyword">/ </span><span class="default">40</span><span class="keyword">); </span><span class="comment">// 6 </span><span class="default">?&gt;<br />
</span><br />
But I like to enable result like PHP_ROUND_HALF_UP. I can do this:<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">round</span><span class="keyword">((</span><span class="default">252</span><span class="keyword">/</span><span class="default">40</span><span class="keyword">) + </span><span class="default">0.5</span><span class="keyword">); </span><span class="comment">// 7 </span><span class="default">?&gt;<br />
</span><br />
It's usefull to paginators ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98704""></a>
  <div class="note">
   <strong class="user">hugues at zonereseau dot com</strong>
   <a href="#98704" class="date">01-Jul-2010 12:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had problem with round() function I didn't gave me the same result in windows or on a linux server :<br />
<br />
<span class="default">&lt;?php<br />
round</span><span class="keyword">(</span><span class="default">4.725</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">); </span><span class="comment">// gave me 4.72 on linux<br />
</span><span class="default">round</span><span class="keyword">(</span><span class="default">4.725</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">); </span><span class="comment">// gave me 4.73 on windows<br />
</span><span class="default">?&gt;<br />
</span><br />
The expected result was 4.73<br />
<br />
Here my function to resolve my problem<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">mround</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$precision </span><span class="keyword">= (</span><span class="default">$precision </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">? </span><span class="default">1 </span><span class="keyword">: </span><span class="default">$precision</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pow </span><span class="keyword">= </span><span class="default">pow</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ceil </span><span class="keyword">= </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$number </span><span class="keyword">* </span><span class="default">$pow</span><span class="keyword">)/</span><span class="default">$pow</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$floor </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$number </span><span class="keyword">* </span><span class="default">$pow</span><span class="keyword">)/</span><span class="default">$pow</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pow </span><span class="keyword">= </span><span class="default">pow</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$diffCeil&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$pow</span><span class="keyword">*(</span><span class="default">$ceil</span><span class="keyword">-</span><span class="default">$number</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$diffFloor&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$pow</span><span class="keyword">*(</span><span class="default">$number</span><span class="keyword">-</span><span class="default">$floor</span><span class="keyword">)+(</span><span class="default">$number </span><span class="keyword">&lt; </span><span class="default">0 </span><span class="keyword">? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$diffCeil </span><span class="keyword">&gt;= </span><span class="default">$diffFloor</span><span class="keyword">) return </span><span class="default">$floor</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else return </span><span class="default">$ceil</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="default">mround</span><span class="keyword">(</span><span class="default">4.725</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">); </span><span class="comment">// Yes 4.73<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95485""></a>
  <div class="note">
   <strong class="user">edgarmveiga at gmail dot com</strong>
   <a href="#95485" class="date">05-Jan-2010 08:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Trying to simulate the toPrecison function of Javascript, I have obtained this method. Any sugestions or revisions [sent to me by email, not posted here] would be appreciated:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Rounding to significant digits ( just like JS toPrecision() )<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @number &lt;float&gt; value to round<br />
&nbsp;&nbsp; &nbsp; * @sf &lt;int&gt; Number of significant figures<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">toPrecision</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">, </span><span class="default">$sf</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// How many decimal places do we round and format to?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // @note May be negative.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dp </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$sf </span><span class="keyword">- </span><span class="default">log10</span><span class="keyword">(</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">)));<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Round as a regular number.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$numberFinal </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">, </span><span class="default">$dp</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//If the original number it's halp up rounded, don't need the last 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrDecimais</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">,</span><span class="default">$numberFinal</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">) &gt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$numberFinal</span><span class="keyword">) &amp;&amp; </span><span class="default">$dp </span><span class="keyword">&gt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$arrDecimais</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$valorFinal</span><span class="keyword">=</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%."</span><span class="keyword">.(</span><span class="default">$dp</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">).</span><span class="string">"f"</span><span class="keyword">, </span><span class="default">$number</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Leave the formatting to format_number(), but always format 0 to 0dp.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$valorFinal</span><span class="keyword">=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$numberFinal</span><span class="keyword">, </span><span class="default">0 </span><span class="keyword">== </span><span class="default">$numberFinal </span><span class="keyword">? </span><span class="default">0 </span><span class="keyword">: </span><span class="default">$dp</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Verify if needs to be represented in scientific notation<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrDecimaisOriginal</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">,</span><span class="default">$number</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$arrDecimaisOriginal</span><span class="keyword">)&gt;=</span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$arrDecimaisOriginal</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])&gt;</span><span class="default">$sf</span><span class="keyword">)?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%."</span><span class="keyword">.(</span><span class="default">$sf</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">).</span><span class="string">"E"</span><span class="keyword">, </span><span class="default">$valorFinal</span><span class="keyword">) :<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$valorFinal</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%."</span><span class="keyword">.(</span><span class="default">$sf</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">).</span><span class="string">"E"</span><span class="keyword">, </span><span class="default">$valorFinal</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94397""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#94397" class="date">02-Nov-2009 08:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This functions return ceil($nb) if the double or float value is bigger than "$nb.5" else it's return floor($nb)<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">arounds_int</span><span class="keyword">(</span><span class="default">$nb</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$nb</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sup </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$nb</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$inf </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$nb</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$try </span><span class="keyword">= (double) </span><span class="default">$inf </span><span class="keyword">. </span><span class="string">'.5' </span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$nb </span><span class="keyword">&gt; </span><span class="default">$try</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$sup</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$inf</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93747""></a>
  <div class="note">
   <strong class="user">michaeldnelson dot mdn at gmail dot com</strong>
   <a href="#93747" class="date">25-Sep-2009 06:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function will let you round to an arbitrary non-zero number.&nbsp; Zero of course causes a division by zero.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">roundTo</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">, </span><span class="default">$to</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">round</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">/</span><span class="default">$to</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">)* </span><span class="default">$to</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="default">roundTo</span><span class="keyword">(</span><span class="default">87.23</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">); </span><span class="comment">//80<br />
</span><span class="keyword">echo </span><span class="default">roundTo</span><span class="keyword">(-</span><span class="default">87.23</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">); </span><span class="comment">//-80<br />
</span><span class="keyword">echo </span><span class="default">roundTo</span><span class="keyword">(</span><span class="default">87.23</span><span class="keyword">, </span><span class="default">.25</span><span class="keyword">); </span><span class="comment">//87.25<br />
</span><span class="keyword">echo </span><span class="default">roundTo</span><span class="keyword">(</span><span class="default">.23</span><span class="keyword">, </span><span class="default">.25</span><span class="keyword">); </span><span class="comment">//.25<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93600""></a>
  <div class="note">
   <strong class="user">Bevan</strong>
   <a href="#93600" class="date">17-Sep-2009 12:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Formats a number to the specified number of significant figures.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Formats numbers to the specified number of significant figures.<br />
&nbsp;*<br />
&nbsp;* @author Bevan Rudge, Drupal.geek.nz<br />
&nbsp;*<br />
&nbsp;* @param number $number<br />
&nbsp;*&nbsp;&nbsp; The number to format.<br />
&nbsp;* @param integer $sf<br />
&nbsp;*&nbsp;&nbsp; The number of significant figures to round and format the number to.<br />
&nbsp;* @return string<br />
&nbsp;*&nbsp;&nbsp; The rounded and formatted number.<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">format_number_significant_figures</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">, </span><span class="default">$sf</span><span class="keyword">) {<br />
&nbsp; </span><span class="comment">// How many decimal places do we round and format to?<br />
&nbsp; // @note May be negative.<br />
&nbsp; </span><span class="default">$dp </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$sf </span><span class="keyword">- </span><span class="default">log10</span><span class="keyword">(</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">)));<br />
&nbsp; </span><span class="comment">// Round as a regular number.<br />
&nbsp; </span><span class="default">$number </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">, </span><span class="default">$dp</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">// Leave the formatting to format_number(), but always format 0 to 0dp.<br />
&nbsp; </span><span class="keyword">return </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">, </span><span class="default">0 </span><span class="keyword">== </span><span class="default">$number </span><span class="keyword">? </span><span class="default">0 </span><span class="keyword">: </span><span class="default">$dp</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89955""></a>
  <div class="note">
   <strong class="user">mydanielsmile+phpnet at gmail dot com</strong>
   <a href="#89955" class="date">30-Mar-2009 12:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Function to round in increments I made:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">round_to</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">, </span><span class="default">$increments</span><span class="keyword">) {<br />
</span><span class="default">$increments </span><span class="keyword">= </span><span class="default">1 </span><span class="keyword">/ </span><span class="default">$increments</span><span class="keyword">;<br />
return (</span><span class="default">round</span><span class="keyword">(</span><span class="default">$number </span><span class="keyword">* </span><span class="default">$increments</span><span class="keyword">) / </span><span class="default">$increments</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span>For example:<br />
<span class="default">&lt;?php<br />
$n </span><span class="keyword">= </span><span class="default">5.3</span><span class="keyword">;<br />
echo </span><span class="default">round_to</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">, </span><span class="default">0.5</span><span class="keyword">); </span><span class="comment">// 5.5<br />
</span><span class="default">?&gt;<br />
</span><br />
Daniel.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86708""></a>
  <div class="note">
   <strong class="user">Montoya</strong>
   <a href="#86708" class="date">30-Oct-2008 02:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a quick gotcha: <br />
<br />
I was fetching some data from a web service using cURL &amp; SimpleXML and getting values like 28.75. I was then rounding these values but getting 28 instead of 29.<br />
<br />
Turns out the values were strings, so round() would treat them as integers, and casting to an int drops off the decimals (like floor()). <br />
<br />
So I had to do: <br />
<br />
round( (double) $val ); <br />
<br />
HTH!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86330""></a>
  <div class="note">
   <strong class="user">darkstream777 at gmx dot net</strong>
   <a href="#86330" class="date">13-Oct-2008 08:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is another method to round digits with precision support:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">roundDigits</span><span class="keyword">( </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">=</span><span class="default">0 </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$precisionFactor </span><span class="keyword">= (</span><span class="default">$precision </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) ? </span><span class="default">1 </span><span class="keyword">: </span><span class="default">pow</span><span class="keyword">( </span><span class="default">10</span><span class="keyword">, </span><span class="default">$precision </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">round</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">* </span><span class="default">$precisionFactor </span><span class="keyword">) / </span><span class="default">$precisionFactor</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
<br />
Example:<br />
echo roundDigits(1.859438,2) . "&lt;br /&gt;"; // equals 1.86<br />
echo roundDigits(1.444444,4); // equals 1.4444<br />
<br />
Greetings, darki</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85466""></a>
  <div class="note">
   <strong class="user">Chris</strong>
   <a href="#85466" class="date">01-Sep-2008 05:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I dont think it is a bug as such but when rounding genrally you tend to only round from the digit after the precision you want.<br />
<br />
The only way to get arround this is by rounding it twice with diffrent precisions:<br />
<br />
<span class="default">&lt;?php <br />
$round1 </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">8.1246</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">); </span><span class="comment">//8.125<br />
</span><span class="default">$round2 </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$round1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">); </span><span class="comment">//8.13<br />
</span><span class="keyword">echo </span><span class="default">$round2</span><span class="keyword">; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84809""></a>
  <div class="note">
   <strong class="user">chris at chrisstockton dot org</strong>
   <a href="#84809" class="date">30-Jul-2008 04:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In case anyone has a problem like me ever, were you are doing very large stat calculations on a array and end up with floats with way to large of precision. A good way to round them all to N length is below.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">recursiveRound</span><span class="keyword">(array &amp;</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">recursiveRound</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$precision</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif(</span><span class="default">is_float</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">round</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$precision</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84780""></a>
  <div class="note">
   <strong class="user">Darryl Kuhn</strong>
   <a href="#84780" class="date">29-Jul-2008 04:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a round up function with precision which surprisingly did not exist (at least that I could see). This does the trick:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">roundUp</span><span class="keyword">( </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">=</span><span class="default">0 </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// If the precision is 0 then default the factor to 1, otherwise <br />
&nbsp;&nbsp;&nbsp; // use 10^$precision. This effectively shifts the decimal point to the <br />
&nbsp;&nbsp;&nbsp; // right.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if ( </span><span class="default">$precision </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$precisionFactor </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$precisionFactor </span><span class="keyword">= </span><span class="default">pow</span><span class="keyword">( </span><span class="default">10</span><span class="keyword">, </span><span class="default">$precision </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// ceil doesn't have any notion of precision, so by multiplying by<br />
&nbsp;&nbsp;&nbsp; // the right factor and then dividing by the same factor we<br />
&nbsp;&nbsp;&nbsp; // emulate a precision<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">ceil</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">* </span><span class="default">$precisionFactor </span><span class="keyword">)/</span><span class="default">$precisionFactor</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82644""></a>
  <div class="note">
   <strong class="user">alveda at pinoywebsys dot com</strong>
   <a href="#82644" class="date">20-Apr-2008 12:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My simple work around.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">my_round</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">round</span><span class="keyword">(</span><span class="default">round</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">*</span><span class="default">pow</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">), </span><span class="default">0</span><span class="keyword">), -</span><span class="default">1</span><span class="keyword">)/</span><span class="default">pow</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82555""></a>
  <div class="note">
   <strong class="user">ThOmAs</strong>
   <a href="#82555" class="date">16-Apr-2008 04:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Excample :<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">if_this_an_int</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">)<br />
{<br />
if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) &gt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) &amp;&amp; </span><span class="default">$arg </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">)<br />
{<br />
echo </span><span class="default">round</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">);<br />
}<br />
}<br />
</span><span class="default">$test </span><span class="keyword">= </span><span class="default">1.3</span><span class="keyword">;<br />
echo </span><span class="default">if_this_an_int</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
You can use this function for any formular in your website, when you must to check if not empty or zero and it's a number<br />
<br />
I hope you can need this.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82165""></a>
  <div class="note">
   <strong class="user">admin at studio-gepard dot pl</strong>
   <a href="#82165" class="date">29-Mar-2008 01:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is basic function I sue to round file size. It gives as output text, so it's very easy to use it in your applications.<br />
<br />
$SIZE is file size in MB.<br />
function output is text.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">sizetotext</span><span class="keyword">(</span><span class="default">$SIZE</span><span class="keyword">){<br />
&nbsp; <br />
&nbsp; if (</span><span class="default">$SIZE</span><span class="keyword">&gt;=</span><span class="default">1024</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$SIZE</span><span class="keyword">=</span><span class="default">round</span><span class="keyword">(</span><span class="default">$SIZE</span><span class="keyword">/</span><span class="default">1024</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">$SIZE</span><span class="keyword">.</span><span class="string">"GB"</span><span class="keyword">;<br />
&nbsp; }else{<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$SIZE</span><span class="keyword">&gt;=</span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$SIZE</span><span class="keyword">.</span><span class="string">"MB"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$SIZE</span><span class="keyword">=</span><span class="default">$SIZE</span><span class="keyword">*</span><span class="default">1000</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="string">"~"</span><span class="keyword">.</span><span class="default">$SIZE</span><span class="keyword">.</span><span class="string">"KB"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81426""></a>
  <div class="note">
   <strong class="user">skinnepa at hotmail dot com</strong>
   <a href="#81426" class="date">27-Feb-2008 01:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Remember kids that rounding a DB NULL will result in a 0 zero;&nbsp; test your NULLs!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80375""></a>
  <div class="note">
   <strong class="user">martinr at maarja dot net</strong>
   <a href="#80375" class="date">12-Jan-2008 03:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that the format of this functions output also depends on your locale settings. For example, if you have set your locale to some country that uses commas to separate decimal places, the output of this function also uses commas instead of dots.<br />
<br />
This might be a problem when you are feeding the rounded float number into a database, which requires you to separate decimal places with dots.<br />
<br />
See it in action:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">round</span><span class="keyword">(</span><span class="string">'3.5558'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">constant</span><span class="keyword">(</span><span class="string">'LC_ALL'</span><span class="keyword">), </span><span class="string">'et_EE.UTF-8'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">. </span><span class="default">round</span><span class="keyword">(</span><span class="string">'3.5558'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
The output will be:<br />
3.56<br />
3,56</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76923""></a>
  <div class="note">
   <strong class="user">mark at customcartons dot com dot au</strong>
   <a href="#76923" class="date">05-Aug-2007 06:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I'm sure its been done before, but here's my example of a round up function.<br />
<br />
This function allows you to specify the number of decimal places to round up to. <br />
<br />
Eg, when rounding up to 3 decimal places, this function adds 0.0005 to the original value and performs round(), or for 6 decimal places, adds 0.0000005 and performs round(), etc...<br />
<br />
Hopefully some of you will find it useful:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">roundup </span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$dp</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Offset to add to $value to cause round() to round up to nearest significant digit for '$dp' decimal places<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">pow </span><span class="keyword">(</span><span class="default">10</span><span class="keyword">, -(</span><span class="default">$dp </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">)) * </span><span class="default">5</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">round </span><span class="keyword">(</span><span class="default">$value </span><span class="keyword">+ </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$dp</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Please post if you have any comments or improvements on this :-)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73961""></a>
  <div class="note">
   <strong class="user">tom at crysis-online dot com</strong>
   <a href="#73961" class="date">17-Mar-2007 08:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I just found out then that even if you round a double (3.7) to an integer (4), it's data type remains as 'double'. So it's always good to use the settype() function when using the round() function to prevent any problems with your scripts.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73537""></a>
  <div class="note">
   <strong class="user">chafy at alo dot bg</strong>
   <a href="#73537" class="date">28-Feb-2007 06:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The function round numbers to a given precision.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">toFixed</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">, </span><span class="default">$round</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">)<br />
{ <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tempd </span><span class="keyword">= </span><span class="default">$number</span><span class="keyword">*</span><span class="default">pow</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">,</span><span class="default">$round</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tempd1 </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$tempd</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$number </span><span class="keyword">= </span><span class="default">$tempd1</span><span class="keyword">/</span><span class="default">pow</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">,</span><span class="default">$round</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$number</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; <br />
}<br />
<br />
echo </span><span class="default">round</span><span class="keyword">(</span><span class="default">5.555</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">); </span><span class="comment">//retunr 5.55 - I don't know why&nbsp;&nbsp; <br />
</span><span class="keyword">echo </span><span class="default">toFixed</span><span class="keyword">(</span><span class="default">5.555</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);&nbsp; </span><span class="comment">//return 5.56<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70428""></a>
  <div class="note">
   <strong class="user">maxteiber at gmail dot com</strong>
   <a href="#70428" class="date">16-Oct-2006 05:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
the result of this function always depends on the underlying C function. There have been a lot of compiler bugs and floating-point precission problems involving this function. Right now the following code:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">round</span><span class="keyword">(</span><span class="default">141.075</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
returns:<br />
<br />
141.07<br />
<br />
on my machine.<br />
So never really trust this function when you do critical calculations like accounting stuff!<br />
Instead: use only integers or use string comparisons.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61194""></a>
  <div class="note">
   
   <a href="#61194" class="date">27-Jan-2006 12:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Instead of writing roundDown() and roundUp() functions in php, you might want to consider floor() and ceil(), as they are probably much, much faster.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47365""></a>
  <div class="note">
   <strong class="user">martin at chinese-monkey dot com</strong>
   <a href="#47365" class="date">13-Nov-2004 09:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you didn't want to use 'ceil()' or 'floor()' as it only rounds to a whole number u could do this:<br />
<br />
<span class="default">&lt;?php<br />
$actual_value </span><span class="keyword">= </span><span class="default">3.352</span><span class="keyword">;<br />
</span><span class="default">$number </span><span class="keyword">= </span><span class="default">0.01</span><span class="keyword">; </span><span class="comment">//how many decimal places you want it to be<br />
<br />
</span><span class="default">$temp1 </span><span class="keyword">= </span><span class="default">$actual_value </span><span class="keyword">* </span><span class="default">2</span><span class="keyword">;<br />
</span><span class="default">$temp2 </span><span class="keyword">= </span><span class="default">$temp1 </span><span class="keyword">+ </span><span class="default">$number</span><span class="keyword">; </span><span class="comment">//'+ $number' if rounding up '- $number' if rounding down<br />
</span><span class="default">$temp3 </span><span class="keyword">= </span><span class="default">$temp2 </span><span class="keyword">/ </span><span class="default">2</span><span class="keyword">;<br />
</span><span class="default">$new_value </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$temp3</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$new_value</span><span class="keyword">; </span><span class="comment">// 3.36<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44236""></a>
  <div class="note">
   <strong class="user">red at aztec dot sk</strong>
   <a href="#44236" class="date">19-Jul-2004 05:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Better is:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; $actual_value </span><span class="keyword">= </span><span class="default">3.45</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// 3.45<br />
&nbsp;&nbsp; </span><span class="default">$half_round </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">((</span><span class="default">$actual_value</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">), </span><span class="default">0</span><span class="keyword">)/</span><span class="default">2</span><span class="keyword">; </span><span class="comment">// 3.5<br />
</span><span class="default">?&gt;</span> <br />
<br />
or<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; $actual_value </span><span class="keyword">= </span><span class="default">3.45</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// 3.45<br />
&nbsp;&nbsp; </span><span class="default">$temp1 </span><span class="keyword">= </span><span class="default">$actual_value </span><span class="keyword">* </span><span class="default">2</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// 6.9<br />
&nbsp;&nbsp; </span><span class="default">$temp2 </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$temp1</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);&nbsp; </span><span class="comment">// 7<br />
&nbsp;&nbsp; </span><span class="default">$half_round </span><span class="keyword">= </span><span class="default">$temp2 </span><span class="keyword">/ </span><span class="default">2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// 3.5<br />
</span><span class="default">?&gt;</span> <br />
<br />
NOT<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; $actual_value </span><span class="keyword">= </span><span class="default">3.45</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// 3.45<br />
&nbsp;&nbsp; </span><span class="default">$temp1 </span><span class="keyword">= </span><span class="default">$actual_value </span><span class="keyword">* </span><span class="default">2</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// 6.9<br />
&nbsp;&nbsp; </span><span class="default">$temp2 </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$actual_value</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);&nbsp; </span><span class="comment">// 7<br />
&nbsp;&nbsp; </span><span class="default">$half_round </span><span class="keyword">= </span><span class="default">$temp2 </span><span class="keyword">/ </span><span class="default">2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// 3.5<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38928""></a>
  <div class="note">
   <strong class="user">terry at scribendi dot com</strong>
   <a href="#38928" class="date">12-Jan-2004 11:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To round any number to a given number of significant digits, use log10 to find out its magnitude:<br />
<br />
<span class="default">&lt;?php round</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">, </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">0 </span><span class="keyword">- </span><span class="default">log10</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">)) + </span><span class="default">$sigdigits</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
Or when you have to display a per-unit price which may work out to be less than a few cents/pence/yen you can use:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// $exp = currency decimal places - 0 for Yen/Won, 2 for most others<br />
</span><span class="default">$dp </span><span class="keyword">= </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">0 </span><span class="keyword">- </span><span class="default">log10</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">)) + </span><span class="default">$sigdigits</span><span class="keyword">;<br />
</span><span class="default">$display </span><span class="keyword">= </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$amount</span><span class="keyword">, (</span><span class="default">$exp</span><span class="keyword">&gt;</span><span class="default">$dp</span><span class="keyword">)?</span><span class="default">$exp</span><span class="keyword">:</span><span class="default">$dp</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This always displays at least the number of decimal places required by the currency, but more if displaying the unit price with precision requires it - eg: 'English proofreading from $0.0068 per word', 'English beer from $6.80 per pint'.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35263""></a>
  <div class="note">
   
   <a href="#35263" class="date">25-Aug-2003 04:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Many have thus far mentioned problems encountered when trying to add a small fuzz factor to a number such as 1.499999999.&nbsp; This is the way I get around that problem using , allbeit probably less efficient than assuming a small possiblitiy for error:<br />
<br />
<span class="default">&lt;?php<br />
$numberToRound </span><span class="keyword">= </span><span class="default">1.5</span><span class="keyword">;<br />
<br />
</span><span class="comment">//Convert to string.<br />
</span><span class="default">$numberToRound </span><span class="keyword">= </span><span class="string">"</span><span class="default">$numberToRound</span><span class="string">"</span><span class="keyword">;<br />
<br />
</span><span class="comment">//iff number ends in a "5", add fuzz<br />
</span><span class="keyword">if (</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"$5"</span><span class="keyword">, </span><span class="default">$pages</span><span class="keyword">)) </span><span class="default">$pages </span><span class="keyword">+= </span><span class="default">.000001</span><span class="keyword">;&nbsp; &nbsp; <br />
<br />
</span><span class="default">$round </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$pages</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="34823""></a>
  <div class="note">
   <strong class="user">ianring (at) golden.net</strong>
   <a href="#34823" class="date">07-Aug-2003 12:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The round() function may indeed work properly with half-values (eg. 1.5), but this little method will give you peace of mind. Add some "fuzz" to your function with a miniscule delta value.<br />
<br />
<span class="default">&lt;?php<br />
$delta </span><span class="keyword">= </span><span class="default">0.00001</span><span class="keyword">;<br />
</span><span class="default">$x </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">+</span><span class="default">$delta</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This is fine, unless $x has a value of 1.49999 ... if you worried about that, use this method instead:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if((</span><span class="default">$x</span><span class="keyword">-</span><span class="default">floor</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">))==</span><span class="default">0.5</span><span class="keyword">){<br />
&nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">+=</span><span class="default">$delta</span><span class="keyword">;<br />
}<br />
</span><span class="default">$x </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
you can change your "optimistic" delta into a "pessimistic" delta by subtracting instead of adding.<br />
<br />
Cheers,<br />
Ian Ring</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="33178""></a>
  <div class="note">
   <strong class="user">ralf dot schreijer at smc dot uni-muenster dot de</strong>
   <a href="#33178" class="date">18-Jun-2003 05:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The function below regards a higher number of digits for rounding as the number of digits you want to round! At least it rounds a Value to the number of digits you want to:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">MyRound</span><span class="keyword">(</span><span class="default">$iValue</span><span class="keyword">, </span><span class="default">$iDigits</span><span class="keyword">, </span><span class="default">$iPrecision</span><span class="keyword">){<br />
&nbsp;&nbsp; </span><span class="default">$iDigits </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$iDigits</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$iPrecision </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$iPrecision</span><span class="keyword">);<br />
&nbsp;&nbsp; if(</span><span class="default">$iDigits </span><span class="keyword">&gt; </span><span class="default">$iPrecision</span><span class="keyword">){ </span><span class="default">$iPrecision </span><span class="keyword">= </span><span class="default">$iDigits</span><span class="keyword">; }<br />
&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$iPrecision</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&gt;= </span><span class="default">$iDigits</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$iValue </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$iValue</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; } </span><span class="comment">// for($i = $iPrecision; $i &gt;= $iDigits; $i--) -- END<br />
&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$iValue</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32008""></a>
  <div class="note">
   <strong class="user">Oromian</strong>
   <a href="#32008" class="date">12-May-2003 05:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">// Rounding to the nearest fifth<br />
// or any other increment you wish...<br />
<br />
</span><span class="default">$percent </span><span class="keyword">= </span><span class="string">"48"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$num </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$percent</span><span class="keyword">/</span><span class="default">5</span><span class="keyword">)*</span><span class="default">5</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$num</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// returns 50<br />
<br />
</span><span class="default">$percentt </span><span class="keyword">= </span><span class="string">"47"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$numm </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$percentt</span><span class="keyword">/</span><span class="default">5</span><span class="keyword">)*</span><span class="default">5</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$numm</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// returns 45<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="26241""></a>
  <div class="note">
   <strong class="user">tichoux at charlevoix dot net</strong>
   <a href="#26241" class="date">23-Oct-2002 02:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for a poll, if you want to have 100% and not 99 or 99.99 % you can do that :<br />
<br />
<span class="default">&lt;?php<br />
round</span><span class="keyword">( </span><span class="default">number_format</span><span class="keyword">( ((</span><span class="default">$individual_result</span><span class="keyword">*</span><span class="default">100</span><span class="keyword">)/</span><span class="default">$total_result</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24522""></a>
  <div class="note">
   <strong class="user">kt at netspirit dot ch</strong>
   <a href="#24522" class="date">20-Aug-2002 09:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
because of some site-effects between round() and modulo, therfore the result is not exactly at&nbsp; every time ...<br />
another way ( and without site-effects) of getting 0.05 increments for currencies, f.e. swiss francs:<br />
<br />
<span class="default">&lt;?php<br />
$res </span><span class="keyword">= (</span><span class="default">round</span><span class="keyword">(</span><span class="default">20</span><span class="keyword">*</span><span class="default">$chf</span><span class="keyword">))/</span><span class="default">20</span><span class="keyword">;<br />
echo </span><span class="default">$res</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
with kind regards</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24379""></a>
  <div class="note">
   <strong class="user">php at silisoftware dot com</strong>
   <a href="#24379" class="date">14-Aug-2002 02:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a function to round to an arbitary number of significant digits. Don't confuse it with rounding to a negative precision - that counts back from the decimal point, this function counts forward from the Most Significant Digit.<br />
<br />
ex:<br />
<br />
<span class="default">&lt;?php<br />
round</span><span class="keyword">(</span><span class="default">1241757</span><span class="keyword">, -</span><span class="default">3</span><span class="keyword">); </span><span class="comment">// 1242000<br />
</span><span class="default">RoundSigDigs</span><span class="keyword">(</span><span class="default">1241757</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">); </span><span class="comment">// 1240000<br />
</span><span class="default">?&gt;<br />
</span><br />
Works on negative numbers too. $sigdigs should be &gt;= 0<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">RoundSigDigs</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">, </span><span class="default">$sigdigs</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$multiplier </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$number </span><span class="keyword">&lt; </span><span class="default">0.1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$number </span><span class="keyword">*= </span><span class="default">10</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$multiplier </span><span class="keyword">/= </span><span class="default">10</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$number </span><span class="keyword">&gt;= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$number </span><span class="keyword">/= </span><span class="default">10</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$multiplier </span><span class="keyword">*= </span><span class="default">10</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">round</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">, </span><span class="default">$sigdigs</span><span class="keyword">) * </span><span class="default">$multiplier</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="5832""></a>
  <div class="note">
   <strong class="user">twan at ecreation dot nl</strong>
   <a href="#5832" class="date">15-May-2000 06:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you'd only want to round for displaying variables (not for calculating on the rounded result) then you should use printf with the float:<br />
<br />
<span class="default">&lt;?php printf </span><span class="keyword">(</span><span class="string">"%6.2f"</span><span class="keyword">,</span><span class="default">3.39532</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
This returns: 3.40 .</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.rand.html">rand</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.sin.html">sin</a></div>
 <div class="up"><a href="ref.math.html">Math Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
