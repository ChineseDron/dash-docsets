<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Free all session variables</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.session-unregister.html">session_unregister</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.session-write-close.html">session_write_close</a></div>
 <div class="up"><a href="ref.session.html">Session Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.session-unset" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">session_unset</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">session_unset</span> &mdash; <span class="dc-title">Free all session variables</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.session-unset-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><span class="type void">void</span></span> <span class="methodname"><b>session_unset</b></span>
    ( <span class="methodparam">void</span>
   )</div>

  <p class="para rdfs-comment">
   The <span class="function"><b>session_unset()</b></span> function frees all session variables
   currently registered.
  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.session-unset-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   No value is returned.
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.session-unset-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><b class="note">Note</b>: 
   <p class="para">
    If <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var> (or <var class="varname"><var class="varname">$HTTP_SESSION_VARS</var></var>
    for PHP 4.0.6 or less) is used, use <span class="function"><a href="function.unset.html" class="function">unset()</a></span> to
    unregister a session variable, i.e.
    <i>unset ($_SESSION[&#039;varname&#039;]);</i>.
   </p>
  </p></blockquote>
  <div class="caution"><b class="caution">Caution</b>
   <p class="para">
    Do NOT unset the whole <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var> with
    <i>unset($_SESSION)</i> as this will disable the registering
    of session variables through the <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var> superglobal.
   </p>
  </div>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="107089""></a>
  <div class="note">
   <strong class="user">tim at leethost dot com</strong>
   <a href="#107089" class="date">05-Jan-2012 03:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was having a problem clearing all session variables, deleting the session, and creating a new session without leaving old session stuff behind in all browsers.&nbsp; The below code is perfect for a logout script to totally delete everything and start new.&nbsp; It even works in Chrome which seems to not work as other browsers when trying do logout and start a new session.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; session_start</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">session_unset</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">session_destroy</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">session_write_close</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">setcookie</span><span class="keyword">(</span><span class="default">session_name</span><span class="keyword">(),</span><span class="string">''</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="string">'/'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">session_regenerate_id</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101700""></a>
  <div class="note">
   <strong class="user">notsonewbie</strong>
   <a href="#101700" class="date">05-Jan-2011 03:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
dash2nash: you have to start the session before you can unset or destroy it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100527""></a>
  <div class="note">
   <strong class="user">dash2nash</strong>
   <a href="#100527" class="date">21-Oct-2010 06:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Im using chrome and Im not a pro in php, but Im certainly sure that session sure is buggy on google chrome, I use:<br />
<br />
&nbsp;&nbsp;&nbsp; session_unset();<br />
&nbsp;&nbsp;&nbsp; session_destroy();<br />
&nbsp;&nbsp;&nbsp; $_SESSION = array();<br />
&nbsp;&nbsp;&nbsp; session_start();<br />
<br />
every time the page load, yet, some of the session still there. It's quite scary problem :s</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85144""></a>
  <div class="note">
   <strong class="user">angelitoestebancito at gmail dot com</strong>
   <a href="#85144" class="date">16-Aug-2008 02:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you create a logout.php to end user session, do not forget to start the session in this page!, using session_start() at the very begging of your script. Thus,<br />
<br />
session_start();<br />
session_unset();<br />
session_destroy();<br />
<br />
will be the right sequence to end a user's session.<br />
This is a very basic concept, but took me a while to realize I was forgetting to start the session.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84014""></a>
  <div class="note">
   <strong class="user">00 at f00n dot com</strong>
   <a href="#84014" class="date">23-Jun-2008 07:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
-------------------------------------------------------<br />
InterNic<br />
20-May-2006 11:20 <br />
sometimes you might have problems even if using both session_unset and session_destroy. You have to clear the $_SESSION array. I got it working this way:<br />
<br />
session_unset();<br />
session_destroy();<br />
$_SESSION = array();<br />
-------------------------------------------------------<br />
<br />
When I used this method the session still existed in structure until the array is reset completely.<br />
<br />
This, however, has the drawback of clearing all sessions which may not be ideal in some cases.<br />
<br />
Named sessions may help in such cases.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68738""></a>
  <div class="note">
   <strong class="user">pentek_i at inf dot elte dot hu</strong>
   <a href="#68738" class="date">08-Aug-2006 04:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You should know that on recent PHP only the first one of these functions works correctly. And if you use the other two, var_dump will print you the result you expected (session cleaned up), but the session file on the server won't be cleaned up. So use the first one.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">session_clean1</span><span class="keyword">(</span><span class="default">$logout</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">)<br />
&nbsp;{<br />
&nbsp; </span><span class="default">$v</span><span class="keyword">=array();<br />
&nbsp; foreach(</span><span class="default">$_SESSION </span><span class="keyword">as </span><span class="default">$x</span><span class="keyword">=&gt;</span><span class="default">$y</span><span class="keyword">)<br />
&nbsp;&nbsp; if(</span><span class="default">$x</span><span class="keyword">!=</span><span class="string">"redirector"</span><span class="keyword">&amp;&amp;(</span><span class="default">$x</span><span class="keyword">!=</span><span class="string">"user"</span><span class="keyword">||</span><span class="default">$logout</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$v</span><span class="keyword">[]=</span><span class="default">$x</span><span class="keyword">;<br />
<br />
&nbsp; foreach(</span><span class="default">$v </span><span class="keyword">as </span><span class="default">$x</span><span class="keyword">)<br />
&nbsp;&nbsp; unset(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]);<br />
&nbsp; return;<br />
&nbsp;}<br />
<br />
function </span><span class="default">session_clean2</span><span class="keyword">(</span><span class="default">$logout</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">)<br />
&nbsp;{<br />
&nbsp; foreach(</span><span class="default">$_SESSION </span><span class="keyword">as </span><span class="default">$x</span><span class="keyword">=&gt;</span><span class="default">$y</span><span class="keyword">)<br />
&nbsp;&nbsp; if(</span><span class="default">$x</span><span class="keyword">!=</span><span class="string">"redirector"</span><span class="keyword">&amp;&amp;(</span><span class="default">$x</span><span class="keyword">!=</span><span class="string">"user"</span><span class="keyword">||</span><span class="default">$logout</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]);<br />
&nbsp; return;<br />
&nbsp;}<br />
<br />
function </span><span class="default">session_clean3</span><span class="keyword">(</span><span class="default">$logout</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">)<br />
&nbsp;{<br />
&nbsp; </span><span class="default">$s</span><span class="keyword">=(</span><span class="default">$logout</span><span class="keyword">||!isset(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"user"</span><span class="keyword">]))?array():<br />
&nbsp;&nbsp; array(</span><span class="string">"user"</span><span class="keyword">=&gt;</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"user"</span><span class="keyword">]);<br />
&nbsp; if(isset(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"redirector"</span><span class="keyword">]))<br />
&nbsp;&nbsp; </span><span class="default">$s</span><span class="keyword">[</span><span class="string">"redirector"</span><span class="keyword">]=</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"redirector"</span><span class="keyword">];<br />
&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">=</span><span class="default">$s</span><span class="keyword">;<br />
&nbsp;}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
On previous php (&lt;&lt;5.1.4) releases at least the third one worked correctly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="66373""></a>
  <div class="note">
   <strong class="user">InterNic</strong>
   <a href="#66373" class="date">20-May-2006 03:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
sometimes you might have problems even if using both session_unset and session_destroy. You have to clear the $_SESSION array. I got it working this way:<br />
<br />
session_unset();<br />
session_destroy();<br />
$_SESSION = array();</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54731""></a>
  <div class="note">
   <strong class="user">zach at zkwarta dot com</strong>
   <a href="#54731" class="date">13-Jul-2005 03:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The difference between both session_unset and session_destroy is as follows:<br />
<br />
session_unset just clears out the sesison for usage. The session is still on the users computer. Note that by using session_unset, the variable still exists.<br />
<br />
Using session_unset in tandem with session_destroy however, is a much more effective means of actually clearing out data. As stated in the example above, this works very well, cross browser:<br />
<br />
session_unset();<br />
session_destroy();<br />
<br />
I noticed that in firefox, one could simply use sesison_unset and the session would be cleared. When trying this on IE, I was horrified to find out that the data was still there, so I had to use session destroy.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49046""></a>
  <div class="note">
   <strong class="user">Jeroen</strong>
   <a href="#49046" class="date">15-Jan-2005 01:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
note to Jason: I don't know the exact mechanics of it (since I'm quite new to sessions) but I think you need to use session_unset() BEFORE you can use session_destroy() at all.&nbsp; I thought that session_unset() was for scripted variables, and session_destroy() just for anything saved on your side regarding the session.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="12079""></a>
  <div class="note">
   
   <a href="#12079" class="date">21-Mar-2001 08:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To further clarify the note above... this can be done via the session handling directives in your php.ini file... there are options to set garbage collection probability (via percent... i.e. 75 means it would run 3 out of every 4 page accesses), and the amount of time a session object can remain active before the garbage collection process sees it as garbage.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="11013""></a>
  <div class="note">
   <strong class="user">dmertens at zyprexia dot com</strong>
   <a href="#11013" class="date">31-Jan-2001 09:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The session files are automaticly deleted after the session-timeout is reached. So if the time-out is set to 20 minutes, the files will be deleted 20 minutes after the last access. Same for the cookie. Every time, an page is requested, the cookie-ttl is set to now + 20 minutes.<br />
<br />
PHP is a very clean scripting engine, which leaves no garbage on your system!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="6537""></a>
  <div class="note">
   <strong class="user">j a s o n p 0 1 9  at yahoo dot com</strong>
   <a href="#6537" class="date">13-Jul-2000 01:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
session_unset() vs. session_destroy():<br />
I would say that the difference is that session_destroy() destroys the session variables, both in the script and where the session data is stored on disk.&nbsp; session_unset() is like doing a session_unregister() on all registered variables.&nbsp; They can still be re-registered by calling session_register() whereas after session_destroy, they cannot.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.session-unregister.html">session_unregister</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.session-write-close.html">session_write_close</a></div>
 <div class="up"><a href="ref.session.html">Session Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
