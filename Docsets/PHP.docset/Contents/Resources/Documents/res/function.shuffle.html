<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Shuffle an array</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.rsort.html">rsort</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.sizeof.html">sizeof</a></div>
 <div class="up"><a href="ref.array.html">Array Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.shuffle" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">shuffle</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">shuffle</span> &mdash; <span class="dc-title">Shuffle an array</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.shuffle-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><b>shuffle</b></span>
    ( <span class="methodparam"><span class="type">array</span> <tt class="parameter reference">&$array</tt></span>
   )</div>

  <p class="para rdfs-comment">
   This function shuffles (randomizes the order of the elements in) an array.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.shuffle-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">array</tt></i></span>
     <dd>

      <p class="para">
       The array.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.shuffle-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <b><tt>TRUE</tt></b> on success or <b><tt>FALSE</tt></b> on failure.
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.shuffle-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4575">
    <p><b>Example #1 <span class="function"><b>shuffle()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$numbers&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">range</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">20</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">shuffle</span><span style="color: #007700">(</span><span style="color: #0000BB">$numbers</span><span style="color: #007700">);<br />foreach&nbsp;(</span><span style="color: #0000BB">$numbers&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$number</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$number</span><span style="color: #DD0000">&nbsp;"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 <div class="refsect1 changelog" id="refsect1-function.shuffle-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle"><td align="left">4.2.0</td><td align="left">The random
number generator is seeded automatically.</td></tr>

     </tbody>
    
   </table>

  </p>
 </div>

 <div class="refsect1 notes" id="refsect1-function.shuffle-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><b class="note">Note</b>: <span class="simpara">This function
assigns new keys to the elements in <i><tt class="parameter">array</tt></i>.
It will remove any existing keys that may have been assigned, rather
than just reordering the keys.</span></p></blockquote>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.shuffle-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member">The <a href="array.sorting.html" class="link">comparison of array sorting functions</a></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="105931""></a>
  <div class="note">
   <strong class="user">tim at leethost dot com</strong>
   <a href="#105931" class="date">26-Sep-2011 06:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a great SEO function for web developers.&nbsp; It shuffles the array, but does it identically each time. SEOshuffle guarantees shuffled yet consistent order.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/* $seed variable is optional */<br />
</span><span class="keyword">function </span><span class="default">SEOshuffle</span><span class="keyword">(&amp;</span><span class="default">$items</span><span class="keyword">, </span><span class="default">$seed</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$original </span><span class="keyword">= </span><span class="default">md5</span><span class="keyword">(</span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">));<br />
&nbsp; </span><span class="default">mt_srand</span><span class="keyword">(</span><span class="default">crc32</span><span class="keyword">((</span><span class="default">$seed</span><span class="keyword">) ? </span><span class="default">$seed </span><span class="keyword">: </span><span class="default">$items</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]));<br />
&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$j </span><span class="keyword">= @</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$items</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">]) = array(</span><span class="default">$items</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">], </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
&nbsp; }<br />
&nbsp; if (</span><span class="default">$original </span><span class="keyword">== </span><span class="default">md5</span><span class="keyword">(</span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">))) {<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$items</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">], </span><span class="default">$items</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) = array(</span><span class="default">$items</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$items</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">]);<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105309""></a>
  <div class="note">
   <strong class="user">timtrinidad at gmail dot com</strong>
   <a href="#105309" class="date">08-Aug-2011 12:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It appears that the suhosin extensions &gt;= 0.9.26 that have the suhosin.mt_srand.ignore and suhosin.srand.ignore settings set to "Off" do not affect shuffle().<br />
<br />
In other words, the only way I was able to get pseudo-random and predictable results through shuffle() was to disable the extension.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104430""></a>
  <div class="note">
   <strong class="user">Donald</strong>
   <a href="#104430" class="date">14-Jun-2011 08:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Very simple shuffle function preserving key with value<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">shuffle_assoc</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">( </span><span class="default">$keys </span><span class="keyword">);<br />
&nbsp;&nbsp; return </span><span class="default">array_merge</span><span class="keyword">( </span><span class="default">array_flip</span><span class="keyword">( </span><span class="default">$keys </span><span class="keyword">) , </span><span class="default">$array </span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103161""></a>
  <div class="note">
   <strong class="user">Eric Anderson</strong>
   <a href="#103161" class="date">29-Mar-2011 09:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Copy and paste this script and refresh the page to see the shuffling effect.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp;&nbsp; * Shuffles and displays cards in a deck<br />
&nbsp;&nbsp;&nbsp; * @author:&nbsp; &nbsp;&nbsp; Eric Anderson<br />
&nbsp;&nbsp;&nbsp; * @filename:&nbsp;&nbsp; deckofcards.php<br />
&nbsp;&nbsp;&nbsp; */<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; // Create an array of face values<br />
&nbsp;&nbsp;&nbsp; // and an array of card values<br />
&nbsp;&nbsp;&nbsp; // then merge them together<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$cards </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(array(</span><span class="string">"J"</span><span class="keyword">, </span><span class="string">"Q"</span><span class="keyword">, </span><span class="string">"K"</span><span class="keyword">, </span><span class="string">"A"</span><span class="keyword">), </span><span class="default">range</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">)); </span><span class="comment">// 13 cards<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; // Shuffle the cards<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$cards</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Create an multidimentional array to hold the 4 suits<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$suits </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Heart' </span><span class="keyword">=&gt; array(), <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Spade' </span><span class="keyword">=&gt; array(), <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Diamond' </span><span class="keyword">=&gt; array(),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Club' </span><span class="keyword">=&gt; array()<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Add cards to their respective suits<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$suits</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$cards</span><span class="keyword">); </span><span class="default">$j</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$suits</span><span class="keyword">[</span><span class="string">'Heart'</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$cards</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">].</span><span class="string">"&lt;span style=color:#FF0000;&gt;&amp;hearts;&lt;/span&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$suits</span><span class="keyword">[</span><span class="string">'Spade'</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$cards</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">].</span><span class="string">"&amp;spades;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$suits</span><span class="keyword">[</span><span class="string">'Diamond'</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$cards</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">].</span><span class="string">"&lt;span style=color:#FF0000;&gt;&amp;diams;&lt;/span&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$suits</span><span class="keyword">[</span><span class="string">'Club'</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$cards</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">].</span><span class="string">"&amp;clubs;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Create a deck<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$deck </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Merge the suits into the empty deck array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$deck </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$deck</span><span class="keyword">, </span><span class="default">$suits</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Display the deck to the screen<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"&lt;p&gt;&lt;b&gt;Deck of cards:&lt;/b&gt;&lt;/p&gt;"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$deck </span><span class="keyword">as </span><span class="default">$k1 </span><span class="keyword">=&gt; </span><span class="default">$v1</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Display suit name<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"&lt;p&gt;&amp;emsp;</span><span class="default">$k1</span><span class="string">'s&lt;br /&gt;&amp;emsp;{&lt;br /&gt;&amp;emsp;&amp;emsp;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$acc </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Display card value<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$v1 </span><span class="keyword">as </span><span class="default">$k2 </span><span class="keyword">=&gt; </span><span class="default">$v2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$v2</span><span class="string">&amp;nbsp"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$acc</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$acc </span><span class="keyword">== </span><span class="default">4</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;br /&gt;&amp;emsp;&amp;emsp;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$acc </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;br /&gt;&amp;emsp;}&lt;/p&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99624""></a>
  <div class="note">
   <strong class="user">andjones at gmail dot com</strong>
   <a href="#99624" class="date">26-Aug-2010 09:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Shuffle associative and non-associative array while preserving key, value pairs. Also returns the shuffled array instead of shuffling it in place.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">shuffle_assoc</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">) {<br />
&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">)) return </span><span class="default">$list</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">);<br />
&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$random </span><span class="keyword">= array();<br />
&nbsp; foreach (</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$random</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$list</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
<br />
&nbsp; return </span><span class="default">$random</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99059""></a>
  <div class="note">
   <strong class="user">ezakto at ezakto dot com</strong>
   <a href="#99059" class="date">24-Jul-2010 11:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a replica of shuffle() but preserving keys (associative and non-associative)<br />
<br />
bool kshuffle&nbsp; (&nbsp; array &amp;$array&nbsp; )<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">kshuffle</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) || empty(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp</span><span class="keyword">[] = array(</span><span class="string">'k' </span><span class="keyword">=&gt; </span><span class="default">$key</span><span class="keyword">, </span><span class="string">'v' </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$tmp </span><span class="keyword">as </span><span class="default">$entry</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$entry</span><span class="keyword">[</span><span class="string">'k'</span><span class="keyword">]] = </span><span class="default">$entry</span><span class="keyword">[</span><span class="string">'v'</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$array </span><span class="keyword">= array(</span><span class="string">'first' </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">'second' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'third' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">kshuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment">// [second] =&gt; 1 [first] =&gt; 0 [third] =&gt; 2<br />
<br />
</span><span class="default">$array </span><span class="keyword">= array(</span><span class="string">'first'</span><span class="keyword">, </span><span class="string">'second'</span><span class="keyword">, </span><span class="string">'third'</span><span class="keyword">);<br />
</span><span class="default">kshuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment">// [1] =&gt; second [2] =&gt; third [0] =&gt; first<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98742""></a>
  <div class="note">
   <strong class="user">m0gr14 at gmail dot com</strong>
   <a href="#98742" class="date">04-Jul-2010 10:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function shuffles an associative array recursive.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
* Shuffles an associative array recursive<br />
* @author Mogria &lt;m0gr14@gmail.com&gt;<br />
* @param array $array<br />
* @return array<br />
*<br />
*/<br />
<br />
</span><span class="keyword">function </span><span class="default">rec_assoc_shuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$ary_keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$ary_values </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$ary_values</span><span class="keyword">);<br />
&nbsp; foreach(</span><span class="default">$ary_keys </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$ary_values</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) AND </span><span class="default">$ary_values</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] != </span><span class="default">NULL</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$ary_values</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">rec_assoc_shuffle</span><span class="keyword">(</span><span class="default">$ary_values</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">] = </span><span class="default">$ary_values</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$new</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Example of use:<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">=<br />
&nbsp;&nbsp;&nbsp; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">4</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">4</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">5<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">4</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">6</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">5</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">2</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">4</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">5</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">6</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">7<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);<br />
</span><span class="default">$array </span><span class="keyword">= </span><span class="default">rec_assoc_shuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="comment">/*<br />
Returns:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 6<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 5<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; 5<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 5<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; 6<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [5] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; 4<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; 7<br />
)<br />
<br />
*/<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96956""></a>
  <div class="note">
   <strong class="user">rick at suggestive dot com</strong>
   <a href="#96956" class="date">24-Mar-2010 02:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Many people in SEO need to supply an array and shuffle the results and need the same result each time that page is generated. This is my implementation with a working example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">seoShuffle</span><span class="keyword">(&amp;</span><span class="default">$items</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">mt_srand</span><span class="keyword">(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j </span><span class="keyword">= @</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$tmp</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$items </span><span class="keyword">= array(</span><span class="string">'one'</span><span class="keyword">,</span><span class="string">'two'</span><span class="keyword">,</span><span class="string">'three'</span><span class="keyword">,</span><span class="string">'four'</span><span class="keyword">,</span><span class="string">'five'</span><span class="keyword">,</span><span class="string">'six'</span><span class="keyword">);<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">'whatever'</span><span class="keyword">;<br />
<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">seoShuffle</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);<br />
<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95414""></a>
  <div class="note">
   <strong class="user">tyler at CompLangs dot com</strong>
   <a href="#95414" class="date">01-Jan-2010 06:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a quick function I wrote that generates a random password and uses shuffle() to easily shuffle the order. <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">public function </span><span class="default">randPass</span><span class="keyword">(</span><span class="default">$upper </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">, </span><span class="default">$lower </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">, </span><span class="default">$numeric </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">, </span><span class="default">$other </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//we need these vars to create a password string<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$passOrder </span><span class="keyword">= Array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$passWord </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//generate the contents of the password<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$upper</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$passOrder</span><span class="keyword">[] = </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">, </span><span class="default">90</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$lower</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$passOrder</span><span class="keyword">[] = </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">97</span><span class="keyword">, </span><span class="default">122</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$numeric</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$passOrder</span><span class="keyword">[] = </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">48</span><span class="keyword">, </span><span class="default">57</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$other</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$passOrder</span><span class="keyword">[] = </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">33</span><span class="keyword">, </span><span class="default">47</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//randomize the order of characters<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$passOrder</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//concatenate into a string<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$passOrder </span><span class="keyword">as </span><span class="default">$char</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$passWord </span><span class="keyword">.= </span><span class="default">$char</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//we're done<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$passWord</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94697""></a>
  <div class="note">
   <strong class="user">ahmad at ahmadnassri dot com</strong>
   <a href="#94697" class="date">18-Nov-2009 08:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
shuffle for associative arrays, preserves key=&gt;value pairs.<br />
(Based on (Vladimir Kornea of typetango.com)'s function) <br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">shuffle_assoc</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">$new</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
*note: as of PHP 5.2.10, array_rand's resulting array of keys is no longer shuffled, so we use array_keys + shuffle.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93214""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#93214" class="date">28-Aug-2009 09:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a simple function two shuffle a two dimensional array. Please note the second level arrays must be indexed using integers, for example $myarray[0]["Name"] and not $myarray["One"]["Name"]. Here is the function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">twodshuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Get array length<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Create a range of indicies<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$indi </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$count</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Randomize indicies array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$indi</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Initialize new array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$newarray </span><span class="keyword">= array(</span><span class="default">$count</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Holds current index<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Shuffle multidimensional array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$indi </span><span class="keyword">as </span><span class="default">$index</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newarray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$newarray</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Please note it only works on two dimensional arrays. Here is an example:<br />
<br />
<span class="default">&lt;?php<br />
$myarray </span><span class="keyword">= array(</span><span class="string">"Google" </span><span class="keyword">=&gt; array(</span><span class="string">"Name" </span><span class="keyword">=&gt; </span><span class="string">"Google"</span><span class="keyword">, </span><span class="string">"URL" </span><span class="keyword">=&gt; </span><span class="string">"www.google.com"</span><span class="keyword">, </span><span class="string">"Usage" </span><span class="keyword">=&gt; </span><span class="string">"Googling"</span><span class="keyword">), </span><span class="string">"Yahoo" </span><span class="keyword">=&gt; array(</span><span class="string">"Name" </span><span class="keyword">=&gt; </span><span class="string">"Yahoo"</span><span class="keyword">, </span><span class="string">"URL" </span><span class="keyword">=&gt; </span><span class="string">"www.yahoo.com"</span><span class="keyword">, </span><span class="string">"Usage" </span><span class="keyword">=&gt; </span><span class="string">"Yahooing?"</span><span class="keyword">), </span><span class="string">"Ask" </span><span class="keyword">=&gt; array(</span><span class="string">"Name" </span><span class="keyword">=&gt; </span><span class="string">"Ask"</span><span class="keyword">, </span><span class="string">"URL" </span><span class="keyword">=&gt; </span><span class="string">"www.ask.com"</span><span class="keyword">, </span><span class="string">"Usage" </span><span class="keyword">=&gt; </span><span class="string">"Asking Jeeves"</span><span class="keyword">));<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">twodshuffle</span><span class="keyword">(</span><span class="default">$myarray</span><span class="keyword">));<br />
<br />
</span><span class="comment">/* And the result is:<br />
Array ( [0] =&gt; Array ( [Name] =&gt; Ask [URL] =&gt; www.ask.com [Usage] =&gt; Asking Jeeves ) [1] =&gt; Array ( [Name] =&gt; Google [URL] =&gt; www.google.com [Usage] =&gt; Googling ) [2] =&gt; Array ( [Name] =&gt; Yahoo [URL] =&gt; www.yahoo.com [Usage] =&gt; Yahooing? ) ) <br />
*/<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope you find it useful!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92366""></a>
  <div class="note">
   <strong class="user">John Galt</strong>
   <a href="#92366" class="date">21-Jul-2009 09:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote these functions just for the heck of it, but I managed to get them to work even though I'm a PHP amateur. They're just two functions for a deck of 52 cards. newDeck() creates a deck and deal() creates hands for the deck.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;</span><span class="comment">// Two basic playing card functions<br />
&nbsp;// newDeck([$numJokers]) - returns array of 52 cards plus (if supplied) $numJokers jokers<br />
&nbsp;// deal($deck[, $numHands[, $numCards]]) - returns two compact()ed variables--the new $deck and $hand arrays<br />
<br />
&nbsp;</span><span class="keyword">function </span><span class="default">newDeck</span><span class="keyword">(</span><span class="default">$numJokers </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;{<br />
&nbsp; </span><span class="comment">// Returns $deck: array of 52 standard deck of 4-suit cards plus $numJokers jokers, shuffled (key starts at zero)<br />
&nbsp; // in format of e.g. $deck[4] = "A &amp;spades;" = ace of spades (fifth card)<br />
&nbsp; </span><span class="default">$suitCards </span><span class="keyword">= array(</span><span class="string">"J"</span><span class="keyword">, </span><span class="string">"Q"</span><span class="keyword">, </span><span class="string">"K"</span><span class="keyword">, </span><span class="string">"A"</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$suitCards </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$suitCards</span><span class="keyword">, </span><span class="default">range</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">));<br />
&nbsp; </span><span class="default">$hearts </span><span class="keyword">= array();<br />
&nbsp; </span><span class="default">$spades </span><span class="keyword">= array();<br />
&nbsp; </span><span class="default">$diamonds </span><span class="keyword">= array();<br />
&nbsp; </span><span class="default">$clubs </span><span class="keyword">= array();<br />
&nbsp; foreach(</span><span class="default">$suitCards </span><span class="keyword">as </span><span class="default">$card</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp; </span><span class="default">$hearts</span><span class="keyword">[] = </span><span class="string">"&lt;span style=\"color: #FF0000;\"&gt;" </span><span class="keyword">. </span><span class="default">$card </span><span class="keyword">. </span><span class="string">" &amp;hearts;" </span><span class="keyword">. </span><span class="string">"&lt;/span&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$spades</span><span class="keyword">[] = </span><span class="string">"&lt;span style=\"color: #000000;\"&gt;" </span><span class="keyword">. </span><span class="default">$card </span><span class="keyword">. </span><span class="string">" &amp;spades;" </span><span class="keyword">. </span><span class="string">"&lt;/span&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$diamonds</span><span class="keyword">[] = </span><span class="string">"&lt;span style=\"color: #FF0000;\"&gt;" </span><span class="keyword">. </span><span class="default">$card </span><span class="keyword">. </span><span class="string">" &amp;diams;" </span><span class="keyword">. </span><span class="string">"&lt;/span&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$clubs</span><span class="keyword">[] = </span><span class="string">"&lt;span style=\"color: #000000;\"&gt;" </span><span class="keyword">. </span><span class="default">$card </span><span class="keyword">. </span><span class="string">" &amp;clubs;" </span><span class="keyword">. </span><span class="string">"&lt;/span&gt;"</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$jokers </span><span class="keyword">= array();<br />
&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$numJokers</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; </span><span class="default">$jokers</span><span class="keyword">[] = </span><span class="string">"&lt;span style=\"color: #8467D7;\"&gt;JOKER&lt;/span&gt;"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$deck </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$hearts</span><span class="keyword">, </span><span class="default">$spades</span><span class="keyword">, </span><span class="default">$clubs</span><span class="keyword">, </span><span class="default">$diamonds</span><span class="keyword">, </span><span class="default">$jokers</span><span class="keyword">);<br />
&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$deck</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">$deck</span><span class="keyword">;<br />
&nbsp;}<br />
<br />
&nbsp;function </span><span class="default">deal</span><span class="keyword">(</span><span class="default">$deck</span><span class="keyword">, </span><span class="default">$numHands </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">, </span><span class="default">$numCards </span><span class="keyword">= </span><span class="default">7</span><span class="keyword">)<br />
&nbsp;{<br />
&nbsp; </span><span class="comment">// Returns $hand: two-dimensional array, first key being player ID and second being card number (both starting from zero)<br />
&nbsp; // e.g. $hand[2][4] = "6 &amp;hearts;" = six of hearts (third hand, fifth card)<br />
&nbsp; // To return, use extract, e.g. extract(deal($deck, 2, 13)); (also returns $deck)<br />
&nbsp; </span><span class="default">$hand </span><span class="keyword">= array();<br />
&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$numHands</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp; {<br />
&nbsp;&nbsp; for(</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">$numCards</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$hand</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">next</span><span class="keyword">(</span><span class="default">$deck</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$i </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$j </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$hand</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] = </span><span class="default">prev</span><span class="keyword">(</span><span class="default">$deck</span><span class="keyword">);<br />
&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$deck </span><span class="keyword">= </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$deck</span><span class="keyword">, (</span><span class="default">$numHands </span><span class="keyword">* </span><span class="default">$numCards</span><span class="keyword">));<br />
&nbsp; return </span><span class="default">compact</span><span class="keyword">(</span><span class="string">"hand"</span><span class="keyword">, </span><span class="string">"deck"</span><span class="keyword">);<br />
&nbsp;}<br />
<br />
&nbsp;</span><span class="default">$deck </span><span class="keyword">= </span><span class="default">newDeck</span><span class="keyword">();<br />
&nbsp;</span><span class="default">extract</span><span class="keyword">(</span><span class="default">deal</span><span class="keyword">(</span><span class="default">$deck</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">7</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;<br />
</span>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "<a href="http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd" rel="nofollow" target="_blank">http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd</a>"&gt;<br />
&lt;html xmlns="<a href="http://www.w3.org/1999/xhtml" rel="nofollow" target="_blank">http://www.w3.org/1999/xhtml</a>"&gt;<br />
&nbsp;&lt;!-- Just an example of test output to demonstrate capability. --&gt;<br />
&nbsp;&lt;head&gt;<br />
&nbsp; &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;<br />
&nbsp; &lt;title&gt;Basic Playing Card Functions&lt;/title&gt;<br />
&nbsp;&lt;/head&gt;<br />
<br />
&nbsp;&lt;body&gt;<br />
&nbsp; &lt;h1&gt;Deck&lt;/h1&gt;<br />
&nbsp; &lt;pre&gt;<br />
<span class="default">&lt;?php<br />
&nbsp;print_r</span><span class="keyword">(</span><span class="default">$deck</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>&nbsp; &lt;/pre&gt;<br />
&nbsp; &lt;hr /&gt;<br />
&nbsp; &lt;h1&gt;Hands&lt;/h1&gt;<br />
&nbsp; &lt;pre&gt;<br />
<span class="default">&lt;?php<br />
&nbsp;print_r</span><span class="keyword">(</span><span class="default">$hand</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>&nbsp; &lt;/pre&gt;<br />
&nbsp;&lt;/body&gt;<br />
&lt;/html&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91639""></a>
  <div class="note">
   <strong class="user">mateusz dot charytoniuk at gmail dot com</strong>
   <a href="#91639" class="date">20-Jun-2009 12:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to keep array shuffled in one particular way for every user visiting your site, you can use:<br />
<br />
<span class="default">&lt;?php<br />
srand</span><span class="keyword">(</span><span class="default">$user</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">]);<br />
</span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$some_array</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91360""></a>
  <div class="note">
   <strong class="user">aalaap at gmail dot com</strong>
   <a href="#91360" class="date">08-Jun-2009 05:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've been wondering why shuffle() doesn't provide the shuffled array as a return value instead of a bool. I mean, what could possibly go wrong in shuffling elements from an array?<br />
<br />
So I use something like this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_shuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90946""></a>
  <div class="note">
   <strong class="user">sivaji2009 at gmail dot com</strong>
   <a href="#90946" class="date">17-May-2009 02:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here i wrote a custom shuffle function which preserves the array index and distributes the array element randomly.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/*<br />
&nbsp;* return an array whose elements are shuffled in random order.<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">custom_shuffle</span><span class="keyword">(</span><span class="default">$my_array </span><span class="keyword">= array()) {<br />
&nbsp; </span><span class="default">$copy </span><span class="keyword">= array();<br />
&nbsp; while (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$my_array</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// takes a rand array elements by its key<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$element </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$my_array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// assign the array and its value to an another array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$copy</span><span class="keyword">[</span><span class="default">$element</span><span class="keyword">] = </span><span class="default">$my_array</span><span class="keyword">[</span><span class="default">$element</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//delete the element from source array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">unset(</span><span class="default">$my_array</span><span class="keyword">[</span><span class="default">$element</span><span class="keyword">]);<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$copy</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$array </span><span class="keyword">= array(<br />
&nbsp; </span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="string">'apple'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="string">'ball'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="string">'cat'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'d' </span><span class="keyword">=&gt; </span><span class="string">'dog'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'e' </span><span class="keyword">=&gt; </span><span class="string">'egg'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'f' </span><span class="keyword">=&gt; </span><span class="string">'fan'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'g' </span><span class="keyword">=&gt; </span><span class="string">'gun'<br />
</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">custom_shuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">));<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">c</span><span class="keyword">] =&gt; </span><span class="default">cat<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">e</span><span class="keyword">] =&gt; </span><span class="default">egg<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">f</span><span class="keyword">] =&gt; </span><span class="default">fan<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">a</span><span class="keyword">] =&gt; </span><span class="default">apple<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">b</span><span class="keyword">] =&gt; </span><span class="default">ball<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">g</span><span class="keyword">] =&gt; </span><span class="default">gun<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">d</span><span class="keyword">] =&gt; </span><span class="default">dog<br />
</span><span class="keyword">)<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90615""></a>
  <div class="note">
   <strong class="user">dirk dot avery a t gmail</strong>
   <a href="#90615" class="date">30-Apr-2009 08:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Building on examples by m227 and pineappleclock, here is a function that returns all permutations of each set in the power set of an array of strings (instead of a string).&nbsp; Thanks for the great examples!<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/*<br />
&nbsp;Use: $arr = power_perms($in);<br />
<br />
&nbsp;Example:<br />
&nbsp; $in = array("A","B","C");<br />
&nbsp; $power_perms = power_perms($in);<br />
&nbsp;<br />
&nbsp;Returns:<br />
&nbsp; Array<br />
&nbsp; (<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [10] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [11] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [12] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; A<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [13] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; B<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [14] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; C<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp; )<br />
<br />
*/<br />
<br />
</span><span class="keyword">function </span><span class="default">power_perms</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$power_set </span><span class="keyword">= </span><span class="default">power_set</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$power_set </span><span class="keyword">as </span><span class="default">$set</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$perms </span><span class="keyword">= </span><span class="default">perms</span><span class="keyword">(</span><span class="default">$set</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">,</span><span class="default">$perms</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">power_set</span><span class="keyword">(</span><span class="default">$in</span><span class="keyword">,</span><span class="default">$minLength </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$in</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$members </span><span class="keyword">= </span><span class="default">pow</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">,</span><span class="default">$count</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br />
&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$members</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%0"</span><span class="keyword">.</span><span class="default">$count</span><span class="keyword">.</span><span class="string">"b"</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp;&nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$b</span><span class="keyword">{</span><span class="default">$j</span><span class="keyword">} == </span><span class="string">'1'</span><span class="keyword">) </span><span class="default">$out</span><span class="keyword">[] = </span><span class="default">$in</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">) &gt;= </span><span class="default">$minLength</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return</span><span class="keyword">[] = </span><span class="default">$out</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; </span><span class="comment">//usort($return,"cmp");&nbsp; //can sort here by length<br />
&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$return</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">factorial</span><span class="keyword">(</span><span class="default">$int</span><span class="keyword">){<br />
&nbsp;&nbsp; if(</span><span class="default">$int </span><span class="keyword">&lt; </span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; for(</span><span class="default">$f </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">; </span><span class="default">$int</span><span class="keyword">-</span><span class="default">1 </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">; </span><span class="default">$f </span><span class="keyword">*= </span><span class="default">$int</span><span class="keyword">--);<br />
<br />
&nbsp;&nbsp; return </span><span class="default">$f</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">perm</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$nth </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$nth </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">perms</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$length</span><span class="keyword">--) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">factorial</span><span class="keyword">(</span><span class="default">$length</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$p </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$nth </span><span class="keyword">/ </span><span class="default">$f</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$p</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_delete_by_key</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$p</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nth </span><span class="keyword">-= </span><span class="default">$p </span><span class="keyword">* </span><span class="default">$f</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">perms</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">factorial</span><span class="keyword">(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">[] = </span><span class="default">perm</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$p</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">array_delete_by_key</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$delete_key</span><span class="keyword">, </span><span class="default">$use_old_keys </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$delete_key</span><span class="keyword">]);<br />
<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">$use_old_keys</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89022""></a>
  <div class="note">
   <strong class="user">john</strong>
   <a href="#89022" class="date">18-Feb-2009 09:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To shuffle keeping the keys intact, I've used the following:<br />
<br />
<span class="default">&lt;?PHP<br />
<br />
$shuff</span><span class="keyword">=array(</span><span class="string">"a"</span><span class="keyword">,</span><span class="string">"b"</span><span class="keyword">,</span><span class="string">"c"</span><span class="keyword">,</span><span class="string">"d"</span><span class="keyword">,</span><span class="string">"e"</span><span class="keyword">,</span><span class="string">"f"</span><span class="keyword">,</span><span class="string">"g"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"h"</span><span class="keyword">,</span><span class="string">"i"</span><span class="keyword">,</span><span class="string">"j"</span><span class="keyword">,</span><span class="string">"k"</span><span class="keyword">,</span><span class="string">"l"</span><span class="keyword">);<br />
</span><span class="default">uasort</span><span class="keyword">( </span><span class="default">$shuff</span><span class="keyword">, </span><span class="string">'scmp' </span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$shuff</span><span class="keyword">);<br />
<br />
function </span><span class="default">scmp</span><span class="keyword">( </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">rand</span><span class="keyword">(-</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Example output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; h<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; g<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; c<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; a<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; f<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; e<br />
&nbsp;&nbsp;&nbsp; [10] =&gt; k<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; d<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; i<br />
&nbsp;&nbsp;&nbsp; [11] =&gt; l<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; b<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; j<br />
)<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; g<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; a<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; c<br />
&nbsp;&nbsp;&nbsp; [10] =&gt; k<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; i<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; f<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; b<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; e<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; j<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; d<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; h<br />
&nbsp;&nbsp;&nbsp; [11] =&gt; l<br />
)<br />
<br />
Works for me...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88408""></a>
  <div class="note">
   <strong class="user">pineappleclock at gmail dot com</strong>
   <a href="#88408" class="date">22-Jan-2009 10:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want the Power Set (set of all unique subsets) of an array instead of permutations, you can use this simple algorithm:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
* Returns the power set of a one dimensional array,<br />
* a 2-D array.<br />
* array(a,b,c) -&gt;<br />
* array(array(a),array(b),array(c),array(a,b),array(b,c),array(a,b,c))<br />
*/<br />
</span><span class="keyword">function </span><span class="default">powerSet</span><span class="keyword">(</span><span class="default">$in</span><span class="keyword">,</span><span class="default">$minLength </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) { <br />
&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$in</span><span class="keyword">); <br />
&nbsp;&nbsp; </span><span class="default">$members </span><span class="keyword">= </span><span class="default">pow</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">,</span><span class="default">$count</span><span class="keyword">); <br />
&nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br />
&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$members</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%0"</span><span class="keyword">.</span><span class="default">$count</span><span class="keyword">.</span><span class="string">"b"</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp;&nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$b</span><span class="keyword">{</span><span class="default">$j</span><span class="keyword">} == </span><span class="string">'1'</span><span class="keyword">) </span><span class="default">$out</span><span class="keyword">[] = </span><span class="default">$in</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">) &gt;= </span><span class="default">$minLength</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return</span><span class="keyword">[] = </span><span class="default">$out</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87972""></a>
  <div class="note">
   <strong class="user">csaba at alum dot mit dot edu</strong>
   <a href="#87972" class="date">03-Jan-2009 08:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following function, NKnext(), generates combinations sequentially.&nbsp; NKnext's output is a string of 0s and 1s where a "1" at position k represents the kth item being selected.&nbsp; For example, "1001000" represents the 0th and 3rd items being chosen from among 7.&nbsp; Feed NKnext() such a string to generate the next one in the sequence.&nbsp; Note that the sequence is a Gray Code where all adjacent element pairs (including the first and last) differ by a minimal amount (ie. a 0-1 swap), so that one could easily make it circular (Hamiltonian).<br />
<br />
<span class="default">&lt;?php<br />
$n </span><span class="keyword">= </span><span class="default">7</span><span class="keyword">;<br />
</span><span class="default">$k </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;<br />
</span><span class="default">enumNK </span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// show all possibilities<br />
<br />
</span><span class="keyword">function </span><span class="default">enumNK </span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">) {<br />
&nbsp; </span><span class="comment">// Iteratively generate all strings of $k "1"s and $n-$k "0"s<br />
&nbsp; // so that adjacent strings have exactly one 0-1 swap.<br />
&nbsp; // Final string is a BRR of the original (right barrel rotation)<br />
&nbsp; </span><span class="keyword">print&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// print the initial string<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">"1"</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">) . </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">"0"</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">-</span><span class="default">$k</span><span class="keyword">);<br />
&nbsp; while (</span><span class="default">$str</span><span class="keyword">= </span><span class="default">NKnext</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)) print </span><span class="string">"&lt;br&gt; </span><span class="default">$str</span><span class="string">"</span><span class="keyword">; }<br />
<br />
function </span><span class="default">swap </span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$pos1</span><span class="keyword">, </span><span class="default">$pos2</span><span class="keyword">) {<br />
&nbsp; </span><span class="comment">// Return $str with characters at $pos1 and $pos2 swapped<br />
&nbsp; </span><span class="default">$chr </span><span class="keyword">= </span><span class="default">$str</span><span class="keyword">[</span><span class="default">$pos1</span><span class="keyword">];<br />
&nbsp; </span><span class="default">$str</span><span class="keyword">[</span><span class="default">$pos1</span><span class="keyword">] = </span><span class="default">$str</span><span class="keyword">[</span><span class="default">$pos2</span><span class="keyword">];<br />
&nbsp; </span><span class="default">$str</span><span class="keyword">[</span><span class="default">$pos2</span><span class="keyword">] = </span><span class="default">$chr</span><span class="keyword">;<br />
&nbsp; return </span><span class="default">$str</span><span class="keyword">; }<br />
<br />
function </span><span class="default">mod</span><span class="keyword">(</span><span class="default">$num</span><span class="keyword">, </span><span class="default">$base</span><span class="keyword">) {&nbsp; &nbsp; </span><span class="comment">// Mathematician's modulus<br />
&nbsp; // compare with <a href="http://php.net/fmod" rel="nofollow" target="_blank">http://php.net/fmod</a><br />
&nbsp; </span><span class="keyword">return (</span><span class="default">$num </span><span class="keyword">- </span><span class="default">$base</span><span class="keyword">*</span><span class="default">floor</span><span class="keyword">(</span><span class="default">$num</span><span class="keyword">/</span><span class="default">$base</span><span class="keyword">)); }<br />
<br />
function </span><span class="default">NKnext </span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$dir</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">) {<br />
&nbsp; </span><span class="comment">// Assumes there were initially $k=substr_count($str, "1") contiguous 1s<br />
&nbsp; //&nbsp;&nbsp; starting at ($dir==1=&gt;leftmost; $dir==1=&gt;rightmost) position $pos<br />
&nbsp; //&nbsp;&nbsp; to be barrel rotated in the direction $dir (1=&gt;right, -1=&gt;left)<br />
&nbsp; //&nbsp;&nbsp; while going through all possibilities of [$n=strlen($str), $k]<br />
&nbsp; // Returns the resultant next string in the iteration<br />
&nbsp; //&nbsp;&nbsp; by finding the position of the next swap ($pos and $pos2)<br />
&nbsp; </span><span class="default">NKswap </span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">, </span><span class="default">$dir</span><span class="keyword">, </span><span class="default">substr_count </span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="string">"1"</span><span class="keyword">), </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">), </span><span class="default">$pos2</span><span class="keyword">);<br />
&nbsp; if (</span><span class="default">$pos</span><span class="keyword">==</span><span class="default">$pos2</span><span class="keyword">) return </span><span class="string">""</span><span class="keyword">; return </span><span class="default">swap</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">, </span><span class="default">$pos2</span><span class="keyword">); }<br />
<br />
function </span><span class="default">NKswap </span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, &amp;</span><span class="default">$pos</span><span class="keyword">, </span><span class="default">$dir</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">, &amp;</span><span class="default">$pos2</span><span class="keyword">) {<br />
&nbsp; </span><span class="comment">// Under the assumptions for NKnext, returns the two<br />
&nbsp; //&nbsp;&nbsp; positions ($pos, $pos2) that are to be swapped.<br />
&nbsp; // $pos2 is set to $pos if $str is final (ie. no more swaps)<br />
&nbsp; </span><span class="keyword">if (!</span><span class="default">$k </span><span class="keyword">|| </span><span class="default">$k</span><span class="keyword">==</span><span class="default">$n</span><span class="keyword">) return </span><span class="default">$pos2 </span><span class="keyword">= </span><span class="default">$pos</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// all 0s or all 1s<br />
<br />
&nbsp; </span><span class="default">$ch1 </span><span class="keyword">= (</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">]!=</span><span class="string">"0"</span><span class="keyword">);&nbsp; &nbsp; &nbsp; </span><span class="comment">// Is char of interest (fixed char) a "1"?<br />
&nbsp; </span><span class="default">$sub </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">) . </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$pos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);&nbsp; </span><span class="comment">// Rest of string<br />
<br />
&nbsp; // Position of next char of interest<br />
&nbsp; </span><span class="default">$np </span><span class="keyword">= </span><span class="default">mod</span><span class="keyword">(</span><span class="default">$pos </span><span class="keyword">- (</span><span class="default">$dir</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">) + </span><span class="default">$ch1 </span><span class="keyword">* </span><span class="default">$dir </span><span class="keyword">* (</span><span class="default">$k</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">), </span><span class="default">$n</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">NKswap</span><span class="keyword">(</span><span class="default">$sub</span><span class="keyword">, </span><span class="default">$np</span><span class="keyword">, </span><span class="default">$ch1 </span><span class="keyword">? -</span><span class="default">$dir </span><span class="keyword">: </span><span class="default">$dir</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">---</span><span class="default">$ch1</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">, </span><span class="default">$pos2</span><span class="keyword">);<br />
&nbsp; if (</span><span class="default">$np</span><span class="keyword">==</span><span class="default">$pos2</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If substring is done<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return (</span><span class="default">$pos2 </span><span class="keyword">= </span><span class="default">mod</span><span class="keyword">(</span><span class="default">$pos </span><span class="keyword">+ </span><span class="default">$ch1 </span><span class="keyword">* </span><span class="default">$dir </span><span class="keyword">* (</span><span class="default">$k </span><span class="keyword">- !</span><span class="default">$k</span><span class="keyword">), </span><span class="default">$n</span><span class="keyword">));<br />
<br />
&nbsp; if (</span><span class="default">$pos2</span><span class="keyword">&gt;=</span><span class="default">$pos</span><span class="keyword">) ++</span><span class="default">$pos2</span><span class="keyword">;&nbsp; &nbsp;&nbsp; </span><span class="comment">// Adjustment for 'char of interest' posn<br />
&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$np </span><span class="keyword">+ (</span><span class="default">$np</span><span class="keyword">&gt;=</span><span class="default">$pos</span><span class="keyword">); }&nbsp;&nbsp; </span><span class="comment">// Return the "normal" swap position<br />
</span><span class="default">?&gt;<br />
</span><br />
BR = Barrel rotation<br />
BRR/BRL = Barrel rotation to the right/left by 1<br />
<br />
The basic algorithm is recursive, with a fixed "1" position identified ($pos=0, below), all sub-possibilities are iterated, then it is replaced with a 0, and then all those sub-possibilities are iterated.<br />
[5, 3] example with leftmost 1 fixed: 11100 -&gt; 10101 -&gt; 10110 -&gt; 11010 -&gt; 10011 -&gt; 11001<br />
[5, 3] continued with leftmost char swap: 11001 -&gt; 01101<br />
[5, 3] continued with leftmost 0 fixed: 01101 -&gt; 00111 -&gt; 01011 -&gt; 01110<br />
<br />
When $dir is 1 in the above functions, it represents a net BRR, and $pos represents the starting position of the leftmost 1.<br />
When $dir is -1 in the above functions, it represents a net BRL, and $pos represents the starting position of the rightmost 1.<br />
$pos is essentially used to determine when all the swaps are done.&nbsp; For example, in rotating 1110 (with $dir=1 and $pos=0) we go through the following: 1101 (and not 0111!), 1011, 0111<br />
<br />
Happy New Year,<br />
Csaba Gabor from Vienna</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86949""></a>
  <div class="note">
   <strong class="user">tony at brokerbin dot com</strong>
   <a href="#86949" class="date">11-Nov-2008 07:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is IMO the simplest and extremely fast way to shuffle an associative array AND keep the key=&gt;value relationship.&nbsp; However, it ONLY works if there are NO NUMERIC keys AT ALL.&nbsp; Look into array_merge for the reason why.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$unshuffled </span><span class="keyword">= array(</span><span class="string">'one'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="string">'two'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">,</span><span class="string">'three'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">);<br />
<br />
</span><span class="default">$shuffled </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">( </span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$unshuffled</span><span class="keyword">,</span><span class="default">count</span><span class="keyword">(</span><span class="default">$unshuffled</span><span class="keyword">))),</span><span class="default">$unshuffled </span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
peace</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83007""></a>
  <div class="note">
   <strong class="user">Antonio Ognio</strong>
   <a href="#83007" class="date">06-May-2008 09:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another shuffle() implementation that preserves keys, does not use extra memory and perhaps is a bit easier to grasp.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'shuffle_with_keys'</span><span class="keyword">)===</span><span class="default">false</span><span class="keyword">) {<br />
&nbsp; function </span><span class="default">shuffle_with_keys</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* Auxiliary array to hold the new order */<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$aux </span><span class="keyword">= array(); <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* We work with an array of the keys */<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* We shuffle the keys */<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* We iterate thru' the new order of the keys */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">/* We insert the key, value pair in its new order */<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$aux</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">/* We remove the element from the old array to save memory */<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* The auxiliary array with the new order overwrites the old variable */<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">$aux</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80586""></a>
  <div class="note">
   <strong class="user">rich at home dot nl</strong>
   <a href="#80586" class="date">23-Jan-2008 09:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Function that does the same as shuffle(), but preserves key=&gt;values.<br />
(Based on (Vladimir Kornea of typetango.com)'s function)<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">function </span><span class="default">shuffle_assoc</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)&gt;</span><span class="default">1</span><span class="keyword">) { </span><span class="comment">//$keys needs to be an array, no need to shuffle 1 item anyway<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">$new</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">; </span><span class="comment">//because it's a wannabe shuffle(), which returns true<br />
&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp; </span><span class="default">$test </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="string">'one'</span><span class="keyword">,</span><span class="string">'two'</span><span class="keyword">=&gt;</span><span class="string">'2'</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">=&gt;</span><span class="string">'3'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
&nbsp; </span><span class="default">shuffle_assoc</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; one<br />
&nbsp;&nbsp;&nbsp; [two] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 3<br />
)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [two] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; one<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 3<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80004""></a>
  <div class="note">
   <strong class="user">carrox at mail dot ru</strong>
   <a href="#80004" class="date">23-Dec-2007 02:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Very fast way to shuffle associative array and keep key=&gt;value<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; $tmp</span><span class="keyword">=array(</span><span class="string">"one"</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="string">"two"</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">,</span><span class="string">"three"</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">,</span><span class="string">"four"</span><span class="keyword">=&gt;</span><span class="default">4</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$new</span><span class="keyword">=array();<br />
&nbsp; </span><span class="default">$c</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">$k</span><span class="keyword">=</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$v</span><span class="keyword">=</span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; while(</span><span class="default">$c</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$new</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]]=</span><span class="default">$v</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; unset(</span><span class="default">$k</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]); </span><span class="comment">#exlude selected number from list<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$c</span><span class="keyword">--;<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
<br />
Result:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [one] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [two] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [three] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [four] =&gt; 4<br />
)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [two] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [three] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [four] =&gt; 4<br />
&nbsp;&nbsp;&nbsp; [one] =&gt; 1<br />
)<br />
<br />
And thats all, folks!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78999""></a>
  <div class="note">
   <strong class="user">downforme at gmx dot at</strong>
   <a href="#78999" class="date">06-Nov-2007 10:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
my approach to bring some chaos to associative arrays<br />
<span class="default">&lt;?php<br />
define </span><span class="keyword">(</span><span class="string">"SHUFFLEBOTH"</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">define </span><span class="keyword">(</span><span class="string">"SHUFFLEVALUES"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">define </span><span class="keyword">(</span><span class="string">"SHUFFLEKEYS"</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
function </span><span class="default">shuffle_assoc</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$mode</span><span class="keyword">=</span><span class="default">SHUFFLEBOTH</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$values </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$mode</span><span class="keyword">==</span><span class="default">SHUFFLEBOTH</span><span class="keyword">) || (</span><span class="default">$mode</span><span class="keyword">==</span><span class="default">SHUFFLEVALUES</span><span class="keyword">)) </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$mode</span><span class="keyword">==</span><span class="default">SHUFFLEBOTH</span><span class="keyword">) || (</span><span class="default">$mode</span><span class="keyword">==</span><span class="default">SHUFFLEKEYS</span><span class="keyword">)) </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_combine</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">, </span><span class="default">$values</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73232""></a>
  <div class="note">
   <strong class="user">hauser dot j at gmail dot com</strong>
   <a href="#73232" class="date">14-Feb-2007 02:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Permutation using recursion<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">perm</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$n </span><span class="keyword">&lt;= </span><span class="default">1</span><span class="keyword">) return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else return </span><span class="default">$n </span><span class="keyword">* </span><span class="default">perm</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage example: <br />
<span class="default">&lt;?php $result </span><span class="keyword">= </span><span class="default">perm</span><span class="keyword">(</span><span class="default">8</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
$result will be 40320</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70370""></a>
  <div class="note">
   <strong class="user">m227 at tlen dot pl</strong>
   <a href="#70370" class="date">13-Oct-2006 03:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
here come my three pennies about permutations. I did function below to work with word anagrams, it works flawlessly, however may be seen as a slow one.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/** (c) on LGPL license 2006.10 michal@glebowski.pl */<br />
</span><span class="keyword">function </span><span class="default">fact</span><span class="keyword">(</span><span class="default">$int</span><span class="keyword">){<br />
&nbsp;&nbsp; if(</span><span class="default">$int</span><span class="keyword">&lt;</span><span class="default">2</span><span class="keyword">)return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; for(</span><span class="default">$f</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">;</span><span class="default">$int</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">&gt;</span><span class="default">1</span><span class="keyword">;</span><span class="default">$f</span><span class="keyword">*=</span><span class="default">$int</span><span class="keyword">--);<br />
&nbsp;&nbsp; return </span><span class="default">$f</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/** @return string string $s with $n-th character cut */ <br />
</span><span class="keyword">function </span><span class="default">del</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">).</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br />
}<br />
</span><span class="comment">/** <br />
&nbsp;* @param $s string word to permute<br />
&nbsp;* @param $n int n-th permutation&nbsp; <br />
&nbsp;* @return string n-th permutation (out of strlen(string)!)<br />
&nbsp;*/&nbsp; <br />
</span><span class="keyword">function </span><span class="default">perm</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$n </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">) return </span><span class="default">perms</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$l </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$l</span><span class="keyword">--) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">fact</span><span class="keyword">(</span><span class="default">$l</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$p </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">/</span><span class="default">$f</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">.= </span><span class="default">$s</span><span class="keyword">{</span><span class="default">$p</span><span class="keyword">};<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">del</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$p</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$n</span><span class="keyword">-= </span><span class="default">$p</span><span class="keyword">*</span><span class="default">$f</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">.=</span><span class="default">$s</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$r</span><span class="keyword">;<br />
}<br />
</span><span class="comment">/** @return array array of all permutations */<br />
</span><span class="keyword">function </span><span class="default">perms</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">fact</span><span class="keyword">(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">));</span><span class="default">$i</span><span class="keyword">++)&nbsp; &nbsp; </span><span class="default">$p</span><span class="keyword">[] = </span><span class="default">perm</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$p</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67432""></a>
  <div class="note">
   
   <a href="#67432" class="date">07-Jun-2006 02:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Posted below is code that you would expect to work<br />
<br />
<span class="default">&lt;?php<br />
<br />
$keys </span><span class="keyword">= </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">));<br />
<br />
foreach (</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">) {<br />
<br />
&nbsp; </span><span class="default">$arr_elem </span><span class="keyword">= </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp; </span><span class="comment">// do what you want with the array element<br />
<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This in fact does not work because shuffle returns a boolean true or false. More accurate code using this method would be:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
</span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br />
<br />
foreach (</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">) {<br />
<br />
&nbsp; </span><span class="default">$arr_elem </span><span class="keyword">= </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp; </span><span class="comment">// do what you want with the array element<br />
<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62840""></a>
  <div class="note">
   <strong class="user">alejandro dot garza at itesm dot mx</strong>
   <a href="#62840" class="date">10-Mar-2006 08:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is taken from an O'Reilly Book and modified slightly to return all possible permutations of a 1D array:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment"># Modified from <a href="http://linuxalpha1.eicn.ch/OReilly_books/books/webprog/pcook/ch04_26.htm " rel="nofollow" target="_blank">http://linuxalpha1.eicn.ch/OReilly_books/books/webprog/pcook/ch04_26.htm </a><br />
# Takes a non-associatuve 1D (vector) array of items<br />
#&nbsp; and returns an array of arrays with each possible permutation<br />
</span><span class="keyword">function </span><span class="default">array_2D_permute</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">, </span><span class="default">$perms </span><span class="keyword">= array( )) {<br />
static </span><span class="default">$permuted_array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (empty(</span><span class="default">$items</span><span class="keyword">)) { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$permuted_array</span><span class="keyword">[]=</span><span class="default">$perms</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">#print_r($new);<br />
&nbsp;&nbsp; &nbsp;&nbsp; #print join(' ', $perms) . "\n";<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&gt;= </span><span class="default">0</span><span class="keyword">; --</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$newitems </span><span class="keyword">= </span><span class="default">$items</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$newperms </span><span class="keyword">= </span><span class="default">$perms</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; list(</span><span class="default">$foo</span><span class="keyword">) = </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$newitems</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$newperms</span><span class="keyword">, </span><span class="default">$foo</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_2D_permute</span><span class="keyword">(</span><span class="default">$newitems</span><span class="keyword">, </span><span class="default">$newperms</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$permuted_array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$arr</span><span class="keyword">=array(</span><span class="string">"Architecture"</span><span class="keyword">,</span><span class="string">"Mexico"</span><span class="keyword">,</span><span class="string">"Periodicals"</span><span class="keyword">,</span><span class="string">"Test"</span><span class="keyword">);<br />
</span><span class="default">$result</span><span class="keyword">=</span><span class="default">array_2D_permute</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57068""></a>
  <div class="note">
   <strong class="user">bill at SWScripts dot com</strong>
   <a href="#57068" class="date">22-Sep-2005 09:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a quick note to let people know that shuffle() will work on multidimensional associative arrays provided that the first key is already numeric.<br />
<br />
So this array can be shuffled without losing any of the secondary keys or their values:<br />
<br />
$array[0]['color'], $array[0]['size'], $array[0]['fabric']<br />
. . .<br />
$array[50]['color'], $array[50]['size'], $array[50]['fabric']<br />
<br />
I recently ran up against needing to randomize this array and tried shuffle even though it's not really for associative arrays.<br />
<br />
Hope it helps somebody out there.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56338""></a>
  <div class="note">
   <strong class="user">Markus of CodeWallah.Com</strong>
   <a href="#56338" class="date">30-Aug-2005 10:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a pretty little function to shuffle an associative array, taking a bit different approach from the earlier entries. <br />
<br />
<span class="default">&lt;?PHP<br />
</span><span class="keyword">function </span><span class="default">ass_array_shuffle </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$val </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_arr</span><span class="keyword">[</span><span class="default">$val</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$val</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$val</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$new_arr</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
In the function above, the original array is randomly scavenged upon until nothing is left of it. This removes the need for any temporary variables, or indeed for any superfluous tossing around of stuff.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53569""></a>
  <div class="note">
   <strong class="user">skissane at iips dot mq dot edu dot au</strong>
   <a href="#53569" class="date">06-Jun-2005 03:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
note that in PHP 5.0.4 (and assumably earlier versions as well), shuffle internally calls rand(), not mt_rand().<br />
<br />
This was important because I was trying to use a fixed seed to get repeatable results, by calling mt_srand(). But of course that doesn't work, since shuffle uses rand() not mt_rand(). The solution is either to use srand() for seeding, or to write your own version of shuffle() using mt_rand(). (See examples which others have contributed; or, just have a look at ext/standard/array.c) mt_rand on many platforms gives better results than the builtin library anyway...<br />
<br />
N.B. Obviously, the way the shuffle function is implemented may change without notice in future versions, including e.g. changing to use mt_rand instead.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51147""></a>
  <div class="note">
   <strong class="user">monte at ohrt dot com</strong>
   <a href="#51147" class="date">21-Mar-2005 02:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[EDIT by danbrown AT php DOT net: As pointed out on 25 July, 2008, by "Anonymous", this implementation may have some errors or inconsistencies that may cause this function not to achieve the desired result.&nbsp; "Anonymous" provided the following link for more information: <a href="http://en.wikipedia.org/wiki/Fisher-Yates_shuffle]" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Fisher-Yates_shuffle]</a><br />
<br />
This is an attempt to get the Fisher Yates shuffle right, and as optimized as possible. The array items are stepped through from last to first, each being swapped with another between itself and the beginning of the array (N-1 shuffles required.) Using list() to swap array vars instead of a tmp var proved to be slightly slower. Testing for $i = $j decreases performance as the array size increases, so it was left out (elements are always swapped.)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">fisherYatesShuffle</span><span class="keyword">(&amp;</span><span class="default">$items</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$j </span><span class="keyword">= @</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$tmp</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45916""></a>
  <div class="note">
   <strong class="user">Bjorn AT smokingmedia DOT com</strong>
   <a href="#45916" class="date">23-Sep-2004 05:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To shuffle an associated array and remain the association between keys and values, use this function:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$test_array </span><span class="keyword">= array(</span><span class="string">"first" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,</span><span class="string">"second" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">,</span><span class="string">"third" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">,</span><span class="string">"fourth" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">);<br />
<br />
function </span><span class="default">shuffle_assoc</span><span class="keyword">(</span><span class="default">$input_array</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; foreach(</span><span class="default">$input_array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$temp_array</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">][</span><span class="default">key</span><span class="keyword">] = </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$input_array</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; foreach(</span><span class="default">$input_array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$return_array</span><span class="keyword">[</span><span class="default">$temp_array</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">][</span><span class="default">key</span><span class="keyword">]] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; return </span><span class="default">$return_array</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
<br />
echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">shuffle_assoc</span><span class="keyword">(</span><span class="default">$test_array</span><span class="keyword">));<br />
echo </span><span class="string">"&lt;/pre&gt;&lt;hr /&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// this will output something like this:<br />
/*<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [fourth] =&gt; 4<br />
&nbsp;&nbsp;&nbsp; [second] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [third] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [first] =&gt; 1<br />
)<br />
<br />
*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41593""></a>
  <div class="note">
   <strong class="user">Justin Knoll</strong>
   <a href="#41593" class="date">15-Apr-2004 05:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This code is very appealing in its simplicity and speed, but it's not a random shuffle:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">randomcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br />
{<br />
&nbsp; return </span><span class="default">mt_rand</span><span class="keyword">(-</span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
}<br />
<br />
function </span><span class="default">swapshuffle</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">srand</span><span class="keyword">((double) </span><span class="default">microtime</span><span class="keyword">() * </span><span class="default">10000000</span><span class="keyword">);<br />
&nbsp; </span><span class="default">uksort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">"randomcmp"</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This is because uksort calls the C function zend_qsort and this quicksorts the array using the provided comparision function. The pairs of indices selected are biased by the nature of the quicksort algorithm.<br />
<br />
One effect is that an element in the middle of the array is heavily biased toward being "shuffled" to the middle. Elements on the edges are biased towards the edges; they're likely to switch edges, but unlikely to end up in the middle.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40713""></a>
  <div class="note">
   <strong class="user">injunjoel</strong>
   <a href="#40713" class="date">11-Mar-2004 07:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware that when shuffling an associative array your associative keys will be lost! example below:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="string">"before shuffle\n"</span><span class="keyword">;<br />
</span><span class="default">$numbers </span><span class="keyword">= array(</span><span class="string">'first'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="string">'second'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">,</span><span class="string">'third'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">,</span><span class="string">'fourth'</span><span class="keyword">=&gt;</span><span class="default">4</span><span class="keyword">);<br />
foreach(</span><span class="default">$numbers </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$key</span><span class="string"> =&gt; </span><span class="default">$value</span><span class="string">\n"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">"\nafter shuffle\n"</span><span class="keyword">;<br />
</span><span class="default">srand</span><span class="keyword">((float)</span><span class="default">microtime</span><span class="keyword">() * </span><span class="default">1000000</span><span class="keyword">);<br />
</span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$numbers</span><span class="keyword">);<br />
<br />
foreach(</span><span class="default">$numbers </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$key</span><span class="string"> =&gt; </span><span class="default">$value</span><span class="string">\n"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span>--output--<br />
before shuffle<br />
first =&gt; 1<br />
second =&gt; 2<br />
third =&gt; 3<br />
fourth =&gt; 4<br />
<br />
after shuffle<br />
0 =&gt; 4<br />
1 =&gt; 1<br />
2 =&gt; 3<br />
3 =&gt; 2</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.rsort.html">rsort</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.sizeof.html">sizeof</a></div>
 <div class="up"><a href="ref.array.html">Array Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
