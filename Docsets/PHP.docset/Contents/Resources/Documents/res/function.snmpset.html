<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Set the value of an SNMP object</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.snmprealwalk.html">snmprealwalk</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.snmpwalk.html">snmpwalk</a></div>
 <div class="up"><a href="ref.snmp.html">SNMP Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.snmpset" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">snmpset</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">snmpset</span> &mdash; <span class="dc-title">Set the value of an <acronym title="Simple Network Management Protocol">SNMP</acronym> object</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.snmpset-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><b>snmpset</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$host</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$community</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$object_id</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$type</tt></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <tt class="parameter">$value</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$timeout</tt><span class="initializer"> = 1000000</span></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$retries</tt><span class="initializer"> = 5</span></span>
  ]] )</div>

  
  <p class="para rdfs-comment">
   <span class="function"><b>snmpset()</b></span> is used to set the value of an <acronym title="Simple Network Management Protocol">SNMP</acronym> object
   specified by the <i><tt class="parameter">object_id</tt></i>.
  </p>
  
 </div>

 
 <div class="refsect1 parameters" id="refsect1-function.snmpset-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">host</tt></i></span>
     <dd>

      <p class="para">
       The hostname of the <acronym title="Simple Network Management Protocol">SNMP</acronym> agent (server).
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">community</tt></i></span>
     <dd>

      <p class="para">
       The write community.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">object_id</tt></i></span>
     <dd>

      <p class="para">
       The <acronym title="Simple Network Management Protocol">SNMP</acronym> object id.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">type</tt></i></span>
     <dd>

      <p class="para">
 The <acronym>MIB</acronym> defines the type of each object id. It has to be specified as a single character from the below list.
</p>
<table class="doctable table">
 <caption><b>types</b></caption>
 
  <tbody valign="middle" class="tbody">
   <tr valign="middle"><td align="left">=</td><td align="left">The type is taken from the MIB</td></tr>

   <tr valign="middle"><td align="left">i</td><td align="left">INTEGER</td> </tr>

   <tr valign="middle"><td align="left">u</td><td align="left">INTEGER</td></tr>

   <tr valign="middle"><td align="left">s</td><td align="left">STRING</td></tr>

   <tr valign="middle"><td align="left">x</td><td align="left">HEX STRING</td></tr>

   <tr valign="middle"><td align="left">d</td><td align="left">DECIMAL STRING</td></tr>

   <tr valign="middle"><td align="left">n</td><td align="left">NULLOBJ</td></tr>

   <tr valign="middle"><td align="left">o</td><td align="left">OBJID</td></tr>

   <tr valign="middle"><td align="left">t</td><td align="left">TIMETICKS</td></tr>

   <tr valign="middle"><td align="left">a</td><td align="left">IPADDRESS</td></tr>

   <tr valign="middle"><td align="left">b</td><td align="left">BITS</td></tr>

  </tbody>
 
</table>

<p class="para">
 If <b><tt>OPAQUE_SPECIAL_TYPES</tt></b> was defined while compiling the <acronym title="Simple Network Management Protocol">SNMP</acronym> library, the following are also valid:
</p>
<table class="doctable table">
 <caption><b>types</b></caption>
 
  <tbody valign="middle" class="tbody">
   <tr valign="middle"><td align="left">U</td><td align="left">unsigned int64</td></tr>

   <tr valign="middle"><td align="left">I</td><td align="left">signed int64</td></tr>

   <tr valign="middle"><td align="left">F</td><td align="left">float</td></tr>

   <tr valign="middle"><td align="left">D</td><td align="left">double</td></tr>

  </tbody>
 
</table>


      <p class="para">
 Most of these will use the obvious corresponding ASN.1 type.  &#039;s&#039;, &#039;x&#039;, &#039;d&#039; and &#039;b&#039; are all different ways of specifying an OCTET STRING value, and
 the &#039;u&#039; unsigned type is also used for handling Gauge32 values.
</p>

      <p class="para">
 If the MIB-Files are loaded by into the MIB Tree with &quot;snmp_read_mib&quot; or by specifying it in the libsnmp config, &#039;=&#039; may be used as
 the <i><tt class="parameter">type</tt></i> parameter for all object ids as the type can then be automatically read from the MIB.
</p>

      <p class="para">
 Note that there are two ways to set a variable of the type BITS like e.g.
 &quot;SYNTAX    BITS {telnet(0), ftp(1), http(2), icmp(3), snmp(4), ssh(5), https(6)}&quot;:
</p>
<ul class="itemizedlist">
 <li class="listitem">
  <span class="simpara">
   Using type &quot;b&quot; and a list of bit numbers. This method is not recommended since GET query for the same OID would return e.g. 0xF8.
  </span>
 </li>
 <li class="listitem">
  <span class="simpara">
   Using type &quot;x&quot; and a hex number but without(!) the usual &quot;0x&quot; prefix.
  </span>
 </li>
</ul>
<p class="para">
 See examples section for more details.
</p>

     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">value</tt></i></span>
     <dd>

      <p class="para">
       The new value.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">timeout</tt></i></span>
     <dd>

      <p class="para">
       The number of microseconds until the first timeout.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">retries</tt></i></span>
     <dd>

      <p class="para">
       The number of times to retry if timeouts occur.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.snmpset-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <b><tt>TRUE</tt></b> on success or <b><tt>FALSE</tt></b> on failure.
  </p>
  <p class="para">
   If the SNMP host rejects the data type, an E_WARNING message like &quot;Warning: Error in packet. Reason: (badValue) The value given has the wrong type or length.&quot; is shown.
   If an unknown or invalid OID is specified the warning probably reads &quot;Could not add variable&quot;.
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.snmpset-examples">
  <h3 class="title">Examples</h3>
   <div class="example" id="example-4132">
    <p><b>Example #1 Using <span class="function"><b>snmpset()</b></span></b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;snmpset</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"public"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"IF-MIB::ifAlias.3"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"s"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example" id="example-4133">
    <p><b>Example #2 Using <span class="function"><b>snmpset()</b></span> for setting BITS <acronym title="Simple Network Management Protocol">SNMP</acronym> object id</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;snmpset</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"public"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'FOO-MIB::bar.42'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'b'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'0&nbsp;1&nbsp;2&nbsp;3&nbsp;4'</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;or<br />&nbsp;&nbsp;</span><span style="color: #0000BB">snmpset</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"public"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'FOO-MIB::bar.42'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'x'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'F0'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.snmpset-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.snmpget.html" class="function" rel="rdfs-seeAlso">snmpget()</a> - Fetch an SNMP object</span></li>
   </ul>
  </p>
 </div>

 
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="95634""></a>
  <div class="note">
   <strong class="user">ch at lathspell dot de</strong>
   <a href="#95634" class="date">13-Jan-2010 06:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that there are two ways to set a variable of the type BITS like e.g.: <br />
&nbsp; SYNTAX&nbsp; &nbsp; &nbsp; &nbsp; BITS {telnet(0), ftp(1), http(2), icmp(3), snmp(4), ssh(5), https(6)}<br />
<br />
1. Using type "b" and a list of bit numbers like:<br />
&nbsp; snmpset('FOO-MIB::bar.42', 'b', '0 1 2 3 4');<br />
with the disadvantage that the success is not easily verifyable as an snmpget() for the same OID would return e.g. 0xF8.<br />
<br />
2. Using type "x" and a hex number but without(!) the usual "0x" prefix:<br />
&nbsp; snmpset('FOO-MIB::bar.42', 'x', 'F0');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74600""></a>
  <div class="note">
   <strong class="user">tridman</strong>
   <a href="#74600" class="date">19-Apr-2007 07:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have importet the MIB-Files into the MIB Tree with "snmp_read_mib" you may use '=' as the "type" parameter.<br />
In this case the type will also be taken from the loaded mib file. (Octest strings will be interpreted like strings though)<br />
Comes in handy for a more dynamic use of snmpset.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72000""></a>
  <div class="note">
   <strong class="user">deivis dot jakstas at gmail dot com</strong>
   <a href="#72000" class="date">28-Dec-2006 06:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you setting hex values correct format is:<br />
snmpset($source_ip,$community,"$oid","x","10 10 10 10");</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="1192""></a>
  <div class="note">
   <strong class="user">slawrance at technologist dot com</strong>
   <a href="#1192" class="date">21-Jul-1999 12:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The "type" parameter must be one of the following, depending on the type of variable to set on the SNMP host:<br />
<br />
i&nbsp; &nbsp; INTEGER<br />
u&nbsp; &nbsp; unsigned INTEGER<br />
t&nbsp; &nbsp; TIMETICKS<br />
a&nbsp; &nbsp; IPADDRESS<br />
o&nbsp; &nbsp; OBJID<br />
s&nbsp; &nbsp; STRING<br />
x&nbsp; &nbsp; HEX STRING<br />
d&nbsp; &nbsp; DECIMAL STRING<br />
n&nbsp; &nbsp; NULLOBJ<br />
b&nbsp; &nbsp; BITS<br />
<br />
If OPAQUE_SPECIAL_TYPES was defined while compiling the SNMP library, the<br />
following are also valid:<br />
<br />
U&nbsp; &nbsp; unsigned int64<br />
I&nbsp; &nbsp; signed int64<br />
F&nbsp; &nbsp; float<br />
D&nbsp; &nbsp; double<br />
<br />
As an example, using "i" would set an integer, and "s" would set a string.&nbsp; If the SNMP host rejects the data type, you might get the following message: "Warning: Error in packet. Reason: (badValue) The value given has the wrong type or length."<br />
<br />
If you specify an unknown or invalid OID, you might get a "Could not add variable" message.&nbsp; When specifying an absolute OID (one that is already resolved) that is completely numeric, prepend it with a period.&nbsp; For example, an OID that could enable/disable Ethernet ports on an Asante hub might be "1.3.6.1.2.1.22.1.3.1.1.3.6.4.0", but you would need to use ".1.3.6.1.2.1.22.1.3.1.1.3.6.4.0" in the OID parameter so that the SNMP library won't try to resolve an already resolved OID.&nbsp; Friendly, unresolved OIDs do not need the period prepended, such as "system.SysContact.0"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.snmprealwalk.html">snmprealwalk</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.snmpwalk.html">snmpwalk</a></div>
 <div class="up"><a href="ref.snmp.html">SNMP Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
