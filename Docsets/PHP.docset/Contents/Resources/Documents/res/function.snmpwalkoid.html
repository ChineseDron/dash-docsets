<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Query for a tree of information about a network entity</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.snmpwalk.html">snmpwalk</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="class.snmp.html">SNMP</a></div>
 <div class="up"><a href="ref.snmp.html">SNMP Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.snmpwalkoid" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">snmpwalkoid</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">snmpwalkoid</span> &mdash; <span class="dc-title">Query for a tree of information about a network entity
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.snmpwalkoid-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><b>snmpwalkoid</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$hostname</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$community</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$object_id</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$timeout</tt><span class="initializer"> = 1000000</span></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$retries</tt><span class="initializer"> = 5</span></span>
  ]] )</div>


  <p class="para rdfs-comment">
   <span class="function"><b>snmpwalkoid()</b></span> function is used to read all object ids
   and their respective values from an SNMP agent specified by  
   <i><tt class="parameter">hostname</tt></i>.
  </p>

  <p class="para">
   The existence of <span class="function"><b>snmpwalkoid()</b></span> and
   <span class="function"><a href="function.snmpwalk.html" class="function">snmpwalk()</a></span> has historical reasons.  Both
   functions are provided for backward compatibility.
   Use <span class="function"><a href="function.snmprealwalk.html" class="function">snmprealwalk()</a></span> instead.
  </p> 
 </div>


 <div class="refsect1 parameters" id="refsect1-function.snmpwalkoid-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">hostname</tt></i></span>
     <dd>

      <p class="para">
       The SNMP agent.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">community</tt></i></span>
     <dd>

      <p class="para">
       The read community.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">object_id</tt></i></span>
     <dd>

      <p class="para">
       If <b><tt>NULL</tt></b>, <i><tt class="parameter">object_id</tt></i> is taken as the root of
       the SNMP objects tree and all objects under that tree are returned as
       an array. 
      </p>
      <p class="para">
       If <i><tt class="parameter">object_id</tt></i> is specified, all the SNMP objects
       below that <i><tt class="parameter">object_id</tt></i> are returned.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">timeout</tt></i></span>
     <dd>

      <p class="para">
       The number of microseconds until the first timeout.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">retries</tt></i></span>
     <dd>

      <p class="para">
       The number of times to retry if timeouts occur.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.snmpwalkoid-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns an associative array with object ids and their respective
   object value starting from the <i><tt class="parameter">object_id</tt></i>
   as root or <b><tt>FALSE</tt></b> on error.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.snmpwalkoid-examples">
  <h3 class="title">Examples</h3>
  <p class="para"> 
   <div class="example" id="example-4135">
    <p><b>Example #1 <span class="function"><b>snmpwalkoid()</b></span> Example</b></p>
    <div class="example-contents"> 
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">snmpwalkoid</span><span style="color: #007700">(</span><span style="color: #DD0000">"127.0.0.1"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"public"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">);&nbsp;<br />for&nbsp;(</span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);&nbsp;</span><span style="color: #0000BB">next</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$i</span><span style="color: #DD0000">:&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p> 
  <p class="para">
   Above function call would return all the SNMP objects from the
   SNMP agent running on localhost. One can step through the values
   with a loop
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.snmpwalkoid-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.snmpwalk.html" class="function" rel="rdfs-seeAlso">snmpwalk()</a> - Fetch all the SNMP objects from an agent</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="53832""></a>
  <div class="note">
   <strong class="user">thammer at rtccom dot com</strong>
   <a href="#53832" class="date">14-Jun-2005 08:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The above note mentions that the MAC addresses come back converted to integers or something funky like that. Not sure why that is happening but I fixed that with a wrapper function.<br />
<br />
function PadMAC($mac) {<br />
&nbsp;&nbsp;&nbsp; $mac_arr = explode(':',$mac);<br />
&nbsp;&nbsp;&nbsp; foreach($mac_arr as $atom) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $atom = trim($atom);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $newarr[] = sprintf("%02s",$atom);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; $newmac = implode(':',$newarr);<br />
&nbsp;&nbsp;&nbsp; return $newmac;<br />
}<br />
<br />
Maybe that will help somebody with that issue. I know I personally use the heck out of these user contributed notes</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46538""></a>
  <div class="note">
   <strong class="user">gene_wood at example dot com</strong>
   <a href="#46538" class="date">14-Oct-2004 09:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Looks like timeout is in MICRO seconds.<br />
1,000,000 &amp;micros = 1 s</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="10489""></a>
  <div class="note">
   <strong class="user">jasper at pointless dot net</strong>
   <a href="#10489" class="date">06-Jan-2001 07:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
N.B. it's possible for snmpwalkoid to lose data - the "rmon.matrix.matrixSDTable" table for example uses binary mac addresses as part of the index, these get converted to ascii, and by the time they get to php they can be non-unique - so some entrys in the table get lost...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.snmpwalk.html">snmpwalk</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="class.snmp.html">SNMP</a></div>
 <div class="up"><a href="ref.snmp.html">SNMP Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
