<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Split string into array by regular expression</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.eregi.html">eregi</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.spliti.html">spliti</a></div>
 <div class="up"><a href="ref.regex.html">POSIX Regex Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.split" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">split</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">split</span> &mdash; <span class="dc-title">Split string into array by regular expression</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.split-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><b>split</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$pattern</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$string</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$limit</tt><span class="initializer"> = -1</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Splits a <i><tt class="parameter">string</tt></i> into array by regular expression.
  </p>
  <div class="warning"><b class="warning">Warning</b><p class="simpara">This function has been
<em class="emphasis">DEPRECATED</em> as of PHP 5.3.0. Relying on this feature is
highly discouraged.</p></div>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.split-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">pattern</tt></i></span>
     <dd>

      <p class="para">
       Case sensitive regular expression.
      </p>
      <p class="para">
       If you want to split on any of the characters which are considered
       special by regular expressions, you&#039;ll need to escape them first. If
       you think <span class="function"><b>split()</b></span> (or any other regex function, for
       that matter) is doing something weird, please read the file
       <var class="filename">regex.7</var>, included in the 
       <var class="filename">regex/</var> subdirectory of the PHP distribution. It&#039;s
       in manpage format, so you&#039;ll want to do something along the lines of
       <strong class="command">man /usr/local/src/regex/regex.7</strong> in order to read it.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">string</tt></i></span>
     <dd>

      <p class="para">
       The input string.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">limit</tt></i></span>
     <dd>

      <p class="para">
       If <i><tt class="parameter">limit</tt></i> is set, the returned array will
       contain a maximum of <i><tt class="parameter">limit</tt></i> elements with the
       last element containing the whole rest of
       <i><tt class="parameter">string</tt></i>.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.split-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns an array of strings, each of which is a substring of
   <i><tt class="parameter">string</tt></i> formed by splitting it on boundaries formed
   by the case-sensitive regular expression <i><tt class="parameter">pattern</tt></i>.
  </p>
  <p class="para">
   If there are <span class="replaceable">n</span> occurrences of
   <i><tt class="parameter">pattern</tt></i>, the returned array will contain
   <i><span class="replaceable">n</span>+1</i> items. For example, if
   there is no occurrence of <i><tt class="parameter">pattern</tt></i>, an array with
   only one element will be returned. Of course, this is also true if
   <i><tt class="parameter">string</tt></i> is empty. If an error occurs,
   <span class="function"><b>split()</b></span> returns <b><tt>FALSE</tt></b>.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.split-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4360">
    <p><b>Example #1 <span class="function"><b>split()</b></span> example</b></p>
    <div class="example-contents"><p>
     To split off the first four fields from a line from
     <var class="filename">/etc/passwd</var>:
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">list(</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pass</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$uid</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$gid</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$extra</span><span style="color: #007700">)&nbsp;=<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">split</span><span style="color: #007700">(</span><span style="color: #DD0000">":"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$passwd_line</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4361">
    <p><b>Example #2 <span class="function"><b>split()</b></span> example</b></p>
    <div class="example-contents"><p>
     To parse a date which may be delimited with slashes, dots, or hyphens:
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Delimiters&nbsp;may&nbsp;be&nbsp;slash,&nbsp;dot,&nbsp;or&nbsp;hyphen<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"04/30/1973"</span><span style="color: #007700">;<br />list(</span><span style="color: #0000BB">$month</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$day</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$year</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">split</span><span style="color: #007700">(</span><span style="color: #DD0000">'[/.-]'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Month:&nbsp;</span><span style="color: #0000BB">$month</span><span style="color: #DD0000">;&nbsp;Day:&nbsp;</span><span style="color: #0000BB">$day</span><span style="color: #DD0000">;&nbsp;Year:&nbsp;</span><span style="color: #0000BB">$year</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.split-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><b class="note">Note</b>: <p class="para">As of PHP 5.3.0, the
regex extension is deprecated in favor of the 
<a href="book.pcre.html" class="link">PCRE extension</a>. Calling this function 
will issue an <b><tt>E_DEPRECATED</tt></b> notice. See <a href="reference.pcre.pattern.posix.html" class="link">the list of
differences</a> for help on converting to PCRE.</p></p></blockquote>
  <div class="tip"><b class="tip">Tip</b>
   <p class="para">
    <span class="function"><a href="function.preg-split.html" class="function">preg_split()</a></span>, which uses a Perl-compatible regular
    expression syntax, is often a faster alternative to
    <span class="function"><b>split()</b></span>.  If you don&#039;t require the power of regular
    expressions, it is faster to use <span class="function"><a href="function.explode.html" class="function">explode()</a></span>, which
    doesn&#039;t incur the overhead of the regular expression engine.
   </p>
  </div>
  <div class="tip"><b class="tip">Tip</b>
   <p class="para">
    For users looking for a way to emulate Perl&#039;s <strong class="command">@chars =
    split(&#039;&#039;, $str)</strong> behaviour, please see the examples for
    <span class="function"><a href="function.preg-split.html" class="function">preg_split()</a></span> or <span class="function"><a href="function.str-split.html" class="function">str_split()</a></span>.
   </p>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.split-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.preg-split.html" class="function" rel="rdfs-seeAlso">preg_split()</a> - Split string by a regular expression</span></li>
    <li class="member"><span class="function"><a href="function.spliti.html" class="function" rel="rdfs-seeAlso">spliti()</a> - Split string into array by regular expression case insensitive</span></li>
    <li class="member"><span class="function"><a href="function.str-split.html" class="function" rel="rdfs-seeAlso">str_split()</a> - Convert a string to an array</span></li>
    <li class="member"><span class="function"><a href="function.explode.html" class="function" rel="rdfs-seeAlso">explode()</a> - Split a string by string</span></li>
    <li class="member"><span class="function"><a href="function.implode.html" class="function" rel="rdfs-seeAlso">implode()</a> - Join array elements with a string</span></li>
    <li class="member"><span class="function"><a href="function.chunk-split.html" class="function" rel="rdfs-seeAlso">chunk_split()</a> - Split a string into smaller chunks</span></li>
    <li class="member"><span class="function"><a href="function.wordwrap.html" class="function" rel="rdfs-seeAlso">wordwrap()</a> - Wraps a string to a given number of characters</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="107098""></a>
  <div class="note">
   <strong class="user">dave at bevhost dot com</strong>
   <a href="#107098" class="date">06-Jan-2012 12:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The easiest function to replace this with is mb_split(),<br />
which is the mutibyte version that works on unicode characters such as chinese letters in your strings.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90500""></a>
  <div class="note">
   <strong class="user">Bob</strong>
   <a href="#90500" class="date">24-Apr-2009 06:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was interested in the performance of various tokenizing algorithms, in particular splitting a string by a list of tokens. I've compared 3 methods, including a custom function based on strtok().<br />
My aim was to split a MySQL type definition into its various parts, i.e. split "int(10) unsigned zerofill" to Array( 1 =&gt; "int", 2 =&gt; "10", 3 =&gt; " unsigned zerofill" )<br />
This is the code I ran:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getmicrotime</span><span class="keyword">()<br />
<br />
{<br />
<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$usec</span><span class="keyword">, </span><span class="default">$sec</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">microtime</span><span class="keyword">());<br />
<br />
&nbsp;&nbsp;&nbsp; return ((float)</span><span class="default">$usec </span><span class="keyword">+ (float)</span><span class="default">$sec</span><span class="keyword">);<br />
<br />
}<br />
<br />
function </span><span class="default">toksplit</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$tokens</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$val </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$tokens</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; do </span><span class="default">$val</span><span class="keyword">[] = </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">$v </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$tokens</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$val</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">"int(10) unsigned zerofill"</span><span class="keyword">;<br />
</span><span class="default">$ntrials </span><span class="keyword">= </span><span class="default">100000</span><span class="keyword">;<br />
<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$t </span><span class="keyword">= </span><span class="default">getmicrotime</span><span class="keyword">(); </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$ntrials</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) </span><span class="default">$toksplit_result </span><span class="keyword">= </span><span class="default">toksplit</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="string">'()'</span><span class="keyword">);<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">getmicrotime</span><span class="keyword">()-</span><span class="default">$t</span><span class="keyword">;<br />
</span><span class="default">$avg </span><span class="keyword">= </span><span class="default">$time</span><span class="keyword">/</span><span class="default">$ntrials</span><span class="keyword">;<br />
echo </span><span class="string">"toksplit(): </span><span class="default">$avg</span><span class="string">\n"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$toksplit_result</span><span class="keyword">);<br />
<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$t </span><span class="keyword">= </span><span class="default">getmicrotime</span><span class="keyword">(); </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$ntrials</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) </span><span class="default">$split_result </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="string">'[()]'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">getmicrotime</span><span class="keyword">()-</span><span class="default">$t</span><span class="keyword">;<br />
</span><span class="default">$avg </span><span class="keyword">= </span><span class="default">$time</span><span class="keyword">/</span><span class="default">$ntrials</span><span class="keyword">;<br />
echo </span><span class="string">"split(): </span><span class="default">$avg</span><span class="string">\n"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$split_result</span><span class="keyword">);<br />
<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$t </span><span class="keyword">= </span><span class="default">getmicrotime</span><span class="keyword">(); </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$ntrials</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) </span><span class="default">$preg_split_result </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">'/[()]/'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">getmicrotime</span><span class="keyword">()-</span><span class="default">$t</span><span class="keyword">;<br />
</span><span class="default">$avg </span><span class="keyword">= </span><span class="default">$time</span><span class="keyword">/</span><span class="default">$ntrials</span><span class="keyword">;<br />
echo </span><span class="string">"preg_split(): </span><span class="default">$avg</span><span class="string">\n"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$preg_split_result</span><span class="keyword">);<br />
<br />
echo </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>These were the results:<br />
toksplit(): 1.94901299477E-5<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; int<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 100<br />
&nbsp;&nbsp;&nbsp; [2] =&gt;&nbsp; unsigned zerofill<br />
)<br />
split(): 1.50095391273E-5<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; int<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 100<br />
&nbsp;&nbsp;&nbsp; [2] =&gt;&nbsp; unsigned zerofill<br />
)<br />
preg_split(): 1.82743000984E-5<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; int<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 100<br />
&nbsp;&nbsp;&nbsp; [2] =&gt;&nbsp; unsigned zerofill<br />
)<br />
<br />
Interestingly, split() was the fastest.<br />
I also modified my test to also strip whitespace from each token, changing the patterns to "\s*[()]\s*" and adding a trim() call to the toksplit() function. The results went from fastest to slowest: preg_split(), split(), toksplit().<br />
I would infer from this that split() is the fastest if you want to simply split by a list of delimiters. However, if you want to split by a more complicated pattern, preg_split() is the best.<br />
strtok() is clearly slower.<br />
NOTE: if you want to split by a single delimiter (not a list or pattern), use explode().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89673""></a>
  <div class="note">
   <strong class="user">charles at etherscapes dot com</strong>
   <a href="#89673" class="date">18-Mar-2009 09:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function just makes sure there are 10 digits in a string, no matter what other characters there are. I'm using it for validating any phone number in the world and requiring an area code. It's far from perfect, but since I don't know which country the phone number is for, it's good enough for my purposes:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">validPhone</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$digits </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="string">"[0-9]"</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">count</span><span class="keyword">(</span><span class="default">$digits</span><span class="keyword">)&gt;</span><span class="default">10</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87428""></a>
  <div class="note">
   <strong class="user">Greg Levine</strong>
   <a href="#87428" class="date">04-Dec-2008 01:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I kept running into the same issue Chris Tyler experienced with lewis [ at t] hcoms [d dot t] co [d dot t] uk's function before realizing that Chris had come up with a solution. However, that solution was just a little off it seems, unless your CSV only contains one line.<br />
<br />
If you simply add another --length; in the place you suggested, then the function will always trim the last two characters on the line. Since the newline character is the last character on the line and the redundant quote (or other enclosure) is the second to last character, this works for the final segment. But when parsing segments that do not include a newline character, you end up trimming the redundant enclosure and the last character before the enclosure.<br />
<br />
For example,<br />
<br />
"he","she","him","her"\r\n<br />
<br />
becomes<br />
<br />
[0] =&gt; h<br />
[1] =&gt; sh<br />
[2] =&gt; hi<br />
[3] =&gt; her<br />
<br />
Since the segment could end with the enclosure (i.e., ") or the enclosure followed by the newline (i.e., "\r\n), you have make sure you are only adding another --length; when the latter is the case. Replacing the code block that you suggested with the following will do the trick.<br />
<br />
# Is the last thing a newline?<br />
if( $char == $newline )<br />
{<br />
&nbsp;&nbsp;&nbsp; # Well then get rid of it<br />
&nbsp;&nbsp;&nbsp; --$length;<br />
}<br />
<br />
# Is the last thing a quote?<br />
if( $trim_quote )<br />
{<br />
&nbsp;&nbsp;&nbsp; # Well then get rid of it<br />
&nbsp;&nbsp;&nbsp; --$length;<br />
}<br />
<br />
I've tested this only for the purposes of the script I'm working on at this time. So, there could be other bugs I haven't come across, but this seems like the easiest way to eliminate the redundant enclosure.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85671""></a>
  <div class="note">
   <strong class="user">sue_hok at hotmail dot com</strong>
   <a href="#85671" class="date">11-Sep-2008 11:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function basically is to split the string from right with limit <br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">split_right</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">,</span><span class="default">$input</span><span class="keyword">,</span><span class="default">$len</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
if(</span><span class="default">$len</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">split</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">,</span><span class="default">$input</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tempInput </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">,</span><span class="default">$input</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tempInput </span><span class="keyword">= </span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">$tempInput</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tempArray </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ArrayIndex</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$indexCount</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$tempInput </span><span class="keyword">as </span><span class="default">$values</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$indexCount</span><span class="keyword">&lt;</span><span class="default">$len</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tempArray</span><span class="keyword">[</span><span class="default">$ArrayIndex</span><span class="keyword">]=</span><span class="default">$values</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$indexCount</span><span class="keyword">&lt;</span><span class="default">$len</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ArrayIndex</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tempArray</span><span class="keyword">[</span><span class="default">$ArrayIndex</span><span class="keyword">]=</span><span class="default">$values</span><span class="keyword">.</span><span class="default">$pattern</span><span class="keyword">.</span><span class="default">$tempArray</span><span class="keyword">[</span><span class="default">$ArrayIndex</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$indexCount</span><span class="keyword">++;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">$tempArray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="comment">//For Example:<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">"Hello World Split"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">split</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">split_right</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">));<br />
<br />
</span><span class="comment">/*OutPut<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Hello<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; World Split<br />
)<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Hello World<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Split<br />
)<br />
*/<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85124""></a>
  <div class="note">
   <strong class="user">anthonyhoivik at gmail dot com</strong>
   <a href="#85124" class="date">15-Aug-2008 08:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Convert a full name ( in one text input ) to a first, middle, last.<br />
<br />
$fullname = $_POST['fullname'];<br />
&nbsp; list($first, $middle, $last) = split(' ', $fullname);<br />
&nbsp; if ( !$last ) {<br />
&nbsp;&nbsp;&nbsp; $last = $middle;<br />
&nbsp;&nbsp;&nbsp; unset($middle);<br />
&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84419""></a>
  <div class="note">
   <strong class="user">pascalaschwandenNOSPAM at gmail dot com</strong>
   <a href="#84419" class="date">13-Jul-2008 12:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following code will mimick the explode functionality: explode( " ", $s );&nbsp; The difference, of course, is that the split method takes a regular expression instead of a string.<br />
<br />
$s = "Split this sentence by spaces";<br />
$words = split("[ ]+", $s);<br />
print_r($words);<br />
<br />
Output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Split<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; this<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; sentence<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; by<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; spaces<br />
)<br />
<a href="http://www.codesplunk.com/nr/questions/php12.html" rel="nofollow" target="_blank">http://www.codesplunk.com/nr/questions/php12.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82413""></a>
  <div class="note">
   <strong class="user">Chris Tyler</strong>
   <a href="#82413" class="date">09-Apr-2008 03:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Thank you Dave for your code below.&nbsp; Here is one change I made to avoid a redundant quote at the end of some lines (at least when I used excel:&nbsp; <br />
<br />
Added another --length;&nbsp; into the if statement below:<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Is the last thing a quote?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($trim_quote){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Well then get rid of it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; --$length;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // ADD TO FIX extra quote<br />
&nbsp;&nbsp;&nbsp; --$length;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82050""></a>
  <div class="note">
   <strong class="user">lewis [ at t] hcoms [d dot t] co [d dot t] uk</strong>
   <a href="#82050" class="date">25-Mar-2008 03:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Those of you trying to use split for CSV, it won't always work as expected. Instead, try using a simple stack method:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Create a 2D array from a CSV string<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param mixed $data 2D array<br />
&nbsp;&nbsp; &nbsp; * @param string $delimiter Field delimiter<br />
&nbsp;&nbsp; &nbsp; * @param string $enclosure Field enclosure<br />
&nbsp;&nbsp; &nbsp; * @param string $newline Line seperator<br />
&nbsp;&nbsp; &nbsp; * @return<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">parse</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$delimiter </span><span class="keyword">= </span><span class="string">','</span><span class="keyword">, </span><span class="default">$enclosure </span><span class="keyword">= </span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$newline </span><span class="keyword">= </span><span class="string">"\n"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$last_pos </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$row </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$quote_open </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Create a continuous loop<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;; ++</span><span class="default">$i</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ++</span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Get the positions<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$comma_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$delimiter</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$quote_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$enclosure</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newline_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$newline</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Which one comes first?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">((</span><span class="default">$comma_pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">$end </span><span class="keyword">: </span><span class="default">$comma_pos</span><span class="keyword">, (</span><span class="default">$quote_pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">$end </span><span class="keyword">: </span><span class="default">$quote_pos</span><span class="keyword">, (</span><span class="default">$newline_pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">$end </span><span class="keyword">: </span><span class="default">$newline_pos</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Cache it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$char </span><span class="keyword">= (isset(</span><span class="default">$data</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">])) ? </span><span class="default">$data</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">] : </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$done </span><span class="keyword">= (</span><span class="default">$pos </span><span class="keyword">== </span><span class="default">$end</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// It it a special character?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$done </span><span class="keyword">|| </span><span class="default">$char </span><span class="keyword">== </span><span class="default">$delimiter </span><span class="keyword">|| </span><span class="default">$char </span><span class="keyword">== </span><span class="default">$newline</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Ignore it as we're still in a quote<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$quote_open </span><span class="keyword">&amp;&amp; !</span><span class="default">$done</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">$pos </span><span class="keyword">- ++</span><span class="default">$last_pos</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Is the last thing a quote?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$trim_quote</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Well then get rid of it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">--</span><span class="default">$length</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Get all the contents of this column<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$row</span><span class="keyword">][] = (</span><span class="default">$length </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) ? </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$enclosure </span><span class="keyword">. </span><span class="default">$enclosure</span><span class="keyword">, </span><span class="default">$enclosure</span><span class="keyword">, </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$last_pos</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">)) : </span><span class="string">''</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// And we're done<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$done</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Save the last position<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$last_pos </span><span class="keyword">= </span><span class="default">$pos</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Next row?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$char </span><span class="keyword">== </span><span class="default">$newline</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ++</span><span class="default">$row</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Our quote?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">else if (</span><span class="default">$char </span><span class="keyword">== </span><span class="default">$enclosure</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Toggle it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$quote_open </span><span class="keyword">== </span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// It's an opening quote<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$quote_open </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Trim this opening quote?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$last_pos </span><span class="keyword">+ </span><span class="default">1 </span><span class="keyword">== </span><span class="default">$pos</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ++</span><span class="default">$last_pos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// It's a closing quote<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$quote_open </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Trim the last quote?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This *should* work for any valid CSV string, regardless of what it contains inside its quotes (using RFC 4180). It should also be faster than most of the others I've seen. It's very simple in concept, and thoroughly commented.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81490""></a>
  <div class="note">
   <strong class="user">Dave Walter</strong>
   <a href="#81490" class="date">29-Feb-2008 03:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to&nbsp; the getCSVValues() function posted by justin at cam dot org, my testing indicates that it has a problem with a CSV string like this:<br />
<br />
1,2,"3,""4,5"",6",7<br />
<br />
This parses as:<br />
<br />
array(6) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(1) "1"<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(1) "2"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(4) "3,"4"<br />
&nbsp; [3]=&gt;<br />
&nbsp; string(1) "5"<br />
&nbsp; [4]=&gt;<br />
&nbsp; string(0) ""<br />
&nbsp; [5]=&gt;<br />
&nbsp; string(1) "7"<br />
}<br />
<br />
instead of:<br />
<br />
array(4) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(1) "1"<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(1) "2"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(9) "3,"4,5",6"<br />
&nbsp; [3]=&gt;<br />
&nbsp; string(1) "7"<br />
}<br />
<br />
To fix this, I changed the second substr_count to look for an odd number of quotes, as opposed to any quotes at all:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getCSVValues</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$separator</span><span class="keyword">=</span><span class="string">","</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$elements </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$separator</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nquotes </span><span class="keyword">= </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="string">'"'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$nquotes </span><span class="keyword">%</span><span class="default">2 </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">); </span><span class="default">$j</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">], </span><span class="string">'"'</span><span class="keyword">) %</span><span class="default">2 </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) { </span><span class="comment">// Look for an odd-number of quotes<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Put the quoted string's pieces back together again<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$j</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$separator</span><span class="keyword">, </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$j</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$nquotes </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Remove first and last quotes, then merge pairs of quotes<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">=&amp; </span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'""'</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$qstr</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$elements</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75471""></a>
  <div class="note">
   <strong class="user">Nate Sweet</strong>
   <a href="#75471" class="date">31-May-2007 01:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function takes a string like this...<br />
<br />
this=cool that="super cool" thing='ridiculous cool'<br />
<br />
And gives you an associative array of names and values.<br />
<br />
function parseNameValues ($text) {<br />
&nbsp;&nbsp;&nbsp; $values = array();<br />
&nbsp;&nbsp;&nbsp; if (preg_match_all('/([^=\s]+)=("(?P&lt;value1&gt;[^"]+)"|' . '\'(?P&lt;value2&gt;[^\']+)\'|(?P&lt;value3&gt;.+?)\b)/', $text, $matches, PREG_SET_ORDER))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($matches as $match)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $values[trim($match[1])] = trim(@$match['value1'] . @$match['value2'] . @$match['value3']);<br />
&nbsp;&nbsp;&nbsp; return $values;<br />
}<br />
<br />
(regex broken into two strings so it won't be too long for this webpage)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75236""></a>
  <div class="note">
   <strong class="user">Mike</strong>
   <a href="#75236" class="date">18-May-2007 10:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
// Split a string into words on boundaries of one or more spaces, tabs or new-lines<br />
$s = "Please cut&nbsp;&nbsp; \t me \n in pieces";<br />
$words = split("[\n\r\t ]+", $s);<br />
print_r($words);<br />
<br />
// Output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Please<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; cut<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; me<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; in<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; pieces<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73899""></a>
  <div class="note">
   <strong class="user">Jort</strong>
   <a href="#73899" class="date">14-Mar-2007 12:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are looking for EITHER open square brackets OR close square brackets, then '[[]]' won't work (reasonably expected), but neither will '[\[\]]', nor with any number of escapes. HOWEVER, if your pattern is '[][]' it will work.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73286""></a>
  <div class="note">
   <strong class="user">justin at cam dot org</strong>
   <a href="#73286" class="date">15-Feb-2007 10:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The previous solution assumes that a quoted string always starts a new element (true in real CSV files, but not in my application). The following routine does not make any such assumptions. It also deals with pairs of quotes and does not use any regular expressions.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getCSVValues</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$separator</span><span class="keyword">=</span><span class="string">","</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$elements </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$separator</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nquotes </span><span class="keyword">= </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="string">'"'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$nquotes </span><span class="keyword">%</span><span class="default">2 </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">); </span><span class="default">$j</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">], </span><span class="string">'"'</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Put the quoted string's pieces back together again<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$j</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$separator</span><span class="keyword">, </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$j</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$nquotes </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Remove first and last quotes, then merge pairs of quotes<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">=&amp; </span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'""'</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$qstr</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$elements</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72564""></a>
  <div class="note">
   <strong class="user">Theodule</strong>
   <a href="#72564" class="date">24-Jan-2007 08:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A little modification from dan jones.<br />
_New_: I had a parameter to specify separator (default ",").<br />
_Fix _: double-quotes who appear in a spreadsheet exported to CSV, they get escaped by doubling them. So I remplace them by ' caracter<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getCSVValues</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$separator</span><span class="keyword">=</span><span class="string">","</span><span class="keyword">) <br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'""'</span><span class="keyword">, </span><span class="string">"'"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// split the string at double quotes "<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bits </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'"'</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$elements </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; for ( </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$bits</span><span class="keyword">) ; </span><span class="default">$i</span><span class="keyword">++ ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; odd numbered elements would have been<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; enclosed by double quotes<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; even numbered elements would not have been<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; */<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if ((</span><span class="default">$i</span><span class="keyword">%</span><span class="default">2</span><span class="keyword">) == </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/* if the element number is odd add the<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; whole string&nbsp; to the output array */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$elements</span><span class="keyword">[] = </span><span class="default">$bits</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/* otherwise split the unquoted stuff at commas<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; and add the elements to the array */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rest </span><span class="keyword">= </span><span class="default">$bits</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rest </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/^"</span><span class="keyword">.</span><span class="default">$separator</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$rest</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rest </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$separator</span><span class="keyword">.</span><span class="string">"$/"</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$rest</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$elements </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">,</span><span class="default">explode</span><span class="keyword">(</span><span class="default">$separator</span><span class="keyword">,</span><span class="default">$rest</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$elements</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68961""></a>
  <div class="note">
   <strong class="user">dan dot jones at lunarfish dot co dot uk</strong>
   <a href="#68961" class="date">17-Aug-2006 05:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a function to split a string into csv values where they are optionally enclosed by " to allow values with commas in.<br />
<br />
I think it works. Let me know if I'm wrong.<br />
<br />
Cheers. Dan<br />
<br />
function getCSVValues($string) {<br />
&nbsp;&nbsp; // split the string at double quotes "<br />
&nbsp;&nbsp; $bits = split('"',$string);<br />
&nbsp;&nbsp; $elements = array();<br />
&nbsp;&nbsp; for ($i=0;$i&lt;count($bits);$i++) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; /*<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; odd numbered elements would have been <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; enclosed by double quotes <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; even numbered elements would not have been<br />
&nbsp;&nbsp; &nbsp;&nbsp; */<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (($i%2) == 1) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; /* if the element number is odd add the <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; whole string&nbsp; to the output array */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $elements[] = $bits[$i];<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; /* otherwise split the unquoted stuff at commas <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; and add the elements to the array */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $rest = $bits[$i];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $rest = preg_replace("/^,/","",$rest);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $rest = preg_replace("/,$/","",$rest);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $elements = array_merge($elements,split(',',$rest));<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return $elements;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61866""></a>
  <div class="note">
   <strong class="user">destes at ix dot netcom dot com</strong>
   <a href="#61866" class="date">14-Feb-2006 12:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Some corrections to robin-at-teddyb's CSV splitting function.&nbsp; Recall that the point of this is to properly implement a split() function that handles data exported to CSV, where data containing commas gets quote-delimited.<br />
<br />
* Problem 1: As jh-at-junetz pointed out, the +1 in robin's nonquoted splitting command mistakenly adds an extra element to the resulting array.<br />
* Problem 2: If consecutive fields are quote-delimited, the remaining "separator" between them only contains one delimiter and no actual fields - so an extra element gets added to the parsed array.<br />
* Problem 3: When double-quotes appear in a spreadsheet exported to CSV, they get escaped by doubling them, i.e. a data field reading "this is a test of a "special" case" gets written to CSV as, "this is a test of a ""special"" case".&nbsp; These quotes are also interpreted as top-level delimiters and (mistakenly) add extra array elements to the output.&nbsp; <br />
<br />
I have hacked a conversion of "" to a single quote ( ' ), but a truly clever preg_split for the top-level splitter (instead of the explode) might preserve the original doubled "s without bugging up the top-level parsing.&nbsp; i.e., a smarter man than I could solve the problem rather than avoiding it by replacing the bad data.<br />
<br />
(current) Solution:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">quotesplit</span><span class="keyword">( </span><span class="default">$splitter</span><span class="keyword">=</span><span class="string">','</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">, </span><span class="default">$restore_quotes</span><span class="keyword">=</span><span class="default">0 </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// hack because i'm a bad programmer - replace doubled "s with a '<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'""'</span><span class="keyword">, </span><span class="string">"'"</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//First step is to split it up into the bits that are surrounded by quotes<br />
&nbsp;&nbsp;&nbsp; //and the bits that aren't. Adding the delimiter to the ends simplifies<br />
&nbsp;&nbsp;&nbsp; //the logic further down<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$getstrings </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$splitter</span><span class="keyword">.</span><span class="default">$s</span><span class="keyword">.</span><span class="default">$splitter</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//$instring toggles so we know if we are in a quoted string or not<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$delimlen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$splitter</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$instring </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; while (list(</span><span class="default">$arg</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$getstrings</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$instring</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$restore_quotes </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Add the whole string, untouched to the previous value in the array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">] = </span><span class="default">$result</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">].</span><span class="string">'"'</span><span class="keyword">.</span><span class="default">$val</span><span class="keyword">.</span><span class="string">'"'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Add the whole string, untouched to the array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$instring </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// check that we have data between multiple $splitter delimiters<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if ((</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)-</span><span class="default">$delimlen</span><span class="keyword">) &gt;= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Break up the string according to the delimiter character<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Each string has extraneous delimiters around it (inc the ones we added<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //above), so they need to be stripped off<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temparray </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="default">$splitter</span><span class="keyword">, </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">, </span><span class="default">$delimlen</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)-</span><span class="default">$delimlen</span><span class="keyword">-</span><span class="default">$delimlen </span><span class="keyword">) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while(list(</span><span class="default">$iarg</span><span class="keyword">, </span><span class="default">$ival</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$temparray</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$ival</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// else, the next element needing parsing is a quoted string and the comma<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // here is just a single separator and contains no data, so skip it<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$instring </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61648""></a>
  <div class="note">
   <strong class="user">RE: gcerretini at technica dot net /UTF8</strong>
   <a href="#61648" class="date">08-Feb-2006 04:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Original problem:<br />
=================<br />
<br />
I've try using split function.<br />
<br />
<span class="default">&lt;?php<br />
$ferro</span><span class="keyword">=</span><span class="string">"2&amp;#65533;12"</span><span class="keyword">;<br />
</span><span class="default">$valore</span><span class="keyword">=</span><span class="default">split</span><span class="keyword">(</span><span class="string">"[&amp;#65533;]"</span><span class="keyword">,</span><span class="default">$ferro</span><span class="keyword">);<br />
echo </span><span class="default">$ferro</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p1-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p2-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p3-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
</span><span class="default">$ferro</span><span class="keyword">=</span><span class="string">"2d12"</span><span class="keyword">;<br />
</span><span class="default">$valore</span><span class="keyword">=</span><span class="default">split</span><span class="keyword">(</span><span class="string">"[d]"</span><span class="keyword">,</span><span class="default">$ferro</span><span class="keyword">);<br />
echo </span><span class="default">$ferro</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p1-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p2-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p3-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
This return:<br />
============<br />
<br />
2&amp;#65533;12<br />
p1-2<br />
p2-<br />
p3-12<br />
2d12<br />
p1-2<br />
p2-12<br />
p3-<br />
<br />
I use charset UTF-8. When I use char &amp;#65533; the split function ad an empty string between "2" and "12"... Why?<br />
<br />
Explanation:<br />
============<br />
<br />
UTF-8 charset codes some characters (like the "&amp;#65533;" character) into two bytes. In fact the regular expresion "[&amp;#65533;]" contains 4 bytes (4 non-unicode characters). To demonstrate the real situation I wrote following example:<br />
<br />
$ferro="2de12";<br />
$valore=split("[de]",$ferro);<br />
echo $ferro."&lt;br&gt;";<br />
echo "p1-".$valore[0]."&lt;br&gt;";<br />
echo "p2-".$valore[1]."&lt;br&gt;";<br />
echo "p3-".$valore[2]."&lt;br&gt;";<br />
<br />
This returns:<br />
=============<br />
<br />
2d12<br />
p1-2<br />
p2-<br />
p3-12</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59359""></a>
  <div class="note">
   
   <a href="#59359" class="date">04-Dec-2005 05:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be advised<br />
<br />
$arr = split("x", "x" );<br />
print_r($arr);<br />
<br />
will output:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; <br />
&nbsp;&nbsp;&nbsp; [1] =&gt; <br />
)<br />
<br />
That is it will catch 2 empty strings on each side of the delimiter.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58445""></a>
  <div class="note">
   <strong class="user">franz at fholzinger dot com</strong>
   <a href="#58445" class="date">04-Nov-2005 04:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The example from ramkumar rajendran did not work. <br />
$line = split("/\n", $input_several_lines_long);<br />
I do not know why this does not work for me.<br />
<br />
The following has worked for me to get a maximum of 2 array parts separated by the first new line (independant if saved under UNIX or WINDOWS):<br />
$line = preg_split('/[\n\r]+/',$input_several_lines_long,2);<br />
Also empty lines are not considered here.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57113""></a>
  <div class="note">
   <strong class="user">passtschu AT freenet DOT de</strong>
   <a href="#57113" class="date">24-Sep-2005 12:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
divide a string with a template. the "template dividers" are the keys for the output array.<br />
<br />
<span class="default">&lt;?PHP<br />
</span><span class="keyword">function </span><span class="default">string2array </span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$template</span><span class="keyword">){<br />
&nbsp; </span><span class="comment">#search defined dividers<br />
&nbsp; </span><span class="default">preg_match_all </span><span class="keyword">(</span><span class="string">"|%(.+)%|U"</span><span class="keyword">, </span><span class="default">$template</span><span class="keyword">, </span><span class="default">$template_matches</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">#replace dividers with "real dividers"<br />
&nbsp; </span><span class="default">$template </span><span class="keyword">= </span><span class="default">preg_replace </span><span class="keyword">(</span><span class="string">"|%(.+)%|U"</span><span class="keyword">, </span><span class="string">"(.+)"</span><span class="keyword">, </span><span class="default">$template</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">#search matches<br />
&nbsp; </span><span class="default">preg_match </span><span class="keyword">(</span><span class="string">"|" </span><span class="keyword">. </span><span class="default">$template </span><span class="keyword">. </span><span class="string">"|"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$string_matches</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">#[template_match] =&gt; $string_match<br />
&nbsp; </span><span class="keyword">foreach (</span><span class="default">$template_matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$output</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">] = </span><span class="default">$string_matches</span><span class="keyword">[(</span><span class="default">$key </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">)];<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$output</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$string1 </span><span class="keyword">= </span><span class="string">'www.something.com 66.196.91.121 - - [01/Sep/2005:04:20:39 +0200] "GET /robots.txt HTTP/1.0" 200 49 "-"'</span><span class="keyword">;<br />
</span><span class="default">$string2</span><span class="keyword">= </span><span class="string">'%Domain% %IP% - %User% \[%Date%:%Time% %TimeZone%\] "%Method% %Request% %Protocol%" %ServerCode% %Bytes% "%Referer%"'</span><span class="keyword">;<br />
<br />
</span><span class="default">print_r </span><span class="keyword">(</span><span class="default">string2array </span><span class="keyword">(</span><span class="default">$string1</span><span class="keyword">, </span><span class="default">$string2</span><span class="keyword">));<br />
<br />
</span><span class="comment">/*<br />
Array<br />
<br />
(<br />
&nbsp; [ServerAddress] =&gt; www.something.com<br />
&nbsp; [IP] =&gt; 66.196.91.121<br />
&nbsp; [User] =&gt; -<br />
&nbsp; [Date] =&gt; 01/Sep/2005<br />
&nbsp; [Time] =&gt; 04:20:39<br />
&nbsp; [TimeZone] =&gt; +0200<br />
&nbsp; [Method] =&gt; GET<br />
&nbsp; [Request] =&gt; /robots.txt<br />
&nbsp; [Protocol] =&gt; HTTP/1.0<br />
&nbsp; [ServerCode] =&gt; 200<br />
&nbsp; [Bytes] =&gt; 49<br />
&nbsp; [Referer] =&gt; -<br />
)<br />
*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54306""></a>
  <div class="note">
   <strong class="user">robin at teddyb dot org</strong>
   <a href="#54306" class="date">29-Jun-2005 09:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Actually, this version is better than the last I submitted.&nbsp; The goal here is to be able to engage in *multiple* delimeter removal passes; for all but the last pass, set the third value to "1", and everything should go well.<br />
<br />
&nbsp;&nbsp;&nbsp; function quotesplit( $splitter=',', $s, $restore_quotes=0 )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //First step is to split it up into the bits that are surrounded by quotes<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //and the bits that aren't. Adding the delimiter to the ends simplifies<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //the logic further down<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $getstrings = explode('"', $splitter.$s.$splitter);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //$instring toggles so we know if we are in a quoted string or not<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $delimlen = strlen($splitter);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $instring = 0;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (list($arg, $val) = each($getstrings))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($instring==1)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( $restore_quotes )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Add the whole string, untouched to the previous value in the array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[count($result)-1] = $result[count($result)-1].'"'.$val.'"';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Add the whole string, untouched to the array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = $val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Break up the string according to the delimiter character<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Each string has extraneous delimiters around it (inc the ones we added<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //above), so they need to be stripped off<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temparray = split($splitter, substr($val, $delimlen, strlen($val)-$delimlen-$delimlen+1 ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while(list($iarg, $ival) = each($temparray))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = trim($ival);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 1;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $result;<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54304""></a>
  <div class="note">
   <strong class="user">robin at teddyb dot org</strong>
   <a href="#54304" class="date">29-Jun-2005 08:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
wchris's quotesplit assumes that anything that is quoted must also be a complete delimiter-seperated entry by itself.&nbsp; This version does not.&nbsp; It also uses split's argument order.<br />
<br />
&nbsp;&nbsp;&nbsp; function quotesplit( $splitter=',', $s )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //First step is to split it up into the bits that are surrounded by quotes<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //and the bits that aren't. Adding the delimiter to the ends simplifies<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //the logic further down<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $getstrings = explode('"', $splitter.$s.$splitter);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //$instring toggles so we know if we are in a quoted string or not<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $delimlen = strlen($splitter);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $instring = 0;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (list($arg, $val) = each($getstrings))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($instring==1)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Add the whole string, untouched to the previous value in the array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[count($result)-1] = $result[count($result)-1].$val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Break up the string according to the delimiter character<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Each string has extraneous delimiters around it (inc the ones we added<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //above), so they need to be stripped off<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temparray = split($splitter, substr($val, $delimlen, strlen($val)-$delimlen-$delimlen+1 ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while(list($iarg, $ival) = each($temparray))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = trim($ival);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 1;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $result;<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50113""></a>
  <div class="note">
   <strong class="user">wchris</strong>
   <a href="#50113" class="date">18-Feb-2005 03:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
moritz's quotesplit didn't work for me. It seemed to split on a comma even though it was between a pair of quotes. However, this did work:<br />
<br />
function quotesplit($s, $splitter=',')<br />
{<br />
//First step is to split it up into the bits that are surrounded by quotes and the bits that aren't. Adding the delimiter to the ends simplifies the logic further down<br />
<br />
&nbsp;&nbsp;&nbsp; $getstrings = split('\"', $splitter.$s.$splitter);<br />
<br />
//$instring toggles so we know if we are in a quoted string or not<br />
&nbsp;&nbsp;&nbsp; $delimlen = strlen($splitter);<br />
&nbsp;&nbsp;&nbsp; $instring = 0;<br />
<br />
&nbsp;&nbsp;&nbsp; while (list($arg, $val) = each($getstrings))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($instring==1)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
//Add the whole string, untouched to the result array.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = $val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
//Break up the string according to the delimiter character<br />
//Each string has extraneous delimiters around it (inc the ones we added above), so they need to be stripped off<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temparray = split($splitter, substr($val, $delimlen, strlen($val)-$delimlen-$delimlen ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while(list($iarg, $ival) = each($temparray))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = trim($ival);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 1;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $result;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49130""></a>
  <div class="note">
   <strong class="user">ramkumar rajendran</strong>
   <a href="#49130" class="date">17-Jan-2005 10:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A correction to a earlier note<br />
If you want to use split to check on line feeds (\n), the following won't work:<br />
<br />
$line = split("\n", $input_several_lines_long);<br />
<br />
You really have to do this instead, notice the second slash:<br />
$line = split("/\n", $input_several_lines_long);<br />
<br />
Took me a little while to figure to do</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47127""></a>
  <div class="note">
   <strong class="user">claes at dot2me.com</strong>
   <a href="#47127" class="date">03-Nov-2004 04:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Though this is obvious, the manual is a bit incorrect when claiming that the return will always be 1+number of time the split pattern occures.&nbsp; If the split pattern is the first part of the string, the return will still be 1.&nbsp; E.g.<br />
<br />
$a = split("zz," "zzxsj.com");<br />
count($a);<br />
<br />
=&gt; 1.<br />
<br />
The return of this can not in anyway be seperated from the return where the split pattern is not found.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41426""></a>
  <div class="note">
   <strong class="user">moritz</strong>
   <a href="#41426" class="date">09-Apr-2004 11:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Often you want to split CSV-Like data, so this is the function for this :)<br />
<br />
It splits data formatted like:<br />
<br />
1,2,3<br />
-&gt; [1,2,3]<br />
<br />
1 , 3, 4<br />
-&gt; [1,3,4]<br />
<br />
one; two;three<br />
-&gt; ['one','two','three']<br />
<br />
"this is a string", "this is a string with , and ;", 'this is a string with quotes like " these', "this is a string with escaped quotes \" and \'.", 3<br />
-&gt; ['this is a string','this is a string with , and ;','this is a string with quotes like " these','this is a string with escaped quotes " and '.',3]<br />
<br />
function quotesplit($s)<br />
{<br />
&nbsp;&nbsp;&nbsp; $r = Array();<br />
&nbsp;&nbsp;&nbsp; $p = 0;<br />
&nbsp;&nbsp;&nbsp; $l = strlen($s);<br />
&nbsp;&nbsp;&nbsp; while ($p &lt; $l) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (($p &lt; $l) &amp;&amp; (strpos(" \r\t\n",$s[$p]) !== false)) $p++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($s[$p] == '"') {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $p++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $q = $p;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (($p &lt; $l) &amp;&amp; ($s[$p] != '"')) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($s[$p] == '\\') { $p+=2; continue; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $p++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $r[] = stripslashes(substr($s, $q, $p-$q));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $p++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (($p &lt; $l) &amp;&amp; (strpos(" \r\t\n",$s[$p]) !== false)) $p++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $p++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if ($s[$p] == "'") {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $p++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $q = $p;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (($p &lt; $l) &amp;&amp; ($s[$p] != "'")) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($s[$p] == '\\') { $p+=2; continue; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $p++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $r[] = stripslashes(substr($s, $q, $p-$q));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $p++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (($p &lt; $l) &amp;&amp; (strpos(" \r\t\n",$s[$p]) !== false)) $p++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $p++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $q = $p;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (($p &lt; $l) &amp;&amp; (strpos(",;",$s[$p]) === false)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $p++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $r[] = stripslashes(trim(substr($s, $q, $p-$q)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (($p &lt; $l) &amp;&amp; (strpos(" \r\t\n",$s[$p]) !== false)) $p++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $p++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $r;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41133""></a>
  <div class="note">
   <strong class="user">alphibia at alphibia dot com</strong>
   <a href="#41133" class="date">31-Mar-2004 06:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I'd like to correct myself, I found that after testing my last solution it will create 5 lines no matter what... So I added this to make sure that it only displays 5 if there are five newlines. :-)<br />
<br />
<span class="default">&lt;?php <br />
&nbsp;&nbsp;&nbsp; $MaxNewLines </span><span class="keyword">= </span><span class="default">5</span><span class="keyword">; <br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$BRCount </span><span class="keyword">= </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$Message</span><span class="keyword">, </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">);&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$BRCount</span><span class="keyword">&lt;</span><span class="default">$MaxNewLines</span><span class="keyword">) <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$MaxNewLines</span><span class="keyword">=</span><span class="default">$BRCount</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; else if(</span><span class="default">$BRCount </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$MaxNewLines</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; <br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Message </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">13</span><span class="keyword">), </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">, </span><span class="default">$Message</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$MessageArray </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">, </span><span class="default">$Message</span><span class="keyword">, </span><span class="default">$MaxNewLines</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Message </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">; </span><span class="default">$u</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; do&nbsp; &nbsp; { <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Message</span><span class="keyword">.=</span><span class="default">$MessageArray</span><span class="keyword">[</span><span class="default">$u</span><span class="keyword">].</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$u</span><span class="keyword">++; <br />
&nbsp;&nbsp;&nbsp; } while(</span><span class="default">$u</span><span class="keyword">&lt;(</span><span class="default">$MaxNewLines</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">)); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Message</span><span class="keyword">.=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">,</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$MessageArray</span><span class="keyword">[</span><span class="default">$u</span><span class="keyword">]); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">?&gt;</span> <br />
<br />
-Tim<br />
<a href="http://www.alphibia.com" rel="nofollow" target="_blank">http://www.alphibia.com</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37635""></a>
  <div class="note">
   <strong class="user">nomail at please dot now</strong>
   <a href="#37635" class="date">21-Nov-2003 09:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to use split to check on line feeds (\n), the following won't work:<br />
<br />
$line = split("\n", $input_several_lines_long);<br />
<br />
You really have to do this instead, notice the second slash:<br />
$line = split("\\n", $input_several_lines_long);<br />
<br />
Took me a little while to figure out.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36853""></a>
  <div class="note">
   <strong class="user">krahn at niehs dot nih dot gov</strong>
   <a href="#36853" class="date">24-Oct-2003 12:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&gt; strange things happen with split<br />
&gt; this didn't work<br />
&gt; $vontag $vonmonat were empty strings<br />
...<br />
&gt; list ($vontag , $vonmonat) = split ('.' , $fromdate); // &lt;&lt; bad<br />
<br />
Split is acting exactly as it should; it splits on regular expressions.<br />
A period is a regular expression pattern for a single character.<br />
So, an actual period must be escaped with a backslash:&nbsp; '\.'<br />
A period within brackets is not an any-character pattern, because it does<br />
not make sense in that context.<br />
<br />
Beware that regular expressions can be confusing becuase there<br />
are a few different varieties of patterns.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36398""></a>
  <div class="note">
   <strong class="user">dalu at uni dot de</strong>
   <a href="#36398" class="date">08-Oct-2003 12:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
php4.3.0<br />
<br />
strange things happen with split<br />
<br />
this didn't work<br />
$vontag $vonmonat were empty strings<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">ckdate</span><span class="keyword">(</span><span class="default">$fromdate</span><span class="keyword">=</span><span class="string">"01.01"</span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">=</span><span class="string">"31.12"</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nowyear </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$vontag </span><span class="keyword">, </span><span class="default">$vonmonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'.' </span><span class="keyword">, </span><span class="default">$fromdate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; bad<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vondatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$vonmonat</span><span class="string">-</span><span class="default">$vontag</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$bistag </span><span class="keyword">, </span><span class="default">$bismonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'.' </span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; bad<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bisdatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$bismonat</span><span class="string">-</span><span class="default">$bistag</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$von </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$vondatum</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bis </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$bisdatum</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$now </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$now </span><span class="keyword">&lt;= </span><span class="default">$bis</span><span class="keyword">) and (</span><span class="default">$now </span><span class="keyword">&gt;= </span><span class="default">$von</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
however this one worked perfectly<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">ckdate</span><span class="keyword">(</span><span class="default">$fromdate</span><span class="keyword">=</span><span class="string">"01.01"</span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">=</span><span class="string">"31.12"</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nowyear </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$vontag </span><span class="keyword">, </span><span class="default">$vonmonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'[.]' </span><span class="keyword">, </span><span class="default">$fromdate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; good<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vondatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$vonmonat</span><span class="string">-</span><span class="default">$vontag</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$bistag </span><span class="keyword">, </span><span class="default">$bismonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'[.]' </span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; good<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bisdatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$bismonat</span><span class="string">-</span><span class="default">$bistag</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$von </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$vondatum</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bis </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$bisdatum</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$now </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$now </span><span class="keyword">&lt;= </span><span class="default">$bis</span><span class="keyword">) and (</span><span class="default">$now </span><span class="keyword">&gt;= </span><span class="default">$von</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
btw this fn checks if $now if between $fromdate and $todate<br />
use it if you like</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28369""></a>
  <div class="note">
   <strong class="user">jeffrey at jhu dot edu</strong>
   <a href="#28369" class="date">10-Jan-2003 01:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In answer to gwyne at gmx dot net, dec 1, 2002:<br />
<br />
For split(), when using a backslash as the delimiter, you have to *double escape* the backslash.<br />
<br />
example:<br />
==================================<br />
&lt;pre&gt;<br />
&lt;?<br />
$line = 'stuff\\\thing\doodad\\';<br />
$linearray = split('\\\\', $line); //&lt;--NOTE USE OF FOUR(4)backslashes<br />
print join(":", $linearray);<br />
?&gt;<br />
&lt;/pre&gt;<br />
<br />
==================================<br />
output is:<br />
<br />
&lt;pre&gt;<br />
stuff::thing:doodad:<br />
&lt;/pre&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23546""></a>
  <div class="note">
   <strong class="user">paha at paha dot hu</strong>
   <a href="#23546" class="date">21-Jul-2002 06:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's evident but not mentioned in the documentation that using asterisks is more restricted than in a normal regular expression.<br />
<br />
for exaple you cannot say:<br />
<br />
split(";*",$string);<br />
<br />
because what if there's no ";" separator?(which is covered by this regular expression) <br />
<br />
so you have to use at least<br />
<br />
split(";+",$quotatxt);<br />
<br />
in this situation.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22415""></a>
  <div class="note">
   <strong class="user">fotw at gmx dot net</strong>
   <a href="#22415" class="date">17-Jun-2002 12:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Ups! It seems that neither explode nor split REALY takes a STRING but only a single character as a string for splitting the string.<br />
&nbsp;I found this problem in one of my codes when trying to split a string using ";\n" as breaking string. The result, only ";" was thaken... the rest of the string was ignored.<br />
&nbsp;Same when I tried to substitute "\n" by any other thing. :(</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22396""></a>
  <div class="note">
   <strong class="user">not at anythingspecial dot com</strong>
   <a href="#22396" class="date">16-Jun-2002 06:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to do a split on a period make sure you escape the period out..<br />
<br />
$ext_arr = split("\.","something.jpg");<br />
... because<br />
$ext_arr = split(".","something.jpg"); won't work properly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22267""></a>
  <div class="note">
   <strong class="user">kang at elpmis dot com</strong>
   <a href="#22267" class="date">12-Jun-2002 11:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a good way to display a comma delimited file with two columns.&nbsp; The first column is the URL's description, the second is the actual URL.<br />
<br />
&lt;ul&gt;<br />
<span class="default">&lt;?php<br />
&nbsp; $fname</span><span class="keyword">=</span><span class="string">"relatedlinks.csv"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$fp</span><span class="keyword">=</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$fname</span><span class="keyword">,</span><span class="string">"r"</span><span class="keyword">) or die(</span><span class="string">"Error found."</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">fgets</span><span class="keyword">( </span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1024 </span><span class="keyword">);<br />
&nbsp; while(!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">))<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$desc</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">,</span><span class="default">$dummy</span><span class="keyword">) = </span><span class="default">split</span><span class="keyword">( </span><span class="string">","</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"&lt;li&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"&lt;a href='</span><span class="default">$url</span><span class="string">'&gt;</span><span class="default">$desc</span><span class="string">&lt;/a&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"&lt;/li&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">fgets</span><span class="keyword">( </span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1024 </span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>&lt;/ul&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21942""></a>
  <div class="note">
   <strong class="user">jchart at sdccu dot net</strong>
   <a href="#21942" class="date">31-May-2002 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Ed. note: Close. The pipe *is* an operator in PHP, but<br />
the reason this fails is because it's also an operator<br />
in the regex syntax. The distinction here is important<br />
since a PHP operator inside a string is just a character.]<br />
<br />
The reason your code:<br />
<br />
$line = "12|3|Fred"; <br />
list ($msgid, $msgref, $msgtopic)=split('|', $line); <br />
<br />
didn't work is because the "|" symbol is an operator in PHP. If you want to use the pipe symbol as a delimiter you must excape it with a back slash, "\|". You code should look like this:<br />
<br />
$line = "12|3|Fred"; <br />
list ($msgid, $msgref, $msgtopic)=split('\|', $line);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21557""></a>
  <div class="note">
   <strong class="user">mcgarry at tig dot com dot au</strong>
   <a href="#21557" class="date">17-May-2002 03:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
split() doesn't like NUL characters within the string, it treats the first one it meets as the end of the string, so if you have data you want to split that can contain a NUL character you'll need to convert it into something else first, eg:<br />
<br />
$line=str_replace(chr(0),'',$line);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.eregi.html">eregi</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.spliti.html">spliti</a></div>
 <div class="up"><a href="ref.regex.html">POSIX Regex Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
