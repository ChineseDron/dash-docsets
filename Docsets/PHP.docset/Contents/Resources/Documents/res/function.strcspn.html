<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Find length of initial segment not matching mask</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.strcoll.html">strcoll</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.strip-tags.html">strip_tags</a></div>
 <div class="up"><a href="ref.strings.html">String Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.strcspn" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">strcspn</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">strcspn</span> &mdash; <span class="dc-title">Find length of initial segment not matching mask</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.strcspn-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><b>strcspn</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$str1</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$str2</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$start</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$length</tt></span>
  ]] )</div>

  <p class="para rdfs-comment">
   Returns the length of the initial segment of
   <i><tt class="parameter">str1</tt></i> which does <em class="emphasis">not</em>
   contain any of the characters in <i><tt class="parameter">str2</tt></i>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.strcspn-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">str1</tt></i></span>
     <dd>

      <p class="para">
       The first string.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">str2</tt></i></span>
     <dd>

      <p class="para">
       The second string.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">start</tt></i></span>
     <dd>

      <p class="para">
       The start position of the string to examine.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">length</tt></i></span>
     <dd>

      <p class="para">
       The length of the string to examine.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.strcspn-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the length of the segment as an integer.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.strcspn-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle">
       <td align="left">4.3.0</td>
       <td align="left">
        The <i><tt class="parameter">start</tt></i> and <i><tt class="parameter">length</tt></i>
        were added
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.strcspn-examples">
  <h3 class="title">Examples</h3>
  <div class="example" id="strcspn.example">
   <p><b>Example #1 <span class="function"><b>strcspn()</b></span> example</b></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strcspn</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcd'</span><span style="color: #007700">,&nbsp;&nbsp;</span><span style="color: #DD0000">'apple'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strcspn</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcd'</span><span style="color: #007700">,&nbsp;&nbsp;</span><span style="color: #DD0000">'banana'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strcspn</span><span style="color: #007700">(</span><span style="color: #DD0000">'hello'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'l'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$d&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strcspn</span><span style="color: #007700">(</span><span style="color: #DD0000">'hello'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'world'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$b</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$d</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>The above example will output:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
int(0)
int(0)
int(2)
int(2)
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 notes" id="refsect1-function.strcspn-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><b class="note">Note</b>: <span class="simpara">This function is
binary-safe.</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.strcspn-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.strspn.html" class="function" rel="rdfs-seeAlso">strspn()</a> - Finds the length of the initial segment of a string consisting
   entirely of characters contained within a given mask.</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="101324""></a>
  <div class="note">
   <strong class="user">legacyprog at routinz dot net</strong>
   <a href="#101324" class="date">09-Dec-2010 07:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When you use the third parameter remember that the function will return the number of characters it bypassed, which will *not* be the position in your source string.&nbsp; It's a simple fix to just add your third parameter value to the function result to get the position in the first string where the scan stopped, but I didn't think of it at first.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94110""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#94110" class="date">16-Oct-2009 10:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
strcspn() can also be thought of as analogous to the following regular expression:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// where ... represents the mask of characters<br />
</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/[^ ...]/'</span><span class="keyword">, </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">) );<br />
</span><span class="default">?&gt;<br />
</span>By this analogy, strcspn() can be used in place of some regular expressions to match a pattern without the overhead of a regex engine -- for example, ways to verify if an input string represents a binary value:<br />
<span class="default">&lt;?php<br />
preg_match</span><span class="keyword">(</span><span class="string">'/^[01]+$/i'</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);<br />
</span><span class="comment">// or...<br />
</span><span class="keyword">!</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/[^01]/i'</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);<br />
<br />
</span><span class="comment">// ...or using strcspn()<br />
</span><span class="keyword">!</span><span class="default">strcspn</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, </span><span class="string">'01'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89361""></a>
  <div class="note">
   <strong class="user">Dmitry Mazur</strong>
   <a href="#89361" class="date">04-Mar-2009 10:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The second parameter simply is the set of the "stop"-characters.<br />
In other words, this function will return the index (starting from 0) of a first occurence of the stop-character.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70237""></a>
  <div class="note">
   <strong class="user">PHP at NospamImmortalSoFar dot com</strong>
   <a href="#70237" class="date">07-Oct-2006 06:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Also useful for breaking down expressions - for example parsing SQL: values ('this', fn("that,)()", 4))<br />
<br />
$sep = strcspn ($list, "'\"`");&nbsp; &nbsp;&nbsp; //&nbsp; &nbsp; Start of quoted string<br />
$list = substr ($list, $sep);<br />
$find = substr ($list, 0, 1);<br />
while (($sep = strpos ($list, $find, $sep+1)) &gt; 0 &amp;&amp; substr ($list, $sep-1, 1) == '\\')<br />
&nbsp;&nbsp;&nbsp; {}<br />
//&nbsp; $sep now spans the entire string, regardless of embedded quotes<br />
<br />
Once the strings have been removed, an expression can then be parsed for commas and brackets without worrying about them:<br />
<br />
while ($out != '')<br />
{<br />
&nbsp;&nbsp;&nbsp; $sep = strcspn ($list, "(),");&nbsp; &nbsp; &nbsp; //&nbsp; Next seperator<br />
...<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60118""></a>
  <div class="note">
   <strong class="user">AT-HE (at_he AT hotmai1 DOT com)</strong>
   <a href="#60118" class="date">27-Dec-2005 02:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this function can be used like strspn(), except while that can be used to compare a string with an allowed pattern, this one can be use to compare a string with a FORBIDDEN pattern<br />
<br />
so, to know if any forbidden character has a position inside our string, we can use (not tested with backslashes)...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// LARGE VERSION<br />
</span><span class="default">$forbidden</span><span class="keyword">=</span><span class="string">"\"\\?*:/@|&lt;&gt;"</span><span class="keyword">;<br />
if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">) != </span><span class="default">strcspn</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">,</span><span class="default">$forbidden</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"you cant create a file with that name!"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// SHORT VERSION<br />
</span><span class="keyword">if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">) - </span><span class="default">strcspn</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">,</span><span class="string">"\"\\?*:/@|&lt;&gt;"</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"i told you, you cant create that file"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57670""></a>
  <div class="note">
   <strong class="user">maskedcoder at hotmail dot com</strong>
   <a href="#57670" class="date">10-Oct-2005 04:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
useful for finding beginning of quotes and/or tags in a variable containing html.&nbsp; <br />
&nbsp;&nbsp;&nbsp; $pos = strcspn($data, '&lt;"\''); <br />
will find the first occurance of either the beginning of a tag, or a double- or single-quoted string.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.strcoll.html">strcoll</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.strip-tags.html">strip_tags</a></div>
 <div class="up"><a href="ref.strings.html">String Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
