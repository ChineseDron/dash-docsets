<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Find the position of the last occurrence of a case-insensitive substring in a string</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.strrev.html">strrev</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.strrpos.html">strrpos</a></div>
 <div class="up"><a href="ref.strings.html">String Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.strripos" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">strripos</h1>
  <p class="verinfo">(PHP 5)</p><p class="refpurpose"><span class="refname">strripos</span> &mdash; <span class="dc-title">Find the position of the last occurrence of a case-insensitive substring in a string</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.strripos-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><b>strripos</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$haystack</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$needle</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$offset</tt><span class="initializer"> = 0</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Find the numeric position of the last occurrence of
   <i><tt class="parameter">needle</tt></i> in the <i><tt class="parameter">haystack</tt></i> string.
  </p>
  <p class="para"> 
   Unlike the <span class="function"><a href="function.strrpos.html" class="function">strrpos()</a></span>, <span class="function"><b>strripos()</b></span> is
   case-insensitive.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.strripos-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">haystack</tt></i></span>
     <dd>

      <p class="para">
       The string to search in.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">needle</tt></i></span>
     <dd>

      <p class="para">
       If <i><tt class="parameter">needle</tt></i> is not a string, it is converted
       to an integer and applied as the ordinal value of a character.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">offset</tt></i></span>
     <dd>

      <p class="para">
       If specified, search will start this number of characters counted from the
       beginning of the string. If the value is negative, search will instead start
       from that many characters from the end of the string, searching backwards.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.strripos-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the position where the needle exists relative to the beginnning of
   the <i><tt class="parameter">haystack</tt></i> string (independent of search direction
   or offset).
   Also note that string positions start at 0, and not 1.
  </p>
  <p class="para">
   Returns <b><tt>FALSE</tt></b> if the needle was not found.
  </p>
  <div class="warning"><b class="warning">Warning</b><p class="simpara">This function may
return Boolean <b><tt>FALSE</tt></b>, but may also return a non-Boolean value which
evaluates to <b><tt>FALSE</tt></b>. Please read the section on <a href="language.types.boolean.html" class="link">Booleans</a> for more
information. Use <a href="language.operators.comparison.html" class="link">the ===
operator</a> for testing the return value of this
function.</p></div>
 </div>


 <div class="refsect1 examples" id="refsect1-function.strripos-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4447">
    <p><b>Example #1 A simple <span class="function"><b>strripos()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$haystack&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ababcd'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$needle&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'aB'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$pos&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strripos</span><span style="color: #007700">(</span><span style="color: #0000BB">$haystack</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$needle</span><span style="color: #007700">);<br /><br />if&nbsp;(</span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Sorry,&nbsp;we&nbsp;did&nbsp;not&nbsp;find&nbsp;(</span><span style="color: #0000BB">$needle</span><span style="color: #DD0000">)&nbsp;in&nbsp;(</span><span style="color: #0000BB">$haystack</span><span style="color: #DD0000">)"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Congratulations!\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"We&nbsp;found&nbsp;the&nbsp;last&nbsp;(</span><span style="color: #0000BB">$needle</span><span style="color: #DD0000">)&nbsp;in&nbsp;(</span><span style="color: #0000BB">$haystack</span><span style="color: #DD0000">)&nbsp;at&nbsp;position&nbsp;(</span><span style="color: #0000BB">$pos</span><span style="color: #DD0000">)"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
   Congratulations!
   We found the last (aB) in (ababcd) at position (2)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.strripos-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.strpos.html" class="function" rel="rdfs-seeAlso">strpos()</a> - Find the position of the first occurrence of a substring in a string</span></li>
    <li class="member"><span class="function"><a href="function.stripos.html" class="function" rel="rdfs-seeAlso">stripos()</a> - Find the position of the first occurrence of a case-insensitive substring in a string</span></li>
    <li class="member"><span class="function"><a href="function.strrpos.html" class="function" rel="rdfs-seeAlso">strrpos()</a> - Find the position of the last occurrence of a substring in a string</span></li>
    <li class="member"><span class="function"><a href="function.strrchr.html" class="function" rel="rdfs-seeAlso">strrchr()</a> - Find the last occurrence of a character in a string</span></li>
    <li class="member"><span class="function"><a href="function.stristr.html" class="function" rel="rdfs-seeAlso">stristr()</a> - Case-insensitive strstr</span></li>
    <li class="member"><span class="function"><a href="function.substr.html" class="function" rel="rdfs-seeAlso">substr()</a> - Return part of a string</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="99704""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#99704" class="date">31-Aug-2010 01:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Generally speaking, linear searches are from start to end, not end to start - which makes sense from a human perspective. If you need to find strings in a string backwards, reverse your haystack and needle rather than manually chopping it up.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96625""></a>
  <div class="note">
   <strong class="user">admin at e-xxi dot net</strong>
   <a href="#96625" class="date">08-Mar-2010 07:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
strripos() has very strange behaviour when you provide search position. For some reason it searches forward from the given position, instead of searching backward, that is more logical. <br />
<br />
For example if you want to find instanse of $what, previous to the last, strripos($where, $what, $last_what_pos-1) will not wark as expected. It will return $last_what_pos again and again. And that has no sence at all.<br />
<br />
To prevent this, I just used $prev_last_what_pos = strripos(substr($where,0,$last_what_pos), $what);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85941""></a>
  <div class="note">
   <strong class="user">dimmav at in dot gr</strong>
   <a href="#85941" class="date">25-Sep-2008 09:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Suppose you just need a stripos function working backwards expecting that strripos does this job, you better use the following code of a custom function named strbipos:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strbipos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />
</span><span class="comment">// Search backwards in $haystack for $needle starting from $offset and return the position found or false<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">stripos</span><span class="keyword">(</span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">), </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">), </span><span class="default">$len </span><span class="keyword">- </span><span class="default">$offset </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return ( (</span><span class="default">$pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">false </span><span class="keyword">: </span><span class="default">$len </span><span class="keyword">- </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">) - </span><span class="default">$pos </span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">// Test<br />
</span><span class="default">$body </span><span class="keyword">= </span><span class="string">"01234Xy7890XYz456xy90"</span><span class="keyword">;<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">"xY"</span><span class="keyword">;<br />
</span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$body</span><span class="keyword">);<br />
echo </span><span class="string">"TEST POSITIVE offset VALUES IN strbipos&lt;br&gt;"</span><span class="keyword">;<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Search in [</span><span class="default">$body</span><span class="string">] for [</span><span class="default">$str</span><span class="string">] starting from offset [</span><span class="default">$i</span><span class="string">]: [" </span><span class="keyword">. </span><span class="default">strbipos</span><span class="keyword">(</span><span class="default">$body</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">) . </span><span class="string">"]&lt;br&gt;"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Note that this function does exactly what it says and its results are different comparing to PHP 5 strripos function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82650""></a>
  <div class="note">
   <strong class="user">peev[dot]alexander at gmail dot com</strong>
   <a href="#82650" class="date">20-Apr-2008 02:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
OK, I guess this will be the final function implementation for PHP 4.x versions ( my previous posts are invalid )<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">if(!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">"stripos"</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">stripos</span><span class="keyword">(&nbsp; </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0&nbsp; </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strpos</span><span class="keyword">(&nbsp; </span><span class="default">strtolower</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">), </span><span class="default">strtolower</span><span class="keyword">( </span><span class="default">$needle </span><span class="keyword">), </span><span class="default">$offset&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">/* endfunction stripos */<br />
</span><span class="keyword">}</span><span class="comment">/* endfunction exists stripos */<br />
<br />
</span><span class="keyword">if(!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">"strripos"</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">strripos</span><span class="keyword">(&nbsp; </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0&nbsp; </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(&nbsp; !</span><span class="default">is_string</span><span class="keyword">( </span><span class="default">$needle </span><span class="keyword">)&nbsp; )</span><span class="default">$needle </span><span class="keyword">= </span><span class="default">chr</span><span class="keyword">(&nbsp; </span><span class="default">intval</span><span class="keyword">( </span><span class="default">$needle </span><span class="keyword">)&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(&nbsp; </span><span class="default">$offset </span><span class="keyword">&lt; </span><span class="default">0&nbsp; </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp_cut </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(&nbsp; </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$offset</span><span class="keyword">) )&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp_cut </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(&nbsp; &nbsp; </span><span class="default">substr</span><span class="keyword">(&nbsp;&nbsp; </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">max</span><span class="keyword">(&nbsp; ( </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) - </span><span class="default">$offset </span><span class="keyword">), </span><span class="default">0&nbsp; </span><span class="keyword">)&nbsp;&nbsp; )&nbsp; &nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(&nbsp;&nbsp; (&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">stripos</span><span class="keyword">( </span><span class="default">$temp_cut</span><span class="keyword">, </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">) )&nbsp; ) === </span><span class="default">FALSE&nbsp;&nbsp; </span><span class="keyword">)return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= (&nbsp;&nbsp; </span><span class="default">strlen</span><span class="keyword">(&nbsp; </span><span class="default">$haystack&nbsp; </span><span class="keyword">) - (&nbsp; </span><span class="default">$found </span><span class="keyword">+ </span><span class="default">$offset </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">( </span><span class="default">$needle </span><span class="keyword">)&nbsp; )&nbsp;&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">/* endfunction strripos */<br />
</span><span class="keyword">}</span><span class="comment">/* endfunction exists strripos */<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79369""></a>
  <div class="note">
   <strong class="user">peev[dot]alexander at gmail dot com</strong>
   <a href="#79369" class="date">23-Nov-2007 03:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Oops, I forgot to return "false" if the needle is not found. Here is the proper function. <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">"strripos"</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">strripos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$offset</span><span class="keyword">&lt;</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp_cut </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(&nbsp; </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$offset</span><span class="keyword">) )&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp_cut </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(&nbsp; </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">)&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) - (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$temp_cut</span><span class="keyword">, </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">)) + </span><span class="default">$offset </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$pos </span><span class="keyword">== </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)) { </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$temp_cut</span><span class="keyword">, </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">))===</span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else return </span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">/* endfunction strripos*/<br />
</span><span class="keyword">}</span><span class="comment">/* endfunction exists strripos*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78577""></a>
  <div class="note">
   <strong class="user">peev[dot]alexander at gmail dot com</strong>
   <a href="#78577" class="date">17-Oct-2007 05:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I think you shouldn't underestimate the length of $needle in the search of THE FIRST POSITION of it's last occurrence in the string. I improved the posted function, with added support for offset. I think this is an exact copy of the real function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">"strripos"</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">strripos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$offset</span><span class="keyword">&lt;</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp_cut </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(&nbsp; </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$offset</span><span class="keyword">) )&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp_cut </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(&nbsp; </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">)&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) - (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$temp_cut</span><span class="keyword">, </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">)) + </span><span class="default">$offset </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$pos </span><span class="keyword">== </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)) { </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">/* endfunction strripos*/<br />
</span><span class="keyword">}</span><span class="comment">/* endfunction exists strripos*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76862""></a>
  <div class="note">
   <strong class="user">ElectroFox</strong>
   <a href="#76862" class="date">02-Aug-2007 01:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sorry, I made that last post a bit prematurely.&nbsp; One more thing wrong with the simple php4 version is that it breaks if the string is not found.&nbsp; It should actually look like this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'strripos'</span><span class="keyword">) == </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">strripos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) - </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">), </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$pos </span><span class="keyword">== </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)) { </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Note, we now check to see if the $needle was found, and if it isn't, we return 0.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76861""></a>
  <div class="note">
   <strong class="user">ElectroFox</strong>
   <a href="#76861" class="date">02-Aug-2007 01:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Actually, the above, "Simple way to implement this function in PHP 4" by Yanik Lupien, should be:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'strripos'</span><span class="keyword">) == </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">strripos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) - </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">), </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Note the reversal (<span class="default">&lt;?php strrev</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">)</span><span class="default">?&gt;</span>) of the search string.&nbsp; This was left out in Yanik's example, and without it, you'll simply get the length of the haystack, as the forward string will not likely be found in the reversed haystack.<br />
<br />
Thus; if we reverse the haystack, any instance of the search string ($needle) therein will also be reversed, so we must reverse it to look for it. :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76167""></a>
  <div class="note">
   <strong class="user">Yanik Lupien</strong>
   <a href="#76167" class="date">03-Jul-2007 10:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simple way to implement this function in PHP 4<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'strripos'</span><span class="keyword">) == </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">strripos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) - </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">), </span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42812""></a>
  <div class="note">
   <strong class="user">aidan at php dot net</strong>
   <a href="#42812" class="date">30-May-2004 10:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This functionality is now implemented in the PEAR package PHP_Compat.<br />
<br />
More information about using this function without upgrading your version of PHP can be found on the below link:<br />
<br />
<a href="http://pear.php.net/package/PHP_Compat" rel="nofollow" target="_blank">http://pear.php.net/package/PHP_Compat</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.strrev.html">strrev</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.strrpos.html">strrpos</a></div>
 <div class="up"><a href="ref.strings.html">String Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
