<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Tokenize string</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.strstr.html">strstr</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.strtolower.html">strtolower</a></div>
 <div class="up"><a href="ref.strings.html">String Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.strtok" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">strtok</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">strtok</span> &mdash; <span class="dc-title">Tokenize string</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.strtok-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><b>strtok</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$str</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$token</tt></span>
   )</div>

  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><b>strtok</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$token</tt></span>
   )</div>

  <p class="para rdfs-comment">
   <span class="function"><b>strtok()</b></span> splits a string (<i><tt class="parameter">str</tt></i>)
   into smaller strings (tokens), with each token being delimited by any
   character from <i><tt class="parameter">token</tt></i>.
   That is, if you have a string like &quot;This is an example string&quot; you
   could tokenize this string into its individual words by using the
   space character as the token.
  </p>
  <p class="para">
   Note that only the first call to strtok uses the string argument.
   Every subsequent call to strtok only needs the token to use, as
   it keeps track of where it is in the current string.  To start
   over, or to tokenize a new string you simply call strtok with the
   string argument again to initialize it.  Note that you may put
   multiple tokens in the token parameter.  The string will be
   tokenized when any one of the characters in the argument are
   found.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.strtok-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">str</tt></i></span>
     <dd>

      <p class="para">
       The <span class="type"><a href="language.types.string.html" class="type string">string</a></span> being split up into smaller strings (tokens).
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">token</tt></i></span>
     <dd>

      <p class="para">
       The delimiter used when splitting up <i><tt class="parameter">str</tt></i>.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.strtok-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   A <span class="type"><a href="language.types.string.html" class="type string">string</a></span> token.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.strtok-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4452">
    <p><b>Example #1 <span class="function"><b>strtok()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"This&nbsp;is\tan&nbsp;example\nstring"</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">/*&nbsp;Use&nbsp;tab&nbsp;and&nbsp;newline&nbsp;as&nbsp;tokenizing&nbsp;characters&nbsp;as&nbsp;well&nbsp;&nbsp;*/<br /></span><span style="color: #0000BB">$tok&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(</span><span style="color: #0000BB">$string</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"&nbsp;\n\t"</span><span style="color: #007700">);<br /><br />while&nbsp;(</span><span style="color: #0000BB">$tok&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Word=</span><span style="color: #0000BB">$tok</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tok&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(</span><span style="color: #DD0000">"&nbsp;\n\t"</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p> 
  <p class="para">
   The behavior when an empty part was found changed with PHP 4.1.0. The old
   behavior returned an empty string, while the new, correct, behavior
   simply skips the part of the string:
  </p>
  <p class="para">
   <div class="example" id="example-4453">
    <p><b>Example #2 Old <span class="function"><b>strtok()</b></span> behavior</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$first_token&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(</span><span style="color: #DD0000">'/something'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'/'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$second_token&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(</span><span style="color: #DD0000">'/'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$first_token</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$second_token</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
    string(0) &quot;&quot;
    string(9) &quot;something&quot;
</pre></div>
    </div>
   </div>
   <div class="example" id="example-4454">
    <p><b>Example #3 New <span class="function"><b>strtok()</b></span> behavior</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$first_token&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(</span><span style="color: #DD0000">'/something'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'/'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$second_token&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(</span><span style="color: #DD0000">'/'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$first_token</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$second_token</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
    string(9) &quot;something&quot;
    bool(false)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.strtok-notes">
  <h3 class="title">Notes</h3>
  
  <div class="warning"><b class="warning">Warning</b><p class="simpara">This function may
return Boolean <b><tt>FALSE</tt></b>, but may also return a non-Boolean value which
evaluates to <b><tt>FALSE</tt></b>. Please read the section on <a href="language.types.boolean.html" class="link">Booleans</a> for more
information. Use <a href="language.operators.comparison.html" class="link">the ===
operator</a> for testing the return value of this
function.</p></div>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.strtok-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.split.html" class="function" rel="rdfs-seeAlso">split()</a> - Split string into array by regular expression</span></li>
    <li class="member"><span class="function"><a href="function.explode.html" class="function" rel="rdfs-seeAlso">explode()</a> - Split a string by string</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="103962""></a>
  <div class="note">
   <strong class="user">pradador at me dot com</strong>
   <a href="#103962" class="date">13-May-2011 12:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a simple class that allows you to iterate through string tokens using a foreach loop.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* The TokenIterator class allows you to iterate through string tokens using<br />
&nbsp;* the familiar foreach control structure.<br />
&nbsp;* <br />
&nbsp;* Example:<br />
&nbsp;* &lt;code&gt;<br />
&nbsp;* &lt;?php<br />
&nbsp;* $string = 'This is a test.';<br />
&nbsp;* $delimiters = ' ';<br />
&nbsp;* $ti = new TokenIterator($string, $delimiters);<br />
&nbsp;* <br />
&nbsp;* foreach ($ti as $count =&gt; $token) {<br />
&nbsp;*&nbsp; &nbsp;&nbsp; echo sprintf("%d, %s\n", $count, $token); <br />
&nbsp;* }<br />
&nbsp;* <br />
&nbsp;* // Prints the following output:<br />
&nbsp;* // 0. This<br />
&nbsp;* // 1. is<br />
&nbsp;* // 2. a<br />
&nbsp;* // 3. test.<br />
&nbsp;* &lt;/code&gt;<br />
&nbsp;*/<br />
</span><span class="keyword">class </span><span class="default">TokenIterator </span><span class="keyword">implements </span><span class="default">Iterator<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * The string to tokenize.<br />
&nbsp;&nbsp; &nbsp; * @var string<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">protected </span><span class="default">$_string</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * The token delimiters.<br />
&nbsp;&nbsp; &nbsp; * @var string<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">protected </span><span class="default">$_delims</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Stores the current token.<br />
&nbsp;&nbsp; &nbsp; * @var mixed<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">protected </span><span class="default">$_token</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Internal token counter.<br />
&nbsp;&nbsp; &nbsp; * @var int<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">protected </span><span class="default">$_counter </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Constructor.<br />
&nbsp;&nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; * @param string $string The string to tokenize.<br />
&nbsp;&nbsp; &nbsp; * @param string $delims The token delimiters.<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$delims</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_string </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_delims </span><span class="keyword">= </span><span class="default">$delims</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_token </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$delims</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * @see Iterator::current()<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">current</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_token</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * @see Iterator::key()<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">key</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_counter</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * @see Iterator::next()<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">next</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_token </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_delims</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">()) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ++</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_counter</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * @see Iterator::rewind()<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">rewind</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_counter </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_token&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_string</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_delims</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * @see Iterator::valid()<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">valid</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_token </span><span class="keyword">!== </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103051""></a>
  <div class="note">
   <strong class="user">elarlang at gmail dot com</strong>
   <a href="#103051" class="date">22-Mar-2011 10:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have memory-usage critical solution, you should keep in mind, that strtok function holds input string parameter (or reference to it?) in memory after usage.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">tokenize</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$token_symbols</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$word </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$token_symbols</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">false </span><span class="keyword">!== </span><span class="default">$word</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// do something here...<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$word </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$token_symbols</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Test-cases with handling ~10MB plain-text file:<br />
Case #1 - unset $str variable<br />
<span class="default">&lt;?php<br />
$token_symbols </span><span class="keyword">= </span><span class="string">" \t\n"</span><span class="keyword">;<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'10MB.txt'</span><span class="keyword">); </span><span class="comment">// mem usage 9.75383758545 MB (memory_get_usage() / 1024 / 1024)); <br />
</span><span class="default">tokenize</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$token_symbols</span><span class="keyword">); </span><span class="comment">// mem usage 9.75400161743 MB<br />
</span><span class="keyword">unset(</span><span class="default">$str</span><span class="keyword">); </span><span class="comment">// 9.75395584106 MB<br />
</span><span class="default">?&gt;<br />
</span>Case #1 result: memory is still used<br />
<br />
Case #2 - call strtok again<br />
<span class="default">&lt;?php<br />
$token_symbols </span><span class="keyword">= </span><span class="string">" \t\n"</span><span class="keyword">;<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'10MB.txt'</span><span class="keyword">); </span><span class="comment">// 9.75401306152 MB<br />
</span><span class="default">tokenize</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$token_symbols</span><span class="keyword">); </span><span class="comment">// 9.75417709351<br />
</span><span class="default">strtok</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">); </span><span class="comment">// 9.75421524048<br />
</span><span class="default">?&gt;<br />
</span>Case #2 result: memory is still used<br />
<br />
Case #3 - call strtok again AND unset $str variable<br />
<span class="default">&lt;?php<br />
$token_symbols </span><span class="keyword">= </span><span class="string">" \t\n"</span><span class="keyword">;<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'10MB.txt'</span><span class="keyword">); </span><span class="comment">// 9.75410079956 MB<br />
</span><span class="default">tokenize</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$token_symbols</span><span class="keyword">); </span><span class="comment">// 9.75426483154 MB<br />
</span><span class="keyword">unset(</span><span class="default">$str</span><span class="keyword">);<br />
</span><span class="default">strtok</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">); </span><span class="comment">// 0.0543975830078 MB<br />
</span><span class="default">?&gt;<br />
</span>Case #3 result: memory is free<br />
<br />
So, better solution for tokenize function:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">tokenize</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$token_symbols</span><span class="keyword">, </span><span class="default">$token_reset </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$word </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$token_symbols</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">false </span><span class="keyword">!== </span><span class="default">$word</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// do something here...<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$word </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$token_symbols</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$token_reset</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101015""></a>
  <div class="note">
   <strong class="user">fabiolimasouto at gmail dot com</strong>
   <a href="#101015" class="date">20-Nov-2010 05:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this example will hopefully help you understand how this function works:<br />
<br />
<span class="default">&lt;?php<br />
$selector </span><span class="keyword">= </span><span class="string">'div.class#id'</span><span class="keyword">;<br />
</span><span class="default">$tagname </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$selector</span><span class="keyword">,</span><span class="string">'.#'</span><span class="keyword">);<br />
echo </span><span class="default">$tagname</span><span class="keyword">.</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;<br />
<br />
while(</span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">'.#'</span><span class="keyword">))<br />
{<br />
&nbsp;echo </span><span class="default">$tok</span><span class="keyword">.</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Outputs:<br />
div<br />
class<br />
id</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99811""></a>
  <div class="note">
   <strong class="user">php at ciutureanu dot ro</strong>
   <a href="#99811" class="date">08-Sep-2010 08:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote a function which adds links based on a list of keywords =&gt; hrefs, avoiding attributes inside HTML tags which matches those keywords.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">addLinks</span><span class="keyword">(</span><span class="default">$str_in</span><span class="keyword">, </span><span class="default">$replaces</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str_out </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$str_in</span><span class="keyword">, </span><span class="string">'&lt;&gt;'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$must_replace </span><span class="keyword">= (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str_in</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) !== </span><span class="string">'&lt;'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">$tok </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$must_replace</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$replaces </span><span class="keyword">as </span><span class="default">$tag </span><span class="keyword">=&gt; </span><span class="default">$href</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\b' </span><span class="keyword">. </span><span class="default">$tag </span><span class="keyword">. </span><span class="string">'\b/'</span><span class="keyword">, </span><span class="default">$tok</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tok </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\b(' </span><span class="keyword">. </span><span class="default">$tag </span><span class="keyword">. </span><span class="string">')\b/'</span><span class="keyword">, </span><span class="string">'&lt;a title="' </span><span class="keyword">. </span><span class="default">$href </span><span class="keyword">. </span><span class="string">'" href="' </span><span class="keyword">. </span><span class="default">$href </span><span class="keyword">. </span><span class="string">'"&gt;\1&lt;/a&gt;'</span><span class="keyword">, </span><span class="default">$tok</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$replaces</span><span class="keyword">[</span><span class="default">$tag</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tok </span><span class="keyword">= </span><span class="string">"&lt;</span><span class="default">$tok</span><span class="string">&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str_out </span><span class="keyword">.= </span><span class="default">$tok</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">'&lt;&gt;'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$must_replace </span><span class="keyword">= !</span><span class="default">$must_replace</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$str_out</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$replaces </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Obama' </span><span class="keyword">=&gt; </span><span class="string">'<a href="http://en.wikipedia.org/wiki/Barack_Obama" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Barack_Obama</a>'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'php' </span><span class="keyword">=&gt; </span><span class="string">'<a href="http://www.php.net/" rel="nofollow" target="_blank">http://www.php.net/</a>'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="string">'This php function will &lt;em title="Obama"&gt;replace&lt;/em&gt; only first occurance of Obama, but not the second occurance of Obama'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$s</span><span class="string">&lt;hr /&gt;" </span><span class="keyword">. </span><span class="default">addLinks</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$replaces</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94463""></a>
  <div class="note">
   <strong class="user">benighted at gmail dot com</strong>
   <a href="#94463" class="date">06-Nov-2009 06:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simple way to tokenize search parameters, including double or single quoted keys.&nbsp; If only one quote is found, the rest of the string is assumed to be part of that token.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $token </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$keywords</span><span class="keyword">,</span><span class="string">' '</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">$token</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// find double quoted tokens<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$token</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">}==</span><span class="string">'"'</span><span class="keyword">) { </span><span class="default">$token </span><span class="keyword">.= </span><span class="string">' '</span><span class="keyword">.</span><span class="default">strtok</span><span class="keyword">(</span><span class="string">'"'</span><span class="keyword">).</span><span class="string">'"'</span><span class="keyword">; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// find single quoted tokens<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$token</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">}==</span><span class="string">"'"</span><span class="keyword">) { </span><span class="default">$token </span><span class="keyword">.= </span><span class="string">' '</span><span class="keyword">.</span><span class="default">strtok</span><span class="keyword">(</span><span class="string">"'"</span><span class="keyword">).</span><span class="string">"'"</span><span class="keyword">; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tokens</span><span class="keyword">[] = </span><span class="default">$token</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$token </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Use substr(1,strlen($token)) and remove the part that adds the trailing quotes if you want your output without quotes.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93315""></a>
  <div class="note">
   <strong class="user">azeem</strong>
   <a href="#93315" class="date">02-Sep-2009 12:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a java like StringTokenizer class using strtok function:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* The string tokenizer class allows an application to break a string into tokens.<br />
&nbsp;*<br />
&nbsp;* @example The following is one example of the use of the tokenizer. The code:<br />
&nbsp;* &lt;code&gt;<br />
&nbsp;* &lt;?php<br />
&nbsp;*&nbsp; &nbsp; $str = 'this is:@\t\n a test!';<br />
&nbsp;*&nbsp; &nbsp; $delim = ' !@:'\t\n; // remove these chars<br />
&nbsp;*&nbsp; &nbsp; $st = new StringTokenizer($str, $delim);<br />
&nbsp;*&nbsp; &nbsp; while ($st-&gt;hasMoreTokens()) {<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; echo $st-&gt;nextToken() . "\n";<br />
&nbsp;*&nbsp; &nbsp; }<br />
&nbsp;*&nbsp; &nbsp; prints the following output:<br />
&nbsp;*&nbsp; &nbsp; &nbsp; this<br />
&nbsp;*&nbsp; &nbsp; &nbsp; is<br />
&nbsp;*&nbsp; &nbsp; &nbsp; a<br />
&nbsp;*&nbsp; &nbsp; &nbsp; test<br />
&nbsp;* ?&gt;<br />
&nbsp;* &lt;/code&gt;<br />
&nbsp;*/<br />
</span><span class="keyword">class </span><span class="default">StringTokenizer </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * @var string<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">private </span><span class="default">$token</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * @var string<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">private </span><span class="default">$delim</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Constructs a string tokenizer for the specified string<br />
&nbsp;&nbsp; &nbsp; * @param string $str String to tokenize<br />
&nbsp;&nbsp; &nbsp; * @param string $delim The set of delimiters (the characters that separate tokens)<br />
&nbsp;&nbsp; &nbsp; * specified at creation time, default to ' '<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="comment">/*string*/ </span><span class="default">$str</span><span class="keyword">, </span><span class="comment">/*string*/ </span><span class="default">$delim </span><span class="keyword">= </span><span class="string">' '</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">token </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$delim</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">delim </span><span class="keyword">= </span><span class="default">$delim</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__destruct</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$this</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Tests if there are more tokens available from this tokenizer's string. It<br />
&nbsp;&nbsp; &nbsp; * does not move the internal pointer in any way. To move the internal pointer<br />
&nbsp;&nbsp; &nbsp; * to the next element call nextToken()<br />
&nbsp;&nbsp; &nbsp; * @return boolean - true if has more tokens, false otherwise<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">hasMoreTokens</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">token </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Returns the next token from this string tokenizer and advances the internal<br />
&nbsp;&nbsp; &nbsp; * pointer by one.<br />
&nbsp;&nbsp; &nbsp; * @return string - next element in the tokenized string<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">nextToken</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">token</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">token </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">delim</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$current</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91532""></a>
  <div class="note">
   <strong class="user">yanick dot rochon at gmail dot com</strong>
   <a href="#91532" class="date">15-Jun-2009 09:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a small function I wrote as I needed to extract some named tokens from a string (a la Google). For example, I needed to format a string like "extension:gif size:64M animated:true author:'John Bash'" into<br />
<br />
array(<br />
&nbsp; 'extension' =&gt; 'gif',<br />
&nbsp; 'size' =&gt; '64M',<br />
&nbsp; 'animated' =&gt; true,<br />
&nbsp; 'author' =&gt; 'John Bash'<br />
)<br />
<br />
So, here's the code: <br />
<br />
<span class="default">&lt;?php<br />
<br />
header</span><span class="keyword">(</span><span class="string">'Content-type: text/plain; charset=utf-8'</span><span class="keyword">);<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* NOTE : use mbstring.func_overload for multi-byte support with this function<br />
&nbsp;*<br />
&nbsp;* @param string $string&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; the string to tokenize<br />
&nbsp;* @param int $offset&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the starting offset<br />
&nbsp;* @param string $defaultTokenName&nbsp;&nbsp; the default token name if none specified<br />
&nbsp;* @param string $groupDelimiters&nbsp; &nbsp; the characters to delimit token groups<br />
&nbsp;* @param string $groupNameDelimiter the character(s) to delimit token group names<br />
&nbsp;* @return array<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">getTokens</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$defaultTokenName </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$groupDelimiters </span><span class="keyword">= </span><span class="string">'\'"'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$groupNameDelimiter </span><span class="keyword">= </span><span class="string">':'</span><span class="keyword">) <br />
{<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$offset </span><span class="keyword">&gt;= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//echo "offset out of range";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$spaces </span><span class="keyword">= </span><span class="string">" \t\n\r"</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// space characters<br />
<br />
&nbsp;&nbsp;&nbsp; // add group delimiters to spaces...<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$groupSpaces </span><span class="keyword">= </span><span class="default">$spaces </span><span class="keyword">. </span><span class="default">$groupNameDelimiter</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$delimiters </span><span class="keyword">= </span><span class="default">$groupSpaces </span><span class="keyword">. </span><span class="default">$groupDelimiters</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//var_dump($groupSpaces);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">ltrim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">), </span><span class="default">$groupSpaces</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$token_strings </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//echo "String is : " . $string . "\n";<br />
<br />
&nbsp;&nbsp;&nbsp; // 1. split all tokens...<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">while (</span><span class="default">$offset </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lastOffset </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$escaped </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">false </span><span class="keyword">!== </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$groupDelimiters</span><span class="keyword">, </span><span class="default">$char </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$groupChar </span><span class="keyword">= </span><span class="default">$char</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$groupChar </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">null </span><span class="keyword">!== </span><span class="default">$groupChar</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while ((</span><span class="default">$offset </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)) &amp;&amp; ((</span><span class="default">$groupChar </span><span class="keyword">!== (</span><span class="default">$char </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">[++</span><span class="default">$offset</span><span class="keyword">])) || </span><span class="default">$escaped</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//$offset++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$escaped </span><span class="keyword">= (</span><span class="string">'\\' </span><span class="keyword">=== </span><span class="default">$char</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//echo "*** Grouped : " . substr($string, $lastOffset, $offset - $lastOffset) . "\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">} else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while ((</span><span class="default">$offset </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)) &amp;&amp; ((</span><span class="default">false </span><span class="keyword">=== </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$delimiters</span><span class="keyword">, </span><span class="default">$char </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">])) || </span><span class="default">$escaped</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$escaped </span><span class="keyword">= (</span><span class="string">'\\' </span><span class="keyword">=== </span><span class="default">$char</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//echo "*** Non-group : " . substr($string, $lastOffset, $offset - $lastOffset) . "\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//skip spaces...<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">while ((</span><span class="default">$offset </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)) &amp;&amp; ((</span><span class="default">false </span><span class="keyword">!== </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$groupSpaces</span><span class="keyword">, </span><span class="default">$char </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">])) || </span><span class="default">$escaped</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$escaped </span><span class="keyword">= (</span><span class="string">'\\' </span><span class="keyword">=== </span><span class="default">$char</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$token_strings</span><span class="keyword">[] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$lastOffset</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">- </span><span class="default">$lastOffset</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//echo "Next token = '" . end($token_strings) . "'\n";<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tokens </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tokenName </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$token_strings </span><span class="keyword">as </span><span class="default">$token_str</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// clean $token_str<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$token_str </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">$token_str</span><span class="keyword">), </span><span class="default">$spaces</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str_value </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$token_str</span><span class="keyword">, </span><span class="default">$delimiters</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; switch (</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str_value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'true'</span><span class="keyword">: </span><span class="default">$str_value </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'false'</span><span class="keyword">: </span><span class="default">$str_value </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; default: break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// is it a token name?<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="string">':' </span><span class="keyword">=== </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$token_str</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!empty(</span><span class="default">$tokenName</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$tokenName</span><span class="keyword">] = </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tokenName </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$token_str</span><span class="keyword">, </span><span class="default">$delimiters</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!empty(</span><span class="default">$tokenName</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$tokenName</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$tokenName</span><span class="keyword">] = array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$tokenName</span><span class="keyword">],<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str_value<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$tokenName</span><span class="keyword">] = </span><span class="default">$str_value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tokenName </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif (empty(</span><span class="default">$defaultTokenName</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tokens</span><span class="keyword">[] = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$token_str</span><span class="keyword">, </span><span class="default">$delimiters</span><span class="keyword">);;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$defaultTokenName</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$defaultTokenName</span><span class="keyword">] = array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$defaultTokenName</span><span class="keyword">],<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str_value<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$defaultTokenName</span><span class="keyword">] = </span><span class="default">$str_value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (!empty(</span><span class="default">$tokenName</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$tokenName</span><span class="keyword">] = </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$tokens</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">"check1: test "<br />
&nbsp;&nbsp; &nbsp; </span><span class="keyword">. </span><span class="string">"check2:'hello world' "<br />
&nbsp;&nbsp; &nbsp; </span><span class="keyword">. </span><span class="string">'check3: "foo" '<br />
&nbsp;&nbsp; &nbsp; </span><span class="keyword">. </span><span class="string">"check4: \\\"try this\\\""<br />
&nbsp;&nbsp; &nbsp; </span><span class="keyword">. </span><span class="string">'"buz" '<br />
&nbsp;&nbsp; &nbsp; </span><span class="keyword">. </span><span class="string">'check1:true'</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89421""></a>
  <div class="note">
   <strong class="user">KrazyBox</strong>
   <a href="#89421" class="date">06-Mar-2009 06:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As of the change in strtok()'s handling of empty strings, it is now useless for scripts that rely on empty data to function.<br />
<br />
Take for instance, a standard header. (with UNIX newlines)<br />
<br />
http/1.0 200 OK\n<br />
Content-Type: text/html\n<br />
\n<br />
--HTML BODY HERE---<br />
<br />
When parsing this with strtok, one would wait until it found an empty string to signal the end of the header. However, because strtok now skips empty segments, it is impossible to know when the header has ended.<br />
This should not be called `correct' behavior, it certainly is not. It has rendered strtok incapable of (properly) processing a very simple standard.<br />
<br />
This new functionality, however, does not affect Windows style headers. You would search for a line that only contains "\r"<br />
This, however, is not a justification for the change.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87977""></a>
  <div class="note">
   <strong class="user">Logikos</strong>
   <a href="#87977" class="date">03-Jan-2009 10:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This looks very simple, but it took me a long time to figure out so I thought I'd share it incase someone else was wanting the same thing:<br />
<br />
this should work similar to substr() but with tokens instead!<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/* subtok(string,chr,pos,len)<br />
&nbsp;*<br />
&nbsp;* chr = chr used to seperate tokens<br />
&nbsp;* pos = starting postion<br />
&nbsp;* len = length, if negative count back from right<br />
&nbsp;* <br />
&nbsp;*&nbsp; subtok('a.b.c.d.e','.',0)&nbsp; &nbsp;&nbsp; = 'a.b.c.d.e'<br />
&nbsp;*&nbsp; subtok('a.b.c.d.e','.',0,2)&nbsp;&nbsp; = 'a.b'<br />
&nbsp;*&nbsp; subtok('a.b.c.d.e','.',2,1)&nbsp;&nbsp; = 'c'<br />
&nbsp;*&nbsp; subtok('a.b.c.d.e','.',2,-1)&nbsp; = 'c.d'<br />
&nbsp;*&nbsp; subtok('a.b.c.d.e','.',-4)&nbsp; &nbsp; = 'b.c.d.e'<br />
&nbsp;*&nbsp; subtok('a.b.c.d.e','.',-4,2)&nbsp; = 'b.c'<br />
&nbsp;*&nbsp; subtok('a.b.c.d.e','.',-4,-1) = 'b.c.d'<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">subtok</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$chr</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">,</span><span class="default">$len </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">) {<br />
&nbsp; return </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$chr</span><span class="keyword">,</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="default">$chr</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">),</span><span class="default">$pos</span><span class="keyword">,</span><span class="default">$len</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
explode breaks the tokens up into an array, array slice alows you to pick then tokens you want, and then implode converts it back to a string<br />
<br />
although its far from a clone, this was inspired by mIRC's gettok() function</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84054""></a>
  <div class="note">
   <strong class="user">magne</strong>
   <a href="#84054" class="date">25-Jun-2008 11:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Quick and dirty function to tokenize:<br />
<br />
function stringTokenize($sBuffer, $sSplit) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $iCount = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(strlen($sBuffer) == 0)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $sToken = strtok($sBuffer, $sSplit);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $aTokens[$iCount] = $sToken;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while ($sToken !== false) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $sToken = strtok($sSplit);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(strlen($sToken) &gt; 0) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $iCount++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $aTokens[$iCount] = $sToken;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; // end while<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $aTokens;<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82123""></a>
  <div class="note">
   <strong class="user">Aditya P Bhatt (adityabhai at gmail dot com)</strong>
   <a href="#82123" class="date">27-Mar-2008 10:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&lt;head&gt;<br />
&lt;title&gt;Tokenise the incoming string&lt;/title&gt;<br />
&lt;/head&gt;<br />
&lt;body bgcolor=white&gt;<br />
The input was<br />
<span class="default">&lt;?php<br />
$name </span><span class="keyword">= </span><span class="string">"SOME TEXT EXAMPLE"</span><span class="keyword">; </span><span class="comment">// You can change string here<br />
</span><span class="keyword">print (</span><span class="string">"</span><span class="default">$name</span><span class="string">.&lt;P&gt;In pieces, thats:&lt;br&gt;"</span><span class="keyword">);<br />
&nbsp;<br />
</span><span class="default">$toke </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">,</span><span class="string">" \t"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$toke</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print (</span><span class="string">"</span><span class="default">$toke</span><span class="string">&lt;BR&gt;"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$toke </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">" \t"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">$oneword </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">"_"</span><span class="keyword">,</span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$name</span><span class="keyword">));<br />
print (</span><span class="string">"&lt;br&gt;or as one word: </span><span class="default">$oneword</span><span class="string">"</span><span class="keyword">);<br />
&nbsp;<br />
</span><span class="default">?&gt;<br />
</span>&lt;/body&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64444""></a>
  <div class="note">
   <strong class="user">Geert</strong>
   <a href="#64444" class="date">14-Apr-2006 06:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Shauns function needs a little update because it produces an error message that the variables $text and $words were not defined. Written like this it won't produce an error:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">summarize</span><span class="keyword">(</span><span class="default">$paragraph</span><span class="keyword">, </span><span class="default">$limit</span><span class="keyword">){<br />
&nbsp; </span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$paragraph</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$text</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$words</span><span class="keyword">=</span><span class="string">'0'</span><span class="keyword">;<br />
&nbsp; while(</span><span class="default">$tok</span><span class="keyword">){<br />
&nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="string">" "</span><span class="keyword">.</span><span class="default">$tok</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$words</span><span class="keyword">++;<br />
&nbsp;&nbsp; if((</span><span class="default">$words </span><span class="keyword">&gt;= </span><span class="default">$limit</span><span class="keyword">) &amp;&amp; ((</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$tok</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">) == </span><span class="string">"!"</span><span class="keyword">)||(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$tok</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">) == </span><span class="string">"."</span><span class="keyword">)))<br />
&nbsp;&nbsp; &nbsp; break;<br />
&nbsp;&nbsp; </span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">);<br />
&nbsp; }<br />
return </span><span class="default">ltrim</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62073""></a>
  <div class="note">
   <strong class="user">mac.com@nemo</strong>
   <a href="#62073" class="date">18-Feb-2006 01:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function takes a string and returns an array with words (delimited by spaces), also taking into account quotes, doublequotes, backticks and backslashes (for escaping stuff).<br />
So<br />
<br />
$string = "cp&nbsp;&nbsp; 'my file' to `Judy's file`";<br />
var_dump(parse_cli($string));<br />
<br />
would yield:<br />
<br />
array(4) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(2) "cp"<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(7) "my file"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(5) "to"<br />
&nbsp; [3]=&gt;<br />
&nbsp; string(11) "Judy's file"<br />
}<br />
<br />
Way it works, runs through the string character by character, for each character looking up the action to take, based on that character and its current $state.<br />
Actions can be (one or more of) adding the character/string to the current word, adding the word to the output array, and changing or (re)storing the state.<br />
For example a space will become part of the current 'word' (or 'token') if $state is 'doublequoted', but it will start a new token if $state was 'unquoted'.<br />
I was later told it's a "tokeniser using a finite state automaton". Who knew :-)<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">#_____________________<br />
# parse_cli($string) /<br />
</span><span class="keyword">function </span><span class="default">parse_cli</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$state </span><span class="keyword">= </span><span class="string">'space'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$previous </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;&nbsp; &nbsp;&nbsp; </span><span class="comment">// stores current state when encountering a backslash (which changes $state to 'escaped', but has to fall back into the previous $state afterwards)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= array();&nbsp; &nbsp;&nbsp; </span><span class="comment">// the return value<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$word </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// type of character<br />
&nbsp;&nbsp;&nbsp; // array[states][chartypes] =&gt; actions<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$chart </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'space'&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; array(</span><span class="string">'space'</span><span class="keyword">=&gt;</span><span class="string">''</span><span class="keyword">,&nbsp;&nbsp; </span><span class="string">'quote'</span><span class="keyword">=&gt;</span><span class="string">'q'</span><span class="keyword">,&nbsp; </span><span class="string">'doublequote'</span><span class="keyword">=&gt;</span><span class="string">'d'</span><span class="keyword">,&nbsp; </span><span class="string">'backtick'</span><span class="keyword">=&gt;</span><span class="string">'b'</span><span class="keyword">,&nbsp; </span><span class="string">'backslash'</span><span class="keyword">=&gt;</span><span class="string">'ue'</span><span class="keyword">, </span><span class="string">'other'</span><span class="keyword">=&gt;</span><span class="string">'ua'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'unquoted'&nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; array(</span><span class="string">'space'</span><span class="keyword">=&gt;</span><span class="string">'w '</span><span class="keyword">, </span><span class="string">'quote'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'doublequote'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'backtick'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'backslash'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">,&nbsp; </span><span class="string">'other'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'quoted'&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; array(</span><span class="string">'space'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'quote'</span><span class="keyword">=&gt;</span><span class="string">'w '</span><span class="keyword">, </span><span class="string">'doublequote'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'backtick'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'backslash'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">,&nbsp; </span><span class="string">'other'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'doublequoted' </span><span class="keyword">=&gt; array(</span><span class="string">'space'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'quote'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'doublequote'</span><span class="keyword">=&gt;</span><span class="string">'w '</span><span class="keyword">, </span><span class="string">'backtick'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'backslash'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">,&nbsp; </span><span class="string">'other'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'backticked'&nbsp;&nbsp; </span><span class="keyword">=&gt; array(</span><span class="string">'space'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'quote'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'doublequote'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'backtick'</span><span class="keyword">=&gt;</span><span class="string">'w '</span><span class="keyword">, </span><span class="string">'backslash'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">,&nbsp; </span><span class="string">'other'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'escaped'&nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; array(</span><span class="string">'space'</span><span class="keyword">=&gt;</span><span class="string">'ap'</span><span class="keyword">, </span><span class="string">'quote'</span><span class="keyword">=&gt;</span><span class="string">'ap'</span><span class="keyword">, </span><span class="string">'doublequote'</span><span class="keyword">=&gt;</span><span class="string">'ap'</span><span class="keyword">, </span><span class="string">'backtick'</span><span class="keyword">=&gt;</span><span class="string">'ap'</span><span class="keyword">, </span><span class="string">'backslash'</span><span class="keyword">=&gt;</span><span class="string">'ap'</span><span class="keyword">, </span><span class="string">'other'</span><span class="keyword">=&gt;</span><span class="string">'ap'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$char </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$char</span><span class="keyword">, array(</span><span class="string">'space'</span><span class="keyword">=&gt;</span><span class="string">' '</span><span class="keyword">, </span><span class="string">'quote'</span><span class="keyword">=&gt;</span><span class="string">'\''</span><span class="keyword">, </span><span class="string">'doublequote'</span><span class="keyword">=&gt;</span><span class="string">'"'</span><span class="keyword">, </span><span class="string">'backtick'</span><span class="keyword">=&gt;</span><span class="string">'`'</span><span class="keyword">, </span><span class="string">'backslash'</span><span class="keyword">=&gt;</span><span class="string">'\\'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (! </span><span class="default">$type</span><span class="keyword">) </span><span class="default">$type </span><span class="keyword">= </span><span class="string">'other'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$type </span><span class="keyword">== </span><span class="string">'other'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// grabs all characters that are also 'other' following the current one in one go<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/[ \'\"\`\\\]/"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">, </span><span class="default">PREG_OFFSET_CAPTURE</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$matches</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$matches </span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$char </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]-</span><span class="default">$i</span><span class="keyword">); </span><span class="comment">// yep, $char length can be &gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] - </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// no more match on special characters, that must mean this is the last word!<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // the .= hereunder is because we *might* be in the middle of a word that just contained special chars<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$word </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break; </span><span class="comment">// jumps out of the for() loop<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$actions </span><span class="keyword">= </span><span class="default">$chart</span><span class="keyword">[</span><span class="default">$state</span><span class="keyword">][</span><span class="default">$type</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$actions</span><span class="keyword">); </span><span class="default">$j</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$act </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$actions</span><span class="keyword">, </span><span class="default">$j</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">' '</span><span class="keyword">) </span><span class="default">$state </span><span class="keyword">= </span><span class="string">'space'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'u'</span><span class="keyword">) </span><span class="default">$state </span><span class="keyword">= </span><span class="string">'unquoted'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'q'</span><span class="keyword">) </span><span class="default">$state </span><span class="keyword">= </span><span class="string">'quoted'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'d'</span><span class="keyword">) </span><span class="default">$state </span><span class="keyword">= </span><span class="string">'doublequoted'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'b'</span><span class="keyword">) </span><span class="default">$state </span><span class="keyword">= </span><span class="string">'backticked'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'e'</span><span class="keyword">) { </span><span class="default">$previous </span><span class="keyword">= </span><span class="default">$state</span><span class="keyword">; </span><span class="default">$state </span><span class="keyword">= </span><span class="string">'escaped'</span><span class="keyword">; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'a'</span><span class="keyword">) </span><span class="default">$word </span><span class="keyword">.= </span><span class="default">$char</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'w'</span><span class="keyword">) { </span><span class="default">$out</span><span class="keyword">[] = </span><span class="default">$word</span><span class="keyword">; </span><span class="default">$word </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'p'</span><span class="keyword">) </span><span class="default">$state </span><span class="keyword">= </span><span class="default">$previous</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">)) </span><span class="default">$out</span><span class="keyword">[] = </span><span class="default">$word</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56178""></a>
  <div class="note">
   <strong class="user">rawat dot arun at gmail dot com</strong>
   <a href="#56178" class="date">25-Aug-2005 07:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was trying to compare two strings of equal length using strtok. However using them at same time leads into erratic output. Therefore the output of each strok can first be stored in an array and then be used for comparison. Here is small code for it.<br />
<span class="default">&lt;?php<br />
$string </span><span class="keyword">= </span><span class="string">"This is an XYZ example string"</span><span class="keyword">;<br />
</span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">);<br />
while (</span><span class="default">$tok </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">) { </span><span class="default">$toks</span><span class="keyword">[] = </span><span class="default">$tok</span><span class="keyword">; </span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">); }<br />
</span><span class="default">$string_1</span><span class="keyword">= </span><span class="string">"This is an unknown example string"</span><span class="keyword">;<br />
</span><span class="default">$tok1</span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$string_1</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">);while (</span><span class="default">$tok1 </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">) {<br />
</span><span class="default">$toks1</span><span class="keyword">[] = </span><span class="default">$tok1</span><span class="keyword">;</span><span class="default">$tok1 </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">); }<br />
</span><span class="default">$ctr</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
while (</span><span class="default">each </span><span class="keyword">(</span><span class="default">$toks</span><span class="keyword">))<br />
if (</span><span class="default">$toks</span><span class="keyword">[</span><span class="default">$ctr</span><span class="keyword">]==</span><span class="default">$toks1</span><span class="keyword">[</span><span class="default">$ctr</span><span class="keyword">])<br />
{echo </span><span class="string">"W=</span><span class="default">$toks</span><span class="keyword">[</span><span class="default">$ctr</span><span class="keyword">]</span><span class="string">&lt;br /&gt;"</span><span class="keyword">; echo </span><span class="string">"W1=</span><span class="default">$toks1</span><span class="keyword">[</span><span class="default">$ctr</span><span class="keyword">]</span><span class="string">&lt;br /&gt;"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$ctr</span><span class="keyword">++;&nbsp; } else </span><span class="default">$ctr</span><span class="keyword">++;&nbsp; &nbsp;&nbsp; </span><span class="default">?&gt;</span> <br />
Thanks,<br />
Arun</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53244""></a>
  <div class="note">
   <strong class="user">brian dot cairns dot remove dot this at commerx dot com</strong>
   <a href="#53244" class="date">26-May-2005 12:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was looking for a function to tokenize a string, taking double-quoted inline strings into account (for breaking up search queries, for example), but none of the ones I found seemed particularly efficient or elegant, so I wrote my own.&nbsp; Here it is:<br />
<br />
&lt;?<br />
// split a string into an array of space-delimited tokens, taking double-quoted strings into account<br />
function tokenizeQuoted($string)<br />
{<br />
&nbsp;&nbsp;&nbsp; for($tokens=array(), $nextToken=strtok($string, ' '); $nextToken!==false; $nextToken=strtok(' '))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($nextToken{0}=='"')<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $nextToken = $nextToken{strlen($nextToken)-1}=='"' ? <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; substr($nextToken, 1, -1) : substr($nextToken, 1) . ' ' . strtok('"');<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $tokens[] = $nextToken;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $tokens;<br />
}<br />
?&gt;<br />
<br />
Example:<br />
<br />
$tokens = tokenizeQuoted('this is "my test string" single "words" work too');<br />
<br />
Results in $tokens containing:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; this<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; is<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; my test string<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; single<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; words<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; work<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; too<br />
)<br />
<br />
Hope this helps someone.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52340""></a>
  <div class="note">
   <strong class="user">soletan at toxa dot de</strong>
   <a href="#52340" class="date">28-Apr-2005 04:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
strtok's new behaviour isn't more correct than the old one.<br />
<br />
Example: When parsing a string for a quoted-string (e.g. RFC822-header without wanting to install mailparse from PECL!) then I walk char by char and whenever I encounter a double-quote I take strtok to find the related closing double-quote in string quite easily ... this is done for improved performance.<br />
But what if there's an empty quoted-string ...<br />
<br />
Another example is then having lines like<br />
<br />
name="quoted-value"; second="another one";<br />
<br />
I get the name using strtok with '=', then I check value to be quoted, which is true and thus I take the method described before to get the quoted string. Then all what's left is<br />
<br />
; second="another one";<br />
<br />
now I advance and drop any whitespaces after current value assignment ... well users shouldn't obey to never ever in life have no whitespaces before that damn semicolon for sure, and that's why I drop that with strtok (using ';') again to get to the next optional assignment with another <br />
<br />
$s = strtok( '' )<br />
<br />
I KNOW, there are ways to work around this using trim and the alikes. But that doesn't explain why strtok is now working "correct" while it didn't do before ...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51681""></a>
  <div class="note">
   <strong class="user">cs2xz at bath dot ac dot uk</strong>
   <a href="#51681" class="date">07-Apr-2005 06:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a method to remove all the punctuations and only put the words into an array called "$token", where variable $invalid lists all the punctuations and "\xxx" are the octal numbers of punctuations. At the end, dispalys total number of words in $string and the 4th words in the string.<br />
<br />
$string = "Hello,&nbsp; &nbsp;&nbsp; $%^\n\\\"jeff!!!!\"/. 'How are you!'";<br />
$invalid = "\40\41\42\43\44\45\46\47\48\49\50\51\52\53 \54\55\56\57\72\73\74\75\76 \77\100\133\134\135\136\137\138\139\140 \173\174\175\176\n\r\t";<br />
<br />
$tok = strtok($string, $invalid);<br />
while ($tok) {<br />
&nbsp;&nbsp; echo "Word=$tok&lt;br&gt;";<br />
&nbsp;&nbsp; $token[]=$tok;<br />
&nbsp;&nbsp; $tok = strtok($invalid);<br />
}<br />
<br />
// displays the number of words in the string and the 4th word<br />
echo "Number of token: " . count($token) . "&lt;br&gt;";<br />
echo $token[3];</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46089""></a>
  <div class="note">
   <strong class="user">James</strong>
   <a href="#46089" class="date">28-Sep-2004 06:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be very careful with using strtok if there's any chance that you may be calling other functions that may use strtok as well.&nbsp; If any other function that you call while parsing the string decides to call strtok as well, it will clobber the internal string pointer being used by strtok and you may get unexpected results.&nbsp; Here's some code to explain what I mean:<br />
<br />
function parse_string2($string2) {<br />
&nbsp;&nbsp;&nbsp; for($tok = strtok($string2, '.'); $tok !== false; $tok = strtok(".")) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo $tok;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
$string1 = "1.2.3.4.!.8.9";<br />
$string2 = "5.6.7";<br />
<br />
for($word = strtok($string1, '.'); $word !== false; $word = strtok(".")) {<br />
&nbsp;&nbsp;&nbsp; if ($word == '!') {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo parse_string2($string2);<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo $word;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
If I didn't know the internals of the function parse_string2 (say someone else develops that), but all I know is that parse_string2 should print out 567, then my expected output might be:<br />
<br />
123456789<br />
<br />
Instead, you only get: 1234567.<br />
<br />
It would be interesting if they could implement a strtok_r where you could explicitly denote which string to tokenize.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43381""></a>
  <div class="note">
   <strong class="user">manicdepressive at mindless dot com</strong>
   <a href="#43381" class="date">19-Jun-2004 06:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&lt;pre&gt;<span class="default">&lt;?php<br />
</span><span class="comment">/** get leading, trailing, and embedded separator tokens that were 'skipped'<br />
if for some ungodly reason you are using php to implement a simple parser that <br />
needs to detect nested clauses as it builds a parse tree */<br />
<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">"(((alpha(beta))(gamma))"</span><span class="keyword">;<br />
<br />
</span><span class="default">$seps </span><span class="keyword">= </span><span class="string">'()'</span><span class="keyword">;<br />
</span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">( </span><span class="default">$str</span><span class="keyword">,</span><span class="default">$seps </span><span class="keyword">); </span><span class="comment">// return false on empty string or null<br />
</span><span class="default">$cur </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;&nbsp; &nbsp; &nbsp; <br />
</span><span class="default">$dumbDone </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />
</span><span class="default">$done </span><span class="keyword">= (</span><span class="default">FALSE</span><span class="keyword">===</span><span class="default">$tok</span><span class="keyword">);<br />
while (!</span><span class="default">$done</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="comment">// process skipped tokens (if any at first iteration) (special for last)<br />
&nbsp;&nbsp; </span><span class="default">$posTok </span><span class="keyword">= </span><span class="default">$dumbDone </span><span class="keyword">? </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) : </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$tok</span><span class="keyword">, </span><span class="default">$cur </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$skippedMany </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$cur</span><span class="keyword">, </span><span class="default">$posTok</span><span class="keyword">-</span><span class="default">$cur </span><span class="keyword">); </span><span class="comment">// false when 0 width<br />
&nbsp;&nbsp; </span><span class="default">$lenSkipped </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$skippedMany</span><span class="keyword">); </span><span class="comment">// 0 when false<br />
&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">0</span><span class="keyword">!==</span><span class="default">$lenSkipped</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$last </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$skippedMany</span><span class="keyword">) -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">$last</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$skipped </span><span class="keyword">= </span><span class="default">$skippedMany</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cur </span><span class="keyword">+= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$skipped</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"skipped: </span><span class="default">$skipped</span><span class="string">\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; if (</span><span class="default">$dumbDone</span><span class="keyword">) break; </span><span class="comment">// this is the only place the loop is terminated<br />
<br />
&nbsp;&nbsp; // process current tok<br />
&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"curr tok: "</span><span class="keyword">.</span><span class="default">$tok</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; </span><span class="comment">// update cursor<br />
&nbsp;&nbsp; </span><span class="default">$cur </span><span class="keyword">+= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$tok</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; </span><span class="comment">// get any next tok<br />
&nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">$dumbDone</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$seps</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$dumbDone </span><span class="keyword">= (</span><span class="default">FALSE</span><span class="keyword">===</span><span class="default">$tok</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// you're not really done till you check for trailing skipped<br />
&nbsp;&nbsp; </span><span class="keyword">}<br />
};<br />
</span><span class="default">?&gt;</span>&lt;/pre&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40645""></a>
  <div class="note">
   <strong class="user">DethMetal Jeff</strong>
   <a href="#40645" class="date">10-Mar-2004 10:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to parse through a very large delimited text file (such as a word list) combine strtok with file_get_contents.&nbsp; It is much faster than all of the other alternatives i have found (using file() to parse the file into an array, reading the file line by line using fgets())<br />
<br />
&nbsp; $dictionary=file_get_contents('path/to/dictionary', 1);<br />
&nbsp; <br />
&nbsp; //check that the file was read properly<br />
&nbsp; if(!$dictionary){<br />
&nbsp;&nbsp;&nbsp; return("read error");<br />
&nbsp; }<br />
&nbsp; <br />
&nbsp; //dictionary is \n delimited<br />
&nbsp; $tok=strtok($dictionary, "\n");<br />
&nbsp; //loop through until we reach the end of the string<br />
&nbsp; while($tok){<br />
&nbsp;&nbsp;&nbsp; //do whatever it is you need to do with the $tok string here<br />
&nbsp;&nbsp;&nbsp; $tok=strtok("\n"); //get next string<br />
&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38430""></a>
  <div class="note">
   <strong class="user">torsten at KILL_ALL_SPAM dot dargers dot de</strong>
   <a href="#38430" class="date">20-Dec-2003 08:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware! This function cannot be used to start a recursion during the loop. Sh..<br />
<br />
You have to collect the results in an array and then cycle the recursion through that array.<br />
<br />
Example:<br />
$word=strtok($line,TOKENS);<br />
while ($word) {<br />
<br />
&nbsp;&nbsp; // DO NOT START RECURSION HERE USING $word PARAMETER<br />
<br />
&nbsp; $words[] = $word;<br />
<br />
}<br />
<br />
foreach( $words as $word ) {<br />
<br />
&nbsp;&nbsp; *RECURSE*($word);<br />
<br />
}<br />
<br />
// This seems very silly but as the function is not instantiated between recursions it cannot work directly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32339""></a>
  <div class="note">
   <strong class="user">jrust AT rustyparts DOT com</strong>
   <a href="#32339" class="date">23-May-2003 07:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Had a website which was using way too many of the old functionality of strtok to convert to the new &gt;PHP 4.1.0 way so I wrote this function to mimic the way strtok was done prior to 4.1.0<br />
<br />
function strtok_old($string, $delim = null) {<br />
&nbsp;&nbsp;&nbsp; static $origDelim, $origString, $origPos;<br />
&nbsp;&nbsp;&nbsp; if (!isset($origDelim)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $origDelim = null;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (!isset($origString)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $origString = null;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (!isset($origPos)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $origPos = null;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; // continuing an already started strtok<br />
&nbsp;&nbsp;&nbsp; if ($string == $origDelim) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $string = $origString;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $delim = $origDelim;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; // else starting from scratch<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $origString = $string;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $origDelim = $delim;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $origPos = 0;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if ($origPos !== false &amp;&amp; $origPos &lt; strlen($string)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $newPos = strpos($string, $delim, $origPos);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $newPos = false;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; // the token wasn't found, go to end of string<br />
&nbsp;&nbsp;&nbsp; if ($newPos === false) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $newPos = strlen($string);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; $return = substr($string, $origPos, ($newPos - $origPos));<br />
&nbsp;&nbsp;&nbsp; $origPos = ++$newPos;<br />
&nbsp;&nbsp;&nbsp; return $return;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27418""></a>
  <div class="note">
   <strong class="user">shaun at phplabs dot com</strong>
   <a href="#27418" class="date">04-Dec-2002 09:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's some code to extract the first part of a long paragraph, e.g. to use as a summary. Starting at the beginning of the paragraph it gets as many complete sentences as are necessary to contain $limit words. For example, with $limit at 20 it would return the first two sentences of the paragraph you're reading right now (the first 20 words plus the rest of the sentence in which the limit was hit). <br />
<br />
function summarize($paragraph, $limit){<br />
&nbsp; $tok = strtok($paragraph, " ");<br />
&nbsp; while($tok){<br />
&nbsp;&nbsp;&nbsp; $text .= " $tok";<br />
&nbsp;&nbsp;&nbsp; $words++;<br />
&nbsp;&nbsp;&nbsp; if(($words &gt;= $limit) &amp;&amp; ((substr($tok, -1) == "!")||(substr($tok, -1) == ".")))<br />
&nbsp;&nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; $tok = strtok(" ");<br />
&nbsp; }<br />
return ltrim($text);<br />
}<br />
<br />
Might be a better way to do this, but it worked for me. Hope you find it useful!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21197""></a>
  <div class="note">
   <strong class="user">desolate19 at NOSPAM dot hotmail dot com</strong>
   <a href="#21197" class="date">02-May-2002 03:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is yet another explanation of strtok for the explode/split comments.<br />
<br />
You can do things with strtok that you can't do with explode/split. explode breaks a string using another string, split breaks a string using a regular expression.&nbsp; strtok breaks a string using single _characters_ , but the best part is you can use multiple characters at the same time.<br />
<br />
For example, if you are accepting user input and aren't sure how the user will decide to divide up their data you could choose to tokenize on spaces, hyphens, slashes and backslashes ALL AT THE SAME TIME:<br />
<br />
<span class="default">&lt;?PHP<br />
<br />
$teststr </span><span class="keyword">= </span><span class="string">"blah1 blah2/blah3-blah4\\blah5"</span><span class="keyword">;<br />
<br />
</span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$teststr</span><span class="keyword">,</span><span class="string">" /-\\"</span><span class="keyword">);<br />
while (</span><span class="default">$tok </span><span class="keyword">!== </span><span class="default">FALSE</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$toks</span><span class="keyword">[] = </span><span class="default">$tok</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">" /-\\"</span><span class="keyword">);<br />
}<br />
<br />
while (list(</span><span class="default">$k</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$toks</span><span class="keyword">))<br />
{<br />
&nbsp; print (</span><span class="string">"</span><span class="default">$k</span><span class="string"> =&gt; </span><span class="default">$v</span><span class="string">&amp;lt;BR&amp;gt;\n"</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
/* OUTPUT:<br />
0 =&gt; blah1<br />
1 =&gt; blah2<br />
2 =&gt; blah3<br />
3 =&gt; blah4<br />
4 =&gt; blah5<br />
*/<br />
<br />
You can't do that with explode, and this should be faster than using split because split uses regular expressions.<br />
<br />
And for the comments about explode/split putting your output into an array... as you can see, it's not hard to work with arrays in PHP.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="17496""></a>
  <div class="note">
   
   <a href="#17496" class="date">11-Dec-2001 12:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The example is unnecessarily confusing for beginners.<br />
<br />
1) It is NOT strtok that fails when the returned string evaluates <br />
to false in conditional expression, it is the loop test. A correct test is <br />
while($tok !== false)<br />
<br />
2) the same functionality (AS THE EXAMPLE) can be obtained with <br />
explode. Note that if you only need the first few tokens you can <br />
put a limit on explode!! read the manual :)<br />
array explode (string separator, string string [, INT LIMIT]) <br />
<br />
What you can NOT do with explode (or split) is changing the <br />
separator after a token is returned, as for example, when parsing a <br />
string along a simple format :<br />
<br />
$styleStr = "color:#FFFFFF;font-size:12";<br />
$key = strtok($styleStr,":");<br />
while ($key !== false){<br />
&nbsp;$styleTab[$key]= strtok(";"); // do not change the target <br />
&nbsp;$key = strtok(":"); // string, just the separator list<br />
}<br />
<br />
$styleTab is array("color"=&gt;"#FFFFFF","font-size"=&gt;"12")<br />
<br />
If you need the remaining of the string do :<br />
$remaining = strtok(''); //(empty separator)<br />
<br />
Ivan</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="11294""></a>
  <div class="note">
   <strong class="user">slt at municipium dot com dot pl</strong>
   <a href="#11294" class="date">14-Feb-2001 11:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As 'mckay' wrote, strtok 2nd argument is a list of tokens, not a string delimiter. It's not so obvious as one may think and it may be confusing for beginners like me. So, in the docs, it should state sth. like that<br />
strtok(string where2search, char token2cut).<br />
And for the above split-lover =) 'tysonlt' -&gt; it's better to use explode bcoz it's lighter than split (to quote original manual: "(...) use explode(), which doesn't incur the overhead of the regular expression engine")<br />
regards,<br />
&nbsp;&nbsp; &nbsp; StarLight</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="8876""></a>
  <div class="note">
   <strong class="user">tysonlt at spamless dot webmedia dot com dot au</strong>
   <a href="#8876" class="date">03-Oct-2000 03:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Why use strtok at all?<br />
<br />
If it's so flaky, why not just use split?<br />
<br />
eg.<br />
$token_array = split("$delim", $string);<br />
<br />
Then you can use all the nice array functions on it! :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="7817""></a>
  <div class="note">
   <strong class="user">David dot Mazur at student dot kuleuven dot ac dot be</strong>
   <a href="#7817" class="date">16-Aug-2000 04:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to tokenize only part of the string, and store the "untokenized" part in some<br />
variable, you have to call strtok one last time with separator "" (i.e. the empty string).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.strstr.html">strstr</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.strtolower.html">strtolower</a></div>
 <div class="up"><a href="ref.strings.html">String Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
