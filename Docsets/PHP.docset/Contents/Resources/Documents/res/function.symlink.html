<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Creates a symbolic link</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.stat.html">stat</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.tempnam.html">tempnam</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.symlink" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">symlink</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">symlink</span> &mdash; <span class="dc-title">Creates a symbolic link</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.symlink-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><b>symlink</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$target</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$link</tt></span>
   )</div>

  <p class="para rdfs-comment">
   <span class="function"><b>symlink()</b></span> creates a symbolic link to the existing
   <i><tt class="parameter">target</tt></i> with the specified name
   <i><tt class="parameter">link</tt></i>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.symlink-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">target</tt></i></span>
     <dd>

      <p class="para">
       Target of the link.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">link</tt></i></span>
     <dd>

      <p class="para">
       The link name.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.symlink-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <b><tt>TRUE</tt></b> on success or <b><tt>FALSE</tt></b> on failure.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.symlink-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle">
       <td align="left">5.3.0</td>
       <td align="left">
        This function is now available on Windows platforms  (Vista, Server 
        2008 or greater).
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.symlink-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-2229">
    <p><b>Example #1 Create a symbolic link</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$target&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'uploads.php'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$link&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'uploads'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">symlink</span><span style="color: #007700">(</span><span style="color: #0000BB">$target</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$link</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #0000BB">readlink</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.symlink-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><b class="note">Note</b>: 
   <span class="simpara">
    For Windows only: This function will only function if the 
    system you run PHP from is Windows Vista/Windows Server 2008 
    or greater. Windows versions prior to that does not support 
    symbolic links.
   </span>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.symlink-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.link.html" class="function" rel="rdfs-seeAlso">link()</a> - Create a hard link</span></li>
    <li class="member"><span class="function"><a href="function.readlink.html" class="function" rel="rdfs-seeAlso">readlink()</a> - Returns the target of a symbolic link</span></li>
    <li class="member"><span class="function"><a href="function.linkinfo.html" class="function" rel="rdfs-seeAlso">linkinfo()</a> - Gets information about a link</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="105030""></a>
  <div class="note">
   <strong class="user">http://www.zentralplan.de/kontakt</strong>
   <a href="#105030" class="date">22-Jul-2011 10:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Remember to use absolute paths in both $target and $link.<br />
Use $_SERVER['DOCUMENT_ROOT'] plus your desired paths.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97605""></a>
  <div class="note">
   <strong class="user">reddy1042001 at yahoo dot co dot in</strong>
   <a href="#97605" class="date">27-Apr-2010 04:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Symlinks on windows&nbsp; are created by Symlink() which accept only absolute paths&nbsp; but not relative paths .relative paths on windows are not supported for symlinks</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94562""></a>
  <div class="note">
   <strong class="user">Porjo</strong>
   <a href="#94562" class="date">11-Nov-2009 07:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Keep in mind when using a shared filesystem such as NFS, that you probably don't want to create a symbolic link with absolute paths e.g.<br />
<br />
On Server1 you are running a PHP script that needs to create a symbolic link called widget2 which links to widget1 inside an NFS share mounted on your localhost at /mnt/nfs/widgets<br />
<br />
On Server2 this same NFS share is mounted under /usr/local/widgets<br />
<br />
If you used absolute paths on Server1, then Server2 would try to reference /mnt/nfs/widgets/widget1 which it won't be able to find...<br />
<br />
You need to cd into the directory first, then create the link - that way the link will be relative. Unless you run the PHP script from the same directory where you'll be creating the symbolic links, then you can't use symlink(). Use exec() instead as follows:<br />
<br />
<span class="default">&lt;?php <br />
<br />
exec</span><span class="keyword">(</span><span class="string">"cd &lt;nfs mount path&gt;; ln -s &lt;target&gt; &lt;link_name&gt;"</span><span class="keyword">); <br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79186""></a>
  <div class="note">
   <strong class="user">ewering at gmail dot com</strong>
   <a href="#79186" class="date">14-Nov-2007 01:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function sometimes just fails to work for no appearent reason, returning FALSE and not creating a symlink. Doing the same with exec('ln -s source dest') works perfectly. I recommend using the latter.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74464""></a>
  <div class="note">
   
   <a href="#74464" class="date">12-Apr-2007 06:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Um, duh... that's all I gotta say about by previous note. Please delete it. :)<br />
<br />
Windows Vista has its own symlink program now (mklink). Hopefully future versions of PHP for Windows will have this function put it?<br />
<br />
Anyway, this will work on Vista (assuming your PHP user has the proper permissions):<br />
<span class="default">&lt;?php<br />
define</span><span class="keyword">(</span><span class="string">'SYMLINK_FILE'</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'SYMLINK_DIR'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'SYMLINK_JUNCTION'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
function </span><span class="default">symlink </span><span class="keyword">(</span><span class="default">$target</span><span class="keyword">, </span><span class="default">$link</span><span class="keyword">, </span><span class="default">$flag </span><span class="keyword">= </span><span class="default">SYMLINK_FILE</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; switch (</span><span class="default">$flag</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; case </span><span class="default">SYMLINK_DIR</span><span class="keyword">: </span><span class="default">$pswitch </span><span class="keyword">= </span><span class="string">'/d'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; case </span><span class="default">SYMLINK_JUNCTION</span><span class="keyword">: </span><span class="default">$pswitch </span><span class="keyword">= </span><span class="string">'/j'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; case </span><span class="default">SYMLINK_FILE</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; default: </span><span class="default">$pswitch </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">; break;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Change / to \ because it will break otherwise.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$target </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">, </span><span class="string">'\\'</span><span class="keyword">, </span><span class="default">$target</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$link </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">, </span><span class="string">'\\'</span><span class="keyword">, </span><span class="default">$link</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">exec</span><span class="keyword">(</span><span class="string">'mklink ' </span><span class="keyword">. </span><span class="default">$pswitch </span><span class="keyword">. </span><span class="string">' "' </span><span class="keyword">. </span><span class="default">$link </span><span class="keyword">. </span><span class="string">'" "' </span><span class="keyword">. </span><span class="default">$target </span><span class="keyword">. </span><span class="string">'"'</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74091""></a>
  <div class="note">
   <strong class="user">Numien</strong>
   <a href="#74091" class="date">23-Mar-2007 02:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The one difference to using symlinks for controlled file access vs. readfile() is that the HTTP server will handle content-type of the symlink automatically.<br />
<br />
If you always want it to be downloaded, this can be a negative point. However, if you want a file of non-predefined type to be viewable in the browser, this can be a real asset.<br />
<br />
Of course, you can use fileinfo/mime-magic to do that, but those require a module which isn't always available on shared hosting.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70927""></a>
  <div class="note">
   
   <a href="#70927" class="date">04-Nov-2006 04:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&lt;?<br />
<br />
/**<br />
&nbsp;* A function to emulate symbolic links on Windows.<br />
&nbsp;* Uses the junction utility available at:<br />
&nbsp;* <a href="http://www.sysinternals.com" rel="nofollow" target="_blank">http://www.sysinternals.com</a><br />
&nbsp;* Note that this will only work on NTFS volumes.<br />
&nbsp;*<br />
&nbsp;* The syntax of the junction utility is:<br />
&nbsp;* junction &lt;junction directory&gt; &lt;junction target&gt;<br />
&nbsp;*<br />
&nbsp;* Note that the parameter order of the Junction command<br />
&nbsp;* is the reverse of the symlink function!<br />
&nbsp;*<br />
&nbsp;* @param string $target<br />
&nbsp;* @param string $link<br />
&nbsp;*/<br />
function _symlink( $target, $link ) {<br />
&nbsp; if ($_SERVER['WINDIR'] || $_SERVER['windir']) {<br />
&nbsp;&nbsp;&nbsp; exec('junction "' . $link . '" "' . $target . '"');<br />
&nbsp; } else {<br />
&nbsp;&nbsp;&nbsp; symlink($target,$link);<br />
&nbsp; }<br />
}<br />
<br />
function _unlink($link ) {<br />
&nbsp; if ($_SERVER['WINDIR'] || $_SERVER['windir']) {<br />
&nbsp;&nbsp;&nbsp; exec('junction -d "' . $link . '"');<br />
&nbsp; } else {<br />
&nbsp;&nbsp;&nbsp; unlink($link);<br />
&nbsp; }<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70711""></a>
  <div class="note">
   <strong class="user">JohnW</strong>
   <a href="#70711" class="date">24-Oct-2006 12:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
tcknetwork dot com's solution for Win32 seemed attractive but darned if I could make it work so there seem to be some further notes needed. One obvious problem is in the line:<br />
<br />
exec("linkd ".$p.$t." ".$p.$l);<br />
<br />
Note that since $p (from the line above) is the absolute path to the directory of the current script, the $t and $l are only defined relative to that path. And should not contain any spaces. I tried putting single quotes around the link and target but it didn't help.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61904""></a>
  <div class="note">
   <strong class="user">anything at the domain williamfrantz.com</strong>
   <a href="#61904" class="date">14-Feb-2006 05:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Olszewski_marek makes a good suggestion, but the readfile() function can also be used to obscure file downloads from end users.<br />
<br />
/* Setup the file that will be sent */<br />
$downloadDir = "some/secret/directory/";<br />
$file = "theFileName.dat";<br />
<br />
/* Required for IE, otherwise Content-disposition is ignored */<br />
if(ini_get('zlib.output_compression')) ini_set('zlib.output_compression', 'Off');<br />
<br />
/* Output HTTP headers that force "Save As" dialog */<br />
header("Pragma: public");<br />
header("Expires: 0");<br />
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");<br />
header("Cache-Control: private",false);<br />
header("Content-Type: application/octet-stream");<br />
header("Content-Disposition: attachment; filename=\\"$file\\";");<br />
header("Content-Transfer-Encoding: binary");<br />
header("Content-Length: ".@filesize($downloadDir.$file));<br />
<br />
/* Prevent the script from timing out for large files */<br />
set_time_limit(0);<br />
<br />
/* Send the entire file using @ to ignore all errors */<br />
@readfile($downloadDir.$file);<br />
<br />
/* Exit immediately so no garbage follows the file contents */<br />
exit;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60196""></a>
  <div class="note">
   
   <a href="#60196" class="date">29-Dec-2005 07:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Olszewski seems pretty good, but just to boost the security a bit, the fifth line of his script should read<br />
&lt;?<br />
...<br />
&nbsp;&nbsp;&nbsp; $q = rand(1,26); <br />
...<br />
?&gt;<br />
<br />
instead of rand(1,24).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56654""></a>
  <div class="note">
   <strong class="user">contact at tcknetwork dot com</strong>
   <a href="#56654" class="date">11-Sep-2005 08:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To make your code portable on unix AND win32, do the following<br />
1. Download <a href="http://www.dynawell.com/reskit/microsoft/win2000/linkd.zip" rel="nofollow" target="_blank">http://www.dynawell.com/reskit/microsoft/win2000/linkd.zip</a><br />
2. Unzip, put linkd.exe in C:\Windows\System32 or C:\WINNT\System32<br />
3. Include in your code the following<br />
&lt;?<br />
function _syslink($t /*target*/ ,$l /*link*/ ) {<br />
&nbsp;if ($_SERVER["WINDIR"]) {<br />
&nbsp; $p=dirname($_SERVER["SCRIPT_FILENAME"])."/";<br />
&nbsp; exec("linkd ".$p.$t." ".$p.$l);<br />
&nbsp;} else syslink($t,$l);<br />
}<br />
function _unlink($l /*link*/ ) {<br />
&nbsp;if ($_SERVER["WINDIR"]) {<br />
&nbsp; $p=dirname($_SERVER["SCRIPT_FILENAME"])."/";<br />
&nbsp; exec("linkd ".$p.$l." /D");<br />
&nbsp;} else unlink($l);<br />
}<br />
?&gt;<br />
4. Enjoy<br />
_symlink(TARGET,LINK) works like symlink() on *nix<br />
_unlink(LINK) to delete properly the link created</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50975""></a>
  <div class="note">
   <strong class="user">aircha at cix dot co dot uk</strong>
   <a href="#50975" class="date">15-Mar-2005 08:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Olszewski's method of creating downloadable links on the fly is pretty good.<br />
<br />
I use a different technique under Apache where if you want a file, you might use a url like:<br />
<br />
mydomain.com/files/mysecretfile.doc<br />
<br />
But in fact Apache redirects this to a script with a url like:<br />
<br />
mydomain.com/utilities/downloadfile.php?filename=mysecretfile.doc<br />
<br />
(The browser address bar will still show the first url).<br />
<br />
The script downloadfile.php can then handle all the mucky stuff like checking session variables to see if someone is logged on, whether they have access to mysecretfile.doc, and if you want to encrypt before download.<br />
<br />
An advantage of this is that the php code to achieve the equivalent of Olszewski's is shorter, so might execute faster. But more importantly, a casual hacker might think all he has to do is find myverysecurefile.doc under the /home/user/public_html/files/mysecretfile.doc, or copy the url - but there's nothing there! He won't find it or get an Apache error page.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32509""></a>
  <div class="note">
   <strong class="user">veronique at talafone dot com</strong>
   <a href="#32509" class="date">29-May-2003 02:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This might sound obvious, but sometimes these details slip from our minds...<br />
Make sure the directory in which you are trying to create the symbolic link (AND the directory you are trying to link to in the case of directory linking) has the proper permissions, or you will get a "permission denied" from PHP. If you use for example, <br />
echo shell_exec("ln -sv $target $name")<br />
you might get the correct "link created" message, but without the link being actually created.<br />
<br />
It's probably the same thing with hard links, I just haven't tried it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18867""></a>
  <div class="note">
   <strong class="user">stephen at opido dot com</strong>
   <a href="#18867" class="date">07-Feb-2002 12:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Faking Symlinks on Windows (Win2K + NTFS)<br />
<br />
Every once in a while I'll bang my head against something really difficult. I needed to make symlinks, Windows won't let me. The workaround is a couple files in the Win2K Resource Kit called linkd.exe and delrp.exe<br />
<br />
<a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;q205524" rel="nofollow" target="_blank">http://support.microsoft.com/default.aspx?scid=kb;EN-US;q205524</a><br />
<br />
It only works on folders as far as I can tell, there is another program from SysInternals called Junction which will do both (although I only had success with files, not folders).<br />
<br />
<a href="http://www.sysinternals.com/ntw2k/source/misc.shtml#junction" rel="nofollow" target="_blank">http://www.sysinternals.com/ntw2k/source/misc.shtml#junction</a><br />
<br />
I hope this helps those who have experienced this same problem. One step closer to portable applications :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="9960""></a>
  <div class="note">
   <strong class="user">olszewski_marek at yahoo dot com</strong>
   <a href="#9960" class="date">04-Dec-2000 08:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a simple way to control who downloads your files...<br />
<br />
You will have to set: $filename, $downloaddir, $safedir and $downloadURL.<br />
<br />
Basically $filename is the name of a file, $downloaddir is any dir on your server, $safedir is a dir that is not accessible by a browser that contains a file named $filename and $downloadURL is the URL equivalent of your $downloaddir.<br />
<br />
The way this works is when a user wants to download a file, a randomly named dir is created in the $downloaddir, and a symbolic link is created to the file being requested.&nbsp; The browser is then redirected to the new link and the download begins.<br />
<br />
The code also deletes any past symbolic links created by any past users before creating one for itself.&nbsp; This in effect leaves only one symbolic link at a time and prevents past users from downloading the file again without going through this script.&nbsp; There appears to be no problem if a symbolic link is deleted while another person is downloading from that link.<br />
<br />
This is not too great if not many people download the file since the symbolic link will not be deleted until another person downloads the same file. <br />
<br />
Anyway enjoy:<br />
<br />
<span class="default">&lt;?php<br />
$letters </span><span class="keyword">= </span><span class="string">'abcdefghijklmnopqrstuvwxyz'</span><span class="keyword">;<br />
</span><span class="default">srand</span><span class="keyword">((double) </span><span class="default">microtime</span><span class="keyword">() * </span><span class="default">1000000</span><span class="keyword">);<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">4</span><span class="keyword">,</span><span class="default">12</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; </span><span class="default">$q </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">24</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">$string </span><span class="keyword">. </span><span class="default">$letters</span><span class="keyword">[</span><span class="default">$q</span><span class="keyword">];<br />
}<br />
</span><span class="default">$handle </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$downloaddir</span><span class="keyword">);<br />
while (</span><span class="default">$dir </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">)) {<br />
&nbsp;&nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$downloaddir </span><span class="keyword">. </span><span class="default">$dir</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$dir </span><span class="keyword">!= </span><span class="string">"." </span><span class="keyword">&amp;&amp; </span><span class="default">$dir </span><span class="keyword">!= </span><span class="string">".."</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; @</span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$downloaddir </span><span class="keyword">. </span><span class="default">$dir </span><span class="keyword">. </span><span class="string">"/" </span><span class="keyword">. </span><span class="default">$filename</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; @</span><span class="default">rmdir</span><span class="keyword">(</span><span class="default">$downloaddir </span><span class="keyword">. </span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);<br />
</span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$downloaddir </span><span class="keyword">. </span><span class="default">$string</span><span class="keyword">, </span><span class="default">0777</span><span class="keyword">);<br />
</span><span class="default">symlink</span><span class="keyword">(</span><span class="default">$safedir </span><span class="keyword">. </span><span class="default">$filename</span><span class="keyword">, </span><span class="default">$downloaddir </span><span class="keyword">. </span><span class="default">$string </span><span class="keyword">. </span><span class="string">"/" </span><span class="keyword">. </span><span class="default">$filename</span><span class="keyword">);<br />
</span><span class="default">Header</span><span class="keyword">(</span><span class="string">"Location: " </span><span class="keyword">. </span><span class="default">$downloadURL </span><span class="keyword">. </span><span class="default">$string </span><span class="keyword">. </span><span class="string">"/" </span><span class="keyword">. </span><span class="default">$filename</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.stat.html">stat</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.tempnam.html">tempnam</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
