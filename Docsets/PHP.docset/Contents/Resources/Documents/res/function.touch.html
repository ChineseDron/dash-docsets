<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Sets access and modification time of file</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.tmpfile.html">tmpfile</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.umask.html">umask</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.touch" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">touch</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">touch</span> &mdash; <span class="dc-title">Sets access and modification time of file</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.touch-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><b>touch</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$filename</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$time</tt><span class="initializer"> = time()</span></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$atime</tt></span>
  ]] )</div>

  <p class="para rdfs-comment">
   Attempts to set the access and modification times of the file named in the
   <i><tt class="parameter">filename</tt></i> parameter to the value given in
   <i><tt class="parameter">time</tt></i>. 
   Note that the access time is always modified, regardless of the number
   of parameters.
  </p>
  <p class="para">
   If the file does not exist, it will be created. 
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.touch-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">filename</tt></i></span>
     <dd>

      <p class="para">
       The name of the file being touched.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">time</tt></i></span>
     <dd>

      <p class="para">
       The touch time. If <i><tt class="parameter">time</tt></i> is not supplied, 
       the current system time is used.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">atime</tt></i></span>
     <dd>

      <p class="para">
       If present, the access time of the given filename is set to 
       the value of <i><tt class="parameter">atime</tt></i>. Otherwise, it is set to
       the value passed to the <i><tt class="parameter">time</tt></i> parameter.
       If neither are present, the current system time is used.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.touch-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <b><tt>TRUE</tt></b> on success or <b><tt>FALSE</tt></b> on failure.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.touch-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle">
       <td align="left">5.3.0</td>
       <td align="left">
        It became possible to change the modification time of a directory 
        under Windows.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.touch-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-2232">
    <p><b>Example #1 <span class="function"><b>touch()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">touch</span><span style="color: #007700">(</span><span style="color: #0000BB">$filename</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$filename&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;modification&nbsp;time&nbsp;has&nbsp;been&nbsp;changed&nbsp;to&nbsp;present&nbsp;time'</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Sorry,&nbsp;could&nbsp;not&nbsp;change&nbsp;modification&nbsp;time&nbsp;of&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$filename</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2233">
    <p><b>Example #2 <span class="function"><b>touch()</b></span> using the <i><tt class="parameter">time</tt></i> parameter</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;This&nbsp;is&nbsp;the&nbsp;touch&nbsp;time,&nbsp;we'll&nbsp;set&nbsp;it&nbsp;to&nbsp;one&nbsp;hour&nbsp;in&nbsp;the&nbsp;past.<br /></span><span style="color: #0000BB">$time&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()&nbsp;-&nbsp;</span><span style="color: #0000BB">3600</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Touch&nbsp;the&nbsp;file<br /></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">touch</span><span style="color: #007700">(</span><span style="color: #DD0000">'some_file.txt'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$time</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Whoops,&nbsp;something&nbsp;went&nbsp;wrong...'</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Touched&nbsp;file&nbsp;with&nbsp;success'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.touch-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><b class="note">Note</b>: <p class="para">Note that time resolution may differ
from one file system to another.</p></p></blockquote>
  <div class="warning"><b class="warning">Warning</b>
   <p class="para">
    Prior to PHP 5.3.0 it was not possible to change the modification time 
    of a directory with this function under Windows.
   </p>
  </div>
 </div>

 
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="103343""></a>
  <div class="note">
   <strong class="user">John Doe</strong>
   <a href="#103343" class="date">08-Apr-2011 12:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Mac OS X, touch() will modify both filectime() and filemtime().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100337""></a>
  <div class="note">
   <strong class="user">bosslog at gmail dot com</strong>
   <a href="#100337" class="date">08-Oct-2010 02:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I has passed a small test to check which function is faster to create a new file. <br />
<br />
file_put_contents vs touch<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">100</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
{<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="string">'dir/file'</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Average time: 0,1145s<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">100</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
{<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">touch</span><span class="keyword">(</span><span class="string">'dir/file'</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Average time: 0,2322s<br />
<br />
So, file_put_contents is faster than touch, about two times.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97239""></a>
  <div class="note">
   <strong class="user">chris dot dallaire at csquaredsystems dot com</strong>
   <a href="#97239" class="date">09-Apr-2010 07:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed to use this to touch the /etc/cron.d directory when I updated some files in there. I know the docs say this isn't necessary, but I'm finding that i need to do it in order form my changes to be picked up quickly. <br />
<br />
I ran into the permissions error as well and I found that using chmod 777 /etc/cron.d does the trick.<br />
<br />
So, you should be able to use the PHP touch function on a directory that has open write access.<br />
<br />
Of course, this isn't the most secure approach, but in our application it's not a big deal for that folder to not be super secure.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96221""></a>
  <div class="note">
   <strong class="user">dotpointer at gmail dot com</strong>
   <a href="#96221" class="date">15-Feb-2010 03:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding the permission error, also discussed in other notes:<br />
<br />
Warning: touch() [function.touch]: Utime failed: Operation not permitted in /directory/file.php&nbsp; on line X<br />
<br />
On my system PHP can touch files it does not own as long as the file has at least chmod xx6, BUT it can not set modification time.<br />
<br />
This works:<br />
<br />
touch('notmyfile');<br />
# -rw-rw-rw-&nbsp; 1 root&nbsp;&nbsp; root&nbsp; &nbsp; &nbsp;&nbsp; 0 2010-02-15 23:39 notmyfile<br />
<br />
This gives error above:<br />
<br />
touch('notmyfile', time());<br />
# -rw-rw-rw-&nbsp; 1 root&nbsp;&nbsp; root&nbsp; &nbsp; &nbsp;&nbsp; 0 2010-02-15 23:39 notmyfile<br />
<br />
This works:<br />
touch('notmyfile', time());<br />
# -rw-rw-rw-&nbsp; 1 apache root&nbsp; &nbsp; &nbsp;&nbsp; 0 2010-02-15 23:41 notmyfile<br />
<br />
Note that user is APACHE and not NOBODY. <br />
On some systems with apache web server, PHP runs as apache. <br />
To check what user your PHP run as, you may try this to find out:<br />
<br />
echo shell_exec('whoami');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93787""></a>
  <div class="note">
   <strong class="user">ernst at cron-it dot de</strong>
   <a href="#93787" class="date">29-Sep-2009 06:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To touch a file without being owner, it is much easier:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">touchFile</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88028""></a>
  <div class="note">
   <strong class="user">contacto at lucasfonzalida.com.ar</strong>
   <a href="#88028" class="date">06-Jan-2009 11:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This example resolve some drawbacks with DayLight Saving Flag and TimeZone in Windows with native function 'touch()' <br />
See function comments for details<br />
<br />
&nbsp;&nbsp;&nbsp; Usage:<br />
&nbsp;&nbsp;&nbsp; ------&nbsp; &nbsp; <br />
<span class="default">&lt;?php&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// mtime of source File<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$time </span><span class="keyword">= </span><span class="default">filemtime</span><span class="keyword">(</span><span class="string">"/source.txt"</span><span class="keyword">);&nbsp; &nbsp; <br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Sync mtime at destination file with source file<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">betouch</span><span class="keyword">(</span><span class="string">"/destination.txt"</span><span class="keyword">,</span><span class="default">$time</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp;&nbsp; * Function: Best Effort Touch<br />
&nbsp;&nbsp;&nbsp; * Update recursively mtime at especified file and verify.<br />
&nbsp;&nbsp;&nbsp; * <br />
&nbsp;&nbsp;&nbsp; * This function, resolve 2 drawbacks with native function 'touch()' on Windows:<br />
&nbsp;&nbsp;&nbsp; * - touch() Return incorrect result (PHP v5.2.5)<br />
&nbsp;&nbsp;&nbsp; * - touch() Is affected by DayLight Saving Flag and TimeZone<br />
&nbsp;&nbsp;&nbsp; *<br />
&nbsp;&nbsp;&nbsp; * @access public&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; * @param&nbsp; String&nbsp;&nbsp; $file&nbsp; &nbsp; Full path to target file<br />
&nbsp;&nbsp;&nbsp; * @param&nbsp; int&nbsp; &nbsp; &nbsp; $time&nbsp; &nbsp; Unix Timestamp<br />
&nbsp;&nbsp;&nbsp; * @param&nbsp; int&nbsp; &nbsp; &nbsp; $offset&nbsp; Offset (Default: 0)<br />
&nbsp;&nbsp;&nbsp; * @return boolean<br />
&nbsp;&nbsp;&nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">betouch</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$time</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Add offset to requested mtime<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_mtime </span><span class="keyword">= </span><span class="default">$time </span><span class="keyword">+ </span><span class="default">$offset</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Calling native touch<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">touch</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$new_mtime</span><span class="keyword">, </span><span class="default">$new_mtime</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If 'touch()' return OK<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$result</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Clears file status cache<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">clearstatcache</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Get recently stored mtime at destination file <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$stored_mtime </span><span class="keyword">= </span><span class="default">filemtime</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Verify if stored is equal to requested mtime<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$stored_mtime </span><span class="keyword">== </span><span class="default">$time</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Calculate offset between stored mtime and requested mtime<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$time </span><span class="keyword">- </span><span class="default">$stored_mtime</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Recall recursively with new offset and return<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">betouch</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$time</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Native touch() fail<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
&nbsp;Lucas Fonzalida<br />
&nbsp;Buenos Aires - Argentina<br />
&nbsp;contacto at lucasfonzalida.com.ar</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87356""></a>
  <div class="note">
   <strong class="user">info at archiwumrocka dot art dot pl</strong>
   <a href="#87356" class="date">01-Dec-2008 01:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Only way to change modification date in catalogue is to create file in via touch() and dalete it with unlink():<br />
<br />
<span class="default">&lt;?php<br />
$dir&nbsp; &nbsp; </span><span class="keyword">= </span><span class="string">'temp'</span><span class="keyword">;<br />
</span><span class="default">$files1 </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
<br />
</span><span class="default">$files1 </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$files1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
<br />
foreach (</span><span class="default">$files1 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) <br />
{<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)) continue;<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">touch</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">touch</span><span class="keyword">(</span><span class="default">$val </span><span class="keyword">. </span><span class="string">"/plik.txt"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$val </span><span class="keyword">. </span><span class="string">"/plik.txt"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87315""></a>
  <div class="note">
   <strong class="user">mrgrier at yahoo dot com</strong>
   <a href="#87315" class="date">29-Nov-2008 10:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
At least on Linux, touch will not change the time on a symlink itself, but on the file/directory it points to. The only way to work around this is to unlink the symlink, then recreate it.<br />
<br />
It took a bit of searching to discover this. The OS itself provides no way to do it. Many people wondered why anyone would want to do this. I use symlinks inside a web tree to point to files outside the web tree. After a certain length of time has passed, I want the symlinks to die, so the files cannot be successfully hotlinked.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86781""></a>
  <div class="note">
   <strong class="user">ddalex at gmail dot com</strong>
   <a href="#86781" class="date">03-Nov-2008 09:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Actually, Glen is right, PHP won't touch if it is not the current owner of the file, even if the directory and files are writeable by the PHP user.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85313""></a>
  <div class="note">
   <strong class="user">Bess E. R. Wisser</strong>
   <a href="#85313" class="date">25-Aug-2008 01:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"Glen: In unix on the command-line, you can touch files you don't own - but like other comments on this page state - PHP's built in touch won't work."<br />
<br />
No, you can not modify files you don't have write access to in a multi-user environment, ever, under any circumstances. The reason why you fail to do this "in PHP" is because your httpd is most likely running as a "shared" setup, running as nobody/nobody, and your user's files aren't world-writable, and they are not owned by nobody/nobody. Change your required files to be world-writable and you can touch() them, and more.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84983""></a>
  <div class="note">
   <strong class="user">Radon8472</strong>
   <a href="#84983" class="date">08-Aug-2008 05:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Important info:<br />
<br />
touch() used on a directory always returns FALSE and prints "Permission denied" on NTFS and FAT Filesystem (tested on winXP).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84081""></a>
  <div class="note">
   <strong class="user">Jeff</strong>
   <a href="#84081" class="date">26-Jun-2008 12:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've been trying to set a filemtime into the future with touch() on PHP5.<br />
<br />
It seems touch $time has a future limit around 1000000 seconds (11 days or so). Beyond this point it reverts to a previous $time.<br />
<br />
It doesn't make much sense but I could save you hours of time.<br />
<br />
$time = time()+1500000;<br />
touch($cachedfile,$time);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78606""></a>
  <div class="note">
   <strong class="user">Glen</strong>
   <a href="#78606" class="date">18-Oct-2007 01:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In unix on the command-line, you can touch files you don't own - but like other comments on this page state - PHP's built in touch won't work.<br />
<br />
I simple alternative (on unix):<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">touch_it_good</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">exec</span><span class="keyword">(</span><span class="string">"touch </span><span class="keyword">{</span><span class="default">$filename</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75271""></a>
  <div class="note">
   <strong class="user">ilrazziatore85 AT yahoo DOT it</strong>
   <a href="#75271" class="date">21-May-2007 08:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Feathern wrote a little script for fetching files from a directory after a certain date.<br />
However the if statement (line 8) should be:<br />
<br />
if(($test[2] &gt; 2002) || (($test[2] = 2002) &amp;&amp; ($test[0] &gt; 6)) || (($test[2] = 2002) &amp;&amp; ($test[0] = 6) &amp;&amp; ($test[1] &gt; 17))){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo $filelist[$i]."\r\n";<br />
}<br />
<br />
Otherwise the script won't fetch lots of files it should.<br />
<br />
(In the example given, it should fetch all the files created after 06/17/2002, but the original script would miss files created 03/18/2003 or 11/01/2004)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74240""></a>
  <div class="note">
   <strong class="user">seocab at rit dot edu</strong>
   <a href="#74240" class="date">31-Mar-2007 08:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The script for modifying the access time without modifying the modified time is overly complicated:<br />
<br />
&lt;? touch($filename, date('U', filemtime($filename)), time()); ?&gt;<br />
<br />
Since filemtime returns a UNIX timestamp, there is no need to call date('U') so the script could be simplified to:<br />
<br />
&lt;? touch($filename,filemtime($filename),time()); ?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68227""></a>
  <div class="note">
   <strong class="user">Charles Belov</strong>
   <a href="#68227" class="date">18-Jul-2006 06:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Update the access time without updating the modified time:<br />
<br />
Unix command: touch -a filename<br />
<br />
PHP: touch(filename, date('U', filemtime(filename)), time())</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56399""></a>
  <div class="note">
   <strong class="user">spam at webmastersguide dot com</strong>
   <a href="#56399" class="date">01-Sep-2005 05:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're going to go around deleting (unlinking) files<br />
that you don't own just in order to change the modification<br />
time on the file, you darn well better chown() the file <br />
back to it's original ownership after you are done and<br />
chmod() it back to it's correct permissions.&nbsp; Otherwise <br />
you will almost certainly break things.&nbsp; Additionally the<br />
code listed for touch()ing a file you don't own should <br />
set the file creation time back to it's original time if <br />
what is wanted is to just change the modification time.<br />
Also, the code listed will break things if there is an i/o <br />
error such as disk full or too many files in the directory.<br />
Here's how the code SHOULD be written:<br />
<br />
Create the new file FIRST, rather than last, with a different<br />
name such as $file.tmp.<br />
Read the ownership, permissions, and creation time of the old file.<br />
Set permissions and creation time of the new file the same as the old.<br />
Rename the new file to the name of the old.<br />
chown() the new file to the user that owned the file it's replacing.<br />
<br />
Please be careful adding to the documentation if you've <br />
never taken programming 101.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55101""></a>
  <div class="note">
   <strong class="user">rf_public at yahoo dot co dot uk</strong>
   <a href="#55101" class="date">25-Jul-2005 12:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note: the script to touch a file you don't own will change it's owner so ensure permissions are correct or you could lose access to it</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52781""></a>
  <div class="note">
   <strong class="user">guy at forster design dot com</strong>
   <a href="#52781" class="date">12-May-2005 03:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a little workaround that allows the PHP user to touch a file it doesn't own:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; $target_file </span><span class="keyword">= </span><span class="string">"/path/to/file/filename.txt"</span><span class="keyword">; </span><span class="comment">//system filepath to your file<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$file_content </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">file</span><span class="keyword">(</span><span class="default">$target_file</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; @</span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$target_file</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$savetofile </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$target_file</span><span class="keyword">, </span><span class="string">"w"</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fputs</span><span class="keyword">(</span><span class="default">$savetofile</span><span class="keyword">, </span><span class="default">$file_content</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$savetofile</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$new_date </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"23 April 2005"</span><span class="keyword">); </span><span class="comment">// set the required date timestamp here<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">touch</span><span class="keyword">(</span><span class="default">$target_file</span><span class="keyword">,</span><span class="default">$new_date</span><span class="keyword">);<br />
&nbsp;<br />
</span><span class="default">?&gt;<br />
</span><br />
Of course, PHP needs to have write access to the folder containing the file you want to touch, but that should be easy to arrange.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24348""></a>
  <div class="note">
   <strong class="user">feathern at yahoo dot com</strong>
   <a href="#24348" class="date">13-Aug-2002 03:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Neat little script that will give you a list of all modified files in a certain folder after a certain date:<br />
<br />
$filelist = Array();<br />
$filelist = list_dir("d:\\my_folder");<br />
for($i=0;$i&lt;count($filelist);$i++){<br />
&nbsp;&nbsp;&nbsp; $test = Array();<br />
&nbsp;&nbsp;&nbsp; $test = explode("/",date("m/d/Y",filemtime($filelist[$i])));<br />
//example of files that are later then<br />
//06/17/2002<br />
&nbsp;&nbsp;&nbsp; if(($test[2] &gt; 2001) &amp;&amp; ($test[1] &gt; 16) &amp;&amp; ($test[0] &gt; 5)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo $filelist[$i]."\r\n";<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; clearstatcache();<br />
}<br />
function list_dir($dn){<br />
&nbsp;&nbsp;&nbsp; if($dn[strlen($dn)-1] != '\\') $dn.='\\';<br />
&nbsp;&nbsp;&nbsp; static $ra = array();<br />
&nbsp;&nbsp;&nbsp; $handle = opendir($dn);<br />
&nbsp;&nbsp;&nbsp; while($fn = readdir($handle)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($fn == '.' || $fn == '..') continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(is_dir($dn.$fn)) list_dir($dn.$fn.'\\');<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else $ra[] = $dn.$fn;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; closedir($handle);<br />
&nbsp;&nbsp;&nbsp; return $ra;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="15884""></a>
  <div class="note">
   <strong class="user">emilebosch at hotmail dot com</strong>
   <a href="#15884" class="date">06-Oct-2001 03:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To spare you ppl couple of hours of valuable time, you can only TOUCH a file that you own! Usually PHP is *nobody* <br />
Warm regards,<br />
Emile Bosch</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="12912""></a>
  <div class="note">
   <strong class="user">master at dreamphp dot com</strong>
   <a href="#12912" class="date">15-May-2001 11:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
$filename = "test.dat";<br />
if (!file_exists($filename)) {<br />
&nbsp; touch($filename); // Create blank file<br />
&nbsp; chmod($filename,0666);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.tmpfile.html">tmpfile</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.umask.html">umask</a></div>
 <div class="up"><a href="ref.filesystem.html">Filesystem Functions</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
