<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Installation</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="image.requirements.html">Requirements</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="image.configuration.html">Runtime Configuration</a></div>
 <div class="up"><a href="image.setup.html">Installing/Configuring</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="image.installation" class="section">
 <h2 class="title">Installation</h2>
 <p class="para">
  To enable GD-support configure PHP
  <strong class="option configure">--with-gd[=DIR]</strong>
, where DIR is the GD base
  install directory. To use the recommended bundled version of the GD library
  (which was first bundled in PHP 4.3.0), use the configure option 
  <strong class="option configure">--with-gd</strong>
.
  GD library requires <span class="productname">libpng</span> and
  <span class="productname">libjpeg</span> to compile.
 </p>
 <p class="para">
  In Windows, you&#039;ll include the GD2 DLL <var class="filename">php_gd2.dll</var> as
  an extension in <var class="filename">php.ini</var>. The GD1 DLL <var class="filename">php_gd.dll</var> was
  removed in PHP 4.3.2. Also note that the preferred truecolor image
  functions, such as <span class="function"><a href="function.imagecreatetruecolor.html" class="function">imagecreatetruecolor()</a></span>, require GD2.
 </p>
 
 <p class="para">
  Enhance the capabilities of GD to handle more image formats by specifying
  the <i>--with-XXXX</i> configure switch to your PHP configure
  line.
  <table class="doctable table">
   <caption><b>Supported image formats</b></caption>
   
    <thead valign="middle">
     <tr valign="middle">
      <th>Image Format</th>
      <th>Configure Switch</th>
     </tr>

    </thead>

    <tbody valign="middle" class="tbody">
     <tr valign="middle">
      <td align="left"><i>jpeg</i></td>
      <td align="left">
       To enable support for jpeg add
       <strong class="option configure">--with-jpeg-dir=DIR</strong>
. Jpeg 6b, 7 or 8
       are supported.
      </td>
     </tr>

     <tr valign="middle">
      <td align="left"><i>png</i></td>
      <td align="left">
       To enable support for png add
       <strong class="option configure">--with-png-dir=DIR</strong>
. Note, libpng
       requires the <a href="zlib.requirements.html" class="link">zlib library</a>,
       therefore add <strong class="option configure">--with-zlib-dir[=DIR]</strong>

       to your configure line.
      </td>
     </tr>

     <tr valign="middle">
      <td align="left"><i>xpm</i></td>
      <td align="left">
       To enable support for xpm add
       <strong class="option configure">--with-xpm-dir=DIR</strong>
. If configure
       is not able to find the required libraries, you may add the path to
       your X11 libraries.
      </td>
     </tr>

    </tbody>
   
  </table>

  <blockquote class="note"><p><b class="note">Note</b>: 
   <span class="simpara">
    When compiling PHP with libpng, you must use the same version that was
    linked with the GD library.
   </span>
  </p></blockquote>
 </p>
 <p class="para">
  Enhance the capabilities of GD to deal with different fonts by specifying
  the <i>--with-XXXX</i> configure switch to your PHP configure
  line.
  <table class="doctable table">
   <caption><b>Supported font libraries</b></caption>
   
    <thead valign="middle">
     <tr valign="middle">
      <th>Font library</th>
      <th>Configure Switch</th>
     </tr>

    </thead>

    <tbody valign="middle" class="tbody">
     <tr valign="middle">
      <td align="left"><i>FreeType 1.x</i></td>
      <td align="left">
       To enable support for FreeType 1.x add
       <strong class="option configure">--with-ttf[=DIR]</strong>
.
      </td>
     </tr>

     <tr valign="middle">
      <td align="left"><i>FreeType 2</i></td>
      <td align="left">
       To enable support for FreeType 2 add
       <strong class="option configure">--with-freetype-dir=DIR</strong>
.
      </td>
     </tr>

     <tr valign="middle">
      <td align="left"><i>T1lib</i></td>
      <td align="left">
       To enable support for T1lib (Postscript Type 1 fonts) add
       <strong class="option configure">--with-t1lib[=DIR]</strong>
.
      </td>
     </tr>

     <tr valign="middle">
      <td align="left"><i>Native TrueType string function</i></td>
      <td align="left">
       To enable support for native TrueType string function add
       <strong class="option configure">--enable-gd-native-ttf</strong>
.
      </td>
     </tr>

    </tbody>
   
  </table>

 </p>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="105155""></a>
  <div class="note">
   <strong class="user">florian</strong>
   <a href="#105155" class="date">31-Jul-2011 02:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
People having difficulties setting the --with-libdir option needs to set it like this :<br />
<br />
--with-libdir=lib64<br />
<br />
That option works fine. Doing --with-libdir=/usr/lib64 doesn't work because the configure script prepends the --prefix option before the --with-libdir option. So, doing --with-libdir=/usr/lib64 makes the configure script to look for libs in /usr/usr/lib64, which is wrong of course, and not in /usr/lib64.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104571""></a>
  <div class="note">
   <strong class="user">Joseph Marlin</strong>
   <a href="#104571" class="date">23-Jun-2011 06:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I also had to install the libgd package in addition to php5-gd:<br />
<br />
sudo apt-get install libgd2-xpm-dev*</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103507""></a>
  <div class="note">
   <strong class="user">octopus at logicaloctopus dot com</strong>
   <a href="#103507" class="date">17-Apr-2011 12:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was running PHP on a SUSE box on amazon EC2.<br />
to get gd to work all I had to do was to run:<br />
&gt; yast -i php5_gd<br />
<br />
and when that completed I just restarted apache. voila!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102971""></a>
  <div class="note">
   <strong class="user">boly38 at gmail dot com</strong>
   <a href="#102971" class="date">17-Mar-2011 05:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To get GD bundled under Ubuntu, the way to recompile php5 with gd is described here (french) <a href="http://doc.ubuntu-fr.org/modules_php#php5-gd" rel="nofollow" target="_blank">http://doc.ubuntu-fr.org/modules_php#php5-gd</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101501""></a>
  <div class="note">
   <strong class="user">lucaferr</strong>
   <a href="#101501" class="date">21-Dec-2010 05:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In Slackware 64bit (I tested 13.1) you need to make symlinks to libpng and libjpeg if you want to compile php with GD, even if you've already installed them, otherwise configure will give you a "libpng not found" error, even if you set --with-libdir=/usr/lib64 (it seems to have no effects at all). So, run these before configuring:<br />
ln -s /usr/lib64/libjpeg.so /usr/lib/libjpeg.so<br />
ln -s /usr/lib64/libpng.so /usr/lib/libpngp.so</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99856""></a>
  <div class="note">
   <strong class="user">elassoto at hotmail dot com</strong>
   <a href="#99856" class="date">10-Sep-2010 01:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have already compiled PHP and want to recompile '--with-gd', don't forget to run 'make clean' first!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95649""></a>
  <div class="note">
   <strong class="user">Larry Kluger</strong>
   <a href="#95649" class="date">13-Jan-2010 02:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On 64bit centos, needed to create links from lib64 to lib. Php seems to insist on looking in lib, even with "with-jpeg-dir" config.<br />
<br />
Eg<br />
<br />
ln -s /usr/lib64/libjpeg.so.62.0.0&nbsp; /usr/lib/libjpeg.so<br />
ln -s /usr/lib64/libpng.so.3.10.0&nbsp; /usr/lib/libpng.so<br />
<br />
./configure&nbsp; \<br />
&nbsp; --with-config-file-path=/etc \<br />
&nbsp; --prefix=/usr \<br />
&nbsp; --with-bz2 \<br />
&nbsp; --enable-zip \<br />
&nbsp; --enable-mbstring \<br />
&nbsp; --with-apxs2=/usr/sbin/apxs \<br />
&nbsp; --with-zlib-dir=/usr/include \<br />
&nbsp; --with-libxml-dir=/usr/lib64 \<br />
&nbsp; --with-mcrypt=/usr/lib64 \<br />
&nbsp; --with-mysql \<br />
&nbsp; --with-gd \<br />
&nbsp; --with-jpeg-dir=/usr \<br />
&nbsp; --with-png-dir=/usr \<br />
&nbsp; --enable-calendar</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88494""></a>
  <div class="note">
   <strong class="user">ben at bluehype dot com dot au</strong>
   <a href="#88494" class="date">26-Jan-2009 04:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have already compiled php without jpeg support and decide you want it , then before you compile again you might need to run "make clean" first.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88027""></a>
  <div class="note">
   <strong class="user">Naveen Kumar</strong>
   <a href="#88027" class="date">06-Jan-2009 11:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For Redhat Linux 64 bit machine:<br />
--with-libdir=lib64 --with-gd&nbsp; --with-jpeg-dir --with-png-dir</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86699""></a>
  <div class="note">
   <strong class="user">msc at homofaber dot com</strong>
   <a href="#86699" class="date">30-Oct-2008 07:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should be noted that it might be pretty easy to install gd without the need to recompile php, when using debian:<br />
<br />
apt-get install php5-gd</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85240""></a>
  <div class="note">
   <strong class="user">gerard at charlesconsulting dot com</strong>
   <a href="#85240" class="date">21-Aug-2008 09:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On my system,I had to ensure I had not only libpng and libjpeg, but also the libpng-devel and libjpeg-devel packages installed.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84538""></a>
  <div class="note">
   <strong class="user">kronn</strong>
   <a href="#84538" class="date">17-Jul-2008 02:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Everytime I try to install the gd-lib as a dynamic extension, I run into the same problem: It wont work.<br />
<br />
I get the following error:<br />
<br />
PHP Warning:&nbsp; PHP Startup: Unable to load dynamic library '/usr/pkg/lib/php/20040412/gd.so' - dlopen(/usr/pkg/lib/php/20040412/gd.so, 9): Symbol not found: __cg_jpeg_resync_to_restart\n&nbsp; Referenced from: /System/Library/Frameworks/ApplicationServices. framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/ImageIO\n&nbsp; Expected in: /usr/pkg/lib/libjpeg.62.dylib\n in Unknown on line 0<br />
<br />
I use pkgsrc for software package managment on my mac, as may be apparent from the paths.<br />
<br />
The solution is, to edit the file /usr/pkg/sbin/envvars and remove or comment the DYLD_LIBRARY_PATH because it is causing the error...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82621""></a>
  <div class="note">
   <strong class="user">mike at clove dot com</strong>
   <a href="#82621" class="date">18-Apr-2008 09:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
jpeg [jpg] file processing doesn't work unless you build php with '--with-jpeg-dir=&lt;path to jpeg library&gt;'.<br />
<br />
It still doesn't work unless &lt;path to jpeg library&gt; points to the directory holding the directory holding the library unless libjpeg.&lt;whatever&gt; is in either /usr/lib or /usr/local/lib. For instance, on a mac with libjpeg.a installed via mac ports, you need '/opt/local' rather than '/opt/local/lib'</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="image.requirements.html">Requirements</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="image.configuration.html">Runtime Configuration</a></div>
 <div class="up"><a href="image.setup.html">Installing/Configuring</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
