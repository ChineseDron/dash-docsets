<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Installation on Unix systems</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="install.general.html">General Installation Considerations</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="install.unix.apache.html">Apache 1.3.x on Unix systems</a></div>
 <div class="up"><a href="install.html">Installation and Configuration</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="install.unix" class="chapter">
   <h1>Installation on Unix systems</h1>
<h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="install.unix.apache.html">Apache 1.3.x on Unix systems</a></li><li><a href="install.unix.apache2.html">Apache 2.x on Unix systems</a></li><li><a href="install.unix.lighttpd-14.html">Lighttpd 1.4 on Unix systems</a></li><li><a href="install.unix.sun.html">Sun, iPlanet and Netscape servers on Sun Solaris</a></li><li><a href="install.unix.commandline.html">CGI and command line setups</a></li><li><a href="install.unix.hpux.html">HP-UX specific installation notes</a></li><li><a href="install.unix.openbsd.html">OpenBSD installation notes</a></li><li><a href="install.unix.solaris.html">Solaris specific installation tips</a></li><li><a href="install.unix.debian.html">Debian GNU/Linux installation notes</a></li></ul>

   <p class="para">
    This section will guide you through the general configuration and
    installation of PHP on Unix systems. Be sure to investigate any
    sections specific to your platform or web server before you begin
    the process.
   </p>
   <p class="para">
    As our manual outlines in the <a href="install.general.html" class="link">General
    Installation Considerations</a> section, we are mainly dealing with
    web centric setups of PHP in this section, although we will cover
    setting up PHP for command line usage as well.
   </p>
   <p class="para"> 
    There are several ways to install PHP for the Unix platform, either
    with a compile and configure process, or through various
    pre-packaged methods. This documentation is mainly focused around
    the process of compiling and configuring PHP. Many Unix like systems
    have some sort of package installation system. This can assist in
    setting up a standard configuration, but if you need to have a
    different set of features (such as a secure server, or a different
    database driver), you may need to build PHP and/or your web server.
    If you are unfamiliar with building and compiling your own software,
    it is worth checking to see whether somebody has already built a
    packaged version of PHP with the features you need.
   </p>
   <p class="para">
    Prerequisite knowledge and software for compiling:
    <ul class="itemizedlist">
     <li class="listitem">
      <span class="simpara">
       Basic Unix skills (being able to operate &quot;make&quot; and a C
       compiler)
      </span>
     </li> 
     <li class="listitem">
      <span class="simpara">
       An ANSI C compiler
      </span>
     </li> 
     <li class="listitem">
      <span class="simpara">
       A web server
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       Any module specific components (such as <acronym title="Graphics Draw">GD</acronym>,
       <acronym title="Portable Document Format">PDF</acronym> libs, etc.)
      </span>
     </li>
    </ul>
   </p>

   <p class="para">
    When building directly from SVN sources or after custom modifications you
    might also need:
    <ul class="itemizedlist">
     <li class="listitem">
      <span class="simpara">
       autoconf: 2.13+ (for PHP &lt; 5.4.0), 2.59+ (for PHP &gt;= 5.4.0)
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       automake: 1.4+
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       libtool: 1.4.x+ (except 1.4.2)
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       re2c: Version 0.13.4 or newer
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       flex: Version 2.5.4 (for PHP &lt;= 5.2)
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       bison: Version 1.28 (preferred), 1.35, or 1.75
      </span>
     </li>
    </ul>
   </p>
   
   <p class="para">
    The initial PHP setup and configuration process is controlled by the
    use of the command line options of the <strong class="command">configure</strong>
    script. You could get a list of all available options along with short
    explanations running <strong class="command">./configure --help</strong>.
    Our manual documents the different options separately. You will
    find the <a href="configure.html" class="link">core options in the appendix</a>,
    while the different extension specific options are descibed on the
    reference pages.
   </p>
    
   <p class="para">
    When PHP is configured, you are ready to build the module and/or
    executables. The command <strong class="command">make</strong> should
    take care of this. If it fails and you can&#039;t figure out why, see
    the <a href="install.problems.html" class="link">Problems section</a>.
   </p>

   
   

   



   

   



   





   

   



   

  



   
   





   





   





   
   





   
  </div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="102989""></a>
  <div class="note">
   <strong class="user">roman4e at gmail dot com</strong>
   <a href="#102989" class="date">18-Mar-2011 06:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful when compiling on system used with apache2 worker MPM (inl. apache-itk). It will be always compiled with ZTS implicitly when you are using --with-apxs2 and no matter how --enable-maintainer-zts configure option is set</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80966""></a>
  <div class="note">
   <strong class="user">Neil Davis</strong>
   <a href="#80966" class="date">08-Feb-2008 07:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Red Hat EL5.1 you need to install the libtool-ltdl-devel package (or the workaround below) to compile php. <br />
<br />
symbolic link libltdl.so to libltdl.so.3.1.4 missing and the compile will fail. <br />
<br />
Noting this because it wasn't necessary in Red Hat EL4.1 and caused confusion. I verified this on the box I'm migrating from. Since I built the box, and compiled php on it, I know I didn't need to do this before.<br />
<br />
You can get around needing to install this devel.<br />
Workaround:<br />
# cd /usr/lib<br />
# ln -s libltdl.so.3.1.4 libltdl.so<br />
<br />
The devel rpm isn't necessary, just the link. I'll leave it at that. This is an rpm packaging convention change with ES5.<br />
<br />
-Neil</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78781""></a>
  <div class="note">
   <strong class="user">packard_bell_nec at hotmail dot com</strong>
   <a href="#78781" class="date">27-Oct-2007 04:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you install PHP as an Apache module, you can consider the following. Instead of adding:<br />
<br />
application/x-httpd-php&nbsp; &nbsp; php<br />
application/x-httpd-php-source&nbsp; &nbsp; phps<br />
<br />
into Apache mime.types, you can add: <br />
<br />
AddType application/x-httpd-php&nbsp; &nbsp; .php<br />
AddType application/x-httpd-php-source&nbsp; &nbsp; .phps<br />
<br />
into Apache httpd.conf, OR you can add: <br />
<br />
AddHandler application/x-httpd-php&nbsp; &nbsp; .php<br />
AddHandler application/x-httpd-php-source&nbsp; &nbsp; .phps<br />
<br />
into Apache httpd.conf. The last one is the preferred way of configuration, but it does not work in previous Apache versions.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78566""></a>
  <div class="note">
   <strong class="user">phpnet at puellae dot com</strong>
   <a href="#78566" class="date">17-Oct-2007 10:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Further down in the links it talks about using the fPIC option in the compiler to fix the SElinux error.&nbsp; I messed around with it and adding --with-pic to the configure will also allow the module to load.&nbsp; I have not done more testing with it but apache at least starts.&nbsp; If you have already compiled you will need to do a make clean before recompiling.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78564""></a>
  <div class="note">
   <strong class="user">phpnet at puellae dot com</strong>
   <a href="#78564" class="date">17-Oct-2007 09:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you get an apache failing to start message with SElinux enabled.<br />
The error in var/log/messages is:<br />
Oct 17 10:41:49 nwn kernel: audit(1192635709.825:37936): avc:&nbsp; denied&nbsp; { execmod } for&nbsp; pid=23189 comm="httpd" name="libphp5.so" dev=hda3 ino=4980740 scontext=user_u:system_r:unconfined_t:s0 tcontext=user_u:object_r:usr_t:s0 tclass=file<br />
<br />
See the following page:<br />
<a href="http://danwalsh.livejournal.com/6117.html?thread=23525" rel="nofollow" target="_blank">http://danwalsh.livejournal.com/6117.html?thread=23525</a><br />
<br />
Basically do a chcon -t textrel_shlib_t libphp5.so <br />
It does not sound like it is too dangerous.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77797""></a>
  <div class="note">
   <strong class="user">aryeh dot friedman at gmail dot com</strong>
   <a href="#77797" class="date">13-Sep-2007 04:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For all multi-core processors (not just Sun as noted above) you need to add --enable-shared-core to the apache config</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71116""></a>
  <div class="note">
   <strong class="user">Alex at GrimMusic dot com</strong>
   <a href="#71116" class="date">13-Nov-2006 12:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I am new to linux/apache/php (coming from server 2003/IIS/Asp.Net), so i was stumped as to why php/apache could only use static content. Also, it couldn't access some documents that you created somewhere else, and then dragged into the HTML directory.<br />
<br />
After some research, i found the problem was the SELinux context of the files. It took me forever to find the Proper command to use to change that, as all the examples on the net were out dated using old commands:<br />
# chcon "user_u:object_r:httpd_sys_content_t" /var/www/html -Rc<br />
<br />
This will change the SELinux context of all the documents under the /var/www/html directory (which is the web directory under Fedora), to allow the httpd process to access them, and the '-Rc' flag will make the changes Recursive, and will output it's progress for each file that it sucessfully changes.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70040""></a>
  <div class="note">
   <strong class="user">squeegee</strong>
   <a href="#70040" class="date">30-Sep-2006 09:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It wasn't until I also added LIBS="-lirc" to the beginning of the configure line that it would configure without errors. It also compiled fine after that. So the start of my configure line looked like this:<br />
<br />
LDFLAGS="-lirc" LIBS="-lirc" EXTRA_LIBS="-lirc" ./configure</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68089""></a>
  <div class="note">
   <strong class="user">Arjan van Bentem</strong>
   <a href="#68089" class="date">12-Jul-2006 12:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using Red Hat Fedora, beware of Security Enhanced Linux, SELinux. <br />
<br />
Quoted from Red Hat: "The security goal is to make sure that Apache HTTP is only reading the static Web content, and not doing anything else such as writing to the content, connecting to database sockets, reading user home directories, etc."<br />
<br />
These limitations include, among many other things, using mkdir to create directories, using fopen to access files, using fopen or get_headers to read URLs, or using exec to run external applications that happen to use sockets (or maybe access some files, but which will run fine when executed from the command line as Unix user apache or httpd -- such as HylaFAX "faxstat" as invoked from nweb2fax recvq.php and sendq.php).<br />
<br />
See /var/log/messages for any denials due to the SELinux policy. To disable it:<br />
<br />
- System, Administration, Security Level and Firewall<br />
- open the SELinux tab<br />
- click the Transition tree<br />
- check Disable SELinux protection for Apache HTTP<br />
- execute /etc/init.d/httpd restart<br />
<br />
See also <a href="http://fedora.redhat.com/docs/selinux-faq/ and http://php.net/results.php?q=selinux&amp;p=wholesite" rel="nofollow" target="_blank">http://fedora.redhat.com/docs/selinux-faq/ and http://php.net/results.php?q=selinux&amp;p=wholesite</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58513""></a>
  <div class="note">
   <strong class="user">dpresley4 at yahoo dot com</strong>
   <a href="#58513" class="date">06-Nov-2005 03:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi,<br />
<br />
PROBLEM:&nbsp; ./configure PHP --with-oci8 <br />
<br />
fails with unresolved references such as __rpc_thread_destroy@GLIBC_2_2_3_...<br />
<br />
ONE SOLUTOIN <br />
<br />
FOR SOLVING PHP ./configure RESULTING IN&nbsp; __rcp_thread_destroy@GLIBC_2_2_3_... AND <br />
UNRESOLVED REFERENCES WITH ORACLE OCI8<br />
<br />
KEYWORDS: PHP OCI OCI8 NET8 ./configure __rpc_thred_destroy UNRESOLVED REFERENCES<br />
<br />
For building php-4.4.1 or later with oci8, make sure your LD_LIBARRY_PATH has at a minimum the following directories in its path for Oracle8i 8.1.5 or later, Oracle9i 9.0.2 or later, and Oracle9i Release 2: 9.2.0.4 or later, do the following:<br />
<br />
Note:&nbsp; We are not using the Oracle Instant Client here.&nbsp; This assumes you have an actual Oracle Installation.<br />
<br />
1. Set ORACLE_HOME<br />
<br />
Example using Oracle 9i Relase 2 -- 9.2.0.5:<br />
<br />
ORACLE_HOME=/opt/app/oracle/product/9iR2<br />
<br />
2. Set LD_LIBRARY_PATH with:<br />
<br />
LD_LIBRARY_PATH=$ORACLE_HOME/lib: \<br />
&nbsp;&nbsp;&nbsp; $ORACLE_HOME/rdbms/lib:\ <br />
&nbsp;&nbsp;&nbsp; $LD_LIBRARY_PATH<br />
<br />
3. On Unix / Linux, don't forget to export these environment variables:<br />
<br />
export ORACLE_HOME LD_LIBRARY_PATH<br />
<br />
4. Now, build PHP with the following:<br />
<br />
./configure --with-apxs2=&lt;path to Apache 2.0/bin/apxs&gt; --with-oci8=$ORACLE_HOME --enable-sigchild<br />
<br />
It should now build correctly. The key with Oracle is to ensure that you pick up the libclntX.so (client librariess) where X is the Oracle version associated with the version your using for instance, in the above example, libclnt9.so<br />
<br />
Also note that if your using Oracle 9iAS Release 2 v9.0.2, Oracle 10g iAS Release 1 v9.0.4.1, the above steps will work because ORACLE_HOME will containe all of the libraries necessary.&nbsp; Simply point ORACLE_HOME to the top level directory of these installations and set LD_LIBRARY_PATH as described above.<br />
<br />
Hope this helps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51200""></a>
  <div class="note">
   <strong class="user">phptard at gmail dot com</strong>
   <a href="#51200" class="date">23-Mar-2005 04:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
after a long night of wrestling with mysql4.0 under linux compiled with the intel compiler, i've gotten php5.0.3 to compile with mysql libraries for this flavor of mysql:<br />
<br />
1: download the mysql for linux/intel compiler and install<br />
2: download the rpm for the intel compiler libraries and install<br />
3: configure php with LDFLAGS="-lirc -lgcc_s" and EXTRA_LIBS="-lirc -lgcc_s"<br />
<br />
Example:<br />
<br />
LDFLAGS="-lirc -lgcc_s" LD_LIBRARY_PATH="-L/usr/lib64" LD_PATH="-L/usr/lib64" LDPATH="-L/usr/lib64" EXTRA_LIBS="-lirc -lgcc_s" ./configure --with-apxs2=/usr/local/apache/bin/apxs --with-ssl=/usr/local/ssl --without-sqlite --with-zlib-dir=/usr --with-mysql=/usr/local/mysql<br />
<br />
of course this is on a xeon system that has half of its modules in the /usr/lib64 directory, so on a normal system, without the other kruft, it would look something more like this:<br />
<br />
LDFLAGS="-lirc -lgcc_s" EXTRA_LIBS="-lirc -lgcc_s" ./configure --with-apxs2=/usr/local/apache/bin/apxs --with-mysql=/usr/local/mysql<br />
<br />
Hopefully this will save someone the 6 hour headache it caused me..</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48412""></a>
  <div class="note">
   <strong class="user">alexander justadot henry at acm dot org</strong>
   <a href="#48412" class="date">22-Dec-2004 12:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The system at my workplace has a need for apache/php with all static compilation.&nbsp; In order to save time adminning our systems, I decided to make my own RPM of php/apache with mod_ssl support.&nbsp; I had always installed by hand with the instructions on this page, but when buiding the RPM way, came upon the following error when apache was compiling:<br />
<br />
===&gt; src/modules/php4 <br />
make[4]: *** No rule to make target `all'. Stop.<br />
<br />
Ordinarily this is because one did not do a 'make install' in php before the second apache configure, or somehow the make install failed.&nbsp; But the way rpm's work, the make install must be in the %install portion of the spec file, after all makes are completed.<br />
<br />
make install-sapi<br />
<br />
This line will copy relevant files to the directory specified in --with-apache</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38633""></a>
  <div class="note">
   <strong class="user">thansen at terra dot com dot br</strong>
   <a href="#38633" class="date">30-Dec-2003 08:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The configure directives --with-apxs2 and --with-apxs2filter are not compatible one with other, even though the configure script will not complain about that. Each one affect the way Apache will call the php parser: If you choose the first one, you must use the traditional include:<br />
<br />
AddType application/x-httpd-php php<br />
<br />
at httpd.conf, to call the parser. If you use the --with-apxs2filter, the include will be:<br />
<br />
&lt;Files *.php&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; SetOutputFilter PHP<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; SetInputFilter&nbsp; PHP<br />
&lt;/Files&gt;<br />
<br />
, and php will be called as a filter to .php files.<br />
<br />
If you use both together, you will get compilation errors (duplicate symbols while linking libphp4).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38039""></a>
  <div class="note">
   <strong class="user">aaronmorris at mindspring dot com</strong>
   <a href="#38039" class="date">05-Dec-2003 12:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have the libphp4.a instead of libphp4.so on AIX, you can extract the .so file from the .a file by running "ar -x libphp4.a".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29138""></a>
  <div class="note">
   <strong class="user">doug at NOSPAM dot techie dot net</strong>
   <a href="#29138" class="date">04-Feb-2003 05:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Users compiling under some versions of Solaris/SunOS may encounter the following error.<br />
&nbsp;&nbsp; symbol ap_block_alarms: referenced symbol not found<br />
<br />
To address this problem, add the following additional flag to the Apache build configure line:<br />
&nbsp;&nbsp; --enable-rule=SHARED_CORE<br />
<br />
So, adding this to the original instructions, you'd configure your Apache build like so:<br />
&nbsp;&nbsp; ./configure --prefix=/www --enable-module=so --enable-rule=SHARED_CORE<br />
<br />
Doug</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="13301""></a>
  <div class="note">
   <strong class="user">dimaberastau at hotmail dot com</strong>
   <a href="#13301" class="date">09-Jun-2001 09:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
when installing with mysql support (--with-mysql=&lt;path/to/your/mysql&gt;) via Apache APXS you'll probably get something like 'can't load libmysqlclient.so' when you try to start up apache. There are 2 solutions to this problem. First, (as documented in INSTALL file of the php4 distribution) you can modify /etc/ld.so.conf to contain the directory name where libmysqlclient.so is (so if your mysql is installed in /usr/local, you want to add something like /usr/local/lib/mysql into /etc/ld.so.conf), else (and particularly if you haven't got the super-user on the system) you can modify (or create if it isn't defined already) LD_LIBRARY_PATH shell variable to reflect the changes you would have otherwise made to /etc/ld.so.conf (again if mysql is /usr/local LD_LIBRARY_PATH=/usr/local/lib/mysql). Either one of these methods will get the problem sorted. Just remember to run ldconfig (so that /etc/ld.so.cache is updated) if you chose to modify /etc/ld.so.conf</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="12962""></a>
  <div class="note">
   <strong class="user">marshalm at ebrd dot com</strong>
   <a href="#12962" class="date">17-May-2001 10:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
HP-UX 11.X PA-RISC installation with oracle (oci8). You need to install the HP-UX patch PHSS_22514 patch (updated libdld.sl), otherwise you will get errors with dlopen() and dlclose() not found during the apache integration stage.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="install.general.html">General Installation Considerations</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="install.unix.apache.html">Apache 1.3.x on Unix systems</a></div>
 <div class="up"><a href="install.html">Installation and Configuration</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
