<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Basic usage</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="java.examples.html">Examples</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="ref.java.html">Java Functions</a></div>
 <div class="up"><a href="java.examples.html">Examples</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="java.examples-basic" class="section">
  <h2 class="title">Basic usage</h2>
  <p class="para">
   <div class="example" id="example-3951">
    <p><b>Example #1 Java Example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;get&nbsp;instance&nbsp;of&nbsp;Java&nbsp;class&nbsp;java.lang.System&nbsp;in&nbsp;PHP<br /></span><span style="color: #0000BB">$system&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Java</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.lang.System'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;demonstrate&nbsp;property&nbsp;access<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Java&nbsp;version='&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$system</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.version'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">'Java&nbsp;vendor='&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$system</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.vendor'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">'OS='&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$system</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'os.name'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'&nbsp;'&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$system</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'os.version'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'&nbsp;on&nbsp;'&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$system</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'os.arch'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'&nbsp;&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;java.util.Date&nbsp;example<br /></span><span style="color: #0000BB">$formatter&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Java</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.text.SimpleDateFormat'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"EEEE,&nbsp;MMMM&nbsp;dd,&nbsp;yyyy&nbsp;'at'&nbsp;h:mm:ss&nbsp;a&nbsp;zzzz"</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #0000BB">$formatter</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">Java</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.util.Date'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example" id="example-3952">
    <p><b>Example #2 AWT Example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;This&nbsp;example&nbsp;is&nbsp;only&nbsp;intended&nbsp;to&nbsp;be&nbsp;run&nbsp;using&nbsp;the&nbsp;CLI.<br /><br /></span><span style="color: #0000BB">$frame&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Java</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.awt.Frame'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'PHP'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$button&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Java</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.awt.Button'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Hello&nbsp;Java&nbsp;World!'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$frame</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'North'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$button</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$frame</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">validate</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$frame</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">pack</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$frame</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">visible&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">True</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$thread&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Java</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.lang.Thread'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$thread</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sleep</span><span style="color: #007700">(</span><span style="color: #0000BB">10000</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$frame</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dispose</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>

   Notes:

   <ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      <i>new Java()</i> will create an instance of a class if 
      a suitable constructor is available. If no parameters are passed and 
      the default constructor is useful as it provides access to classes 
      like <i>java.lang.System</i> which expose most of their 
      functionality through static methods.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      Accessing a member of an instance will first look for bean properties
      then public fields. In other words, <i>print $date.time</i>
      will first attempt to be resolved as <i>$date.getTime()</i>,
      then as <i>$date.time</i>.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      Both static and instance members can be accessed on an object with
      the same syntax. Furthermore, if the java object is of type
      <i>java.lang.Class</i>, then static members of the class 
      (fields and methods) can be accessed.
     </span>
    </li>
    <li class="listitem">
     <p class="para">
      Exceptions raised result in PHP warnings, and <b><tt>NULL</tt></b> results. The
      warnings may be eliminated by prefixing the method call with an
      &quot;@&quot; sign. The following APIs may be used to retrieve and reset
      the last error:
      <ul class="itemizedlist">
       <li class="listitem"><span class="simpara"><span class="function"><a href="function.java-last-exception-get.html" class="function">java_last_exception_get()</a></span></span></li>
       <li class="listitem"><span class="simpara"><span class="function"><a href="function.java-last-exception-clear.html" class="function">java_last_exception_clear()</a></span></span></li>
      </ul>
     </p>
    </li>
    <li class="listitem">
     <span class="simpara">
      Overload resolution is in general a hard problem given the
      differences in types between the two languages. The PHP Java
      extension employs a simple, but fairly effective, metric for
      determining which overload is the best match.
     </span>
     <span class="simpara">
      Additionally, method names in PHP are not case sensitive, potentially
      increasing the number of overloads to select from.
     </span>
     <span class="simpara">
      Once a method is selected, the parameters are coerced if necessary, 
      possibly with a loss of data (example: double precision floating point
      numbers will be converted to boolean).
      
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      In the tradition of PHP, arrays and hashtables may pretty much
      be used interchangeably. Note that hashtables in PHP may only be
      indexed by integers or strings; and that arrays of primitive types
      in Java can not be sparse. Also note that these constructs are
      passed by value, so may be expensive in terms of memory and time.
     </span>
    </li>
   </ul>
  </p>
 </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="91455""></a>
  <div class="note">
   <strong class="user">anto dot justus at gmail dot com</strong>
   <a href="#91455" class="date">10-Jun-2009 10:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
php java&nbsp; <br />
<br />
The PHP code here is simple and straight forward. It is not<br />
&nbsp;OOP. But you probably got enough of that while doing the<br />
&nbsp;Java code.<br />
<br />
<span class="default">&lt;?php<br />
<br />
java_require</span><span class="keyword">(</span><span class="string">"F:\\wamp5\\www\\classes\\"</span><span class="keyword">);<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">Java</span><span class="keyword">(</span><span class="string">"hello"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Call the "sayHello()" method<br />
<br />
</span><span class="default">$output </span><span class="keyword">= </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">SayHello</span><span class="keyword">();<br />
<br />
echo </span><span class="default">$output</span><span class="keyword">.</span><span class="string">' this text in PHP<br />
<br />
'</span><span class="keyword">; </span><span class="comment">// Displays (so this comes from the class!)<br />
<br />
// Call the "SayNumber()" method<br />
<br />
</span><span class="default">$output </span><span class="keyword">= </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">SayNumber</span><span class="keyword">();<br />
<br />
</span><span class="comment">// Displays (so this comes from the class!)<br />
</span><span class="keyword">echo </span><span class="default">$output</span><span class="keyword">.</span><span class="string">' is a lucky number'</span><span class="keyword">;<br />
<br />
</span><span class="comment">//Because the JVM caches everything we want reset while<br />
&nbsp;</span><span class="default">playing with the code</span><span class="keyword">. </span><span class="default">Otherwise the<br />
<br />
</span><span class="comment">// a cached version of the same class file will be used <br />
</span><span class="default">rather than the </span><span class="keyword">new </span><span class="default">one<br />
<br />
</span><span class="keyword">echo </span><span class="string">"<br />
Resetting back-end to initial state\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// suppress the warning message from the use of reset.<br />
<br />
</span><span class="keyword">@</span><span class="default">java_reset</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
That's it. Now browse to the PHP page and you should get<br />
&nbsp;the results shown below.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91452""></a>
  <div class="note">
   <strong class="user">anto dot justus at gmail dot com</strong>
   <a href="#91452" class="date">10-Jun-2009 09:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Session sharing with php and java<br />
------------------------------------------<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">require_once(</span><span class="string">"java/Java.inc"</span><span class="keyword">);<br />
</span><span class="default">$session </span><span class="keyword">= </span><span class="default">java_session</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
&lt;HTML&gt;<br />
&lt;TITLE&gt;PHP and JSP session sharing&lt;/title&gt;<br />
&lt;BODY&gt;<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">if(</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">java_values</span><span class="keyword">(</span><span class="default">$session</span><span class="keyword">-&gt;</span><span class="default">get</span><span class="keyword">(</span><span class="string">"counter"</span><span class="keyword">)))) {<br />
&nbsp; </span><span class="default">$session</span><span class="keyword">-&gt;</span><span class="default">put</span><span class="keyword">(</span><span class="string">"counter"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$counter </span><span class="keyword">= </span><span class="default">java_values</span><span class="keyword">(</span><span class="default">$session</span><span class="keyword">-&gt;</span><span class="default">get</span><span class="keyword">(</span><span class="string">"counter"</span><span class="keyword">));<br />
print </span><span class="string">"HttpSession variable \"counter\": </span><span class="default">$counter</span><span class="string">&lt;br&gt;\n"</span><span class="keyword">;<br />
</span><span class="default">$session</span><span class="keyword">-&gt;</span><span class="default">put</span><span class="keyword">(</span><span class="string">"counter"</span><span class="keyword">, </span><span class="default">$counter</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>&lt;a href="sessionSharing.jsp"&gt;JSP page&lt;/a&gt;<br />
&lt;/BODY&gt;<br />
&lt;/HTML&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="java.examples.html">Examples</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="ref.java.html">Java Functions</a></div>
 <div class="up"><a href="java.examples.html">Examples</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
