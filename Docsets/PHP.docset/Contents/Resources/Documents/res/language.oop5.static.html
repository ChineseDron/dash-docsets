<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Static Keyword</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="language.oop5.paamayim-nekudotayim.html">Scope Resolution Operator (::)</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="language.oop5.abstract.html">Class Abstraction</a></div>
 <div class="up"><a href="language.oop5.html">Classes and Objects</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="language.oop5.static" class="sect1">
  <h2 class="title">Static Keyword</h2>

  <p class="para">
   Declaring class properties or methods as static makes them accessible
   without needing an instantiation of the class. A property declared as
   static can not be accessed with an instantiated class object (though
   a static method can).
  </p>

  <p class="para">
   For compatibility with PHP 4, if no <a href="language.oop5.visibility.html" class="link">visibility</a>
   declaration is used, then the property or method will be treated
   as if it was declared as <i>public</i>.
  </p>

  <p class="para">
   Because static methods are callable without an instance of
   the object created, the pseudo-variable <var class="varname"><var class="varname">$this</var></var> is
   not available inside the method declared as static.
  </p>
  
  <p class="para">
   Static properties cannot be accessed through the object using the arrow
   operator -&gt;.
  </p>

  <p class="para">
   Calling non-static methods statically generates an <b><tt>E_STRICT</tt></b> level warning.
  </p>

  <p class="para">
   Like any other PHP static variable, static properties may only be
   initialized using a literal or constant; expressions are not
   allowed. So while you may initialize a static property to an
   integer or array (for instance), you may not initialize it to
   another variable, to a function return value, or to an object.
  </p>

  <p class="para">
   As of PHP 5.3.0, it&#039;s possible to reference the class using a variable.
   The variable&#039;s value can not be a keyword (e.g. <i>self</i>,
   <i>parent</i> and <i>static</i>).
  </p>

  <div class="example" id="example-179">
   <p><b>Example #1 Static property example</b></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">Foo<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;</span><span style="color: #0000BB">$my_static&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">staticValue</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$my_static</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br />class&nbsp;</span><span style="color: #0000BB">Bar&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Foo<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">fooStatic</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">$my_static</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /><br />print&nbsp;</span><span style="color: #0000BB">Foo</span><span style="color: #007700">::</span><span style="color: #0000BB">$my_static&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Foo</span><span style="color: #007700">();<br />print&nbsp;</span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">staticValue</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />print&nbsp;</span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">my_static&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Undefined&nbsp;"Property"&nbsp;my_static&nbsp;<br /><br /></span><span style="color: #007700">print&nbsp;</span><span style="color: #0000BB">$foo</span><span style="color: #007700">::</span><span style="color: #0000BB">$my_static&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$classname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Foo'</span><span style="color: #007700">;<br />print&nbsp;</span><span style="color: #0000BB">$classname</span><span style="color: #007700">::</span><span style="color: #0000BB">$my_static&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;As&nbsp;of&nbsp;PHP&nbsp;5.3.0<br /><br /></span><span style="color: #007700">print&nbsp;</span><span style="color: #0000BB">Bar</span><span style="color: #007700">::</span><span style="color: #0000BB">$my_static&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bar&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Bar</span><span style="color: #007700">();<br />print&nbsp;</span><span style="color: #0000BB">$bar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fooStatic</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

  <div class="example" id="example-180">
   <p><b>Example #2 Static method example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">Foo&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">aStaticMethod</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;...<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}<br /><br /></span><span style="color: #0000BB">Foo</span><span style="color: #007700">::</span><span style="color: #0000BB">aStaticMethod</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$classname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Foo'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$classname</span><span style="color: #007700">::</span><span style="color: #0000BB">aStaticMethod</span><span style="color: #007700">();&nbsp;</span><span style="color: #FF8000">//&nbsp;As&nbsp;of&nbsp;PHP&nbsp;5.3.0<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

  </div>

 </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="106015""></a>
  <div class="note">
   <strong class="user">kaspars [at] gign.lv</strong>
   <a href="#106015" class="date">03-Oct-2011 02:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
in order to use __destruct() in a class without instance (see the sample code in the comment below), you must assign return value of new B(); to a static private variable class-wide or else __destruct() will be called at the end of init() function because the return value of new B() will be treated as a local variable<br />
<br />
e.g.:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">B </span><span class="keyword">{<br />
&nbsp; static private </span><span class="default">$fakeClass </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
<br />
&nbsp; static public </span><span class="default">init</span><span class="keyword">(</span><span class="default">$autoSave</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$fakeClass </span><span class="keyword">= new </span><span class="default">B</span><span class="keyword">();<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="comment">/* rest of the code */<br />
</span><span class="keyword">}</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105300""></a>
  <div class="note">
   <strong class="user">programmer-comfreek at hotmail dot com</strong>
   <a href="#105300" class="date">08-Aug-2011 07:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you haven't an instance for your class (e.g. all functions are static), but you also want a __destruct() functionality, consider the following example:<br />
<br />
We have a class which loads and saves data so we also want to have an autosave mechanism which is called at the end of the PHP script.<br />
<br />
So usually you declare a __destruct function but our class is designed to provide static functions / variables instead:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">A<br />
</span><span class="keyword">{<br />
&nbsp; static private </span><span class="default">$autoSave</span><span class="keyword">;<br />
&nbsp; static public function </span><span class="default">init</span><span class="keyword">(</span><span class="default">$autoSave</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* emulating __construct() */<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$autoSave </span><span class="keyword">= </span><span class="default">$autoSave</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; static public function </span><span class="default">save</span><span class="keyword">() { </span><span class="comment">/*...*/ </span><span class="keyword">} </span><span class="comment">/* load(), get(), etc. */<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">?&gt;<br />
</span>In order to define a __destruct function (which is definitely called) we create a new instance in the init() function and define a destruct() function (which is called from the 'real' one):<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">B<br />
</span><span class="keyword">{<br />
&nbsp; static private </span><span class="default">$autoSave</span><span class="keyword">;<br />
&nbsp; static public function </span><span class="default">init</span><span class="keyword">(</span><span class="default">$autoSave</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* emulating __construct() */<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$autoSave </span><span class="keyword">= </span><span class="default">$autoSave</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; new </span><span class="default">B</span><span class="keyword">();<br />
&nbsp; }<br />
&nbsp; static public function </span><span class="default">destruct</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">self</span><span class="keyword">::</span><span class="default">$autoSave</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">save</span><span class="keyword">();<br />
&nbsp; }<br />
&nbsp; public function </span><span class="default">__destruct</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">B</span><span class="keyword">::</span><span class="default">destruct</span><span class="keyword">();<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104823""></a>
  <div class="note">
   <strong class="user">payal001 at gmail dot com</strong>
   <a href="#104823" class="date">09-Jul-2011 03:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here statically accessed property prefer property of the class for which it is called. Where as self keyword enforces use of current class only. Refer the below example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">a</span><span class="keyword">{<br />
<br />
static protected </span><span class="default">$test</span><span class="keyword">=</span><span class="string">"class a"</span><span class="keyword">;<br />
<br />
public function </span><span class="default">static_test</span><span class="keyword">(){<br />
<br />
echo static::</span><span class="default">$test</span><span class="keyword">; </span><span class="comment">// Results class b<br />
</span><span class="keyword">echo </span><span class="default">self</span><span class="keyword">::</span><span class="default">$test</span><span class="keyword">; </span><span class="comment">// Results class a<br />
<br />
</span><span class="keyword">}<br />
<br />
}<br />
<br />
class </span><span class="default">b </span><span class="keyword">extends </span><span class="default">a</span><span class="keyword">{<br />
<br />
static protected </span><span class="default">$test</span><span class="keyword">=</span><span class="string">"class b"</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">b</span><span class="keyword">();<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">static_test</span><span class="keyword">();<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103530""></a>
  <div class="note">
   <strong class="user">gratcypalma at gmail dot om</strong>
   <a href="#103530" class="date">18-Apr-2011 11:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$getInitial</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">getInitial</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">self</span><span class="keyword">::</span><span class="default">$getInitial </span><span class="keyword">== </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$getInitial </span><span class="keyword">= new </span><span class="default">foo</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$getInitial</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">foo</span><span class="keyword">::</span><span class="default">getInitial</span><span class="keyword">();<br />
<br />
</span><span class="comment">/*<br />
this is the example to use new class with static method..<br />
i hope it help<br />
*/<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103253""></a>
  <div class="note">
   <strong class="user">jeroen at simonetti dot nl</strong>
   <a href="#103253" class="date">04-Apr-2011 02:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
accessing a non-existing static property will result in an E_ERROR message.<br />
<br />
You can check wether a property exists with the 'defined' function.<br />
<br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">a </span><span class="keyword">{<br />
&nbsp; static </span><span class="default">$test</span><span class="keyword">;<br />
<br />
&nbsp; function </span><span class="default">set</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">defined</span><span class="keyword">(</span><span class="default">self</span><span class="keyword">::$</span><span class="default">$name</span><span class="keyword">)) echo </span><span class="string">"</span><span class="default">$name</span><span class="string"> is defined"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else echo </span><span class="string">"</span><span class="default">$name</span><span class="string"> is not defined"</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
}<br />
<br />
</span><span class="default">a</span><span class="keyword">::</span><span class="default">set</span><span class="keyword">(</span><span class="string">'test'</span><span class="keyword">);<br />
</span><span class="default">a</span><span class="keyword">::</span><span class="default">set</span><span class="keyword">(</span><span class="string">'test2'</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span>will output:<br />
test is defined<br />
test2 is not defined</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101350""></a>
  <div class="note">
   <strong class="user">tolean_dj at yahoo dot com</strong>
   <a href="#101350" class="date">11-Dec-2010 05:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Starting with php 5.3 you can get use of new features of static keyword. Here's an example of abstract singleton class:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">abstract class </span><span class="default">Singleton </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; protected static </span><span class="default">$_instance </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Prevent direct object creation<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">final private function&nbsp; </span><span class="default">__construct</span><span class="keyword">() { }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Prevent object cloning<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">final private function&nbsp; </span><span class="default">__clone</span><span class="keyword">() { }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Returns new or existing Singleton instance<br />
&nbsp;&nbsp; &nbsp; * @return Singleton<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">final public static function </span><span class="default">getInstance</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">null </span><span class="keyword">!== static::</span><span class="default">$_instance</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return static::</span><span class="default">$_instance</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static::</span><span class="default">$_instance </span><span class="keyword">= new static();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return static::</span><span class="default">$_instance</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99542""></a>
  <div class="note">
   <strong class="user">Mirco</strong>
   <a href="#99542" class="date">23-Aug-2010 10:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The simplest static constructor.<br />
<br />
Because php does not have a static constructor and you may want to initialize static class vars, there is one easy way, just call your own function directly after the class definition.<br />
<br />
for example.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">Demonstration</span><span class="keyword">()<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">'This is the result of demonstration()'</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">MyStaticClass<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//public static $MyStaticVar = Demonstration(); //!!! FAILS: syntax error<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static </span><span class="default">$MyStaticVar </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">MyStaticInit</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//this is the static constructor<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //because in a function, everything is allowed, including initializing using other functions<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$MyStaticVar </span><span class="keyword">= </span><span class="default">Demonstration</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
} </span><span class="default">MyStaticClass</span><span class="keyword">::</span><span class="default">MyStaticInit</span><span class="keyword">(); </span><span class="comment">//Call the static constructor<br />
<br />
</span><span class="keyword">echo </span><span class="default">MyStaticClass</span><span class="keyword">::</span><span class="default">$MyStaticVar</span><span class="keyword">;<br />
</span><span class="comment">//This is the result of demonstration()<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98646""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#98646" class="date">28-Jun-2010 06:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I can't find anything in the PHP manual about this, but the new-ish E_STRICT error reporting will complain if an inherited class overrides a static method with a different call signature (usually a parameter list). Ironically, it seems to only be a problem of 'coding style' because the code works correctly and has done for quite a few versions. <br />
<br />
The exact error is "Strict Standards: Declaration of [child-class]::[method]() should be compatible with that of [parent-class]::[method]()". <br />
<br />
So if you must code with E_STRICT enabled, you need to rename the method name.<br />
<br />
Google shows that this is biting *a lot* of people. (Bugs have been filed, but there has been no response yet.)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97313""></a>
  <div class="note">
   <strong class="user">myselfasunder at gmail dot com</strong>
   <a href="#97313" class="date">13-Apr-2010 09:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you inadvertently call a non-static method in one class from another class, using $this in the former will actually refer to the wrong class.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">CalledClass<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">go</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print(</span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">CallerClass<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">go</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">CalledClass</span><span class="keyword">::</span><span class="default">Go</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">CallerClass</span><span class="keyword">();<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">go</span><span class="keyword">();<br />
<br />
</span><span class="comment">// Output is "CallerClass" instead of "CalledClass" like it should be.<br />
</span><span class="default">?&gt;<br />
</span><br />
Dustin Oprea</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96402""></a>
  <div class="note">
   <strong class="user">webmaster at removethis dot weird-webdesign dot de</strong>
   <a href="#96402" class="date">25-Feb-2010 01:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On PHP 5.2.x or previous you might run into problems initializing static variables in subclasses due to the lack of late static binding:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; protected static </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">init</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) { </span><span class="default">self</span><span class="keyword">::</span><span class="default">$a </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">getA</span><span class="keyword">() { return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$a</span><span class="keyword">; }<br />
}<br />
<br />
class </span><span class="default">B </span><span class="keyword">extends </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; protected static </span><span class="default">$a</span><span class="keyword">; </span><span class="comment">// redefine $a for own use<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; // inherit the init() method<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">getA</span><span class="keyword">() { return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$a</span><span class="keyword">; }<br />
}<br />
<br />
</span><span class="default">B</span><span class="keyword">::</span><span class="default">init</span><span class="keyword">(</span><span class="string">'lala'</span><span class="keyword">);<br />
echo </span><span class="string">'A::$a = '</span><span class="keyword">.</span><span class="default">A</span><span class="keyword">::</span><span class="default">getA</span><span class="keyword">().</span><span class="string">'; B::$a = '</span><span class="keyword">.</span><span class="default">B</span><span class="keyword">::</span><span class="default">getA</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
This will output:<br />
A::$a = lala; B::$a = <br />
<br />
If the init() method looks the same for (almost) all subclasses there should be no need to implement init() in every subclass and by that producing redundant code.<br />
<br />
Solution 1:<br />
Turn everything into non-static. BUT: This would produce redundant data on every object of the class.<br />
<br />
Solution 2:<br />
Turn static $a on class A into an array, use classnames of subclasses as indeces. By doing so you also don't have to redefine $a for the subclasses and the superclass' $a can be private.<br />
<br />
Short example on a DataRecord class without error checking:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">abstract class </span><span class="default">DataRecord </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$db</span><span class="keyword">; </span><span class="comment">// MySQLi-Connection, same for all subclasses<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">private static </span><span class="default">$table </span><span class="keyword">= array(); </span><span class="comment">// Array of tables for subclasses<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">init</span><span class="keyword">(</span><span class="default">$classname</span><span class="keyword">, </span><span class="default">$table</span><span class="keyword">, </span><span class="default">$db </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!(</span><span class="default">$db </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">)) </span><span class="default">self</span><span class="keyword">::</span><span class="default">$db </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$table</span><span class="keyword">[</span><span class="default">$classname</span><span class="keyword">] = </span><span class="default">$table</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">getDB</span><span class="keyword">() { return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$db</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">getTable</span><span class="keyword">(</span><span class="default">$classname</span><span class="keyword">) { return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$table</span><span class="keyword">[</span><span class="default">$classname</span><span class="keyword">]; }<br />
}<br />
<br />
class </span><span class="default">UserDataRecord </span><span class="keyword">extends </span><span class="default">DataRecord </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">fetchFromDB</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">parent</span><span class="keyword">::</span><span class="default">getDB</span><span class="keyword">()-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">'select * from '</span><span class="keyword">.</span><span class="default">parent</span><span class="keyword">::</span><span class="default">getTable</span><span class="keyword">(</span><span class="string">'UserDataRecord'</span><span class="keyword">).</span><span class="string">';'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// and so on ...<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$result</span><span class="keyword">; </span><span class="comment">// An array of UserDataRecord objects<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
}<br />
<br />
</span><span class="default">$db </span><span class="keyword">= new </span><span class="default">MySQLi</span><span class="keyword">(...);<br />
</span><span class="default">UserDataRecord</span><span class="keyword">::</span><span class="default">init</span><span class="keyword">(</span><span class="string">'UserDataRecord'</span><span class="keyword">, </span><span class="string">'users'</span><span class="keyword">, </span><span class="default">$db</span><span class="keyword">);<br />
</span><span class="default">$users </span><span class="keyword">= </span><span class="default">UserDataRecord</span><span class="keyword">::</span><span class="default">fetchFromDB</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
I hope this helps some people who need to operate on PHP 5.2.x servers for some reason. Late static binding, of course, makes this workaround obsolete.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95860""></a>
  <div class="note">
   <strong class="user">valentin at balt dot name</strong>
   <a href="#95860" class="date">26-Jan-2010 07:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
How to implement a one storage place based on static properties.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">a </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">get </span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">connect</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
class </span><span class="default">b </span><span class="keyword">extends </span><span class="default">a </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$a</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">connect</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$a </span><span class="keyword">= </span><span class="string">'b'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
class </span><span class="default">c </span><span class="keyword">extends </span><span class="default">a </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$a</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">connect</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$a </span><span class="keyword">= </span><span class="string">'c'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">$b </span><span class="keyword">= new </span><span class="default">b </span><span class="keyword">();<br />
</span><span class="default">$c </span><span class="keyword">= new </span><span class="default">c </span><span class="keyword">();<br />
<br />
</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">get</span><span class="keyword">();<br />
</span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">get</span><span class="keyword">();<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95217""></a>
  <div class="note">
   <strong class="user">Jay Cain</strong>
   <a href="#95217" class="date">18-Dec-2009 02:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding the initialization of complex static variables in a class, you can emulate a static constructor by creating a static function named something like init() and calling it immediately after the class definition.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Example </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$a </span><span class="keyword">= </span><span class="string">"Hello"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$b</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">init</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$b </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">$a </span><span class="keyword">. </span><span class="string">" World!"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">Example</span><span class="keyword">::</span><span class="default">init</span><span class="keyword">();<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95008""></a>
  <div class="note">
   <strong class="user">maximark at libero dot it</strong>
   <a href="#95008" class="date">08-Dec-2009 09:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php <br />
</span><span class="comment">// USING the same method in an instance and in a static context<br />
// If you want to have the same definition of a method that you<br />
// want to use both as static and as instance method, a classname control of $this <br />
// variable is needed. This tip can be used wether the caller context is not the same class type<br />
</span><span class="keyword">class </span><span class="default">A<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$myProp </span><span class="keyword">= </span><span class="string">'A'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">myMethodA</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$this</span><span class="keyword">) &amp;&amp; </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">) == </span><span class="default">__CLASS__</span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">myProp</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'C'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
class </span><span class="default">B<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$myProp </span><span class="keyword">= </span><span class="string">'B'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">myMethodB</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">myMethodA</span><span class="keyword">().</span><span class="string">'&nbsp; ++++ '</span><span class="keyword">.</span><span class="default">A</span><span class="keyword">::</span><span class="default">myMethodA</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">$b </span><span class="keyword">= new </span><span class="default">B</span><span class="keyword">();<br />
echo </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">myMethodB</span><span class="keyword">(); </span><span class="comment">// output: A ++++ C<br />
<br />
// NOTE:<br />
// if you don't verify "&amp;&amp; get_class($this) == __CLASS__" <br />
// it will output A ++++ B, it seems that if a method is not marked as "static"<br />
// its scope would be the scope in which the function was called<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94606""></a>
  <div class="note">
   <strong class="user">Stratadrake</strong>
   <a href="#94606" class="date">13-Nov-2009 12:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When a method is declared as static, not only is the magic variable $this unavailable (returns NULL), but it is impossible to tell if the function was actually called from a static context.&nbsp; A backtrace implies that for a static method, calling $object-&gt;method() is internally translated to className::method() at run time.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Foo<br />
</span><span class="keyword">{<br />
&nbsp; static function </span><span class="default">bar</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">reset</span><span class="keyword">(</span><span class="default">debug_backtrace</span><span class="keyword">()));<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="default">$foo </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">();<br />
<br />
</span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">baz</span><span class="keyword">();<br />
</span><span class="default">Foo</span><span class="keyword">::</span><span class="default">baz</span><span class="keyword">();<br />
</span><span class="comment">// Output in either case resembles this:<br />
// array(3)<br />
// {<br />
//&nbsp;&nbsp; 'file' =&gt; .....<br />
//&nbsp;&nbsp; 'line =&gt; .....<br />
//&nbsp;&nbsp; 'function' =&gt; string(3) 'baz'<br />
//&nbsp;&nbsp; 'class' =&gt; string(3) 'Foo'<br />
//&nbsp;&nbsp; 'type' =&gt; string(2) '::'<br />
// }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92148""></a>
  <div class="note">
   <strong class="user">sep16 at psu dot edu</strong>
   <a href="#92148" class="date">10-Jul-2009 12:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I find having class variables useful for inherited classes, especially when inheriting abstract classes, yet self:: doesn't refer to the class calling the method, rather the actual class in which it was defined.&nbsp; Although it is less memory efficient, this can be circumvented with instance properties, but sometimes even this won't work, i.e., when using resources like class-wide database or prepared statement handles.<br />
<br />
The pre-5.3.0 way that I used to get around this limitation was to write a class that stores a central value and sets instance properties as references to this value.&nbsp; In this way objects can have access to the same value while still being able to use inherited methods that reference this property.<br />
<br />
Usage example:<br />
<span class="default">&lt;?php </span><span class="comment">// (SharedPropertyClass is defined below)<br />
</span><span class="keyword">class </span><span class="default">Foo </span><span class="keyword">extends </span><span class="default">SharedPropertyClass </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$foo </span><span class="keyword">= </span><span class="string">"bar"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">showFoo</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
class </span><span class="default">FooToo </span><span class="keyword">extends </span><span class="default">Foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">makeShared</span><span class="keyword">(</span><span class="string">'foo'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$ojjo </span><span class="keyword">= new </span><span class="default">FooToo</span><span class="keyword">;<br />
</span><span class="default">$ojjo</span><span class="keyword">-&gt;</span><span class="default">showFoo</span><span class="keyword">(); </span><span class="comment">// "bar"<br />
<br />
</span><span class="default">$xjjx </span><span class="keyword">= new </span><span class="default">FooToo</span><span class="keyword">;<br />
</span><span class="default">$xjjx</span><span class="keyword">-&gt;</span><span class="default">showFoo</span><span class="keyword">(); </span><span class="comment">// "bar"<br />
<br />
</span><span class="default">$ojjo</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">= </span><span class="string">"new"</span><span class="keyword">;<br />
</span><span class="default">$ojjo</span><span class="keyword">-&gt;</span><span class="default">showFoo</span><span class="keyword">(); </span><span class="comment">// "new"<br />
</span><span class="default">$xjjx</span><span class="keyword">-&gt;</span><span class="default">showFoo</span><span class="keyword">(); </span><span class="comment">// "new"<br />
</span><span class="default">?&gt;<br />
</span><br />
Notice how the showFoo() method, while defined in the parent class, correctly uses the child class's "foo" property (unlike self:: would), and how the "foo" property is shared by all instances of FooToo objects (like a static property).&nbsp; This is essentially how the new static:: keyword will work, and how most people probably expected the self:: keyword to work.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// ---------------------------------------------------------------<br />
</span><span class="keyword">abstract class </span><span class="default">SharedPropertyClass </span><span class="keyword">{<br />
</span><span class="comment">// ---------------------------------------------------------------<br />
/*<br />
&nbsp;&nbsp;&nbsp; Shared properties should be declared as such in the<br />
&nbsp;&nbsp;&nbsp; constructor function of the inheriting class.<br />
<br />
&nbsp;&nbsp;&nbsp; The first instance will have the shared property set to<br />
&nbsp;&nbsp;&nbsp; the value in the class definition, if any, otherwise null.<br />
&nbsp;&nbsp;&nbsp; All subsequent instances will also have their shared<br />
&nbsp;&nbsp;&nbsp; property set as a reference to that variable.<br />
<br />
*/<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">private static </span><span class="default">$shared </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">makeShared</span><span class="keyword">(</span><span class="default">$property</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$class </span><span class="keyword">= </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">property_exists</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">,</span><span class="default">$property</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"Access to undeclared property "<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"'</span><span class="default">$property</span><span class="string">' in class </span><span class="default">$class</span><span class="string">."</span><span class="keyword">,</span><span class="default">E_USER_ERROR</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$class</span><span class="keyword">,</span><span class="default">self</span><span class="keyword">::</span><span class="default">$shared</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$shared</span><span class="keyword">[</span><span class="default">$class</span><span class="keyword">] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$property</span><span class="keyword">,</span><span class="default">self</span><span class="keyword">::</span><span class="default">$shared</span><span class="keyword">[</span><span class="default">$class</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$shared</span><span class="keyword">[</span><span class="default">$class</span><span class="keyword">][</span><span class="default">$property</span><span class="keyword">]<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; = isset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$property</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ? </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$property<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">: </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$property </span><span class="keyword">=&amp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$shared</span><span class="keyword">[</span><span class="default">$class</span><span class="keyword">][</span><span class="default">$property</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">isShared</span><span class="keyword">(</span><span class="default">$property</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$class </span><span class="keyword">= </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">property_exists</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">,</span><span class="default">$property</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"Access to undeclared property "<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"'</span><span class="default">$property</span><span class="string">' in class </span><span class="default">$class</span><span class="string">."</span><span class="keyword">,</span><span class="default">E_USER_ERROR</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$class</span><span class="keyword">,</span><span class="default">self</span><span class="keyword">::</span><span class="default">$shared</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &amp;&amp; </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$property</span><span class="keyword">, </span><span class="default">self</span><span class="keyword">::</span><span class="default">$shared</span><span class="keyword">[</span><span class="default">$class</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89650""></a>
  <div class="note">
   <strong class="user">davidn at xnet dot co dot nz</strong>
   <a href="#89650" class="date">17-Mar-2009 04:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Static variables are shared between sub classes<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">MyParent </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; protected static </span><span class="default">$variable</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">Child1 </span><span class="keyword">extends </span><span class="default">MyParent </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">set</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$variable </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Child2 </span><span class="keyword">extends </span><span class="default">MyParent </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">show</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$variable</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$c1 </span><span class="keyword">= new </span><span class="default">Child1</span><span class="keyword">();<br />
</span><span class="default">$c1</span><span class="keyword">-&gt;</span><span class="default">set</span><span class="keyword">();<br />
</span><span class="default">$c2 </span><span class="keyword">= new </span><span class="default">Child2</span><span class="keyword">();<br />
</span><span class="default">$c2</span><span class="keyword">-&gt;</span><span class="default">show</span><span class="keyword">(); </span><span class="comment">// prints 2<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88394""></a>
  <div class="note">
   <strong class="user">yesmarklapointe at hotmail dot com</strong>
   <a href="#88394" class="date">21-Jan-2009 11:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">// experiments with static<br />
// tested on PHP 5.2.6&nbsp; on 1-21-09<br />
<br />
</span><span class="keyword">class </span><span class="default">User</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">GIVEN </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;&nbsp; </span><span class="comment">// class constants can't be labeled static nor assigned visibility<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public </span><span class="default">$a</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public static </span><span class="default">$b</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">me</span><span class="keyword">(){ <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"print me"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; public static function </span><span class="default">you</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"print you"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">myUser </span><span class="keyword">extends </span><span class="default">User </span><span class="keyword">{<br />
}<br />
<br />
</span><span class="comment">// Are properties and methods instantiated to an object of a class, &amp; are they accessible?<br />
//$object1= new User();&nbsp; &nbsp; &nbsp; &nbsp; // uncomment this line with each of the following lines individually<br />
//echo $object1-&gt;GIVEN . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields nothing<br />
//echo $object1-&gt;GIVE . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; deliberately misnamed, still yields nothing<br />
//echo $object1-&gt;User::GIVEN . "&lt;/br&gt;";&nbsp; &nbsp; // yields nothing<br />
//echo $object1-&gt;a . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields 2<br />
//echo $object1-&gt;b . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields nothing<br />
//echo $object1-&gt;me() . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields print me<br />
//echo $object1-&gt;you() . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields print you<br />
<br />
// Are&nbsp; properties and methods instantiated to an object of a child class,&nbsp; &amp; are accessible?<br />
//$object2= new myUser();&nbsp; &nbsp; &nbsp; &nbsp; // uncomment this line with each of the following lines individually<br />
//echo $object2-&gt;GIVEN . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields nothing<br />
//echo $object2-&gt;a . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields 2<br />
//echo $object2-&gt;b . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields nothing<br />
//echo $object2-&gt;me() . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields print me<br />
//echo $object2-&gt;you() . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields print you<br />
<br />
// Are the properties and methods accessible directly in the class?<br />
//echo User::GIVEN . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields 1<br />
//echo User::$a . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // yields fatal error since it is not static<br />
//echo User::$b . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // yields 3<br />
//echo User::me() . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields print me<br />
//echo User::you() . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields print you<br />
<br />
// Are the properties and methods copied to the child class and are they accessible?<br />
//echo myUser::GIVEN . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields 1<br />
//echo myUser::$a . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields fatal error since it is not static<br />
//echo myUser::$b . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields 3<br />
//echo myUser::me() . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields print me<br />
//echo myUser::you() . "&lt;/br&gt;";&nbsp; &nbsp; &nbsp; &nbsp; // yields print you<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86452""></a>
  <div class="note">
   <strong class="user">zerocool at gameinsde dot ru</strong>
   <a href="#86452" class="date">20-Oct-2008 01:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi, here's my simple Singleton example, i think it can be useful for someone. You can use this pattern to connect to the database for example.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; </span><span class="keyword">class </span><span class="default">MySingleton<br />
&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$instance </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">__construct</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt; </span><span class="default">name </span><span class="keyword">= </span><span class="string">'Freddy'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">getInstance</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$instance </span><span class="keyword">== </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print </span><span class="string">"Object created!&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$instance </span><span class="keyword">= new </span><span class="default">self</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$instance</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">sayHello</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; print </span><span class="string">"Hello my name is </span><span class="keyword">{</span><span class="default">$this</span><span class="keyword">-&gt; </span><span class="default">name</span><span class="keyword">}</span><span class="string">!&lt;br&gt;"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">setName</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt; </span><span class="default">name </span><span class="keyword">= </span><span class="default">$name</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="comment">//<br />
<br />
&nbsp; </span><span class="default">$objA </span><span class="keyword">= </span><span class="default">MySingleton</span><span class="keyword">::</span><span class="default">getInstance</span><span class="keyword">(); </span><span class="comment">// Object created!<br />
<br />
&nbsp; </span><span class="default">$objA</span><span class="keyword">-&gt; </span><span class="default">sayHello</span><span class="keyword">(); </span><span class="comment">// Hello my name is Freddy!<br />
<br />
&nbsp; </span><span class="default">$objA</span><span class="keyword">-&gt; </span><span class="default">setName</span><span class="keyword">(</span><span class="string">"Alex"</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">$objA</span><span class="keyword">-&gt; </span><span class="default">sayHello</span><span class="keyword">(); </span><span class="comment">// Hello my name is Alex!<br />
<br />
&nbsp; </span><span class="default">$objB </span><span class="keyword">= </span><span class="default">MySingleton</span><span class="keyword">::</span><span class="default">getInstance</span><span class="keyword">();<br />
<br />
&nbsp; </span><span class="default">$objB</span><span class="keyword">-&gt; </span><span class="default">sayHello</span><span class="keyword">(); </span><span class="comment">// Hello my name is Alex!<br />
<br />
&nbsp; </span><span class="default">$objB</span><span class="keyword">-&gt; </span><span class="default">setName</span><span class="keyword">(</span><span class="string">"Bob"</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">$objA</span><span class="keyword">-&gt; </span><span class="default">sayHello</span><span class="keyword">(); </span><span class="comment">// Hello my name is Bob!<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86433""></a>
  <div class="note">
   <strong class="user">wbcarts at juno dot com</strong>
   <a href="#86433" class="date">18-Oct-2008 10:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[NB: This is a copy of the note by juno dot com on 11-Sep-2008 04:53, but with syntax highlighting.]<br />
<br />
A CLASS WITH MEAT ON IT'S BONES...<br />
<br />
I have yet to see an example that I can really get my chops into. So I am offering an example that I hope will satisfy most of us.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">RubberBall<br />
</span><span class="keyword">{<br />
&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; * ALLOW these properties to be inherited TO extending classes - that's<br />
&nbsp;&nbsp; * why they're not private.<br />
&nbsp;&nbsp; *<br />
&nbsp;&nbsp; * DO NOT ALLOW outside code to access with 'RubberBall::$property_name' - <br />
&nbsp;&nbsp; * that's why they're not public.<br />
&nbsp;&nbsp; *<br />
&nbsp;&nbsp; * Outside code should use:<br />
&nbsp;&nbsp; *&nbsp; - RubberBall::getCount()<br />
&nbsp;&nbsp; *&nbsp; - RubberBall::setStart()<br />
&nbsp;&nbsp; * These are the only routines outside code can use - very limited indeed.<br />
&nbsp;&nbsp; *<br />
&nbsp;&nbsp; * Inside code has unlimited access by using self::$property_name.<br />
&nbsp;&nbsp; *<br />
&nbsp;&nbsp; * All RubberBall instances will share a "single copy" of these properties - that's<br />
&nbsp;&nbsp; * why they're static.<br />
&nbsp;&nbsp; */<br />
&nbsp; </span><span class="keyword">protected static </span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp; protected static </span><span class="default">$start </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp; protected static </span><span class="default">$colors </span><span class="keyword">= array(</span><span class="string">'red'</span><span class="keyword">,</span><span class="string">'yellow'</span><span class="keyword">,</span><span class="string">'blue'</span><span class="keyword">,</span><span class="string">'orange'</span><span class="keyword">, </span><span class="string">'green'</span><span class="keyword">, </span><span class="string">'white'</span><span class="keyword">);<br />
&nbsp; protected static </span><span class="default">$sizes </span><span class="keyword">= array(</span><span class="default">4</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">12</span><span class="keyword">, </span><span class="default">16</span><span class="keyword">);<br />
<br />
&nbsp; public </span><span class="default">$name</span><span class="keyword">;<br />
&nbsp; public </span><span class="default">$color</span><span class="keyword">;<br />
&nbsp; public </span><span class="default">$size</span><span class="keyword">;<br />
<br />
&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="string">'RB_' </span><span class="keyword">. </span><span class="default">self</span><span class="keyword">::</span><span class="default">$start</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">color </span><span class="keyword">= (int) </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">size </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">$sizes</span><span class="keyword">[(int) </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">)];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$count</span><span class="keyword">++;<br />
&nbsp; }<br />
<br />
&nbsp; public static function </span><span class="default">getCount</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$count</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
&nbsp; public static function </span><span class="default">setStart</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$start </span><span class="keyword">= </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; * Define the sorting rules for RubberBalls - which is to sort by self::$colors.<br />
&nbsp;&nbsp; * PHP's usort() method will call this function many many times.<br />
&nbsp;&nbsp; */<br />
&nbsp; </span><span class="keyword">public static function </span><span class="default">compare</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">color </span><span class="keyword">&lt; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">color</span><span class="keyword">) return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else if(</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">color </span><span class="keyword">== </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">color</span><span class="keyword">) return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
&nbsp; public function </span><span class="default">__toString</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"RubberBall[<br />
&nbsp;&nbsp; &nbsp;&nbsp; name=</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="string">, <br />
&nbsp;&nbsp; &nbsp;&nbsp; color=" </span><span class="keyword">. </span><span class="default">self</span><span class="keyword">::</span><span class="default">$colors</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">color</span><span class="keyword">] . </span><span class="string">", <br />
&nbsp;&nbsp; &nbsp;&nbsp; size=" </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">size </span><span class="keyword">. </span><span class="string">"\"]"</span><span class="keyword">; <br />
&nbsp; }<br />
}<br />
<br />
</span><span class="comment"># RubberBall counts the number of objects created, but allows us to <br />
# set the starting count like so:<br />
</span><span class="default">RubberBall</span><span class="keyword">::</span><span class="default">setStart</span><span class="keyword">(</span><span class="default">100</span><span class="keyword">);<br />
<br />
</span><span class="comment"># create a PHP Array and initialize it with (12) RubberBall objects<br />
</span><span class="default">$balls </span><span class="keyword">= array();<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">12</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) </span><span class="default">$balls</span><span class="keyword">[] = new </span><span class="default">RubberBall</span><span class="keyword">();<br />
<br />
</span><span class="comment"># sort the RubberBall objects. PHP's usort() calls RubberBall::compare() to do this.<br />
</span><span class="default">usort</span><span class="keyword">(</span><span class="default">$balls</span><span class="keyword">, array(</span><span class="string">"RubberBall"</span><span class="keyword">, </span><span class="string">"compare"</span><span class="keyword">));<br />
<br />
</span><span class="comment"># print the sorted results - uses the static RubberBall::getCount().<br />
</span><span class="keyword">echo </span><span class="string">'RubberBall count: ' </span><span class="keyword">. </span><span class="default">RubberBall</span><span class="keyword">::</span><span class="default">getCount</span><span class="keyword">() . </span><span class="string">'&lt;br&gt;&lt;br&gt;'</span><span class="keyword">;<br />
foreach(</span><span class="default">$balls </span><span class="keyword">as </span><span class="default">$ball</span><span class="keyword">) echo </span><span class="default">$ball </span><span class="keyword">. </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
I'm running out of room so I have not displayed the output, but it is tested and it works great.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85900""></a>
  <div class="note">
   <strong class="user">vvikramraj at yahoo dot com</strong>
   <a href="#85900" class="date">23-Sep-2008 03:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
when attempting to implement a singleton class, one might also want to either<br />
a) disable __clone by making it private<br />
b) bash the user who attempts to clone by defining __clone to throw an exception</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85663""></a>
  <div class="note">
   <strong class="user">wbcarts at juno dot com</strong>
   <a href="#85663" class="date">10-Sep-2008 08:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A CLASS WITH MEAT ON IT'S BONES...<br />
<br />
I have yet to see an example that I can really get my chops into. So I am offering an example that I hope will satisfy most of us.<br />
<br />
class RubberBall<br />
{<br />
&nbsp; /*<br />
&nbsp;&nbsp; * ALLOW these properties to be inherited TO extending classes - that's<br />
&nbsp;&nbsp; * why they're not private.<br />
&nbsp;&nbsp; *<br />
&nbsp;&nbsp; * DO NOT ALLOW outside code to access with 'RubberBall::$property_name' - <br />
&nbsp;&nbsp; * that's why they're not public.<br />
&nbsp;&nbsp; *<br />
&nbsp;&nbsp; * Outside code should use:<br />
&nbsp;&nbsp; *&nbsp; - RubberBall::getCount()<br />
&nbsp;&nbsp; *&nbsp; - RubberBall::setStart()<br />
&nbsp;&nbsp; * These are the only routines outside code can use - very limited indeed.<br />
&nbsp;&nbsp; *<br />
&nbsp;&nbsp; * Inside code has unlimited access by using self::$property_name.<br />
&nbsp;&nbsp; *<br />
&nbsp;&nbsp; * All RubberBall instances will share a "single copy" of these properties - that's<br />
&nbsp;&nbsp; * why they're static.<br />
&nbsp;&nbsp; */<br />
&nbsp; protected static $count = 0;<br />
&nbsp; protected static $start = 1;<br />
&nbsp; protected static $colors = array('red','yellow','blue','orange', 'green', 'white');<br />
&nbsp; protected static $sizes = array(4, 6, 8, 10, 12, 16);<br />
<br />
&nbsp; public $name;<br />
&nbsp; public $color;<br />
&nbsp; public $size;<br />
<br />
&nbsp; public function __construct(){<br />
&nbsp;&nbsp;&nbsp; $this-&gt;name = 'RB_' . self::$start++;<br />
&nbsp;&nbsp;&nbsp; $this-&gt;color = (int) rand(0, 5);<br />
&nbsp;&nbsp;&nbsp; $this-&gt;size = self::$sizes[(int) rand(0, 5)];<br />
&nbsp;&nbsp;&nbsp; self::$count++;<br />
&nbsp; }<br />
<br />
&nbsp; public static function getCount(){<br />
&nbsp;&nbsp;&nbsp; return self::$count;<br />
&nbsp; }<br />
<br />
&nbsp; public static function setStart($val){<br />
&nbsp;&nbsp;&nbsp; self::$start = $val;<br />
&nbsp; }<br />
<br />
&nbsp; /*<br />
&nbsp;&nbsp; * Define the sorting rules for RubberBalls - which is to sort by self::$colors.<br />
&nbsp;&nbsp; * PHP's usort() method will call this function many many times.<br />
&nbsp;&nbsp; */<br />
&nbsp; public static function compare($a, $b){<br />
&nbsp;&nbsp;&nbsp; if($a-&gt;color &lt; $b-&gt;color) return -1;<br />
&nbsp;&nbsp;&nbsp; else if($a-&gt;color == $b-&gt;color) return 0;<br />
&nbsp;&nbsp;&nbsp; else return 1;<br />
&nbsp; }<br />
<br />
&nbsp; public function __toString(){<br />
&nbsp;&nbsp;&nbsp; return "RubberBall[<br />
&nbsp;&nbsp; &nbsp;&nbsp; name=$this-&gt;name, <br />
&nbsp;&nbsp; &nbsp;&nbsp; color=" . self::$colors[$this-&gt;color] . ", <br />
&nbsp;&nbsp; &nbsp;&nbsp; size=" . $this-&gt;size . "\"]"; <br />
&nbsp; }<br />
}<br />
<br />
# RubberBall counts the number of objects created, but allows us to <br />
# set the starting count like so:<br />
RubberBall::setStart(100);<br />
<br />
# create a PHP Array and initialize it with (12) RubberBall objects<br />
$balls = array();<br />
for($i = 0; $i &lt; 12; $i++) $balls[] = new RubberBall();<br />
<br />
# sort the RubberBall objects. PHP's usort() calls RubberBall::compare() to do this.<br />
usort($balls, array("RubberBall", "compare"));<br />
<br />
# print the sorted results - uses the static RubberBall::getCount().<br />
echo 'RubberBall count: ' . RubberBall::getCount() . '&lt;br&gt;&lt;br&gt;';<br />
foreach($balls as $ball) echo $ball . '&lt;br&gt;';<br />
<br />
I'm running out of room so I have not displayed the output, but it is tested and it works great.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85277""></a>
  <div class="note">
   <strong class="user">Mathijs Vos</strong>
   <a href="#85277" class="date">23-Aug-2008 03:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">foo<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static </span><span class="default">$myStaticClass</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">myStaticClass </span><span class="keyword">= new </span><span class="default">bar</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">bar<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(){}<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Please note, this won't work.<br />
Use self::$myStaticClass = new bar(); instead of self::myStaticClass = new bar(); (note the $ sign).<br />
Took me an hour to figure this out.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85267""></a>
  <div class="note">
   <strong class="user">nacion_01 at hotmail dot com</strong>
   <a href="#85267" class="date">22-Aug-2008 09:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Thanks to all of you, this is my little contribution, i hope it give you ideas:<br />
<br />
The next script uses a class Logs to store and show the logs. You can show the last logs of your scripts. You can:<br />
&nbsp;- push ("a new log")<br />
&nbsp;- show () // the last logs until the las call to show()<br />
&nbsp;- showAll() // to show all the logs and<br />
&nbsp;- message("a forced message") // which sends a message to the log output with out storing the message (you may imagine other solutions)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Logs</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// this makes this thing to be hidden from outside calls [private]<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">private static </span><span class="default">$logs</span><span class="keyword">=array(</span><span class="string">"start"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$index</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// this is available for outside calls [public]<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">getLogsCount</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// the constant "self" refers to the class, instead $this wich<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // refers to an instance of a class (this class is not instanced,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // its running itself, so lets use "self" and "::" to access the <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // "static" functions and properties.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$logs</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$count</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">show</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//echo ("# Logs::show ".self::getLogsCount());<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">=</span><span class="default">self</span><span class="keyword">::</span><span class="default">getLogsCount</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// start the show since the last log shown ($index)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">self</span><span class="keyword">::</span><span class="default">$index</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$count</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">=</span><span class="default">self</span><span class="keyword">::</span><span class="default">$logs</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">message</span><span class="keyword">(</span><span class="default">$log</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// update the las log shown index<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$index</span><span class="keyword">=</span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">showAll</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//echo ("# Logs::show ".self::getLogsCount());<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // show the logs from cero to last<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // im starting with php so I use for (...) because its my<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // way in AS3.0 but you better keep checking that<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">=</span><span class="default">self</span><span class="keyword">::</span><span class="default">getLogsCount</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$count</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">=</span><span class="default">self</span><span class="keyword">::</span><span class="default">$logs</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">message</span><span class="keyword">(</span><span class="default">$log</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Yup! a new log!<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">push</span><span class="keyword">(</span><span class="default">$msg</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//self::message("# Logs::push ");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$logs</span><span class="keyword">, </span><span class="default">$msg</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Send a message to the html output.<br />
&nbsp;&nbsp;&nbsp; // Now, a little words about this one, you may want to use an<br />
&nbsp;&nbsp;&nbsp; // special button on your html or somewhere else to show or hide the<br />
&nbsp;&nbsp;&nbsp; // logs, because you are in development and want to keep this thing<br />
&nbsp;&nbsp;&nbsp; // little hidden of your clients. Probably may generate a java script<br />
&nbsp;&nbsp;&nbsp; // variable so instead of [echo "&lt;p&gt;...&lt;/p&gt;";] is ok to <br />
&nbsp;&nbsp;&nbsp; // use [echo "&lt;script&gt;logs+=$msg&lt;/script&gt;"]<br />
&nbsp;&nbsp;&nbsp; // I dont know, figure it out.<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">message</span><span class="keyword">(</span><span class="default">$msg</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;p&gt;- Logs &amp;gt; </span><span class="default">$msg</span><span class="string"> &lt;/p&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="comment">// Ready to use.<br />
// to call a function in an static class, refer to the function as<br />
// TheClass::theFunction<br />
// remember, php uses :: (sorry, I still learning why because I come from the AS3 world)<br />
<br />
</span><span class="default">Logs</span><span class="keyword">::</span><span class="default">push</span><span class="keyword">(</span><span class="string">"log1"</span><span class="keyword">);<br />
</span><span class="default">Logs</span><span class="keyword">::</span><span class="default">show</span><span class="keyword">();<br />
<br />
</span><span class="default">Logs</span><span class="keyword">::</span><span class="default">push</span><span class="keyword">(</span><span class="string">"log2"</span><span class="keyword">);<br />
</span><span class="default">Logs</span><span class="keyword">::</span><span class="default">show</span><span class="keyword">();<br />
<br />
</span><span class="default">Logs</span><span class="keyword">::</span><span class="default">push</span><span class="keyword">(</span><span class="string">"log3"</span><span class="keyword">);<br />
</span><span class="default">Logs</span><span class="keyword">::</span><span class="default">showAll</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84421""></a>
  <div class="note">
   <strong class="user">michaelnospamdotnospamdaly at kayakwiki</strong>
   <a href="#84421" class="date">13-Jul-2008 06:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Further to the comment by "erikzoltan NOSPAM at msn NOSPAM dot com" on 05-Apr-2005 03:40,<br />
<br />
It isn't just constructors that can't be used for static variable initialization, it's functions in general:<br />
<br />
class XYZ<br />
{<br />
&nbsp;&nbsp; static&nbsp; $foo = chr(1);&nbsp;&nbsp; // will fail<br />
}<br />
<br />
You have to do external initialization:<br />
<br />
XYZ::$foo = chr(1);<br />
class XYZ<br />
{<br />
&nbsp;&nbsp; static&nbsp; $foo;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81572""></a>
  <div class="note">
   <strong class="user">Siarhei</strong>
   <a href="#81572" class="date">04-Mar-2008 05:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a problem to make static property shared only for objects of self class not defining it in every child class. <br />
<br />
Example:<br />
<br />
class a<br />
{<br />
&nbsp; public static $s;<br />
&nbsp; <br />
&nbsp; public function get()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return self::$s;<br />
&nbsp; }<br />
}<br />
<br />
class b extends a { }<br />
<br />
class c extends b { }<br />
<br />
a::$s = 'a';<br />
<br />
$c = new c();<br />
echo $c-&gt;get(); // a<br />
<br />
There is solution i found:<br />
<br />
class a<br />
{<br />
&nbsp; public final function v($vs = null)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; static $s = null;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if(!is_null($vs))<br />
&nbsp;&nbsp;&nbsp; $s = $vs;<br />
<br />
&nbsp;&nbsp;&nbsp; return $s;<br />
&nbsp; }<br />
}<br />
<br />
class b extends a { }<br />
<br />
class c extends b { }<br />
<br />
$a = new a();<br />
$a-&gt;v('a');<br />
<br />
$aa = new a();<br />
$aa-&gt;v('last a');<br />
<br />
$c = new c();<br />
$c-&gt;v('c');<br />
<br />
echo $a-&gt;v().' - '.$c-&gt;v(); // last a - c</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80661""></a>
  <div class="note">
   <strong class="user">inkredibl</strong>
   <a href="#80661" class="date">28-Jan-2008 12:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that you should read "Variables/Variable scope" if you are looking for static keyword use for declaring static variables inside functions (or methods). I myself had this gap in my PHP knowledge until recently and had to google to find this out. I think this page should have a "See also" link to static function variables.<br />
<a href="http://www.php.net/manual/en/language.variables.scope.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/language.variables.scope.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80162""></a>
  <div class="note">
   <strong class="user">ssj dot narutovash at gmail dot com</strong>
   <a href="#80162" class="date">01-Jan-2008 08:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's come to my attention that you cannot use a static member in an HEREDOC string.&nbsp; The following code<br />
<br />
class A<br />
{<br />
&nbsp; public static $BLAH = "user";<br />
<br />
&nbsp; function __construct()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; echo &lt;&lt;&lt;EOD<br />
&lt;h1&gt;Hello {self::$BLAH}&lt;/h1&gt;<br />
EOD;<br />
&nbsp; }<br />
}<br />
<br />
$blah = new A();<br />
<br />
produces this in the source code:<br />
<br />
&lt;h1&gt;Hello {self::}&lt;/h1&gt;<br />
<br />
Solution:<br />
<br />
before using a static member, store it in a local variable, like so:<br />
<br />
class B<br />
{<br />
&nbsp; public static $BLAH = "user";<br />
<br />
&nbsp; function __construct()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $blah = self::$BLAH;<br />
&nbsp;&nbsp;&nbsp; echo &lt;&lt;&lt;EOD<br />
&lt;h1&gt;Hello {$blah}&lt;/h1&gt;<br />
EOD;<br />
&nbsp; }<br />
}<br />
<br />
and the output's source code will be:<br />
<br />
&lt;h1&gt;Hello user&lt;/h1&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78528""></a>
  <div class="note">
   <strong class="user">gabe at mudbugmedia dot com</strong>
   <a href="#78528" class="date">16-Oct-2007 06:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Currently, inheritance with static methods can be a difficult matter, mainly because the 'self' keyword refers the exact class in which the reference is present, much like __CLASS__.&nbsp; Thus, in a case like the following:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; static function </span><span class="default">foo </span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"A::foo()"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; static function </span><span class="default">callFoo </span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">foo</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">B </span><span class="keyword">extends </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; static function </span><span class="default">foo </span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"B::foo()"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">B</span><span class="keyword">::</span><span class="default">callFoo</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Will output 'A::foo()' instead of 'B::foo()'.&nbsp; As of 5.2 and below, there is no clean way to get around this.&nbsp; get_class(), self, __CLASS__, and even the stack (examined by debug_backtrace()) will all report the appropriate class as being 'A', which is resolved before being called.&nbsp; There is no sane way, short of determining the filename and line of code from debug_backtrace, re-opening the file, and parsing that out yourself (this kludge is left as an exercise to only the most demented developer).&nbsp; This setup makes it extremely difficult to develop an ORM like ActiveRecord in PHP.<br />
<br />
You'll see some rather ugly solutions below, including passing the class name to callFoo().&nbsp; Another possible route is to skip static calls all together and make a function that returns an instance of the object, thus allowing you to gain access to the '$this' variable (which *will* know the class name that was originally being called):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; static function </span><span class="default">foo </span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"A::foo()"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; static function </span><span class="default">callFoo </span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">B </span><span class="keyword">extends </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; static function </span><span class="default">foo </span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"B::foo()"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function </span><span class="default">getB </span><span class="keyword">() { return new </span><span class="default">B</span><span class="keyword">(); }<br />
<br />
</span><span class="default">getB</span><span class="keyword">()-&gt;</span><span class="default">callFoo</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Luckily, a work around has been committed to PHP's HEAD, and should be available in the 5.3 series.&nbsp; The concept is called "late static binding" (LSB), and can be read about at <a href="http://www.colder.ch/news/08-24-2007/28/late-static-bindings-expl.html .&nbsp; Basically, you" rel="nofollow" target="_blank">http://www.colder.ch/news/08-24-2007/28/late-static-bindings-expl.html .&nbsp; Basically, you</a>'d have the exact same setup in as in the first example, but instead of calling "self::foo()", you instead would call "static::foo()".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76989""></a>
  <div class="note">
   <strong class="user">Clment Genzmer</strong>
   <a href="#76989" class="date">09-Aug-2007 01:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The best solution I found for the non-inherited static problem : pass the name of the class.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public static </span><span class="default">$my_vars </span><span class="keyword">= </span><span class="string">"I'm in A"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; static function </span><span class="default">find</span><span class="keyword">(</span><span class="default">$class</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$vars </span><span class="keyword">= </span><span class="default">get_class_vars</span><span class="keyword">(</span><span class="default">$class</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$vars</span><span class="keyword">[</span><span class="string">'my_vars'</span><span class="keyword">] ;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
class </span><span class="default">B </span><span class="keyword">extends </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; public static </span><span class="default">$my_vars </span><span class="keyword">= </span><span class="string">"I'm in B"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">B</span><span class="keyword">::</span><span class="default">find</span><span class="keyword">(</span><span class="string">"B"</span><span class="keyword">);<br />
</span><span class="comment">// Result : "I'm in B"<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70337""></a>
  <div class="note">
   <strong class="user">james at earthemergency dot org</strong>
   <a href="#70337" class="date">12-Oct-2006 04:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One way to get around the fact that static variables are shared throughout the inheritance tree to map a instance variable to a global variable named after the class.<br />
<br />
<span class="default">&lt;?php<br />
$GLOBALS</span><span class="keyword">[</span><span class="string">'static'</span><span class="keyword">] = array();<br />
class </span><span class="default">root </span><span class="keyword">{<br />
&nbsp; public </span><span class="default">$self</span><span class="keyword">;<br />
&nbsp; public static </span><span class="default">$all_instances</span><span class="keyword">;<br />
&nbsp; <br />
&nbsp; function </span><span class="default">__construct</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">self </span><span class="keyword">= &amp;</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'static'</span><span class="keyword">][</span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">)];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">self</span><span class="keyword">[</span><span class="string">'instances'</span><span class="keyword">] += </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$all_instances&nbsp; &nbsp;&nbsp; </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
class </span><span class="default">child_a </span><span class="keyword">extends </span><span class="default">root </span><span class="keyword">{<br />
}<br />
<br />
class </span><span class="default">child_b </span><span class="keyword">extends </span><span class="default">root </span><span class="keyword">{<br />
}<br />
<br />
</span><span class="default">$a1 </span><span class="keyword">= new </span><span class="default">child_a</span><span class="keyword">();<br />
</span><span class="default">$a2 </span><span class="keyword">= new </span><span class="default">child_a</span><span class="keyword">();<br />
</span><span class="default">$a3 </span><span class="keyword">= new </span><span class="default">child_a</span><span class="keyword">();<br />
<br />
</span><span class="default">$b1 </span><span class="keyword">= new </span><span class="default">child_b</span><span class="keyword">();<br />
</span><span class="default">$b2 </span><span class="keyword">= new </span><span class="default">child_b</span><span class="keyword">();<br />
<br />
echo </span><span class="string">"child_a instances: " </span><span class="keyword">. </span><span class="default">$a3</span><span class="keyword">-&gt;</span><span class="default">self</span><span class="keyword">[</span><span class="string">'instances'</span><span class="keyword">] . </span><span class="string">" | all_instances: " </span><span class="keyword">. </span><span class="default">child_a</span><span class="keyword">::</span><span class="default">$all_instances </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
echo </span><span class="string">"child_b instances: " </span><span class="keyword">. </span><span class="default">$b2</span><span class="keyword">-&gt;</span><span class="default">self</span><span class="keyword">[</span><span class="string">'instances'</span><span class="keyword">] . </span><span class="string">" | all_instances: " </span><span class="keyword">. </span><span class="default">child_b</span><span class="keyword">::</span><span class="default">$all_instances </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
echo </span><span class="string">"\$GLOBALS['static'] = "</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'static'</span><span class="keyword">]);<br />
</span><span class="default">?&gt;<br />
</span><br />
// Output:<br />
child_a instances: 3 | all_instances: 5<br />
child_b instances: 2 | all_instances: 5<br />
$GLOBALS['static'] = array(2) {<br />
&nbsp; ["child_a"]=&gt;<br />
&nbsp; &amp;array(1) {<br />
&nbsp;&nbsp;&nbsp; ["instances"]=&gt;<br />
&nbsp;&nbsp;&nbsp; int(3)<br />
&nbsp; }<br />
&nbsp; ["child_b"]=&gt;<br />
&nbsp; &amp;array(1) {<br />
&nbsp;&nbsp;&nbsp; ["instances"]=&gt;<br />
&nbsp;&nbsp;&nbsp; int(2)<br />
&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69766""></a>
  <div class="note">
   <strong class="user">jan(dot)-re-mov.ethis-mazanek/AT-abeo.cz</strong>
   <a href="#69766" class="date">19-Sep-2006 11:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This reacts to comment from <br />
michael at digitalgnosis dot removethis dot com from 16-Dec-2004 08:09<br />
<br />
&gt; Note that Base::Foo() may no longer be declared 'static' since static methods cannot be overridden (this means it will trigger errors if error level includes E_STRICT.)<br />
<br />
In my test on Windows PHP Version 5.1.4 it seems that it *is possible* to override static method.<br />
<br />
This code works at my machine without producing E_STRICT error:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Base<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp; static function </span><span class="default">Foo </span><span class="keyword">( </span><span class="default">$class </span><span class="keyword">= </span><span class="default">__CLASS__ </span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">call_user_func</span><span class="keyword">(array(</span><span class="default">$class</span><span class="keyword">,</span><span class="string">'Bar'</span><span class="keyword">));<br />
&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Derived </span><span class="keyword">extends </span><span class="default">Base<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp; static function </span><span class="default">Foo </span><span class="keyword">( </span><span class="default">$class </span><span class="keyword">= </span><span class="default">__CLASS__ </span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">Foo</span><span class="keyword">(</span><span class="default">$class</span><span class="keyword">);<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; static function </span><span class="default">Bar </span><span class="keyword">()<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo </span><span class="string">"Derived::Bar()"</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">Derived</span><span class="keyword">::</span><span class="default">Foo</span><span class="keyword">(); </span><span class="comment">// This time it works.<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58437""></a>
  <div class="note">
   <strong class="user">Jakob Schwendner</strong>
   <a href="#58437" class="date">04-Nov-2005 01:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is my solution to the static search method problem for data objects. I found the debug_trace version posted earlier quite clever, but a little too risky. <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; static function </span><span class="default">find</span><span class="keyword">(</span><span class="default">$class</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">$class</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$obj</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Bar </span><span class="keyword">extends </span><span class="default">Foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; static function </span><span class="default">find</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">parent</span><span class="keyword">::</span><span class="default">find</span><span class="keyword">(</span><span class="default">__CLASS__</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">print_hello</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo(</span><span class="string">"hello"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; <br />
}<br />
<br />
</span><span class="default">Bar</span><span class="keyword">::</span><span class="default">find</span><span class="keyword">()-&gt;</span><span class="default">print_hello</span><span class="keyword">();<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52519""></a>
  <div class="note">
   <strong class="user">aidan at php dot net</strong>
   <a href="#52519" class="date">04-May-2005 07:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To check if a function was called statically or not, you'll need to do:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">foo </span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$isStatic </span><span class="keyword">= !(isset(</span><span class="default">$this</span><span class="keyword">) &amp;&amp; </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">) == </span><span class="default">__CLASS__</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
More at (<a href="http://blog.phpdoc.info/archives/4-Schizophrenic-Methods.html" rel="nofollow" target="_blank">http://blog.phpdoc.info/archives/4-Schizophrenic-Methods.html</a>). <br />
<br />
(I'll add this to the manual soon).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51640""></a>
  <div class="note">
   
   <a href="#51640" class="date">06-Apr-2005 03:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You misunderstand the meaning of inheritance : there is no duplication of members when you inherit from a base class. Members are shared through inheritance, and can be accessed by derived classes according to visibility (public, protected, private).<br />
<br />
The difference between static and non static members is only that a non static member is tied to an instance of a class although a static member is tied to the class, and not to a particular instance.<br />
That is, a static member is shared by all instances of a class although a non static member exists for each instance of&nbsp; class.<br />
<br />
Thus, in your example, the static property has the correct value, according to principles of object oriented conception.<br />
class Base<br />
{<br />
&nbsp; public $a;<br />
&nbsp; public static $b;<br />
}<br />
<br />
class Derived extends Base<br />
{<br />
&nbsp; public function __construct()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $this-&gt;a = 0;<br />
&nbsp;&nbsp;&nbsp; parent::$b = 0;<br />
&nbsp; }<br />
&nbsp; public function f()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $this-&gt;a++;<br />
&nbsp;&nbsp;&nbsp; parent::$b++;<br />
&nbsp; }<br />
}<br />
<br />
$i1 = new Derived;<br />
$i2 = new Derived;<br />
<br />
$i1-&gt;f();<br />
echo $i1-&gt;a, ' ', Derived::$b, "\n";<br />
$i2-&gt;f();<br />
echo $i2-&gt;a, ' ', Derived::$b, "\n";<br />
<br />
outputs<br />
1 1<br />
1 2</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51631""></a>
  <div class="note">
   <strong class="user">erikzoltan NOSPAM at msn NOSPAM dot com</strong>
   <a href="#51631" class="date">05-Apr-2005 05:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was doing this in a more complex example (than previous note) and found that I had to place the initialization statement AFTER the class in a file where I was using the __autoload function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51627""></a>
  <div class="note">
   <strong class="user">erikzoltan NOSPAM at msn NOSPAM dot com</strong>
   <a href="#51627" class="date">05-Apr-2005 03:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had trouble getting a static member to be an instance of a class.&nbsp; Here's a code example that DOESN'T work.&nbsp; <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// This doesn't work.<br />
<br />
</span><span class="keyword">class </span><span class="default">XYZ<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// The following line will throw a syntax error.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static </span><span class="default">$ABC </span><span class="keyword">= new </span><span class="default">ABC</span><span class="keyword">();<br />
}<br />
<br />
class </span><span class="default">ABC<br />
</span><span class="keyword">{<br />
}<br />
<br />
</span><span class="default">$myXyz </span><span class="keyword">= new </span><span class="default">XYZ</span><span class="keyword">();<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$myXyz</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">XYZ</span><span class="keyword">::</span><span class="default">$ABC</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
I get the following entry in my error log.&nbsp; <br />
<br />
[05-Apr-2005 18:27:41] PHP Parse error: syntax error, unexpected T_NEW in staticTest.php on line 7<br />
<br />
Since PHP doesn't appear to allow static constructor methods, I was only able to resolve this problem by moving the initialization outside of the class.&nbsp; To make my code more self-documenting I put it above the class.&nbsp; The revised example below appears to work.&nbsp; <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// This will work.<br />
<br />
// Moved the static variable's initialization logic outside the class.&nbsp; <br />
</span><span class="default">XYZ</span><span class="keyword">::</span><span class="default">$ABC </span><span class="keyword">= new </span><span class="default">ABC</span><span class="keyword">();<br />
<br />
class </span><span class="default">XYZ<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// I'm just declaring the static variable here, but I'm not initializing it.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static </span><span class="default">$ABC</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">ABC<br />
</span><span class="keyword">{<br />
}<br />
<br />
</span><span class="default">$myXyz </span><span class="keyword">= new </span><span class="default">XYZ</span><span class="keyword">();<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$myXyz</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">XYZ</span><span class="keyword">::</span><span class="default">$ABC</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51484""></a>
  <div class="note">
   <strong class="user">michalf at ncac dot torun dot pl</strong>
   <a href="#51484" class="date">31-Mar-2005 02:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Inheritance with the static elements is a nightmare in php. Consider the following code:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">BaseClass</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static </span><span class="default">$property</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">DerivedClassOne </span><span class="keyword">extends </span><span class="default">BaseClass</span><span class="keyword">{<br />
}<br />
<br />
class </span><span class="default">DerivedClassTwo </span><span class="keyword">extends </span><span class="default">BaseClass</span><span class="keyword">{<br />
}<br />
<br />
</span><span class="default">DerivedClassOne</span><span class="keyword">::</span><span class="default">$property </span><span class="keyword">= </span><span class="string">"foo"</span><span class="keyword">;<br />
</span><span class="default">DerivedClassTwo</span><span class="keyword">::</span><span class="default">$property </span><span class="keyword">= </span><span class="string">"bar"</span><span class="keyword">;<br />
<br />
echo </span><span class="default">DerivedClassOne</span><span class="keyword">::</span><span class="default">$property</span><span class="keyword">; </span><span class="comment">//one would naively expect "foo"...<br />
</span><span class="default">?&gt;<br />
</span><br />
What would you expect as an output? "foo"? wrong. It is "bar"!!! Static variables are not inherited, they point to the BaseClass::$property.<br />
<br />
At this point I think it is a big pity inheritance does not work in case of static variables/methods. Keep this in mind and save your time when debugging.<br />
<br />
best regards - michal</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49036""></a>
  <div class="note">
   <strong class="user">c_daught_d at earthlink dot net</strong>
   <a href="#49036" class="date">14-Jan-2005 01:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A twist on christian at koch dot net's Singleton example is setting/getting non-static member variables using self::$instance-&gt;varname within static method calls.<br />
<br />
Within the modified Singleton class below, the member variable $value is set within the getInstance static method instead of the constructor.<br />
<br />
Whether this is "pure" OPP, I don't know. But it does work, is worth mentioning, and could be usefull.<br />
<br />
class Singleton<br />
{<br />
<br />
&nbsp;&nbsp;&nbsp; private static $instance=null;<br />
&nbsp;&nbsp;&nbsp; private $value=null;<br />
<br />
&nbsp;&nbsp;&nbsp; private function __construct() {<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public static function getInstance() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( self::$instance == null ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "&lt;br&gt;new&lt;br&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; self::$instance = new Singleton("values");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; self::$instance-&gt;value = "values";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "&lt;br&gt;old&lt;br&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return self::$instance;<br />
&nbsp;&nbsp;&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49018""></a>
  <div class="note">
   <strong class="user">ference at super_delete_brose dot co dot uk</strong>
   <a href="#49018" class="date">14-Jan-2005 07:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Both static and const fields can be accessed with the :: operator. However, while a constant can't be changed, this is not true for static variables.<br />
<br />
If you want to access an array using the :: operator you have to declare the array static, since you can't have a constant array. Beware:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">foo<br />
</span><span class="keyword">{<br />
&nbsp; static </span><span class="default">$stuff </span><span class="keyword">= array(</span><span class="string">'key1' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'key2' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">);<br />
}<br />
<br />
class </span><span class="default">bar<br />
</span><span class="keyword">{<br />
&nbsp; public function </span><span class="default">__construct</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">foo</span><span class="keyword">::</span><span class="default">$stuff</span><span class="keyword">);<br />
&nbsp; }<br />
}<br />
<br />
class </span><span class="default">bad<br />
</span><span class="keyword">{<br />
&nbsp; public function </span><span class="default">__construct</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">foo</span><span class="keyword">::</span><span class="default">$stuff </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
new </span><span class="default">bar</span><span class="keyword">();&nbsp; &nbsp; </span><span class="comment">// prints array(2) { ["key1"]=&gt; int(1) ["key2"]=&gt; int(2) }<br />
<br />
</span><span class="keyword">new </span><span class="default">bad</span><span class="keyword">();<br />
new </span><span class="default">bar</span><span class="keyword">();&nbsp; &nbsp; </span><span class="comment">// prints bool(false)<br />
</span><span class="default">?&gt;<br />
</span><br />
A safe implementation requires a little more effort:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">foo<br />
</span><span class="keyword">{<br />
&nbsp; private static </span><span class="default">$stuff </span><span class="keyword">= array(</span><span class="string">'key1' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'key2' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">);<br />
<br />
&nbsp; public final static function </span><span class="default">getstuff</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$stuff</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
class </span><span class="default">bar<br />
</span><span class="keyword">{<br />
&nbsp; public function </span><span class="default">__construct</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">foo</span><span class="keyword">::</span><span class="default">getstuff</span><span class="keyword">());<br />
&nbsp; }<br />
}<br />
<br />
class </span><span class="default">bad<br />
</span><span class="keyword">{<br />
&nbsp; public function </span><span class="default">__construct</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">foo</span><span class="keyword">::</span><span class="default">$stuff </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
new </span><span class="default">bar</span><span class="keyword">();&nbsp; &nbsp; </span><span class="comment">// prints array(2) { ["key1"]=&gt; int(1) ["key2"]=&gt; int(2) }<br />
</span><span class="keyword">new </span><span class="default">bad</span><span class="keyword">();&nbsp; &nbsp; </span><span class="comment">// results in a fatal error<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48234""></a>
  <div class="note">
   <strong class="user">michael at digitalgnosis dot removethis dot com</strong>
   <a href="#48234" class="date">15-Dec-2004 11:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's another way to do the same thing (see my post below) without having to muck up your Foo() function's parameters in the Base and all Derived classes.<br />
<br />
However, you cannot use static, and still must define Foo() in derived classes.&nbsp; This way also performs slower and may not always work--but it DOES make for prettier code.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Base<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">Foo </span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$call </span><span class="keyword">= </span><span class="default">debug_backtrace</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">call_user_func</span><span class="keyword">(array(</span><span class="default">$call</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'class'</span><span class="keyword">],</span><span class="string">'Bar'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Derived </span><span class="keyword">extends </span><span class="default">Base<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">Foo </span><span class="keyword">() { </span><span class="default">parent</span><span class="keyword">::</span><span class="default">Foo</span><span class="keyword">(); }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">Bar </span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"Derived::Bar()"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">Derived</span><span class="keyword">::</span><span class="default">Foo</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48233""></a>
  <div class="note">
   <strong class="user">michael at digitalgnosis dot removethis dot com</strong>
   <a href="#48233" class="date">15-Dec-2004 11:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are trying to write classes that do this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Base<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; static function </span><span class="default">Foo </span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">Bar</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Derived </span><span class="keyword">extends </span><span class="default">Base<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">Bar </span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"Derived::Bar()"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">Derived</span><span class="keyword">::</span><span class="default">Foo</span><span class="keyword">(); </span><span class="comment">// we want this to print "Derived::Bar()"<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Then you'll find that PHP can't (unless somebody knows the Right Way?) since 'self::' refers to the class which owns the /code/, not the actual class which is called at runtime. (__CLASS__ doesn't work either, because: A. it cannot appear before ::, and B. it behaves like 'self')<br />
<br />
But if you must, then here's a (only slightly nasty) workaround:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Base<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">Foo </span><span class="keyword">( </span><span class="default">$class </span><span class="keyword">= </span><span class="default">__CLASS__ </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">call_user_func</span><span class="keyword">(array(</span><span class="default">$class</span><span class="keyword">,</span><span class="string">'Bar'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Derived </span><span class="keyword">extends </span><span class="default">Base<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">Foo </span><span class="keyword">( </span><span class="default">$class </span><span class="keyword">= </span><span class="default">__CLASS__ </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">Foo</span><span class="keyword">(</span><span class="default">$class</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">Bar </span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"Derived::Bar()"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">Derived</span><span class="keyword">::</span><span class="default">Foo</span><span class="keyword">(); </span><span class="comment">// This time it works.&nbsp; <br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Note that Base::Foo() may no longer be declared 'static' since static methods cannot be overridden (this means it will trigger errors if error level includes E_STRICT.)<br />
<br />
If Foo() takes parameters then list them before $class=__CLASS__ and in most cases, you can just forget about that parameter throughout your code.<br />
<br />
The major caveat is, of course, that you must override Foo() in every subclass and must always include the $class parameter when calling parent::Foo().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47445""></a>
  <div class="note">
   <strong class="user">christian at koch dot net</strong>
   <a href="#47445" class="date">16-Nov-2004 09:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
STATIC is cool. Here is an example how to get an existing instance as a Singleton:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Singleton </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$instance</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$value</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">value </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">getInstance</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">self</span><span class="keyword">::</span><span class="default">$instance </span><span class="keyword">== </span><span class="default">null </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;br&gt;new&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$instance </span><span class="keyword">= new </span><span class="default">Singleton</span><span class="keyword">(</span><span class="string">"values"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;br&gt;old&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$instance</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}<br />
<br />
</span><span class="default">$x </span><span class="keyword">= </span><span class="default">Singleton</span><span class="keyword">::</span><span class="default">getInstance</span><span class="keyword">();<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">); </span><span class="comment">// returns the new object<br />
</span><span class="default">$y </span><span class="keyword">= </span><span class="default">Singleton</span><span class="keyword">::</span><span class="default">getInstance</span><span class="keyword">();<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">); </span><span class="comment">// returns the existing object<br />
</span><span class="default">?&gt;<br />
</span><br />
ckj</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47277""></a>
  <div class="note">
   <strong class="user">dmintz at davidmintz dot org</strong>
   <a href="#47277" class="date">09-Nov-2004 03:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Editor's Note: This is done for back compatability. Depending on your error level, An E_STRICT error will be thrown.]<br />
<br />
PHP 5.0.1 doesn't seem to mind if you call a static method in a non-static context, though it might not be the best of style to do so.<br />
<br />
On the other hand, PHP complains if you try to try to call a non-static method in a static context (if your error reporting is cranked up to E_STRICT).<br />
<br />
class Test {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; static function static_method() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo "Here's your static method: Foo!&lt;br /&gt;\n";<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; function static_method_caller() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo "static_method_caller says:&nbsp; ";$this-&gt;static_method();&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; function non_static() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo "I am not a static method&lt;br /&gt;\n";<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}<br />
<br />
$t = new Test();<br />
$t-&gt;static_method();<br />
$t-&gt;static_method_caller();<br />
Test::non_static();</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="language.oop5.paamayim-nekudotayim.html">Scope Resolution Operator (::)</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="language.oop5.abstract.html">Class Abstraction</a></div>
 <div class="up"><a href="language.oop5.html">Classes and Objects</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
