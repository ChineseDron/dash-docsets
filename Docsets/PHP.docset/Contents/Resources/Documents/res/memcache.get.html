<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Retrieve item from the server</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="memcache.flush.html">Memcache::flush</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="memcache.getextendedstats.html">Memcache::getExtendedStats</a></div>
 <div class="up"><a href="class.memcache.html">Memcache</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="memcache.get" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Memcache::get</h1>
  <p class="verinfo">(PECL memcache &gt;= 0.2.0)</p><p class="refpurpose"><span class="refname">Memcache::get</span> &mdash; <span class="dc-title">Retrieve item from the server</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-memcache.get-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><b>Memcache::get</b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$key</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter reference">&$flags</tt></span>
  ] )</div>

  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><b>Memcache::get</b></span>
    ( <span class="methodparam"><span class="type">array</span> <tt class="parameter">$keys</tt></span>
   [, <span class="methodparam"><span class="type">array</span> <tt class="parameter reference">&$flags</tt></span>
  ] )</div>

  
  <p class="para rdfs-comment">
   <span class="function"><b>Memcache::get()</b></span> returns previously stored data if
   an item with such <i><tt class="parameter">key</tt></i> exists on the server at this
   moment.
  </p>

  <p class="para">
   You can pass array of keys to <span class="function"><b>Memcache::get()</b></span> to get
   array of values. The result array will contain only found key-value pairs.
  </p>
  
 </div>

  
 <div class="refsect1 parameters" id="refsect1-memcache.get-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">key</tt></i></span>
     <dd>

      <p class="para">
       The key or array of keys to fetch.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">flags</tt></i></span>
     <dd>

      <p class="para">
       If present, flags fetched along with the values will be written to this parameter. These
       flags are the same as the ones given to for example <span class="function"><a href="memcache.set.html" class="function">Memcache::set()</a></span>.
       The lowest byte of the int is reserved for pecl/memcache internal usage (e.g. to indicate
       compression and serialization status).
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-memcache.get-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the string associated with the <i><tt class="parameter">key</tt></i> or
   <b><tt>FALSE</tt></b> on failure or if such <i><tt class="parameter">key</tt></i> was not found.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-memcache.get-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-3979">
    <p><b>Example #1 <span class="function"><b>Memcache::get()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">/*&nbsp;procedural&nbsp;API&nbsp;*/<br /></span><span style="color: #0000BB">$memcache_obj&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">memcache_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'memcache_host'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">11211</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$var&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">memcache_get</span><span style="color: #007700">(</span><span style="color: #0000BB">$memcache_obj</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'some_key'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;OO&nbsp;API&nbsp;*/<br /></span><span style="color: #0000BB">$memcache_obj&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Memcache</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$memcache_obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'memcache_host'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">11211</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$var&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$memcache_obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #DD0000">'some_key'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;<br />You&nbsp;also&nbsp;can&nbsp;use&nbsp;array&nbsp;of&nbsp;keys&nbsp;as&nbsp;a&nbsp;parameter.<br />If&nbsp;such&nbsp;item&nbsp;wasn't&nbsp;found&nbsp;at&nbsp;the&nbsp;server,&nbsp;the&nbsp;result<br />array&nbsp;simply&nbsp;will&nbsp;not&nbsp;include&nbsp;such&nbsp;key.<br />*/<br /><br />/*&nbsp;procedural&nbsp;API&nbsp;*/<br /></span><span style="color: #0000BB">$memcache_obj&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">memcache_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'memcache_host'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">11211</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$var&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">memcache_get</span><span style="color: #007700">(</span><span style="color: #0000BB">$memcache_obj</span><span style="color: #007700">,&nbsp;Array(</span><span style="color: #DD0000">'some_key'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'another_key'</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">/*&nbsp;OO&nbsp;API&nbsp;*/<br /></span><span style="color: #0000BB">$memcache_obj&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Memcache</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$memcache_obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'memcache_host'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">11211</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$var&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$memcache_obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(Array(</span><span style="color: #DD0000">'some_key'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'second_key'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="102485""></a>
  <div class="note">
   <strong class="user">Michael Brenden</strong>
   <a href="#102485" class="date">17-Feb-2011 02:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware, if there's a backslash present in the key name then the results are unpredictable and random.<br />
<br />
I was generating keys like this:<br />
<br />
$mc_key = get_called_class(). $_COOKIE['crumb'];<br />
<br />
This works fine when get_called_class() returns CLASSNAME.<br />
<br />
But then I began using namespaces, and get_class_class() of course returned NAMESPACE\CLASSNAME<br />
<br />
Well that backslash sends Memcache into quite the tizzy.<br />
No errors, mind you, just insanity.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96912""></a>
  <div class="note">
   <strong class="user">janis at unrepublic dot com</strong>
   <a href="#96912" class="date">22-Mar-2010 02:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For me it was the case that if such key doesn't exist, null is returned not false.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86351""></a>
  <div class="note">
   <strong class="user">nate</strong>
   <a href="#86351" class="date">14-Oct-2008 08:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware that when using the multi-key version, Memcache::get returns bool false if no servers are configured for the pool (and possibly if other errors occur as well while attempting to fetch). Also, Memcache class throws annoying warnings on every get/set/delete-type calls if you have no servers added to the pool.<br />
<br />
The following snippet var_dump's bool false, not an empty array like you might expect.<br />
<br />
<span class="default">&lt;?php<br />
$cache </span><span class="keyword">= new </span><span class="default">Memcache</span><span class="keyword">;<br />
<br />
</span><span class="comment">// no $cache-&gt;addServer calls (for example,<br />
</span><span class="default">due to temporarily disabling </span><span class="keyword">use </span><span class="default">of cache</span><span class="keyword">)<br />
<br />
</span><span class="comment">// use @ symbol to ignore warning<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(<br />
&nbsp;&nbsp;&nbsp; @</span><span class="default">$cache</span><span class="keyword">-&gt;</span><span class="default">get</span><span class="keyword">(array(</span><span class="string">'one'</span><span class="keyword">, </span><span class="string">'two'</span><span class="keyword">))<br />
);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84792""></a>
  <div class="note">
   <strong class="user">marko at nastja dot com</strong>
   <a href="#84792" class="date">30-Jul-2008 05:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It looks like memcache take only first 256 characters. So if you want to cache some (large) queries do md5 or similar before caching.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84275""></a>
  <div class="note">
   <strong class="user">jakub dot lopuszanski at nasza-klasa dot pl</strong>
   <a href="#84275" class="date">07-Jul-2008 07:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If deserialization fails for some reason, that is when memcache server returned flag 1 set, but the value was not a correctly serialized PHP data,<br />
then Memcache::get acts in a following way:<br />
<br />
If it was called with a single key to retrieve, then a warning is raised, but since it was not actually a bug of a server, the warning says something confusing like "Memcached Server Error: null" and the function returns bool(false).<br />
<br />
If it was called by passing an array (even with a single element in it), then the warning is not raised and the resulting array contains a value bool(false).<br />
<br />
Since there are some buffer overrun bugs present in Memcached Server, which from time to time cause overwriting of [part of] data and therefore rendering it impossible to deserialize, make sure to check if the result of Memcache::get contains only string, or deserialized structure. If the result is bool,dobule or long, then something went wrong.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="memcache.flush.html">Memcache::flush</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="memcache.getextendedstats.html">Memcache::getExtendedStats</a></div>
 <div class="up"><a href="class.memcache.html">Memcache</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
