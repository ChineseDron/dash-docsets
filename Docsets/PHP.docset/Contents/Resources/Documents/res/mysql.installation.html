<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Installation</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mysql.requirements.html">Requirements</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mysql.configuration.html">Runtime Configuration</a></div>
 <div class="up"><a href="mysql.setup.html">Installing/Configuring</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="mysql.installation" class="section">
 <h2 class="title">Installation</h2>

 <p class="para" id="mysql.configure">
  For compiling, simply use the 
  <strong class="option configure">--with-mysql[=DIR]</strong>

  configuration option where the optional <i>[DIR]</i> points to 
  the MySQL installation directory.
 </p>
 <p class="para"> 
  Although this MySQL extension is compatible with MySQL 4.1.0 and greater, 
  it doesn&#039;t support the extra functionality that these versions provide. 
  For that, use the <a href="book.mysqli.html" class="link">MySQLi</a> extension.
 </p>
 <p class="para">
  If you would like to install the mysql extension along with the mysqli extension
  you have to use the same client library to avoid any conflicts.
 </p>

 <div class="section" id="mysql.installation.linux">
  <h2 class="title">Installation on Linux Systems</h2>
  <p class="para">
   Note: <i>[DIR]</i> is the path to the MySQL client library 
   files (<em class="emphasis">headers and libraries</em>), which can be downloaded from 
   <a href="http://www.mysql.com/" class="link external" title="Link : http://www.mysql.com/">&raquo;&nbsp;MySQL</a>.
  </p>
  <table class="doctable table">
   <caption><b>ext/mysql compile time support matrix</b></caption>
   
    <thead valign="middle">
     <tr valign="middle">
      <th>PHP Version</th>
      <th>Default</th>
      <th>Configure Options: <a href="mysqlnd.overview.html" class="link">mysqlnd</a></th>
      <th>Configure Options: <i>libmysql</i></th>
      <th>Changelog</th>
     </tr>

    </thead>

    <tbody valign="middle" class="tbody">
     <tr valign="middle">
      <td align="left">4.x.x</td>
      <td align="left">libmysql</td>
      <td align="left">Not Available</td>
      <td align="left"><strong class="option configure">--without-mysql</strong>
 to disable</td>
      <td align="left">MySQL enabled by default, MySQL client libraries are bundled</td>
     </tr>

     <tr valign="middle">
      <td align="left">5.0.x, 5.1.x, 5.2.x</td>
      <td align="left">libmysql</td>
      <td align="left">Not Available</td>
      <td align="left"><strong class="option configure">--with-mysql=[DIR]</strong>
</td>
      <td align="left">
       MySQL is no longer enabled by default, and the MySQL client libraries
       are <a href="faq.databases.html#faq.databases.mysql.php5" class="link">no longer bundled</a>
      </td>
     </tr>

     <tr valign="middle">
      <td align="left">5.3.x</td>
      <td align="left">libmysql</td>
      <td align="left"><strong class="option configure">--with-mysql=mysqlnd</strong>
</td>
      <td align="left"><strong class="option configure">--with-mysql=[DIR]</strong>
</td>
      <td align="left">mysqlnd is now available</td>
     </tr>

     <tr valign="middle">
      <td align="left">5.4.x</td>
      <td align="left">mysqlnd</td>
      <td align="left"><strong class="option configure">--with-mysql</strong>
</td>
      <td align="left"><strong class="option configure">--with-mysql=[DIR]</strong>
</td>
      <td align="left">mysqlnd is now the default</td>
     </tr>

    </tbody>
   
  </table>

 </div>

 <div class="section" id="mysql.installation.windows">
  <h2 class="title">Installation on Windows Systems</h2>
  <div class="section">
   <h2 class="title">PHP 4</h2>
   <p class="para">
    The PHP MySQL extension is compiled into PHP.
   </p>
  </div>
  <div class="section">
   <h2 class="title">PHP 5.0.x, 5.1.x, 5.2.x</h2>
   <p class="para">
    MySQL is no longer enabled by default, so the 
    <var class="filename">php_mysql.dll</var> DLL must be enabled inside of 
    <var class="filename">php.ini</var>. Also, PHP needs access to the MySQL client library. A file
    named <var class="filename">libmysql.dll</var> is included in the Windows PHP 
    distribution and in order for PHP to talk to MySQL this file needs to be 
    available to the Windows systems <span class="envar">PATH</span>. See the FAQ
    titled &quot;<a href="faq.installation.html#faq.installation.addtopath" class="link">How do I add my PHP 
    directory to the <var class="varname"><var class="varname">PATH</var></var> on Windows</a>&quot; for information on how to do
    this. Although copying <var class="filename">libmysql.dll</var> to the Windows
    system directory also works (because the system directory is by default in 
    the system&#039;s <span class="envar">PATH</span>), it&#039;s not recommended.
   </p>
   <p class="para">
    As with enabling any PHP extension (such as 
    <var class="filename">php_mysql.dll</var>), the PHP directive 
    <a href="ini.core.html#ini.extension-dir" class="link">extension_dir</a> should be set to 
    the directory where the PHP extensions are located. See also the 
    <a href="install.windows.manual.html" class="link">Manual Windows Installation
    Instructions</a>. An example extension_dir value for PHP 5 is
    <i>c:\php\ext</i>
   </p>
   <blockquote class="note"><p><b class="note">Note</b>: 
    <p class="para">
     If when starting the web server an error similar to the following occurs:
     <i>&quot;Unable to load dynamic library &#039;./php_mysql.dll&#039;&quot;</i>, 
     this is because <var class="filename">php_mysql.dll</var> and/or 
     <var class="filename">libmysql.dll</var> cannot be found by the system.
    </p>
   </p></blockquote>
  </div>
  <div class="section">
   <h2 class="title">PHP 5.3.0+</h2>
   <p class="para">
    The <a href="mysqlnd.overview.html" class="link">MySQL Native Driver</a> is enabled by
    default. Include <var class="filename">php_mysql.dll</var>, but <var class="filename">libmysql.dll</var>
    is no longer required or used.
   </p>
  </div>
 </div>

 <div class="section" id="mysql.installation.notes">
  <h2 class="title">MySQL Installation Notes</h2>
   <div class="warning"><b class="warning">Warning</b>
    <p class="para">
     Crashes and startup problems of PHP may be encountered
     when loading this extension in conjunction with the recode extension.
     See the <a href="ref.recode.html" class="link">recode</a> extension for more
     information.
    </p>
   </div>
   <blockquote class="note"><p><b class="note">Note</b>: 
    <p class="para">
     If you need charsets other than <em class="emphasis">latin</em> (default), you
     have to install external (not bundled) libmysql with compiled charset
     support. 
    </p>
   </p></blockquote>
 </div>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="105100""></a>
  <div class="note">
   <strong class="user">Steve in Weston-Super-Mare</strong>
   <a href="#105100" class="date">27-Jul-2011 10:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had problems when moving from a version of PHP that used the isapi dll to the fast cgi version. The script to register the script maps compained that there was already a script map in place.<br />
<br />
I went to the IIS control panel, right clicked on websites and removed the php association in the Home Directory | Configuration screen.<br />
<br />
However, the fastcgi script still complained about existing script map. Finally I tracked it down, I had to right click on Default Web Site and clear out the php mappings from there too.<br />
<br />
Then it all worked, except that for some strange reason, the php.ini file that gets picked up is the one from my old PHP directory, not the latest upgrade one. But this can be detected by running phpinfo which shows the loaded php.ini file so I knew which one to amend with the fastcgi options.<br />
<br />
Bit of a hassle to figure it all out but it does work in the end.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103741""></a>
  <div class="note">
   <strong class="user">o dot kochetilov at gmail dot com</strong>
   <a href="#103741" class="date">30-Apr-2011 12:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that libmySQL.dll in MySQL bin directory should be renamed in order to use right library (that comes with PHP).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99763""></a>
  <div class="note">
   <strong class="user">buzzr515 at gmx dot de</strong>
   <a href="#99763" class="date">03-Sep-2010 09:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
i've experienced a similar (if not the same) problem.<br />
<br />
to enable the mysql_... and mysqli_... funtionality, i opened the php.ini file to uncomment the following lines:<br />
;extension=php_mysql.dll<br />
;extension=php_mysqli.dll<br />
;extension=php_pdo_mysql.dll<br />
<br />
but phpinfo() still stated that no mysql extensions were loaded.<br />
i tried the fixes and suggestions above with no success.<br />
so i invoked the windows shell and typed ("Path" environment variable set to the PHP &amp; MySQL directories):<br />
php.exe -m<br />
<br />
this returned the following error: "PHP Startup: Unable to load dynamic library 'C:\php5\php_mysql.dll' - Module not found."<br />
<br />
this told me that PHP didn't recognize what i thought was the extensions directory. it searched all other places first (sys-dir, workin'-dir, the MySQL "bin" dir because of the "Path" variable set, and even a curious directory "C:\php5" that doesn't even exist on my mashine) but not the expected "ext" directory.<br />
<br />
so the fix was to go to "php.ini" again and uncomment the following line:<br />
;extension_dir="ext"<br />
<br />
this fixed it for me.<br />
so if module loading is done improperly, first of all check the "Path" environment variable and the "php.ini" file - especially the "extension_dir" config value - and check if all values are set to their correct values.<br />
<br />
hope this helps any1.<br />
<br />
----------------------------------------<br />
OS: Win7 Ultimate x86<br />
Apache v2.2.16<br />
PHP v5.3.3<br />
MySQL v5.1.50</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98636""></a>
  <div class="note">
   <strong class="user">titus at antennasystems dot com</strong>
   <a href="#98636" class="date">28-Jun-2010 10:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I ran into the soon to be infamous problem of upgrading to PHP 5.3.x.<br />
The way I found to resolve the issue was to<br />
<br />
1: Do "mysql_upgrade" on the server (to make MySQL compliant with MySQL 4.1+).<br />
<br />
2: Modify my.cf to not use old passwords: <br />
(Just comment out "old_passwords=1")<br />
#old_passwords=1<br />
<br />
3: Change the root password so you can properly connect to the server:<br />
SET PASSWORD FOR 'root'@'localhost' = PASSWORD('enter_new_password_here');<br />
<br />
<a href="http://dev.mysql.com/doc/refman/5.1/en/old-client.html" rel="nofollow" target="_blank">http://dev.mysql.com/doc/refman/5.1/en/old-client.html</a><br />
<a href="http://tinyurl.com/mysql-old-password" rel="nofollow" target="_blank">http://tinyurl.com/mysql-old-password</a><br />
<br />
Taken from <a href="http://www.comsiteconstruction.com/blueonyx-modifications" rel="nofollow" target="_blank">http://www.comsiteconstruction.com/blueonyx-modifications</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98475""></a>
  <div class="note">
   <strong class="user">samishiikihaku23 at gmail dot com</strong>
   <a href="#98475" class="date">17-Jun-2010 11:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've checked all the 5.3 distribution files from <a href="http://windows.php.net/ for the " rel="nofollow" target="_blank">http://windows.php.net/ for the </a>"libmysql.dll" file that this article claims is in the distributions.<br />
<br />
None of the 5.3 dist. supplies "libmysql.dll". Download the recent 5.2 release for the file.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97656""></a>
  <div class="note">
   <strong class="user">heneryville at gmail dot com</strong>
   <a href="#97656" class="date">30-Apr-2010 01:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I believe that this is happens especially with Windows 7.&nbsp; As far I I've been able to tell XP and Vista come with this line enabled, but windows 7 comments it out and notes that the DNS will handle this.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96655""></a>
  <div class="note">
   <strong class="user">jez300</strong>
   <a href="#96655" class="date">09-Mar-2010 05:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Windows 7 / Vista:<br />
<br />
This took me hours to realise... If you receive the message:<br />
Warning: mysql_connect(): [2002] A connection attempt failed because the connected party did not (trying to connect via tcp://localhost:3306)<br />
<br />
You may need to map localhost to your IP address (127.0.0.1) which is used to find your Mysql server.<br />
<br />
Edit {systemdrive}:\Windows\System32\drivers\etc<br />
<br />
Make sure "127.0.0.1&nbsp; &nbsp; &nbsp;&nbsp; localhost" isn't commented out with # at the begining of the line!<br />
<br />
-----<br />
<br />
You may also like to know that if you change from MySQL 32 bit to 64 bit and the Mysql service wont start you may need to rename or delete your Mysql data<br />
{systemdrive}:\ProgramData\x MySQL\MySQL Server 5.1\data<br />
<br />
Regards,<br />
<br />
Jez.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91662""></a>
  <div class="note">
   <strong class="user">amatsak at gmail dot com</strong>
   <a href="#91662" class="date">22-Jun-2009 02:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have experienced exactly the same problem as flo_stefi at yahoo dot com below. It appears that instead of loading libmysql.dll that came with the PHP package, the PHP engine was loading libmySQL.dll located in MySQL's bin directory, which was causing Apache to crash.<br />
<br />
I fixed the problem by renaming MySQL's libmySQL.dll into libmySQL_renamed.dll. Now PHP loads the library that came with its package and everything works fine.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89999""></a>
  <div class="note">
   <strong class="user">flo_stefi at yahoo dot com</strong>
   <a href="#89999" class="date">01-Apr-2009 04:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had a problem to make mysql work with php on Windows. Using mysql-5.1.32-win32 and php-5.2.9-1-win32-installer I've installed mysql and php. All seemed to be ok (phpinfo displayed the right information) but when running a basic script mysql_connect(..) the apache ends with a stupid error like "[Wed Apr 01 14:44:05 2009] [notice] Parent: child process exited with status 3221225477 -- Restarting.". <br />
I manage to fix it by using instead of libMySQL.dll from mysql package another version (libmysql.dll) I had from a previous installation.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88881""></a>
  <div class="note">
   <strong class="user">lobbanhousehold at gmail dot com</strong>
   <a href="#88881" class="date">11-Feb-2009 07:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I figured my problem why php and mysql weren't working together even though they worked independent of each other. PHP was configured with IIS 5.1 (XP) using the php5isapi.dll file.<br />
<br />
I also set system variables in PATH adding the locations of both php and mysql folders. I also moved the mysql DLL files from ext folder to the root folder of php.<br />
<br />
I discovered that php would not work with mysql if php folder was not located on the C:\ (i.e. C:\php). I also renamed the libmysql.dll that came with mysql so that the system would not see it, and moved the one that came with php to C:\WINDOWS\system32.<br />
<br />
After I did this last paragraph i was able to see MySQL and MySQLi sections listed in phpinfo() which indicates MySQL is finally enabled</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86750""></a>
  <div class="note">
   <strong class="user">admin at kobashicomputing dot com</strong>
   <a href="#86750" class="date">01-Nov-2008 11:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Unfortunately this one bit me for a good half day. <br />
<br />
Placing libmysql.dll in the php/ext directory did not work. I tested this under 5.6.2. You need to have it somewhere in the PATH or in SYSTEM or SYSTEM32. But to me this is very silly to force the user to have to setup environment variables or move DLLs around. It shouldn't have to go that far and be the responsibility of the setup program and/or developer.<br />
<br />
I really think this issue could be solved doing this:<br />
1) Installer/distribution bundle all three files together under one directory (ext) - php_mysql.dll/php_mysqli.dll/libmysql.dll<br />
<br />
2) Developer goes into php_mysql.dll/php_mysqli.dll and in DllMain() on DLL_PROCESS_ATTACH:<br />
&nbsp; LoadLibrary ("./libmysql.dll");<br />
<br />
Then you don't have to deal with this problem and neither do your users.<br />
<br />
Kerry Kobashi</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84582""></a>
  <div class="note">
   <strong class="user">rogerc at clubsites dot net</strong>
   <a href="#84582" class="date">20-Jul-2008 07:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This error also occurs if the windows path entry for an older version of MYSQL appears before the path entry for a late version of php.&nbsp; In which case the version of libmysl.dll in the MySQL bin directory will be found before the one bundled with php.&nbsp; Reversing the system path entries so php is first fixes this problem.&nbsp; e.g.<br />
PATH= ...&nbsp; c:\php;C:\Program Files\MySQL\MySQL Server 4.1\bin</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83819""></a>
  <div class="note">
   <strong class="user">Mahesh</strong>
   <a href="#83819" class="date">13-Jun-2008 02:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In windows systems, the error "unable to load dynamic library php_mysql.dll" also happens if there's an old version of the file libmysql.dll in the "windows\system32" folder.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83134""></a>
  <div class="note">
   <strong class="user">jonnus</strong>
   <a href="#83134" class="date">12-May-2008 05:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In windows systems, the same error "unable to load dynamic library php_mysql.dll" will happen, if there's an old version of the file in the "windows\system32" folder.<br />
Either remove it or update it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mysql.requirements.html">Requirements</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mysql.configuration.html">Runtime Configuration</a></div>
 <div class="up"><a href="mysql.setup.html">Installing/Configuring</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
