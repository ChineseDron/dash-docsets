<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Fetch a result row as an associative, a numeric array, or both</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mysqli-result.fetch-all.html">mysqli_result::fetch_all</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mysqli-result.fetch-assoc.html">mysqli_result::fetch_assoc</a></div>
 <div class="up"><a href="class.mysqli-result.html">mysqli_result</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="mysqli-result.fetch-array" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mysqli_result::fetch_array</h1>
  <h1 class="refname">mysqli_fetch_array</h1>
  <p class="verinfo">(PHP 5)</p><p class="refpurpose"><span class="refname">mysqli_result::fetch_array</span> -- <span class="refname">mysqli_fetch_array</span> &mdash; <span class="dc-title">Fetch a result row as an associative, a numeric array, or both</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-mysqli-result.fetch-array-description">
  <h3 class="title">Description</h3>
  <p class="para">Object oriented style</p>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><b>mysqli_result::fetch_array</b></span>
    ([ <span class="methodparam"><span class="type">int</span> <tt class="parameter">$resulttype</tt><span class="initializer"> = MYSQLI_BOTH</span></span>
  ] )</div>

  <p class="para rdfs-comment">Procedural style</p>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><b>mysqli_fetch_array</b></span>
    ( <span class="methodparam"><span class="type"><a href="class.mysqli-result.html" class="type mysqli_result">mysqli_result</a></span> <tt class="parameter">$result</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$resulttype</tt><span class="initializer"> = MYSQLI_BOTH</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Returns an array that corresponds to the fetched row or <b><tt>NULL</tt></b> if there
   are no more rows for the resultset represented by the
   <i><tt class="parameter">result</tt></i> parameter.
  </p>
  <p class="para">
   <span class="function"><b>mysqli_fetch_array()</b></span> is an extended version of the
   <span class="function"><a href="mysqli-result.fetch-row.html" class="function">mysqli_fetch_row()</a></span> function. In addition to storing the
   data in the numeric indices of the result array, the 
   <span class="function"><b>mysqli_fetch_array()</b></span> function can also store the data
   in associative indices, using the field names of the result set as keys.
  </p>
  <blockquote class="note"><p><b class="note">Note</b>: <span class="simpara">Field names returned by this function
are <em class="emphasis">case-sensitive</em>.</span></p></blockquote>
  <blockquote class="note"><p><b class="note">Note</b>: <span class="simpara">This function sets NULL fields to
the PHP <b><tt>NULL</tt></b> value.</span></p></blockquote>
  <p class="para">
   If two or more columns of the result have the same field names, the last
   column will take precedence and overwrite the earlier data. In order to
   access multiple columns with the same name, the numerically indexed
   version of the row must be used.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-mysqli-result.fetch-array-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>
<span class="term"><i><tt class="parameter">
result</tt></i></span><dd>
<p class="para">Procedural style only: A result set
identifier returned by <span class="function"><a href="mysqli.query.html" class="function">mysqli_query()</a></span>, <span class="function"><a href="mysqli.store-result.html" class="function">mysqli_store_result()</a></span>
or <span class="function"><a href="mysqli.use-result.html" class="function">mysqli_use_result()</a></span>.</p></dd>
</dt>

    <dt>

     <span class="term"><i><tt class="parameter">resulttype</tt></i></span>
     <dd>

      <p class="para">
       This optional parameter is a constant indicating what type of array
       should be produced from the current row data. The possible values for
       this parameter are the constants <b><tt>MYSQLI_ASSOC</tt></b>,
       <b><tt>MYSQLI_NUM</tt></b>, or <b><tt>MYSQLI_BOTH</tt></b>.
      </p>
      <p class="para">
       By using the <b><tt>MYSQLI_ASSOC</tt></b> constant this function
       will behave identically to the <span class="function"><a href="mysqli-result.fetch-assoc.html" class="function">mysqli_fetch_assoc()</a></span>,
       while <b><tt>MYSQLI_NUM</tt></b> will behave identically to the
       <span class="function"><a href="mysqli-result.fetch-row.html" class="function">mysqli_fetch_row()</a></span> function. The final option 
       <b><tt>MYSQLI_BOTH</tt></b> will create a single array with the
       attributes of both.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-mysqli-result.fetch-array-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns an array of strings that corresponds to the fetched row or <b><tt>NULL</tt></b> if there
   are no more rows in resultset.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-mysqli-result.fetch-array-examples">
  <h3 class="title">Examples</h3>
  <div class="example" id="example-1656">
   <p><b>Example #1 Object oriented style</b></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$mysqli&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"my_user"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"my_password"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"world"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;check&nbsp;connection&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">mysqli_connect_errno</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Connect&nbsp;failed:&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mysqli_connect_error</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;exit();<br />}<br /><br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;Name,&nbsp;CountryCode&nbsp;FROM&nbsp;City&nbsp;ORDER&nbsp;by&nbsp;ID&nbsp;LIMIT&nbsp;3"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;numeric&nbsp;array&nbsp;*/<br /></span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">MYSQLI_NUM</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">printf&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"%s&nbsp;(%s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">/*&nbsp;associative&nbsp;array&nbsp;*/<br /></span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">MYSQLI_ASSOC</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">printf&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"%s&nbsp;(%s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">"Name"</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">"CountryCode"</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">/*&nbsp;associative&nbsp;and&nbsp;numeric&nbsp;array&nbsp;*/<br /></span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">MYSQLI_BOTH</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">printf&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"%s&nbsp;(%s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">"CountryCode"</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">/*&nbsp;free&nbsp;result&nbsp;set&nbsp;*/<br /></span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">/*&nbsp;close&nbsp;connection&nbsp;*/<br /></span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <div class="example" id="example-1657">
   <p><b>Example #2 Procedural style</b></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$link&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"my_user"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"my_password"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"world"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;check&nbsp;connection&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">mysqli_connect_errno</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Connect&nbsp;failed:&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mysqli_connect_error</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;exit();<br />}<br /><br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;Name,&nbsp;CountryCode&nbsp;FROM&nbsp;City&nbsp;ORDER&nbsp;by&nbsp;ID&nbsp;LIMIT&nbsp;3"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;numeric&nbsp;array&nbsp;*/<br /></span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYSQLI_NUM</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">printf&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"%s&nbsp;(%s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">/*&nbsp;associative&nbsp;array&nbsp;*/<br /></span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYSQLI_ASSOC</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">printf&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"%s&nbsp;(%s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">"Name"</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">"CountryCode"</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">/*&nbsp;associative&nbsp;and&nbsp;numeric&nbsp;array&nbsp;*/<br /></span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MYSQLI_BOTH</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">printf&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"%s&nbsp;(%s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">"CountryCode"</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">/*&nbsp;free&nbsp;result&nbsp;set&nbsp;*/<br /></span><span style="color: #0000BB">mysqli_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;close&nbsp;connection&nbsp;*/<br /></span><span style="color: #0000BB">mysqli_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>The above examples will output:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
Kabul (AFG)
Qandahar (AFG)
Herat (AFG)
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-mysqli-result.fetch-array-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="mysqli-result.fetch-assoc.html" class="function" rel="rdfs-seeAlso">mysqli_fetch_assoc()</a> - Fetch a result row as an associative array</span></li>
    <li class="member"><span class="function"><a href="mysqli-result.fetch-row.html" class="function" rel="rdfs-seeAlso">mysqli_fetch_row()</a> - Get a result row as an enumerated array</span></li>
    <li class="member"><span class="function"><a href="mysqli-result.fetch-object.html" class="function" rel="rdfs-seeAlso">mysqli_fetch_object()</a> - Returns the current row of a result set as an object</span></li>
    <li class="member"><span class="function"><a href="mysqli.query.html" class="function" rel="rdfs-seeAlso">mysqli_query()</a> - Performs a query on the database</span></li>
    <li class="member"><span class="function"><a href="mysqli-result.data-seek.html" class="function" rel="rdfs-seeAlso">mysqli_data_seek()</a> - Adjusts the result pointer to an arbitary row in the result</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="104189""></a>
  <div class="note">
   <strong class="user">ahouston at gmail dot com</strong>
   <a href="#104189" class="date">31-May-2011 02:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a function to return an associative array with multiple columns as keys to the array.<br />
<br />
This is a rough approximation of the perl DBI-&gt;fetchall_hashref function - something I find myself using quite a bit.<br />
<br />
Given a simple mySQL table:<br />
<br />
mysql&gt; select * from city;<br />
+----------------+----------------+------------------+------------+<br />
| country&nbsp; &nbsp; &nbsp; &nbsp; | region&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; | city&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; | hemisphere |<br />
+----------------+----------------+------------------+------------+<br />
| South Africa&nbsp;&nbsp; | KwaZulu-Natal&nbsp; | Durban&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; | South&nbsp; &nbsp; &nbsp; |<br />
| South Africa&nbsp;&nbsp; | Gauteng&nbsp; &nbsp; &nbsp; &nbsp; | Johannesburg&nbsp; &nbsp;&nbsp; | South&nbsp; &nbsp; &nbsp; |<br />
| South Africa&nbsp;&nbsp; | Gauteng&nbsp; &nbsp; &nbsp; &nbsp; | Tshwane&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | South&nbsp; &nbsp; &nbsp; |<br />
| South Africa&nbsp;&nbsp; | KwaZulu-Natal&nbsp; | Pietermaritzburg | South&nbsp; &nbsp; &nbsp; |<br />
| United Kingdom | Greater London | City of London&nbsp;&nbsp; | North&nbsp; &nbsp; &nbsp; |<br />
| United Kingdom | Greater London | Wimbledon&nbsp; &nbsp; &nbsp; &nbsp; | North&nbsp; &nbsp; &nbsp; |<br />
| United Kingdom | Lancashire&nbsp; &nbsp;&nbsp; | Liverpool&nbsp; &nbsp; &nbsp; &nbsp; | North&nbsp; &nbsp; &nbsp; |<br />
| United Kingdom | Lancashire&nbsp; &nbsp;&nbsp; | Manchester&nbsp; &nbsp; &nbsp;&nbsp; | North&nbsp; &nbsp; &nbsp; |<br />
+----------------+----------------+------------------+------------+<br />
<br />
*Note* - this is a simple function that makes no attempt to keep multiple values per key, so you need to specify all the unique keys you require.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $link </span><span class="keyword">= </span><span class="default">mysqli_connect</span><span class="keyword">(</span><span class="string">"localhost"</span><span class="keyword">, </span><span class="string">"username"</span><span class="keyword">, </span><span class="string">"password"</span><span class="keyword">, </span><span class="string">"test"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysqli_query</span><span class="keyword">(</span><span class="default">$link</span><span class="keyword">, </span><span class="string">"select * from city"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results_arr </span><span class="keyword">= </span><span class="default">fetch_all_assoc</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">,array(</span><span class="string">'hemisphere'</span><span class="keyword">,</span><span class="string">'country'</span><span class="keyword">,</span><span class="string">'region'</span><span class="keyword">,</span><span class="string">'city'</span><span class="keyword">));<br />
<br />
function </span><span class="default">fetch_all_assoc</span><span class="keyword">(&amp; </span><span class="default">$result</span><span class="keyword">,</span><span class="default">$index_keys</span><span class="keyword">) {<br />
<br />
&nbsp; </span><span class="comment">// Args :&nbsp; &nbsp; $result = mysqli result variable (passed as reference to allow a free() at the end<br />
&nbsp; //&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $indexkeys = array of columns to index on<br />
&nbsp; // Returns : associative array indexed by the keys array<br />
<br />
&nbsp; </span><span class="default">$assoc </span><span class="keyword">= array();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// The array we're going to be returning<br />
<br />
&nbsp; </span><span class="keyword">while (</span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysqli_fetch_array</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">MYSQLI_ASSOC</span><span class="keyword">)) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pointer </span><span class="keyword">= &amp; </span><span class="default">$assoc</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Start the pointer off at the base of the array<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$index_keys</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$key_name </span><span class="keyword">= </span><span class="default">$index_keys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$row</span><span class="keyword">[</span><span class="default">$key_name</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; print </span><span class="string">"Error: Key </span><span class="default">$key_name</span><span class="string"> is not present in the results output.\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="default">false</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$key_val</span><span class="keyword">= isset(</span><span class="default">$row</span><span class="keyword">[</span><span class="default">$key_name</span><span class="keyword">]) ? </span><span class="default">$row</span><span class="keyword">[</span><span class="default">$key_name</span><span class="keyword">]&nbsp; : </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$pointer</span><span class="keyword">[</span><span class="default">$key_val</span><span class="keyword">])) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pointer</span><span class="keyword">[</span><span class="default">$key_val</span><span class="keyword">] = </span><span class="string">""</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Start a new node<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pointer </span><span class="keyword">= &amp; </span><span class="default">$pointer</span><span class="keyword">[</span><span class="default">$key_val</span><span class="keyword">];&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Move the pointer on to the new node<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pointer </span><span class="keyword">= &amp; </span><span class="default">$pointer</span><span class="keyword">[</span><span class="default">$key_val</span><span class="keyword">];&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Already exists, move the pointer on to the new node<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } </span><span class="comment">// for $i<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // At this point, $pointer should be at the furthest point on the tree of keys<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Now we can go through all the columns and place their values on the tree<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // For ease of use, include the index keys and their values at this point too<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$row </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pointer</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp; } </span><span class="comment">// $row<br />
<br />
&nbsp; /* free result set */<br />
&nbsp; </span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">close</span><span class="keyword">();<br />
<br />
&nbsp; return(</span><span class="default">$assoc</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95881""></a>
  <div class="note">
   <strong class="user">Jammerx2</strong>
   <a href="#95881" class="date">26-Jan-2010 07:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Putting multiple rows into an array:<br />
<br />
<span class="default">&lt;?php<br />
$mysqli </span><span class="keyword">= new </span><span class="default">mysqli</span><span class="keyword">(</span><span class="string">"localhost"</span><span class="keyword">, </span><span class="string">"my_user"</span><span class="keyword">, </span><span class="string">"my_password"</span><span class="keyword">, </span><span class="string">"world"</span><span class="keyword">);<br />
<br />
</span><span class="comment">/* check connection */<br />
</span><span class="keyword">if (</span><span class="default">mysqli_connect_errno</span><span class="keyword">()) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"Connect failed: %s\n"</span><span class="keyword">, </span><span class="default">mysqli_connect_error</span><span class="keyword">());<br />
&nbsp;&nbsp;&nbsp; exit();<br />
}<br />
<br />
</span><span class="default">$query </span><span class="keyword">= </span><span class="string">"SELECT Name, CountryCode FROM City ORDER by ID LIMIT 3"</span><span class="keyword">;<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">);<br />
<br />
while(</span><span class="default">$row </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">fetch_array</span><span class="keyword">())<br />
{<br />
</span><span class="default">$rows</span><span class="keyword">[] = </span><span class="default">$row</span><span class="keyword">;<br />
}<br />
<br />
foreach(</span><span class="default">$rows </span><span class="keyword">as </span><span class="default">$row</span><span class="keyword">)<br />
{<br />
echo </span><span class="default">$row</span><span class="keyword">[</span><span class="string">'CountryCode'</span><span class="keyword">];<br />
}<br />
<br />
</span><span class="comment">/* free result set */<br />
</span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">close</span><span class="keyword">();<br />
<br />
</span><span class="comment">/* close connection */<br />
</span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">close</span><span class="keyword">();<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mysqli-result.fetch-all.html">mysqli_result::fetch_all</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mysqli-result.fetch-assoc.html">mysqli_result::fetch_assoc</a></div>
 <div class="up"><a href="class.mysqli-result.html">mysqli_result</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
