<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>GD and Image Functions</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="image.examples.merged-watermark.html">Using imagecopymerge to create a translucent watermark</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.gd-info.html">gd_info</a></div>
 <div class="up"><a href="book.image.html">GD</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="ref.image" class="reference">
 <h1 class="title">GD and Image Functions</h1>

 









































































































































































































































































































































































































































































































































































































































<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.gd-info.html">gd_info</a> â€” Retrieve information about the currently installed GD library</li><li><a href="function.getimagesize.html">getimagesize</a> â€” Get the size of an image</li><li><a href="function.image-type-to-extension.html">image_type_to_extension</a> â€” Get file extension for image type</li><li><a href="function.image-type-to-mime-type.html">image_type_to_mime_type</a> â€” Get Mime-Type for image-type returned by getimagesize,
   exif_read_data, exif_thumbnail, exif_imagetype</li><li><a href="function.image2wbmp.html">image2wbmp</a> â€” Output image to browser or file</li><li><a href="function.imagealphablending.html">imagealphablending</a> â€” Set the blending mode for an image</li><li><a href="function.imageantialias.html">imageantialias</a> â€” Should antialias functions be used or not</li><li><a href="function.imagearc.html">imagearc</a> â€” Draws an arc</li><li><a href="function.imagechar.html">imagechar</a> â€” Draw a character horizontally</li><li><a href="function.imagecharup.html">imagecharup</a> â€” Draw a character vertically</li><li><a href="function.imagecolorallocate.html">imagecolorallocate</a> â€” Allocate a color for an image</li><li><a href="function.imagecolorallocatealpha.html">imagecolorallocatealpha</a> â€” Allocate a color for an image</li><li><a href="function.imagecolorat.html">imagecolorat</a> â€” Get the index of the color of a pixel</li><li><a href="function.imagecolorclosest.html">imagecolorclosest</a> â€” Get the index of the closest color to the specified color</li><li><a href="function.imagecolorclosestalpha.html">imagecolorclosestalpha</a> â€” Get the index of the closest color to the specified color + alpha</li><li><a href="function.imagecolorclosesthwb.html">imagecolorclosesthwb</a> â€” Get the index of the color which has the hue, white and blackness</li><li><a href="function.imagecolordeallocate.html">imagecolordeallocate</a> â€” De-allocate a color for an image</li><li><a href="function.imagecolorexact.html">imagecolorexact</a> â€” Get the index of the specified color</li><li><a href="function.imagecolorexactalpha.html">imagecolorexactalpha</a> â€” Get the index of the specified color + alpha</li><li><a href="function.imagecolormatch.html">imagecolormatch</a> â€” Makes the colors of the palette version of an image more closely match the true color version</li><li><a href="function.imagecolorresolve.html">imagecolorresolve</a> â€” Get the index of the specified color or its closest possible alternative</li><li><a href="function.imagecolorresolvealpha.html">imagecolorresolvealpha</a> â€” Get the index of the specified color + alpha or its closest possible alternative</li><li><a href="function.imagecolorset.html">imagecolorset</a> â€” Set the color for the specified palette index</li><li><a href="function.imagecolorsforindex.html">imagecolorsforindex</a> â€” Get the colors for an index</li><li><a href="function.imagecolorstotal.html">imagecolorstotal</a> â€” Find out the number of colors in an image's palette</li><li><a href="function.imagecolortransparent.html">imagecolortransparent</a> â€” Define a color as transparent</li><li><a href="function.imageconvolution.html">imageconvolution</a> â€” Apply a 3x3 convolution matrix, using coefficient and offset</li><li><a href="function.imagecopy.html">imagecopy</a> â€” Copy part of an image</li><li><a href="function.imagecopymerge.html">imagecopymerge</a> â€” Copy and merge part of an image</li><li><a href="function.imagecopymergegray.html">imagecopymergegray</a> â€” Copy and merge part of an image with gray scale</li><li><a href="function.imagecopyresampled.html">imagecopyresampled</a> â€” Copy and resize part of an image with resampling</li><li><a href="function.imagecopyresized.html">imagecopyresized</a> â€” Copy and resize part of an image</li><li><a href="function.imagecreate.html">imagecreate</a> â€” Create a new palette based image</li><li><a href="function.imagecreatefromgd2.html">imagecreatefromgd2</a> â€” Create a new image from GD2 file or URL</li><li><a href="function.imagecreatefromgd2part.html">imagecreatefromgd2part</a> â€” Create a new image from a given part of GD2 file or URL</li><li><a href="function.imagecreatefromgd.html">imagecreatefromgd</a> â€” Create a new image from GD file or URL</li><li><a href="function.imagecreatefromgif.html">imagecreatefromgif</a> â€” Create a new image from file or URL</li><li><a href="function.imagecreatefromjpeg.html">imagecreatefromjpeg</a> â€” Create a new image from file or URL</li><li><a href="function.imagecreatefrompng.html">imagecreatefrompng</a> â€” Create a new image from file or URL</li><li><a href="function.imagecreatefromstring.html">imagecreatefromstring</a> â€” Create a new image from the image stream in the string</li><li><a href="function.imagecreatefromwbmp.html">imagecreatefromwbmp</a> â€” Create a new image from file or URL</li><li><a href="function.imagecreatefromxbm.html">imagecreatefromxbm</a> â€” Create a new image from file or URL</li><li><a href="function.imagecreatefromxpm.html">imagecreatefromxpm</a> â€” Create a new image from file or URL</li><li><a href="function.imagecreatetruecolor.html">imagecreatetruecolor</a> â€” Create a new true color image</li><li><a href="function.imagedashedline.html">imagedashedline</a> â€” Draw a dashed line</li><li><a href="function.imagedestroy.html">imagedestroy</a> â€” Destroy an image</li><li><a href="function.imageellipse.html">imageellipse</a> â€” Draw an ellipse</li><li><a href="function.imagefill.html">imagefill</a> â€” Flood fill</li><li><a href="function.imagefilledarc.html">imagefilledarc</a> â€” Draw a partial arc and fill it</li><li><a href="function.imagefilledellipse.html">imagefilledellipse</a> â€” Draw a filled ellipse</li><li><a href="function.imagefilledpolygon.html">imagefilledpolygon</a> â€” Draw a filled polygon</li><li><a href="function.imagefilledrectangle.html">imagefilledrectangle</a> â€” Draw a filled rectangle</li><li><a href="function.imagefilltoborder.html">imagefilltoborder</a> â€” Flood fill to specific color</li><li><a href="function.imagefilter.html">imagefilter</a> â€” Applies a filter to an image</li><li><a href="function.imagefontheight.html">imagefontheight</a> â€” Get font height</li><li><a href="function.imagefontwidth.html">imagefontwidth</a> â€” Get font width</li><li><a href="function.imageftbbox.html">imageftbbox</a> â€” Give the bounding box of a text using fonts via freetype2</li><li><a href="function.imagefttext.html">imagefttext</a> â€” Write text to the image using fonts using FreeType 2</li><li><a href="function.imagegammacorrect.html">imagegammacorrect</a> â€” Apply a gamma correction to a GD image</li><li><a href="function.imagegd2.html">imagegd2</a> â€” Output GD2 image to browser or file</li><li><a href="function.imagegd.html">imagegd</a> â€” Output GD image to browser or file</li><li><a href="function.imagegif.html">imagegif</a> â€” Output image to browser or file</li><li><a href="function.imagegrabscreen.html">imagegrabscreen</a> â€” Captures the whole screen</li><li><a href="function.imagegrabwindow.html">imagegrabwindow</a> â€” Captures a window</li><li><a href="function.imageinterlace.html">imageinterlace</a> â€” Enable or disable interlace</li><li><a href="function.imageistruecolor.html">imageistruecolor</a> â€” Finds whether an image is a truecolor image</li><li><a href="function.imagejpeg.html">imagejpeg</a> â€” Output image to browser or file</li><li><a href="function.imagelayereffect.html">imagelayereffect</a> â€” Set the alpha blending flag to use the bundled libgd layering effects</li><li><a href="function.imageline.html">imageline</a> â€” Draw a line</li><li><a href="function.imageloadfont.html">imageloadfont</a> â€” Load a new font</li><li><a href="function.imagepalettecopy.html">imagepalettecopy</a> â€” Copy the palette from one image to another</li><li><a href="function.imagepng.html">imagepng</a> â€” Output a PNG image to either the browser or a file</li><li><a href="function.imagepolygon.html">imagepolygon</a> â€” Draws a polygon</li><li><a href="function.imagepsbbox.html">imagepsbbox</a> â€” Give the bounding box of a text rectangle using PostScript Type1 fonts</li><li><a href="function.imagepsencodefont.html">imagepsencodefont</a> â€” Change the character encoding vector of a font</li><li><a href="function.imagepsextendfont.html">imagepsextendfont</a> â€” Extend or condense a font</li><li><a href="function.imagepsfreefont.html">imagepsfreefont</a> â€” Free memory used by a PostScript Type 1 font</li><li><a href="function.imagepsloadfont.html">imagepsloadfont</a> â€” Load a PostScript Type 1 font from file</li><li><a href="function.imagepsslantfont.html">imagepsslantfont</a> â€” Slant a font</li><li><a href="function.imagepstext.html">imagepstext</a> â€” Draws a text over an image using PostScript Type1 fonts</li><li><a href="function.imagerectangle.html">imagerectangle</a> â€” Draw a rectangle</li><li><a href="function.imagerotate.html">imagerotate</a> â€” Rotate an image with a given angle</li><li><a href="function.imagesavealpha.html">imagesavealpha</a> â€” Set the flag to save full alpha channel information (as opposed to single-color transparency) when saving PNG images</li><li><a href="function.imagesetbrush.html">imagesetbrush</a> â€” Set the brush image for line drawing</li><li><a href="function.imagesetpixel.html">imagesetpixel</a> â€” Set a single pixel</li><li><a href="function.imagesetstyle.html">imagesetstyle</a> â€” Set the style for line drawing</li><li><a href="function.imagesetthickness.html">imagesetthickness</a> â€” Set the thickness for line drawing</li><li><a href="function.imagesettile.html">imagesettile</a> â€” Set the tile image for filling</li><li><a href="function.imagestring.html">imagestring</a> â€” Draw a string horizontally</li><li><a href="function.imagestringup.html">imagestringup</a> â€” Draw a string vertically</li><li><a href="function.imagesx.html">imagesx</a> â€” Get image width</li><li><a href="function.imagesy.html">imagesy</a> â€” Get image height</li><li><a href="function.imagetruecolortopalette.html">imagetruecolortopalette</a> â€” Convert a true color image to a palette image</li><li><a href="function.imagettfbbox.html">imagettfbbox</a> â€” Give the bounding box of a text using TrueType fonts</li><li><a href="function.imagettftext.html">imagettftext</a> â€” Write text to the image using TrueType fonts</li><li><a href="function.imagetypes.html">imagetypes</a> â€” Return the image types supported by this PHP build</li><li><a href="function.imagewbmp.html">imagewbmp</a> â€” Output image to browser or file</li><li><a href="function.imagexbm.html">imagexbm</a> â€” Output XBM image to browser or file</li><li><a href="function.iptcembed.html">iptcembed</a> â€” Embeds binary IPTC data into a JPEG image</li><li><a href="function.iptcparse.html">iptcparse</a> â€” Parse a binary IPTC block into single tags.</li><li><a href="function.jpeg2wbmp.html">jpeg2wbmp</a> â€” Convert JPEG image file to WBMP image file</li><li><a href="function.png2wbmp.html">png2wbmp</a> â€” Convert PNG image file to WBMP image file</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="106150""></a>
  <div class="note">
   <strong class="user">ingo at jache dot de</strong>
   <a href="#106150" class="date">14-Oct-2011 03:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I know this might look somewhat superfluous to others, but i once came across a situation where i needed a *strong* blur on an image without having ImageMagick installed. Executing the convolution-filter several times on the same image is awfully slow and still doesn't give a good blur.<br />
<br />
The function below accepts a truecolor-image and a blur-factor between 0.0 and 1.0. Beware: It's still quite slow.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">blurImage</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">,</span><span class="default">$blur</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$blur </span><span class="keyword">= </span><span class="default">$blur</span><span class="keyword">*</span><span class="default">$blur</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$blur </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">min</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">$blur</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$srcw </span><span class="keyword">= </span><span class="default">imagesx</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$srch </span><span class="keyword">= </span><span class="default">imagesy</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dstimg </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">$srcw</span><span class="keyword">,</span><span class="default">$srch</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$f1a </span><span class="keyword">= </span><span class="default">$blur</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$f1b </span><span class="keyword">= </span><span class="default">1.0 </span><span class="keyword">- </span><span class="default">$blur</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cr </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$cg </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$cb </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nr </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$ng </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$nb </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rgb </span><span class="keyword">= </span><span class="default">imagecolorat</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$or </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$og </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ob </span><span class="keyword">= (</span><span class="default">$rgb</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//-------------------------------------------------<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // first line is a special case<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //-------------------------------------------------<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">$srcw</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">$srch</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">$x</span><span class="keyword">--)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//horizontal blurren<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rgb </span><span class="keyword">= </span><span class="default">imagecolorat</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cr </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cg </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cb </span><span class="keyword">= (</span><span class="default">$rgb</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nr </span><span class="keyword">= (</span><span class="default">$cr </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$or </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ng </span><span class="keyword">= (</span><span class="default">$cg </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$og </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nb </span><span class="keyword">= (</span><span class="default">$cb </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$ob </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);&nbsp; &nbsp; <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$or </span><span class="keyword">= </span><span class="default">$nr</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$og </span><span class="keyword">= </span><span class="default">$ng</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ob </span><span class="keyword">= </span><span class="default">$nb</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagesetpixel</span><span class="keyword">(</span><span class="default">$dstimg</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">,(</span><span class="default">$nr </span><span class="keyword">&lt;&lt; </span><span class="default">16</span><span class="keyword">) | (</span><span class="default">$ng </span><span class="keyword">&lt;&lt; </span><span class="default">8</span><span class="keyword">) | (</span><span class="default">$nb</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//-------------------------------------------------<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //-------------------------------------------------<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // now process the entire picture<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //-------------------------------------------------<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">$srch</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">$y</span><span class="keyword">--)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rgb </span><span class="keyword">= </span><span class="default">imagecolorat</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$or </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$og </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ob </span><span class="keyword">= (</span><span class="default">$rgb</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">$srcw</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">$x</span><span class="keyword">--)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//horizontal <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rgb </span><span class="keyword">= </span><span class="default">imagecolorat</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cr </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cg </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cb </span><span class="keyword">= (</span><span class="default">$rgb</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nr </span><span class="keyword">= (</span><span class="default">$cr </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$or </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ng </span><span class="keyword">= (</span><span class="default">$cg </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$og </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nb </span><span class="keyword">= (</span><span class="default">$cb </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$ob </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$or </span><span class="keyword">= </span><span class="default">$nr</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$og </span><span class="keyword">= </span><span class="default">$ng</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ob </span><span class="keyword">= </span><span class="default">$nb</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//vertical <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rgb </span><span class="keyword">= </span><span class="default">imagecolorat</span><span class="keyword">(</span><span class="default">$dstimg</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$vr </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$vg </span><span class="keyword">= (</span><span class="default">$rgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$vb </span><span class="keyword">= (</span><span class="default">$rgb</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nr </span><span class="keyword">= (</span><span class="default">$nr </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$vr </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ng </span><span class="keyword">= (</span><span class="default">$ng </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$vg </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nb </span><span class="keyword">= (</span><span class="default">$nb </span><span class="keyword">* </span><span class="default">$f1a</span><span class="keyword">) + (</span><span class="default">$vb </span><span class="keyword">* </span><span class="default">$f1b</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$vr </span><span class="keyword">= </span><span class="default">$nr</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$vg </span><span class="keyword">= </span><span class="default">$ng</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$vb </span><span class="keyword">= </span><span class="default">$nb</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagesetpixel</span><span class="keyword">(</span><span class="default">$dstimg</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">,(</span><span class="default">$nr </span><span class="keyword">&lt;&lt; </span><span class="default">16</span><span class="keyword">) | (</span><span class="default">$ng </span><span class="keyword">&lt;&lt; </span><span class="default">8</span><span class="keyword">) | (</span><span class="default">$nb</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//-------------------------------------------------<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$dstimg</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; <br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$srcimg </span><span class="keyword">= </span><span class="default">imagecreatefromjpeg</span><span class="keyword">(</span><span class="string">"test.jpg"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dstimg </span><span class="keyword">= </span><span class="default">blurImage</span><span class="keyword">(</span><span class="default">$srcimg</span><span class="keyword">,</span><span class="default">0.2</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-type: image/jpeg'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo( </span><span class="default">imagejpeg</span><span class="keyword">(</span><span class="default">$dstimg</span><span class="keyword">) );<br />
&nbsp;&nbsp;&nbsp; exit();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87238""></a>
  <div class="note">
   <strong class="user">chuckstudios at gmail dot com</strong>
   <a href="#87238" class="date">25-Nov-2008 09:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote a simple function to convert an image resource to PGM (portable graymap) in order to feed it to an OCR program. It works just like the rest of the image output functions, and will convert to grayscale for you:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">imagepgm</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$filename </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pgm </span><span class="keyword">= </span><span class="string">"P5 "</span><span class="keyword">.</span><span class="default">imagesx</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">).</span><span class="string">" "</span><span class="keyword">.</span><span class="default">imagesy</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">).</span><span class="string">" 255\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$y </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$y </span><span class="keyword">&lt; </span><span class="default">imagesy</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">); </span><span class="default">$y</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">imagesx</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">); </span><span class="default">$x</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$colors </span><span class="keyword">= </span><span class="default">imagecolorsforindex</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">imagecolorat</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pgm </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">0.3 </span><span class="keyword">* </span><span class="default">$colors</span><span class="keyword">[</span><span class="string">"red"</span><span class="keyword">] + </span><span class="default">0.59 </span><span class="keyword">* </span><span class="default">$colors</span><span class="keyword">[</span><span class="string">"green"</span><span class="keyword">] + </span><span class="default">0.11 </span><span class="keyword">* </span><span class="default">$colors</span><span class="keyword">[</span><span class="string">"blue"</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$filename </span><span class="keyword">!= </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="string">"w"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$pgm</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$pgm</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82138""></a>
  <div class="note">
   <strong class="user">dev at kingthief dot com</strong>
   <a href="#82138" class="date">28-Mar-2008 08:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've developed a well-documented, fairly rock-solid API for creating on the fly, anti-aliased, rounded corner images, including full alpha transparency support for all you PNG lovers.<br />
<br />
go here to download the package:<br />
<a href="http://sourceforge.net/projects/roundedphp/" rel="nofollow" target="_blank">http://sourceforge.net/projects/roundedphp/</a><br />
<br />
go here for a live demo:<br />
<a href="http://dev.kingthief.com/demos/roundedphp/" rel="nofollow" target="_blank">http://dev.kingthief.com/demos/roundedphp/</a><br />
<br />
Installation is similar to PEAR.<br />
<br />
Enjoy!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79996""></a>
  <div class="note">
   <strong class="user">ph_corp at yahoo dot fr</strong>
   <a href="#79996" class="date">23-Dec-2007 03:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
HSL/RGB conversion functions<br />
very useful for a lot of applications<br />
**/<br />
<br />
</span><span class="keyword">function </span><span class="default">RBGtoHSL </span><span class="keyword">( </span><span class="default">$R</span><span class="keyword">, </span><span class="default">$G</span><span class="keyword">, </span><span class="default">$B </span><span class="keyword">)<br />
{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$var_R </span><span class="keyword">= ( </span><span class="default">$R </span><span class="keyword">/ </span><span class="default">255 </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$var_G </span><span class="keyword">= ( </span><span class="default">$G </span><span class="keyword">/ </span><span class="default">255 </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$var_B </span><span class="keyword">= ( </span><span class="default">$B </span><span class="keyword">/ </span><span class="default">255 </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$var_Min </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">( </span><span class="default">$var_R</span><span class="keyword">, </span><span class="default">$var_G</span><span class="keyword">, </span><span class="default">$var_B </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$var_Max </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">( </span><span class="default">$var_R</span><span class="keyword">, </span><span class="default">$var_G</span><span class="keyword">, </span><span class="default">$var_B </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$del_Max </span><span class="keyword">= </span><span class="default">$var_Max </span><span class="keyword">- </span><span class="default">$var_Min<br />
<br />
&nbsp;&nbsp;&nbsp; $L </span><span class="keyword">= ( </span><span class="default">$var_Max </span><span class="keyword">+ </span><span class="default">$var_Min </span><span class="keyword">) / </span><span class="default">2</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$del_Max </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$H </span><span class="keyword">= </span><span class="default">0<br />
&nbsp;&nbsp; &nbsp; &nbsp; $S </span><span class="keyword">= </span><span class="default">0<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$L </span><span class="keyword">&lt; </span><span class="default">0.5 </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$S </span><span class="keyword">= </span><span class="default">$del_Max </span><span class="keyword">/ ( </span><span class="default">$var_Max </span><span class="keyword">+ </span><span class="default">$var_Min </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$S </span><span class="keyword">= </span><span class="default">$del_Max </span><span class="keyword">/ ( </span><span class="default">2 </span><span class="keyword">- </span><span class="default">$var_Max </span><span class="keyword">- </span><span class="default">$var_Min </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$del_R </span><span class="keyword">= ( ( ( </span><span class="default">$var_Max </span><span class="keyword">- </span><span class="default">$var_R </span><span class="keyword">) / </span><span class="default">6 </span><span class="keyword">) + ( </span><span class="default">$del_Max </span><span class="keyword">/ </span><span class="default">2 </span><span class="keyword">) ) / </span><span class="default">$del_Max</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$del_G </span><span class="keyword">= ( ( ( </span><span class="default">$var_Max </span><span class="keyword">- </span><span class="default">$var_G </span><span class="keyword">) / </span><span class="default">6 </span><span class="keyword">) + ( </span><span class="default">$del_Max </span><span class="keyword">/ </span><span class="default">2 </span><span class="keyword">) ) / </span><span class="default">$del_Max</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$del_B </span><span class="keyword">= ( ( ( </span><span class="default">$var_Max </span><span class="keyword">- </span><span class="default">$var_B </span><span class="keyword">) / </span><span class="default">6 </span><span class="keyword">) + ( </span><span class="default">$del_Max </span><span class="keyword">/ </span><span class="default">2 </span><span class="keyword">) ) / </span><span class="default">$del_Max</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$var_R </span><span class="keyword">== </span><span class="default">$var_Max </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$H </span><span class="keyword">= </span><span class="default">$del_B </span><span class="keyword">- </span><span class="default">$del_G</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if ( </span><span class="default">$var_G </span><span class="keyword">== </span><span class="default">$var_Max </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$H </span><span class="keyword">= ( </span><span class="default">1 </span><span class="keyword">/ </span><span class="default">3 </span><span class="keyword">) + </span><span class="default">$del_R </span><span class="keyword">- </span><span class="default">$del_B</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if ( </span><span class="default">$var_B </span><span class="keyword">== </span><span class="default">$var_Max </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$H </span><span class="keyword">= ( </span><span class="default">2 </span><span class="keyword">/ </span><span class="default">3 </span><span class="keyword">) + </span><span class="default">$del_G </span><span class="keyword">- </span><span class="default">$del_R</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$H </span><span class="keyword">&lt; </span><span class="default">0 </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$H </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$H </span><span class="keyword">&gt; </span><span class="default">1 </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$H </span><span class="keyword">-= </span><span class="default">1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return array( </span><span class="default">$H</span><span class="keyword">, </span><span class="default">$S</span><span class="keyword">, </span><span class="default">$L </span><span class="keyword">);<br />
<br />
}<br />
<br />
function </span><span class="default">HuetoRGB</span><span class="keyword">( </span><span class="default">$v1</span><span class="keyword">, </span><span class="default">$v2</span><span class="keyword">, </span><span class="default">$vH </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$vH </span><span class="keyword">&lt; </span><span class="default">0 </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$vH </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$vH </span><span class="keyword">&gt; </span><span class="default">1 </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$vH </span><span class="keyword">-= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if ( ( </span><span class="default">6 </span><span class="keyword">* </span><span class="default">$vH </span><span class="keyword">) &lt; </span><span class="default">1 </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return ( </span><span class="default">$v1 </span><span class="keyword">+ ( </span><span class="default">$v2 </span><span class="keyword">- </span><span class="default">$v1 </span><span class="keyword">) * </span><span class="default">6 </span><span class="keyword">* </span><span class="default">$vH </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if ( ( </span><span class="default">2 </span><span class="keyword">* </span><span class="default">$vH </span><span class="keyword">) &lt; </span><span class="default">1 </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return ( </span><span class="default">$v2 </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if ( ( </span><span class="default">3 </span><span class="keyword">* </span><span class="default">$vH </span><span class="keyword">) &lt; </span><span class="default">2 </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return ( </span><span class="default">$v1 </span><span class="keyword">+ ( </span><span class="default">$v2 </span><span class="keyword">- </span><span class="default">$v1 </span><span class="keyword">) * ( ( </span><span class="default">2 </span><span class="keyword">/ </span><span class="default">3 </span><span class="keyword">) - </span><span class="default">$vH </span><span class="keyword">) * </span><span class="default">6 </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return ( </span><span class="default">$v1 </span><span class="keyword">)<br />
}<br />
<br />
function </span><span class="default">HSLtoRGB </span><span class="keyword">( </span><span class="default">$H</span><span class="keyword">, </span><span class="default">$S</span><span class="keyword">, </span><span class="default">$L </span><span class="keyword">)<br />
{<br />
<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$S </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$R </span><span class="keyword">= </span><span class="default">$L </span><span class="keyword">* </span><span class="default">255</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$G </span><span class="keyword">= </span><span class="default">$L </span><span class="keyword">* </span><span class="default">255</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$B </span><span class="keyword">= </span><span class="default">$L </span><span class="keyword">* </span><span class="default">255</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$L </span><span class="keyword">&lt; </span><span class="default">0.5 </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$var_2 </span><span class="keyword">= </span><span class="default">$L </span><span class="keyword">* ( </span><span class="default">1 </span><span class="keyword">+ </span><span class="default">$S </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$var_2 </span><span class="keyword">= ( </span><span class="default">$L </span><span class="keyword">+ </span><span class="default">$S </span><span class="keyword">) - ( </span><span class="default">$S </span><span class="keyword">* </span><span class="default">$L </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$var_1 </span><span class="keyword">= </span><span class="default">2 </span><span class="keyword">* </span><span class="default">$L </span><span class="keyword">- </span><span class="default">$var_2</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$R </span><span class="keyword">= </span><span class="default">255 </span><span class="keyword">* </span><span class="default">HuetoRGB</span><span class="keyword">( </span><span class="default">$var_1</span><span class="keyword">, </span><span class="default">$var_2</span><span class="keyword">, </span><span class="default">$H </span><span class="keyword">+ ( </span><span class="default">1 </span><span class="keyword">/ </span><span class="default">3 </span><span class="keyword">) );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$G </span><span class="keyword">= </span><span class="default">255 </span><span class="keyword">* </span><span class="default">HuetoRGB</span><span class="keyword">( </span><span class="default">$var_1</span><span class="keyword">, </span><span class="default">$var_2</span><span class="keyword">, </span><span class="default">$H </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$B </span><span class="keyword">= </span><span class="default">255 </span><span class="keyword">* </span><span class="default">HuetoRGB</span><span class="keyword">( </span><span class="default">$var_1</span><span class="keyword">, </span><span class="default">$var_2</span><span class="keyword">, </span><span class="default">$H </span><span class="keyword">- ( </span><span class="default">1 </span><span class="keyword">/ </span><span class="default">3 </span><span class="keyword">) );<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return array( </span><span class="default">$R</span><span class="keyword">, </span><span class="default">$G</span><span class="keyword">, </span><span class="default">$B </span><span class="keyword">);<br />
<br />
}<br />
<br />
function </span><span class="default">distance </span><span class="keyword">( </span><span class="default">$R1</span><span class="keyword">, </span><span class="default">$G1</span><span class="keyword">, </span><span class="default">$B1</span><span class="keyword">, </span><span class="default">$R2</span><span class="keyword">, </span><span class="default">$G2</span><span class="keyword">, </span><span class="default">$B2 </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">sqrt </span><span class="keyword">( ( </span><span class="default">$R1 </span><span class="keyword">- </span><span class="default">$R2 </span><span class="keyword">)*( </span><span class="default">$R1 </span><span class="keyword">- </span><span class="default">$R2 </span><span class="keyword">) + ( </span><span class="default">$G1 </span><span class="keyword">- </span><span class="default">$G2 </span><span class="keyword">)*( </span><span class="default">$G1 </span><span class="keyword">- </span><span class="default">$G2 </span><span class="keyword">) + ( </span><span class="default">$B1 </span><span class="keyword">- </span><span class="default">$B2 </span><span class="keyword">)*( </span><span class="default">$B1 </span><span class="keyword">- </span><span class="default">$B2 </span><span class="keyword">) );<br />
&nbsp;&nbsp;&nbsp; return ( </span><span class="default">$result </span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63689""></a>
  <div class="note">
   <strong class="user">shd at earthling dot net</strong>
   <a href="#63689" class="date">28-Mar-2006 04:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you happen to need a way to output a Windows BMP file (e.g. when using the PEAR ExcelWriter), feel free to use the following code:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">imagebmp </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$fn </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$im</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$fn </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) </span><span class="default">$fn </span><span class="keyword">= </span><span class="string">'php://output'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">fopen </span><span class="keyword">(</span><span class="default">$fn</span><span class="keyword">, </span><span class="string">"w"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$f</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Image dimensions<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$biWidth </span><span class="keyword">= </span><span class="default">imagesx </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$biHeight </span><span class="keyword">= </span><span class="default">imagesy </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$biBPLine </span><span class="keyword">= </span><span class="default">$biWidth </span><span class="keyword">* </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$biStride </span><span class="keyword">= (</span><span class="default">$biBPLine </span><span class="keyword">+ </span><span class="default">3</span><span class="keyword">) &amp; ~</span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$biSizeImage </span><span class="keyword">= </span><span class="default">$biStride </span><span class="keyword">* </span><span class="default">$biHeight</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bfOffBits </span><span class="keyword">= </span><span class="default">54</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bfSize </span><span class="keyword">= </span><span class="default">$bfOffBits </span><span class="keyword">+ </span><span class="default">$biSizeImage</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//BITMAPFILEHEADER<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">fwrite </span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">, </span><span class="string">'BM'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">fwrite </span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">, </span><span class="default">pack </span><span class="keyword">(</span><span class="string">'VvvV'</span><span class="keyword">, </span><span class="default">$bfSize</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$bfOffBits</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//BITMAPINFO (BITMAPINFOHEADER)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">fwrite </span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">, </span><span class="default">pack </span><span class="keyword">(</span><span class="string">'VVVvvVVVVVV'</span><span class="keyword">, </span><span class="default">40</span><span class="keyword">, </span><span class="default">$biWidth</span><span class="keyword">, </span><span class="default">$biHeight</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">24</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$biSizeImage</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$numpad </span><span class="keyword">= </span><span class="default">$biStride </span><span class="keyword">- </span><span class="default">$biBPLine</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$y </span><span class="keyword">= </span><span class="default">$biHeight </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">; </span><span class="default">$y </span><span class="keyword">&gt;= </span><span class="default">0</span><span class="keyword">; --</span><span class="default">$y</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">$biWidth</span><span class="keyword">; ++</span><span class="default">$x</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$col </span><span class="keyword">= </span><span class="default">imagecolorat </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fwrite </span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">, </span><span class="default">pack </span><span class="keyword">(</span><span class="string">'V'</span><span class="keyword">, </span><span class="default">$col</span><span class="keyword">), </span><span class="default">3</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$numpad</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fwrite </span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">, </span><span class="default">pack </span><span class="keyword">(</span><span class="string">'C'</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">fclose </span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
It works the same way as regular imagejpeg/imagepng do and only supports GD2.0 true colour bitmaps (which is what's required by ExcelWriter).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63064""></a>
  <div class="note">
   <strong class="user">felipensp at gmail dot com</strong>
   <a href="#63064" class="date">12-Mar-2006 09:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Representation decimal of a color in hexadecimal for use on functions of library GD.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Representation hexadecimal<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$var </span><span class="keyword">= </span><span class="string">'#FFFFFF'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">getRgbFromGd</span><span class="keyword">(</span><span class="default">$color_hex</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'hexdec'</span><span class="keyword">, </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'|'</span><span class="keyword">, </span><span class="default">wordwrap</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$color_hex</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">, </span><span class="string">'|'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">)));<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">getRgbFromGd</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Output: Array ( [0] =&gt; 255 [1] =&gt; 255 [2] =&gt; 255 )<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60410""></a>
  <div class="note">
   <strong class="user">peter dot hulstaert at gmail dot com</strong>
   <a href="#60410" class="date">05-Jan-2006 05:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
While I was searching for a good way to draw a graph, I stumbled on skumar2k15's script.<br />
<br />
I have taken the liberty to improve multiple aspects of it.<br />
<br />
1. The array can grow and shrink in size, the graph will adjust accordingly.<br />
2. All the values in the array are recalculated so they won't get bigger than the height of the graph.<br />
3. I inserted the possibility to keep a percentage off the height away from the edge.<br />
4. You can adjust the size of the grid.<br />
5. Everything will adjust when you change the height of width.<br />
<br />
&lt;? <br />
header("Content-type: image/png");<br />
<br />
// Define variables<br />
$Values=array(50,90,30,155,50,40,320,50,40,86,240,128,650,540,320);<br />
$imgWidth=500;<br />
$imgHeight=200;<br />
$grid=25;<br />
$graphspacing=0.05;<br />
<br />
//Creation of new array with hight adjusted values<br />
while (list($key, $val) = each($Values)) <br />
&nbsp;&nbsp;&nbsp; {if($val&gt;$max){$max=$val;}}<br />
<br />
for ($i=0; $i&lt;count($Values); $i++){<br />
$graphValues[$i] = $Values[$i] * (($imgHeight*(1-$graphspacing))/$max);<br />
}<br />
// Create image and define colors<br />
<br />
$image=imagecreate($imgWidth, $imgHeight);<br />
$colorWhite=imagecolorallocate($image, 255, 255, 255);<br />
$colorGrey=imagecolorallocate($image, 192, 192, 192);<br />
$colorBlue=imagecolorallocate($image, 0, 0, 255);<br />
<br />
// Create border around image<br />
imageline($image, 0, 0, 0, $imgHeight, $colorGrey);<br />
imageline($image, 0, 0, $imgWidth, 0, $colorGrey);<br />
imageline($image, $imgWidth-1, 0, $imgWidth-1, $imgHeight-1, $colorGrey);<br />
imageline($image, 0, $imgHeight-1, $imgWidth-1, $imgHeight-1, $colorGrey);<br />
<br />
// Create grid<br />
for ($i=1; $i&lt;($imgWidth/$grid); $i++)<br />
&nbsp;&nbsp;&nbsp; {imageline($image, $i*$grid, 0, $i*$grid, $imgHeight, $colorGrey);}<br />
for ($i=1; $i&lt;($imgHeight/$grid); $i++)<br />
&nbsp;&nbsp;&nbsp; {imageline($image, 0, $i*$grid, $imgWidth, $i*$grid, $colorGrey);}<br />
<br />
// Create line graph<br />
if($imgWidth/$grid&gt;count($graphValues)){$space=$grid;}<br />
else{$space = $imgWidth/(count($graphValues)-1);}<br />
<br />
for ($i=0; $i&lt;count($graphValues)-1; $i++)<br />
&nbsp;&nbsp;&nbsp; {imageline($image, $i*$space, ($imgHeight-$graphValues[$i]), ($i+1)*$space, ($imgHeight-$graphValues[$i+1]), $colorBlue);}<br />
<br />
// Output graph and clear image from memory<br />
imagepng($image);<br />
imagedestroy($image);<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57909""></a>
  <div class="note">
   <strong class="user">michal-ok at o2 dot pl</strong>
   <a href="#57909" class="date">18-Oct-2005 02:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The image sharpen function (by Alex R. Austin) provided below seems to be very resource hungry and I couldn't make it work on two different servers - trying to sharpen a 413 x 413 image I ended up with "Fatal error: Allowed memory size of 8388608 bytes exhausted" or "Internal Server Error" or the script terminated without notice. Because I had no priviliges to change the default memory limit on these servers I started looking for other sharpen functions. I have come across a php Unsharp Mask function which works like a charm on both of the servers I dealt with. It can be found at <a href="http://vikjavev.no/hovudsida/umtestside.php." rel="nofollow" target="_blank">http://vikjavev.no/hovudsida/umtestside.php.</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57635""></a>
  <div class="note">
   <strong class="user">mslemko</strong>
   <a href="#57635" class="date">09-Oct-2005 12:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For fedora core 4 users that find that the gd library isn't installed, you can issue the command (as root)<br />
<br />
# yum install php-gd<br />
<br />
it should download and install the gd library. You will need to restart apache... phpinfo() should then tell you "GD Support&nbsp; &nbsp;&nbsp; enabled".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56144""></a>
  <div class="note">
   <strong class="user">timeshifting at gmail dot com</strong>
   <a href="#56144" class="date">24-Aug-2005 03:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To sharpen an image, rather than using the code below that produces a sharpening filter with php, use the built-in GD function "imageconvolution" which is designed for this purpose. Matrices can be used for sharpening, blurring, edge detection, etc, ala Photoshop.<br />
<br />
A sharpening example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$sharpenMatrix </span><span class="keyword">= array(-</span><span class="default">1</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">,</span><span class="default">16</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">$divisor </span><span class="keyword">= </span><span class="default">8</span><span class="keyword">;<br />
</span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
<br />
</span><span class="default">imageconvolution</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">$sharpenMatrix</span><span class="keyword">, </span><span class="default">$divisor</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Below is some information on building different kinds of matrices. (If you have photoshop (or PSP, GIMP) you can test out your matrices before applying them in PHP)<br />
<br />
<a href="http://loriweb.pair.com/8udf-basics.html (covers blurs" rel="nofollow" target="_blank">http://loriweb.pair.com/8udf-basics.html (covers blurs</a>)<br />
<a href="http://loriweb.pair.com/8udf-sharpen.html" rel="nofollow" target="_blank">http://loriweb.pair.com/8udf-sharpen.html</a><br />
<a href="http://loriweb.pair.com/8udf-edges.html" rel="nofollow" target="_blank">http://loriweb.pair.com/8udf-edges.html</a><br />
<a href="http://loriweb.pair.com/8udf-emboss.html" rel="nofollow" target="_blank">http://loriweb.pair.com/8udf-emboss.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37131""></a>
  <div class="note">
   <strong class="user">jeff at lushmedia dot com</strong>
   <a href="#37131" class="date">04-Nov-2003 08:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote an online overview of the image functions that people might find useful. In addition to a general overview of the various function categories and code samples, I have included many interactive examples of the functions, allowing viewers to experiment with the parameters, and seeing the results in real time. The presentation is located at New York PHP<br />
<a href="http://www.nyphp.org/content/presentations/GDintro/" rel="nofollow" target="_blank">http://www.nyphp.org/content/presentations/GDintro/</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31290""></a>
  <div class="note">
   <strong class="user">sellout at NoSpAm dot dharmadevil dot com</strong>
   <a href="#31290" class="date">16-Apr-2003 10:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A fun little function to output UPC-A 11-digit barcodes.<br />
Thanks to barcodeisland.com for the specs.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">UPCAbarcode</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$lw </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">; </span><span class="default">$hi </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$Lencode </span><span class="keyword">= array(</span><span class="string">'0001101'</span><span class="keyword">,</span><span class="string">'0011001'</span><span class="keyword">,</span><span class="string">'0010011'</span><span class="keyword">,</span><span class="string">'0111101'</span><span class="keyword">,</span><span class="string">'0100011'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'0110001'</span><span class="keyword">,</span><span class="string">'0101111'</span><span class="keyword">,</span><span class="string">'0111011'</span><span class="keyword">,</span><span class="string">'0110111'</span><span class="keyword">,</span><span class="string">'0001011'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$Rencode </span><span class="keyword">= array(</span><span class="string">'1110010'</span><span class="keyword">,</span><span class="string">'1100110'</span><span class="keyword">,</span><span class="string">'1101100'</span><span class="keyword">,</span><span class="string">'1000010'</span><span class="keyword">,</span><span class="string">'1011100'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'1001110'</span><span class="keyword">,</span><span class="string">'1010000'</span><span class="keyword">,</span><span class="string">'1000100'</span><span class="keyword">,</span><span class="string">'1001000'</span><span class="keyword">,</span><span class="string">'1110100'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$ends </span><span class="keyword">= </span><span class="string">'101'</span><span class="keyword">; </span><span class="default">$center </span><span class="keyword">= </span><span class="string">'01010'</span><span class="keyword">;<br />
&nbsp; </span><span class="comment">/* UPC-A Must be 11 digits, we compute the checksum. */<br />
&nbsp; </span><span class="keyword">if ( </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">) != </span><span class="default">11 </span><span class="keyword">) { die(</span><span class="string">"UPC-A Must be 11 digits."</span><span class="keyword">); }<br />
&nbsp; </span><span class="comment">/* Compute the EAN-13 Checksum digit */<br />
&nbsp; </span><span class="default">$ncode </span><span class="keyword">= </span><span class="string">'0'</span><span class="keyword">.</span><span class="default">$code</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$even </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$odd </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp; for (</span><span class="default">$x</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">&lt;</span><span class="default">12</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$x </span><span class="keyword">% </span><span class="default">2</span><span class="keyword">) { </span><span class="default">$odd </span><span class="keyword">+= </span><span class="default">$ncode</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]; } else { </span><span class="default">$even </span><span class="keyword">+= </span><span class="default">$ncode</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]; }<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$code</span><span class="keyword">.=(</span><span class="default">10 </span><span class="keyword">- ((</span><span class="default">$odd </span><span class="keyword">* </span><span class="default">3 </span><span class="keyword">+ </span><span class="default">$even</span><span class="keyword">) % </span><span class="default">10</span><span class="keyword">)) % </span><span class="default">10</span><span class="keyword">;<br />
&nbsp; </span><span class="comment">/* Create the bar encoding using a binary string */<br />
&nbsp; </span><span class="default">$bars</span><span class="keyword">=</span><span class="default">$ends</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$bars</span><span class="keyword">.=</span><span class="default">$Lencode</span><span class="keyword">[</span><span class="default">$code</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]];<br />
&nbsp; for(</span><span class="default">$x</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">&lt;</span><span class="default">6</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bars</span><span class="keyword">.=</span><span class="default">$Lencode</span><span class="keyword">[</span><span class="default">$code</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]];<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$bars</span><span class="keyword">.=</span><span class="default">$center</span><span class="keyword">;<br />
&nbsp; for(</span><span class="default">$x</span><span class="keyword">=</span><span class="default">6</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">&lt;</span><span class="default">12</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bars</span><span class="keyword">.=</span><span class="default">$Rencode</span><span class="keyword">[</span><span class="default">$code</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]];<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$bars</span><span class="keyword">.=</span><span class="default">$ends</span><span class="keyword">;<br />
&nbsp; </span><span class="comment">/* Generate the Barcode Image */<br />
&nbsp; </span><span class="default">$img </span><span class="keyword">= </span><span class="default">ImageCreate</span><span class="keyword">(</span><span class="default">$lw</span><span class="keyword">*</span><span class="default">95</span><span class="keyword">+</span><span class="default">30</span><span class="keyword">,</span><span class="default">$hi</span><span class="keyword">+</span><span class="default">30</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$fg </span><span class="keyword">= </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$bg </span><span class="keyword">= </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);<br />
&nbsp; </span><span class="default">ImageFilledRectangle</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$lw</span><span class="keyword">*</span><span class="default">95</span><span class="keyword">+</span><span class="default">30</span><span class="keyword">, </span><span class="default">$hi</span><span class="keyword">+</span><span class="default">30</span><span class="keyword">, </span><span class="default">$bg</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$shift</span><span class="keyword">=</span><span class="default">10</span><span class="keyword">;<br />
&nbsp; for (</span><span class="default">$x</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$bars</span><span class="keyword">);</span><span class="default">$x</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$x</span><span class="keyword">&lt;</span><span class="default">10</span><span class="keyword">) || (</span><span class="default">$x</span><span class="keyword">&gt;=</span><span class="default">45 </span><span class="keyword">&amp;&amp; </span><span class="default">$x</span><span class="keyword">&lt;</span><span class="default">50</span><span class="keyword">) || (</span><span class="default">$x </span><span class="keyword">&gt;=</span><span class="default">85</span><span class="keyword">)) { </span><span class="default">$sh</span><span class="keyword">=</span><span class="default">10</span><span class="keyword">; } else { </span><span class="default">$sh</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$bars</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">] == </span><span class="string">'1'</span><span class="keyword">) { </span><span class="default">$color </span><span class="keyword">= </span><span class="default">$fg</span><span class="keyword">; } else { </span><span class="default">$color </span><span class="keyword">= </span><span class="default">$bg</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageFilledRectangle</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, (</span><span class="default">$x</span><span class="keyword">*</span><span class="default">$lw</span><span class="keyword">)+</span><span class="default">15</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,(</span><span class="default">$x</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)*</span><span class="default">$lw</span><span class="keyword">+</span><span class="default">14</span><span class="keyword">,</span><span class="default">$hi</span><span class="keyword">+</span><span class="default">5</span><span class="keyword">+</span><span class="default">$sh</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; </span><span class="comment">/* Add the Human Readable Label */<br />
&nbsp; </span><span class="default">ImageString</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">$hi</span><span class="keyword">-</span><span class="default">5</span><span class="keyword">,</span><span class="default">$code</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$fg</span><span class="keyword">);<br />
&nbsp; for (</span><span class="default">$x</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">&lt;</span><span class="default">5</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageString</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">$lw</span><span class="keyword">*(</span><span class="default">13</span><span class="keyword">+</span><span class="default">$x</span><span class="keyword">*</span><span class="default">6</span><span class="keyword">)+</span><span class="default">15</span><span class="keyword">,</span><span class="default">$hi</span><span class="keyword">+</span><span class="default">5</span><span class="keyword">,</span><span class="default">$code</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">],</span><span class="default">$fg</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageString</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">$lw</span><span class="keyword">*(</span><span class="default">53</span><span class="keyword">+</span><span class="default">$x</span><span class="keyword">*</span><span class="default">6</span><span class="keyword">)+</span><span class="default">15</span><span class="keyword">,</span><span class="default">$hi</span><span class="keyword">+</span><span class="default">5</span><span class="keyword">,</span><span class="default">$code</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">+</span><span class="default">6</span><span class="keyword">],</span><span class="default">$fg</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; </span><span class="default">ImageString</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">$lw</span><span class="keyword">*</span><span class="default">95</span><span class="keyword">+</span><span class="default">17</span><span class="keyword">,</span><span class="default">$hi</span><span class="keyword">-</span><span class="default">5</span><span class="keyword">,</span><span class="default">$code</span><span class="keyword">[</span><span class="default">11</span><span class="keyword">],</span><span class="default">$fg</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">/* Output the Header and Content. */<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Type: image/png"</span><span class="keyword">);<br />
&nbsp; </span><span class="default">ImagePNG</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">UPCAbarcode</span><span class="keyword">(</span><span class="string">'12345678901'</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="image.examples.merged-watermark.html">Using imagecopymerge to create a translucent watermark</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.gd-info.html">gd_info</a></div>
 <div class="up"><a href="book.image.html">GD</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
