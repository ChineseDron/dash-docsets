<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Printer Functions</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="printer.constants.html">Predefined Constants</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.printer-abort.html">printer_abort</a></div>
 <div class="up"><a href="book.printer.html">Printer</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="ref.printer" class="reference">
 <h1 class="title">Printer Functions</h1>

 



























































































































































































<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.printer-abort.html">printer_abort</a> â€” Deletes the printer's spool file</li><li><a href="function.printer-close.html">printer_close</a> â€” Close an open printer connection</li><li><a href="function.printer-create-brush.html">printer_create_brush</a> â€” Create a new brush</li><li><a href="function.printer-create-dc.html">printer_create_dc</a> â€” Create a new device context</li><li><a href="function.printer-create-font.html">printer_create_font</a> â€” Create a new font</li><li><a href="function.printer-create-pen.html">printer_create_pen</a> â€” Create a new pen</li><li><a href="function.printer-delete-brush.html">printer_delete_brush</a> â€” Delete a brush</li><li><a href="function.printer-delete-dc.html">printer_delete_dc</a> â€” Delete a device context</li><li><a href="function.printer-delete-font.html">printer_delete_font</a> â€” Delete a font</li><li><a href="function.printer-delete-pen.html">printer_delete_pen</a> â€” Delete a pen</li><li><a href="function.printer-draw-bmp.html">printer_draw_bmp</a> â€” Draw a bmp</li><li><a href="function.printer-draw-chord.html">printer_draw_chord</a> â€” Draw a chord</li><li><a href="function.printer-draw-elipse.html">printer_draw_elipse</a> â€” Draw an ellipse</li><li><a href="function.printer-draw-line.html">printer_draw_line</a> â€” Draw a line</li><li><a href="function.printer-draw-pie.html">printer_draw_pie</a> â€” Draw a pie</li><li><a href="function.printer-draw-rectangle.html">printer_draw_rectangle</a> â€” Draw a rectangle</li><li><a href="function.printer-draw-roundrect.html">printer_draw_roundrect</a> â€” Draw a rectangle with rounded corners</li><li><a href="function.printer-draw-text.html">printer_draw_text</a> â€” Draw text</li><li><a href="function.printer-end-doc.html">printer_end_doc</a> â€” Close document</li><li><a href="function.printer-end-page.html">printer_end_page</a> â€” Close active page</li><li><a href="function.printer-get-option.html">printer_get_option</a> â€” Retrieve printer configuration data</li><li><a href="function.printer-list.html">printer_list</a> â€” Return an array of printers attached to the server</li><li><a href="function.printer-logical-fontheight.html">printer_logical_fontheight</a> â€” Get logical font height</li><li><a href="function.printer-open.html">printer_open</a> â€” Opens a connection to a printer</li><li><a href="function.printer-select-brush.html">printer_select_brush</a> â€” Select a brush</li><li><a href="function.printer-select-font.html">printer_select_font</a> â€” Select a font</li><li><a href="function.printer-select-pen.html">printer_select_pen</a> â€” Select a pen</li><li><a href="function.printer-set-option.html">printer_set_option</a> â€” Configure the printer connection</li><li><a href="function.printer-start-doc.html">printer_start_doc</a> â€” Start a new document</li><li><a href="function.printer-start-page.html">printer_start_page</a> â€” Start a new page</li><li><a href="function.printer-write.html">printer_write</a> â€” Write data to the printer</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="89054""></a>
  <div class="note">
   <strong class="user">php at mailinator dot com</strong>
   <a href="#89054" class="date">19-Feb-2009 07:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to print to a network printer on another machine:<br />
<br />
If you are running PHP on a web server that is running as the System user (quite likely), it won't have access to network resources, including network printers. Changing the web server service to run as an account with access to network printers fixes the issue.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75454""></a>
  <div class="note">
   <strong class="user">extremesanity</strong>
   <a href="#75454" class="date">30-May-2007 01:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have gotten very reliable printing using this set of functions coupled with Windows 2000, IIS, the PECL extension, and the php_printer.dll.<br />
<br />
Basically I have a linux web server that sends a request to the windows 2000 IIS web server (acting as the role of print server) sending the information to be printed in the query string.<br />
<br />
I use this primarily for printing barcoded labels, where the barcode itself is a barcode font found on the web.&nbsp; <br />
<br />
I got terrible reliability out of all versions of apache running on windows 2000 and xp.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72577""></a>
  <div class="note">
   <strong class="user">mdwyer at timestreamtech dot com</strong>
   <a href="#72577" class="date">24-Jan-2007 03:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was able to print nice looking reports (under unix) by sending out formatted text out through 'enscript'.&nbsp; The various configuration options on enscript took care of fonts and headers etc.&nbsp; The result was a postscript file which I just sent to the server's local printer.<br />
<br />
One could also pipe it through a PS to PDF filter and send it back to the user, I suppose.<br />
<br />
For another job, I learned how to write postscript and just wrote directly to postscript files.&nbsp; Learning how to write postscript is probably only marginally harder than learning how to use this API, and is probably more portable.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46070""></a>
  <div class="note">
   <strong class="user">arne dot briesenick at soxabo dot de</strong>
   <a href="#46070" class="date">28-Sep-2004 07:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Printing in UN*X is possible too:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">lpr</span><span class="keyword">(</span><span class="default">$STR</span><span class="keyword">,</span><span class="default">$PRN</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$prn</span><span class="keyword">=(isset(</span><span class="default">$PRN</span><span class="keyword">) &amp;&amp; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$PRN</span><span class="keyword">))?</span><span class="string">"</span><span class="default">$PRN</span><span class="string">"</span><span class="keyword">:</span><span class="default">C_DEFAULTPRN </span><span class="keyword">;<br />
&nbsp; </span><span class="default">$CMDLINE</span><span class="keyword">=</span><span class="string">"lpr -P </span><span class="default">$prn</span><span class="string"> "</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$pipe</span><span class="keyword">=</span><span class="default">popen</span><span class="keyword">(</span><span class="string">"</span><span class="default">$CMDLINE</span><span class="string">" </span><span class="keyword">, </span><span class="string">'w' </span><span class="keyword">);<br />
&nbsp; if (!</span><span class="default">$pipe</span><span class="keyword">) {print </span><span class="string">"pipe failed."</span><span class="keyword">; return </span><span class="string">""</span><span class="keyword">; }<br />
&nbsp; </span><span class="default">fputs</span><span class="keyword">(</span><span class="default">$pipe</span><span class="keyword">,</span><span class="default">$STR</span><span class="keyword">);<br />
&nbsp; </span><span class="default">pclose</span><span class="keyword">(</span><span class="default">$pipe</span><span class="keyword">);<br />
} </span><span class="comment">// lpr()<br />
</span><span class="default">?&gt;<br />
</span><br />
You pipe the stream/string/char/sign whatever to the system. In the example shown above you have to add at least the string for printing in the function call. The second arg is a printer name which if you don't set will be set to the C_DEFAULTPRN. This is a constant definition from an ini file.<br />
<br />
Hope this will help to save a lot of time ;-)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40705""></a>
  <div class="note">
   <strong class="user">jason at matteson dot com</strong>
   <a href="#40705" class="date">11-Mar-2004 03:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can print in XP. AND, you can print to a shared printer with XP. The drivers for the printer MUST be installed on ther server as well as on the computer you wish to print with. Also, the printer must be shared on the client computer.<br />
<br />
I am using a Zebra LP2844 Thermal Barcode Printer in my application. I am running XP Pro,Apache 1.3.27, PHP 4.3+.<br />
<br />
Here is a function I use in our churches checkin system.&nbsp; I use this to print directly to our printer with out having to use any Javascript.<br />
<br />
First, i give the function the name of the shared printer. <br />
<br />
Second, I get the client computers host name. You could use just REMOTE_ADDR too I suppose.<br />
<br />
Then I return a correctly formatted Windows path to the shared printer for the <br />
<br />
function getPrinter($SharedPrinterName) {<br />
&nbsp;&nbsp;&nbsp; global $REMOTE_ADDR;<br />
&nbsp;&nbsp;&nbsp; $host&nbsp; =&nbsp; getHostByAddr($REMOTE_ADDR);<br />
&nbsp;&nbsp;&nbsp; return "\\\\".$host."\\".$SharedPrinterName;<br />
}<br />
<br />
$handle&nbsp; =&nbsp; printer_open(getPrinter("Eltron"));<br />
<br />
So, as long as you KNOW the computers are suppose to have a shared printer called "Eltron", you're all set to start sending info to the printer with the other Printer functions.<br />
<br />
-j</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="34442""></a>
  <div class="note">
   <strong class="user">macagomez at yahoo dot com</strong>
   <a href="#34442" class="date">27-Jul-2003 02:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please notice that what is printed is NOT measured in pixels, it is measured in pronter's dots.<br />
Apply to fonts, coordinates and bit maps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29650""></a>
  <div class="note">
   <strong class="user">jwlash at acm dot org</strong>
   <a href="#29650" class="date">19-Feb-2003 11:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have noticed the for unix based systems you can also do this:<br />
<br />
system("lp $filename") <br />
<br />
:)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28687""></a>
  <div class="note">
   <strong class="user">bertATnerdstockDOTorg</strong>
   <a href="#28687" class="date">20-Jan-2003 04:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to address the printer from your PHP-application in a Un*x environment:<br />
This is possible if you use a different method.<br />
In Unix it would not be logical to address your printer directly from php, but you could for instance generate a PDF-file with PDFlib (or a textfile, or a PNG/JPEG image with GD or what have you) and write it from your php-script to a directory that you use as a "printer-outbox."<br />
<br />
Next, you write a shellscript that calls some unix tool to print all pdf or other documents in your "outbox" directory and then deletes all files in that directory.<br />
<br />
Then you use crontab to run this script every minute or as often as you think it's neccessary.<br />
<br />
You could of course also call the shellscript from your php-application with exec() but you'll probably want to avoid using exec() and the like for security reasons.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="printer.constants.html">Predefined Constants</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.printer-abort.html">printer_abort</a></div>
 <div class="up"><a href="book.printer.html">Printer</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
