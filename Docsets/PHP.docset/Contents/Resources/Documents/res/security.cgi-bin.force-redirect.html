<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Case 2: using cgi.force_redirect</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="security.cgi-bin.default.html">Case 1: only public files served</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="security.cgi-bin.doc-root.html">Case 3: setting doc_root or user_dir</a></div>
 <div class="up"><a href="security.cgi-bin.html">Installed as CGI binary</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="security.cgi-bin.force-redirect" class="sect1">
    <h2 class="title">Case 2: using <i>cgi.force_redirect</i></h2>
    <p class="simpara">
     The configuration directive <a href="ini.core.html#ini.cgi.force-redirect" class="link">cgi.force_redirect</a>
     prevents anyone from calling PHP
     directly with a URL like <var class="filename">http://my.host/cgi-bin/php/secretdir/script.php</var>.
     Instead, PHP will only parse in this mode if it has gone through
     a web server redirect rule.
     PHP older than 4.2.0 used <i>--enable-force-cgi-redirect</i>
     compile time option for this.
    </p>
    <p class="simpara">
     Usually the redirection in the Apache configuration is done with
     the following directives:
    </p>
    <div class="example-contents">
<div class="apache-confcode"><pre class="apache-confcode">Action php-script /cgi-bin/php
AddHandler php-script .php</pre>
</div>
    </div>

    <p class="simpara">
     This option has only been tested with the Apache web server, and
     relies on Apache to set the non-standard CGI environment variable
     <span class="envar">REDIRECT_STATUS</span> on redirected requests.  If your
     web server does not support any way of telling if the request is
     direct or redirected, you cannot use this option and you must use
     one of the other ways of running the CGI version documented
     here.
    </p>
   </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="91893""></a>
  <div class="note">
   <strong class="user">harvey dot eneman at oracle dot com</strong>
   <a href="#91893" class="date">30-Jun-2009 04:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It appears that as of 5.3.0, --enable-force-cgi-redirect is not a valid configure option.&nbsp; A quick review of the 5.3.0 code indicates that it the logic previously enabled by specifying the --enable-force-cgi-redirect configure option is being built into php by default.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80391""></a>
  <div class="note">
   <strong class="user">mega-squall at caramail dot com</strong>
   <a href="#80391" class="date">13-Jan-2008 02:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Contrary to what was said, you can use arbitrary names for your MIME Type ...<br />
However there's a restriction as it must be a valid MIME Type.<br />
For instance, this is working perfectly :<br />
<br />
AddHandler application/x-httpd-php4 .php4<br />
AddHandler application/x-httpd-php5 .php5 .php<br />
AddHandler application/x-httpd-php6 .php6</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74749""></a>
  <div class="note">
   <strong class="user">gelgin at internut dot com</strong>
   <a href="#74749" class="date">25-Apr-2007 10:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
solaris 9 php4.4.0<br />
i have found you can't use arbitrary names ie.<br />
<br />
AddType application/x-httpd-php .php<br />
<br />
works<br />
<br />
#AddHandler php4-script .php<br />
<br />
won't do must be <br />
<br />
AddHandler application/x-httpd-php</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71774""></a>
  <div class="note">
   <strong class="user">celtic at sairyx dot org</strong>
   <a href="#71774" class="date">14-Dec-2006 05:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that force-redirect doesn't work with IIS at all; it'll tell you to go away, as IIS doesn't supply the right variables to PHP.<br />
<br />
php.ini tells you to turn it off, so make sure you do.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="security.cgi-bin.default.html">Case 1: only public files served</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="security.cgi-bin.doc-root.html">Case 3: setting doc_root or user_dir</a></div>
 <div class="up"><a href="security.cgi-bin.html">Installed as CGI binary</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
