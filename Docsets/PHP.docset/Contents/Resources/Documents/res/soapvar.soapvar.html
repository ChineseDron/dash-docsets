<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>SoapVar constructor</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="soapvar.construct.html">SoapVar::__construct</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="book.xmlrpc.html">XML-RPC</a></div>
 <div class="up"><a href="class.soapvar.html">SoapVar</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="soapvar.soapvar" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">SoapVar::SoapVar</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.0.1)</p><p class="refpurpose"><span class="refname">SoapVar::SoapVar</span> &mdash; <span class="dc-title">SoapVar constructor</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-soapvar.soapvar-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
    <span class="methodname"><b>SoapVar::SoapVar</b></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <tt class="parameter">$data</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$encoding</tt></span>
   [, <span class="methodparam"><span class="type">string</span> <tt class="parameter">$type_name</tt></span>
   [, <span class="methodparam"><span class="type">string</span> <tt class="parameter">$type_namespace</tt></span>
   [, <span class="methodparam"><span class="type">string</span> <tt class="parameter">$node_name</tt></span>
   [, <span class="methodparam"><span class="type">string</span> <tt class="parameter">$node_namespace</tt></span>
  ]]]] )</div>

  <p class="para rdfs-comment">
   Constructs a new <a href="class.soapvar.html" class="classname">SoapVar</a> object.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-soapvar.soapvar-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">data</tt></i></span>
     <dd>

      <p class="para">
       The data to pass or return.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">encoding</tt></i></span>
     <dd>

      <p class="para">
       The encoding ID, one of the <i>XSD_...</i> constants.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">type_name</tt></i></span>
     <dd>

      <p class="para">
       The type name.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">type_namespace</tt></i></span>
     <dd>

      <p class="para">
       The type namespace.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">node_name</tt></i></span>
     <dd>

      <p class="para">
       The XML node name.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">node_namespace</tt></i></span>
     <dd>

      <p class="para">
       The XML node namespace.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-soapvar.soapvar-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4855">
    <p><b>Example #1 <span class="function"><b>SoapVar::SoapVar()</b></span> example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">SOAPStruct&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">SOAPStruct</span><span style="color: #007700">(</span><span style="color: #0000BB">$s</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$f</span><span style="color: #007700">)&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">varString&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">varInt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">varFloat&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$f</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">$client&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapClient</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'location'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"http://localhost/soap.php"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'uri'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"http://test-uri/"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$struct&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SOAPStruct</span><span style="color: #007700">(</span><span style="color: #DD0000">'arg'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">34</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">325.325</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$soapstruct&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapVar</span><span style="color: #007700">(</span><span style="color: #0000BB">$struct</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">SOAP_ENC_OBJECT</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"SOAPStruct"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"http://soapinterop.org/xsd"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$client</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">echoStruct</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SoapParam</span><span style="color: #007700">(</span><span style="color: #0000BB">$soapstruct</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"inputStruct"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-soapvar.soapvar-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="methodname"><a href="soapclient.soapcall.html" class="methodname" rel="rdfs-seeAlso">SoapClient::__soapCall()</a> - Calls a SOAP function</span></li>
    <li class="member"> <span class="methodname"><a href="soapparam.soapparam.html" class="methodname" rel="rdfs-seeAlso">SoapParam::SoapParam()</a> - SoapParam constructor</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="104065""></a>
  <div class="note">
   <strong class="user">jbbrunsveld at gmail dot com</strong>
   <a href="#104065" class="date">20-May-2011 07:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It took me more than one day to figure out how to use the SoapVar object in a multilevel/complex SOAP request. <br />
If you want to set-up a multilevel/complex SOAP call with parameters in subnodes, you can use the following methods:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/* Simple example with array as parameter */<br />
</span><span class="default">$wsdl_url </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
</span><span class="default">$client&nbsp; &nbsp;&nbsp; </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="default">$wsdl_url</span><span class="keyword">, array(</span><span class="string">'trace' </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; <br />
</span><span class="default">$parameters </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'FromCurrency' </span><span class="keyword">=&gt; </span><span class="string">'EUR'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'ToCurrency' </span><span class="keyword">=&gt; </span><span class="string">'AUD'</span><span class="keyword">,<br />
);<br />
<br />
</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">ConversionRate</span><span class="keyword">(</span><span class="default">$parameters</span><span class="keyword">);&nbsp; &nbsp; &nbsp; <br />
echo </span><span class="default">htmlentities</span><span class="keyword">(</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">__getLastRequest</span><span class="keyword">());<br />
<br />
</span><span class="comment">/* Simple example with stdClass object as parameter */<br />
</span><span class="default">$wsdl_url&nbsp; </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
</span><span class="default">$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="default">$wsdl_url</span><span class="keyword">, array(</span><span class="string">'trace' </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">)); <br />
<br />
</span><span class="default">$parameters </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">();<br />
</span><span class="default">$parameters</span><span class="keyword">-&gt;</span><span class="default">FromCurrency </span><span class="keyword">= </span><span class="string">'EUR'</span><span class="keyword">;<br />
</span><span class="default">$parameters</span><span class="keyword">-&gt;</span><span class="default">ToCurrency </span><span class="keyword">= </span><span class="string">'AUD'</span><span class="keyword">;<br />
<br />
</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">ConversionRate</span><span class="keyword">(</span><span class="default">$parameters</span><span class="keyword">);&nbsp; &nbsp; &nbsp; <br />
echo </span><span class="default">htmlentities</span><span class="keyword">(</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">__getLastRequest</span><span class="keyword">());<br />
<br />
</span><span class="comment">/* Example with complex/nested node structure using an array as param*/<br />
</span><span class="default">$wsdl_url </span><span class="keyword">= </span><span class="string">"<a href="http://yourwsdlfile" rel="nofollow" target="_blank">http://yourwsdlfile</a>"</span><span class="keyword">;<br />
</span><span class="default">$client&nbsp; </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="default">$wsdl_url</span><span class="keyword">, array(</span><span class="string">'trace' </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">));<br />
</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">YourCall</span><span class="keyword">(array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'YourContainerNodeName' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Level1NodeFoo' </span><span class="keyword">=&gt; </span><span class="string">'100'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Level1NodeBar' </span><span class="keyword">=&gt; </span><span class="string">'100'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Subnodes' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'NodeLevel2' </span><span class="keyword">=&gt; </span><span class="string">'test'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; )<br />
));<br />
<br />
</span><span class="comment">/* Example with complex/nested node structure using an stdClass as param */<br />
</span><span class="default">$wsdl_url </span><span class="keyword">= </span><span class="string">"<a href="http://yourwsdlfile" rel="nofollow" target="_blank">http://yourwsdlfile</a>"</span><span class="keyword">;<br />
</span><span class="default">$client&nbsp; </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="default">$wsdl_url</span><span class="keyword">, array(</span><span class="string">'trace' </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">));<br />
</span><span class="default">$params </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">();<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">YourContainerNodeName </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">();<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">YourContainerNodeName</span><span class="keyword">-&gt;</span><span class="default">Level1NodeFoo </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">;<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">YourContainerNodeName</span><span class="keyword">-&gt;</span><span class="default">Level1NodeBar </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">;<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">YourContainerNodeName</span><span class="keyword">-&gt;</span><span class="default">Subnodes </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">();<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">YourContainerNodeName</span><span class="keyword">-&gt;</span><span class="default">Subnodes</span><span class="keyword">-&gt;</span><span class="default">NodeLevel2 </span><span class="keyword">= </span><span class="string">'test'</span><span class="keyword">;<br />
<br />
</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">YourCall</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">);<br />
<br />
</span><span class="comment">/* Example with complex/nested node structure using an stdClass and SoapVars as param */<br />
</span><span class="default">$wsdl_url </span><span class="keyword">= </span><span class="string">"<a href="http://yourwsdlfile" rel="nofollow" target="_blank">http://yourwsdlfile</a>"</span><span class="keyword">;<br />
</span><span class="default">$client&nbsp; </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="default">$wsdl_url</span><span class="keyword">, array(</span><span class="string">'trace' </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">));<br />
<br />
</span><span class="default">$params </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">();<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">YourContainerNodeName </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">();<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">YourContainerNodeName</span><span class="keyword">-&gt;</span><span class="default">Level1NodeFoo </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">;<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">YourContainerNodeName</span><span class="keyword">-&gt;</span><span class="default">Level1NodeBar </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">;<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">YourContainerNodeName</span><span class="keyword">-&gt;</span><span class="default">Subnodes </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">();<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">YourContainerNodeName</span><span class="keyword">-&gt;</span><span class="default">Subnodes</span><span class="keyword">-&gt;</span><span class="default">NodeLevel2 </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">, </span><span class="default">XSD_INT</span><span class="keyword">, </span><span class="string">'xsd:int'</span><span class="keyword">);<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">YourContainerNodeName</span><span class="keyword">-&gt;</span><span class="default">Subnodes</span><span class="keyword">-&gt;</span><span class="default">NodeLevel3 </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="string">"&lt;ns1:AdText&gt;&lt;![CDATA[hallo&lt;br&gt;&lt;br&gt;test]]&gt;&lt;/ns1:AdText&gt;"</span><span class="keyword">, </span><span class="default">XSD_ANYXML</span><span class="keyword">);<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">YourContainerNodeName</span><span class="keyword">-&gt;</span><span class="default">Subnodes</span><span class="keyword">-&gt;</span><span class="default">NodeLevel4 </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">XSD_INT</span><span class="keyword">, </span><span class="string">'xsd:int'</span><span class="keyword">), <br />
&nbsp;&nbsp;&nbsp; new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">, </span><span class="default">XSD_INT</span><span class="keyword">, </span><span class="string">'xsd:int'</span><span class="keyword">), <br />
&nbsp;&nbsp;&nbsp; new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">, </span><span class="default">XSD_INT</span><span class="keyword">, </span><span class="string">'xsd:int'</span><span class="keyword">)<br />
);&nbsp; &nbsp; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101225""></a>
  <div class="note">
   <strong class="user">Krzych</strong>
   <a href="#101225" class="date">03-Dec-2010 06:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It might be obvious to some but not to everyone<br />
if you ever wondered how to encode attribute in soap object, use proper coding and not hacking by passing xml and flag XSD_ANYXML<br />
<br />
try using this<br />
<span class="default">&lt;?php<br />
&nbsp;$amount</span><span class="keyword">[</span><span class="string">'_'</span><span class="keyword">] = </span><span class="default">25</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$amount</span><span class="keyword">[</span><span class="string">'currencyId'</span><span class="keyword">] = </span><span class="string">'GBP'</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$encodded </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">$amount</span><span class="keyword">, </span><span class="default">SOAP_ENC_OBJECT</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span> <br />
and end result wound be<br />
&lt;amount currencyId="GBP"&gt;25&lt;/amount&gt;<br />
<br />
hope that helps someone</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91961""></a>
  <div class="note">
   <strong class="user">cb at wasteland dot org</strong>
   <a href="#91961" class="date">02-Jul-2009 02:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to add attributes XML entities in your SOAP query like this:<br />
<br />
"&lt;FilterBy Column="Id" FilterOperator="=" FilterValue="NUMBER" Table="Case"&gt;" <br />
<br />
Use SoapVar() with the type XSD_ANYXML as shown below.&nbsp; Example uses __soapCall and other SoapParams.<br />
<br />
<span class="default">&lt;?php<br />
$response </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">__soapCall</span><span class="keyword">(</span><span class="string">'GetFilteredRecordList'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; array(new </span><span class="default">SoapParam</span><span class="keyword">(</span><span class="default">$DSToken</span><span class="keyword">, </span><span class="string">'Token'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; new </span><span class="default">SoapParam</span><span class="keyword">(</span><span class="string">'Slide'</span><span class="keyword">, </span><span class="string">'TableName'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="string">'&lt;FilterBy Column="Id" FilterOperator="=" FilterValue="NUMBER" Table="Case"/&gt;'</span><span class="keyword">, </span><span class="default">XSD_ANYXML</span><span class="keyword">)),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'soapaction' </span><span class="keyword">=&gt; </span><span class="string">'<a href="http://www.example.com/webservices/GetFilteredRecordList" rel="nofollow" target="_blank">http://www.example.com/webservices/GetFilteredRecordList</a>'</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Use this so you don't waste HOURS looking around:</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85599""></a>
  <div class="note">
   <strong class="user">clement006 at gmail dot com</strong>
   <a href="#85599" class="date">08-Sep-2008 05:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I spent hours trying to send an XML document <br />
(in XSD_ANYXML format) to a .NET webservice...<br />
<br />
I don't know if it's always the case with .NET webservices, <br />
but I had to use a little trick with the SoapVar object <br />
to finally get this thing working.<br />
<br />
Here is the code that works for me;<br />
Hope it will help someone!<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// xml content<br />
</span><span class="default">$xmlDocument </span><span class="keyword">= </span><span class="string">'&lt;Result&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;Product id="12345" language="fr-BE"&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;Data&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;Brand&gt;BrandName&lt;/Brand&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;ProductName&gt;Bag&lt;/ProductName&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;/Data&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/Product&gt;<br />
&lt;/Result&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// initiate soap client<br />
</span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"soap.wsdl_cache_enabled"</span><span class="keyword">, </span><span class="string">"0"</span><span class="keyword">);<br />
</span><span class="default">$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"<a href="http://dotnetwebservice.com/Products.asmx?wsdl" rel="nofollow" target="_blank">http://dotnetwebservice.com/Products.asmx?wsdl</a>"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'trace' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'exceptions' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'soap_version' </span><span class="keyword">=&gt; </span><span class="default">SOAP_1_1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'encoding' </span><span class="keyword">=&gt; </span><span class="string">'ISO-8859-1'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'features' </span><span class="keyword">=&gt; </span><span class="default">SOAP_SINGLE_ELEMENT_ARRAYS<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
);<br />
<br />
</span><span class="comment">// prepare xml<br />
// I debugged using $client-&gt;__getLastRequest() and <br />
// then saw that the node around the XML was missing. <br />
// So the trick here is to manually add the parameter <br />
// (see the WSDL to catch the right parameter name of course).<br />
</span><span class="default">$xmlvar </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'&lt;ns1:xmlDocument&gt;'</span><span class="keyword">.</span><span class="default">$xmlDocument</span><span class="keyword">.</span><span class="string">'&lt;/ns1:xmlDocument&gt;'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">XSD_ANYXML<br />
</span><span class="keyword">);<br />
<br />
</span><span class="comment">// send xml<br />
</span><span class="keyword">try {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">xmlDocument </span><span class="keyword">= (object)</span><span class="default">$xmlvar</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$save_result </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">SaveProduct</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;pre&gt;\n\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Result :\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$save_result</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
} catch (</span><span class="default">SoapFault $e</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"SOAP Fault: "</span><span class="keyword">.</span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">().</span><span class="string">"&lt;br /&gt;\n"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//* DEBUG<br />
</span><span class="keyword">echo </span><span class="string">"&lt;pre&gt;\n\n"</span><span class="keyword">;<br />
echo </span><span class="string">"Request :\n"</span><span class="keyword">;<br />
echo </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">__getLastRequest</span><span class="keyword">()).</span><span class="string">"\n"</span><span class="keyword">;<br />
echo </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
</span><span class="comment">//*/<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54652""></a>
  <div class="note">
   <strong class="user">OrionI</strong>
   <a href="#54652" class="date">11-Jul-2005 07:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This class is useful when dealing with the "anyType" type (generic object reference): it lets you specify the xsd type to provide "late binding" type information.<br />
<br />
Here's a really simple example: I have a .NET service that can take a string, a date, and integer, or other types, so I use the .NET "object" type. Here's an example of such a service--this one just tells me what type I passed in. (It's nice to use when checking to see if PHP passed in the type information the way .NET expects it.)<br />
<br />
//inside a service.asmx.cs file...<br />
[WebMethod]<br />
public string WhatTypeIsThis(object ObjectParameter)<br />
{<br />
&nbsp;&nbsp; return "You passed in a " + ObjectParameter.GetType().Name <br />
&nbsp;&nbsp; &nbsp; + ": " + ObjectParamter.ToString();<br />
}<br />
<br />
To call this service with a string from PHP, I used this code:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//set up the service client using WSDL<br />
</span><span class="default">$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">"<a href="http://localhost/folder/service.asmx?WSDL" rel="nofollow" target="_blank">http://localhost/folder/service.asmx?WSDL</a>"</span><span class="keyword">);<br />
<br />
</span><span class="comment">//This is the variable that will be typed as an XSD string<br />
</span><span class="default">$typedVar </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="string">"mystring"</span><span class="keyword">, </span><span class="default">XSD_STRING</span><span class="keyword">, </span><span class="string">"string"</span><span class="keyword">, </span><span class="string">"<a href="http://www.w3.org/2001/XMLSchema" rel="nofollow" target="_blank">http://www.w3.org/2001/XMLSchema</a>"</span><span class="keyword">);<br />
</span><span class="comment">//This is the wrapper object for incoming parameters<br />
</span><span class="default">$wrapper</span><span class="keyword">-&gt;</span><span class="default">ObjectParameter </span><span class="keyword">= </span><span class="default">$typedVar</span><span class="keyword">;<br />
</span><span class="comment">//This is the named parameter object that will be passed in to the service<br />
</span><span class="default">$params </span><span class="keyword">= new </span><span class="default">SoapParam</span><span class="keyword">(</span><span class="default">$wrapper</span><span class="keyword">, </span><span class="string">"WhatTypeIsThis"</span><span class="keyword">);<br />
<br />
</span><span class="comment">//call the service with the string<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">WhatTypeIsThis</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">);<br />
</span><span class="comment">//show the result<br />
</span><span class="keyword">echo </span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">WhatTypeIsThisResult</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
The output from this should be:<br />
"You passed in a String: mystring"<br />
<br />
The SOAP message that is passed in looks like this:<br />
&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV="<a href="http://schemas.xmlsoap.org/soap/envelope/" rel="nofollow" target="_blank">http://schemas.xmlsoap.org/soap/envelope/</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" rel="nofollow" target="_blank">http://www.w3.org/2001/XMLSchema-instance</a>" xmlns:xsd="<a href="http://www.w3.org/2001/XMLSchema" rel="nofollow" target="_blank">http://www.w3.org/2001/XMLSchema</a>" xmlns:ns1="<a href="http://tempuri.org/" rel="nofollow" target="_blank">http://tempuri.org/</a>"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;SOAP-ENV:Body&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;ns1:WhatTypeIsThis&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;ns1:ObjectParameter xsi:type="xsd:string"&gt;mystring&lt;/ns1:ObjectParameter&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;/ns1:WhatTypeIsThis&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/SOAP-ENV:Body&gt;<br />
&lt;/SOAP-ENV:Envelope&gt;<br />
<br />
It's that xsi:type="xsd:string" that gives .NET the heads up that though the ObjectParameter is being passed in as an object, it is also a string. <br />
<br />
When trying other types, it's helpful to see exactly what is being sent to the service--to see the SOAP messages like the one above, use the trace option when making your SOAP client and then call the $client-&gt;__getLastRequest() function. (See <a href="http://www.php.net/soap_soapclient_getlastrequest" rel="nofollow" target="_blank">http://www.php.net/soap_soapclient_getlastrequest</a>)&nbsp; You may need to use try/catch constructs if you're generating errors.<br />
<br />
Another helpful function is var_dump($client-&gt;__getTypes())--it shows how PHP parsed the WSDL file to create types to pass back and forth.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="soapvar.construct.html">SoapVar::__construct</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="book.xmlrpc.html">XML-RPC</a></div>
 <div class="up"><a href="class.soapvar.html">SoapVar</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
